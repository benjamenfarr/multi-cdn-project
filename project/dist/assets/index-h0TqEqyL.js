var jP=Object.defineProperty;var UP=(t,e,n)=>e in t?jP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var qe=(t,e,n)=>UP(t,typeof e!="symbol"?e+"":e,n);function $P(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var E0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zP(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var BT={exports:{}},Lm={},jT={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pd=Symbol.for("react.element"),HP=Symbol.for("react.portal"),VP=Symbol.for("react.fragment"),GP=Symbol.for("react.strict_mode"),WP=Symbol.for("react.profiler"),qP=Symbol.for("react.provider"),KP=Symbol.for("react.context"),YP=Symbol.for("react.forward_ref"),XP=Symbol.for("react.suspense"),JP=Symbol.for("react.memo"),QP=Symbol.for("react.lazy"),Rw=Symbol.iterator;function ZP(t){return t===null||typeof t!="object"?null:(t=Rw&&t[Rw]||t["@@iterator"],typeof t=="function"?t:null)}var UT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$T=Object.assign,zT={};function Bu(t,e,n){this.props=t,this.context=e,this.refs=zT,this.updater=n||UT}Bu.prototype.isReactComponent={};Bu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function HT(){}HT.prototype=Bu.prototype;function Hx(t,e,n){this.props=t,this.context=e,this.refs=zT,this.updater=n||UT}var Vx=Hx.prototype=new HT;Vx.constructor=Hx;$T(Vx,Bu.prototype);Vx.isPureReactComponent=!0;var Pw=Array.isArray,VT=Object.prototype.hasOwnProperty,Gx={current:null},GT={key:!0,ref:!0,__self:!0,__source:!0};function WT(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)VT.call(e,i)&&!GT.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:pd,type:t,key:s,ref:o,props:r,_owner:Gx.current}}function eN(t,e){return{$$typeof:pd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wx(t){return typeof t=="object"&&t!==null&&t.$$typeof===pd}function tN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Nw=/\/+/g;function K1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tN(""+t.key):e.toString(36)}function A0(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pd:case HP:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+K1(o,0):i,Pw(r)?(n="",t!=null&&(n=t.replace(Nw,"$&/")+"/"),A0(r,e,n,"",function(c){return c})):r!=null&&(Wx(r)&&(r=eN(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Nw,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Pw(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+K1(s,a);o+=A0(s,e,n,l,r)}else if(l=ZP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+K1(s,a++),o+=A0(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xp(t,e,n){if(t==null)return t;var i=[],r=0;return A0(t,i,"","",function(s){return e.call(n,s,r++)}),i}function nN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ji={current:null},T0={transition:null},iN={ReactCurrentDispatcher:Ji,ReactCurrentBatchConfig:T0,ReactCurrentOwner:Gx};function qT(){throw Error("act(...) is not supported in production builds of React.")}Nt.Children={map:xp,forEach:function(t,e,n){xp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xp(t,function(){e++}),e},toArray:function(t){return xp(t,function(e){return e})||[]},only:function(t){if(!Wx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Nt.Component=Bu;Nt.Fragment=VP;Nt.Profiler=WP;Nt.PureComponent=Hx;Nt.StrictMode=GP;Nt.Suspense=XP;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iN;Nt.act=qT;Nt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=$T({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gx.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)VT.call(e,l)&&!GT.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:pd,type:t.type,key:r,ref:s,props:i,_owner:o}};Nt.createContext=function(t){return t={$$typeof:KP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qP,_context:t},t.Consumer=t};Nt.createElement=WT;Nt.createFactory=function(t){var e=WT.bind(null,t);return e.type=t,e};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(t){return{$$typeof:YP,render:t}};Nt.isValidElement=Wx;Nt.lazy=function(t){return{$$typeof:QP,_payload:{_status:-1,_result:t},_init:nN}};Nt.memo=function(t,e){return{$$typeof:JP,type:t,compare:e===void 0?null:e}};Nt.startTransition=function(t){var e=T0.transition;T0.transition={};try{t()}finally{T0.transition=e}};Nt.unstable_act=qT;Nt.useCallback=function(t,e){return Ji.current.useCallback(t,e)};Nt.useContext=function(t){return Ji.current.useContext(t)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(t){return Ji.current.useDeferredValue(t)};Nt.useEffect=function(t,e){return Ji.current.useEffect(t,e)};Nt.useId=function(){return Ji.current.useId()};Nt.useImperativeHandle=function(t,e,n){return Ji.current.useImperativeHandle(t,e,n)};Nt.useInsertionEffect=function(t,e){return Ji.current.useInsertionEffect(t,e)};Nt.useLayoutEffect=function(t,e){return Ji.current.useLayoutEffect(t,e)};Nt.useMemo=function(t,e){return Ji.current.useMemo(t,e)};Nt.useReducer=function(t,e,n){return Ji.current.useReducer(t,e,n)};Nt.useRef=function(t){return Ji.current.useRef(t)};Nt.useState=function(t){return Ji.current.useState(t)};Nt.useSyncExternalStore=function(t,e,n){return Ji.current.useSyncExternalStore(t,e,n)};Nt.useTransition=function(){return Ji.current.useTransition()};Nt.version="18.3.1";jT.exports=Nt;var fe=jT.exports;const Ln=zx(fe),rN=$P({__proto__:null,default:Ln},[fe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sN=fe,oN=Symbol.for("react.element"),aN=Symbol.for("react.fragment"),lN=Object.prototype.hasOwnProperty,cN=sN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uN={key:!0,ref:!0,__self:!0,__source:!0};function KT(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)lN.call(e,i)&&!uN.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:oN,type:t,key:s,ref:o,props:r,_owner:cN.current}}Lm.Fragment=aN;Lm.jsx=KT;Lm.jsxs=KT;BT.exports=Lm;var A=BT.exports,YT={exports:{}},Dr={},XT={exports:{}},JT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,B){var X=z.length;z.push(B);e:for(;0<X;){var te=X-1>>>1,I=z[te];if(0<r(I,B))z[te]=B,z[X]=I,X=te;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var B=z[0],X=z.pop();if(X!==B){z[0]=X;e:for(var te=0,I=z.length,U=I>>>1;te<U;){var K=2*(te+1)-1,Q=z[K],ee=K+1,oe=z[ee];if(0>r(Q,X))ee<I&&0>r(oe,Q)?(z[te]=oe,z[ee]=X,te=ee):(z[te]=Q,z[K]=X,te=K);else if(ee<I&&0>r(oe,X))z[te]=oe,z[ee]=X,te=ee;else break e}}return B}function r(z,B){var X=z.sortIndex-B.sortIndex;return X!==0?X:z.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,d=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var B=n(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=z)i(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function E(z){if(m=!1,b(z),!p)if(n(l)!==null)p=!0,O(T);else{var B=n(c);B!==null&&$(E,B.startTime-z)}}function T(z,B){p=!1,m&&(m=!1,y(S),S=-1),d=!0;var X=f;try{for(b(B),h=n(l);h!==null&&(!(h.expirationTime>B)||z&&!k());){var te=h.callback;if(typeof te=="function"){h.callback=null,f=h.priorityLevel;var I=te(h.expirationTime<=B);B=t.unstable_now(),typeof I=="function"?h.callback=I:h===n(l)&&i(l),b(B)}else i(l);h=n(l)}if(h!==null)var U=!0;else{var K=n(c);K!==null&&$(E,K.startTime-B),U=!1}return U}finally{h=null,f=X,d=!1}}var D=!1,R=null,S=-1,C=5,N=-1;function k(){return!(t.unstable_now()-N<C)}function P(){if(R!==null){var z=t.unstable_now();N=z;var B=!0;try{B=R(!0,z)}finally{B?j():(D=!1,R=null)}}else D=!1}var j;if(typeof x=="function")j=function(){x(P)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,H=F.port2;F.port1.onmessage=P,j=function(){H.postMessage(null)}}else j=function(){v(P,0)};function O(z){R=z,D||(D=!0,j())}function $(z,B){S=v(function(){z(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,O(T))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var X=f;f=B;try{return z()}finally{f=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,B){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=f;f=z;try{return B()}finally{f=X}},t.unstable_scheduleCallback=function(z,B,X){var te=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?te+X:te):X=te,z){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=X+I,z={id:u++,callback:B,priorityLevel:z,startTime:X,expirationTime:I,sortIndex:-1},X>te?(z.sortIndex=X,e(c,z),n(l)===null&&z===n(c)&&(m?(y(S),S=-1):m=!0,$(E,X-te))):(z.sortIndex=I,e(l,z),p||d||(p=!0,O(T))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var B=f;return function(){var X=f;f=B;try{return z.apply(this,arguments)}finally{f=X}}}})(JT);XT.exports=JT;var hN=XT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fN=fe,Ir=hN;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QT=new Set,kf={};function nc(t,e){wu(t,e),wu(t+"Capture",e)}function wu(t,e){for(kf[t]=e,t=0;t<e.length;t++)QT.add(e[t])}var Wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_v=Object.prototype.hasOwnProperty,dN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Iw={},Dw={};function pN(t){return _v.call(Dw,t)?!0:_v.call(Iw,t)?!1:dN.test(t)?Dw[t]=!0:(Iw[t]=!0,!1)}function gN(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mN(t,e,n,i){if(e===null||typeof e>"u"||gN(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qi(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Si={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Si[t]=new Qi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Si[e]=new Qi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Si[t]=new Qi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Si[t]=new Qi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Si[t]=new Qi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Si[t]=new Qi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Si[t]=new Qi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Si[t]=new Qi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Si[t]=new Qi(t,5,!1,t.toLowerCase(),null,!1,!1)});var qx=/[\-:]([a-z])/g;function Kx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qx,Kx);Si[e]=new Qi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qx,Kx);Si[e]=new Qi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qx,Kx);Si[e]=new Qi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Si[t]=new Qi(t,1,!1,t.toLowerCase(),null,!1,!1)});Si.xlinkHref=new Qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Si[t]=new Qi(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yx(t,e,n,i){var r=Si.hasOwnProperty(e)?Si[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mN(e,n,r,i)&&(n=null),i||r===null?pN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Qo=fN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bp=Symbol.for("react.element"),Yc=Symbol.for("react.portal"),Xc=Symbol.for("react.fragment"),Xx=Symbol.for("react.strict_mode"),Ev=Symbol.for("react.profiler"),ZT=Symbol.for("react.provider"),eL=Symbol.for("react.context"),Jx=Symbol.for("react.forward_ref"),Av=Symbol.for("react.suspense"),Tv=Symbol.for("react.suspense_list"),Qx=Symbol.for("react.memo"),ba=Symbol.for("react.lazy"),tL=Symbol.for("react.offscreen"),Mw=Symbol.iterator;function bh(t){return t===null||typeof t!="object"?null:(t=Mw&&t[Mw]||t["@@iterator"],typeof t=="function"?t:null)}var Rn=Object.assign,Y1;function jh(t){if(Y1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Y1=e&&e[1]||""}return`
`+Y1+t}var X1=!1;function J1(t,e){if(!t||X1)return"";X1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{X1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jh(t):""}function yN(t){switch(t.tag){case 5:return jh(t.type);case 16:return jh("Lazy");case 13:return jh("Suspense");case 19:return jh("SuspenseList");case 0:case 2:case 15:return t=J1(t.type,!1),t;case 11:return t=J1(t.type.render,!1),t;case 1:return t=J1(t.type,!0),t;default:return""}}function Lv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xc:return"Fragment";case Yc:return"Portal";case Ev:return"Profiler";case Xx:return"StrictMode";case Av:return"Suspense";case Tv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eL:return(t.displayName||"Context")+".Consumer";case ZT:return(t._context.displayName||"Context")+".Provider";case Jx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qx:return e=t.displayName||null,e!==null?e:Lv(t.type)||"Memo";case ba:e=t._payload,t=t._init;try{return Lv(t(e))}catch{}}return null}function vN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lv(e);case 8:return e===Xx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xN(t){var e=nL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wp(t){t._valueTracker||(t._valueTracker=xN(t))}function iL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=nL(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ag(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kv(t,e){var n=e.checked;return Rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Fw(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=qa(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rL(t,e){e=e.checked,e!=null&&Yx(t,"checked",e,!1)}function Cv(t,e){rL(t,e);var n=qa(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rv(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rv(t,e.type,qa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ow(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rv(t,e,n){(e!=="number"||ag(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Uh=Array.isArray;function hu(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+qa(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Pv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Rn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Fe(92));if(Uh(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qa(n)}}function sL(t,e){var n=qa(e.value),i=qa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function jw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sp,aL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sp=Sp||document.createElement("div"),Sp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bN=["Webkit","ms","Moz","O"];Object.keys(rf).forEach(function(t){bN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rf[e]=rf[t]})});function lL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rf.hasOwnProperty(t)&&rf[t]?(""+e).trim():e+"px"}function cL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=lL(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var wN=Rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iv(t,e){if(e){if(wN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function Dv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mv=null;function Zx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fv=null,fu=null,du=null;function Uw(t){if(t=yd(t)){if(typeof Fv!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=Nm(e),Fv(t.stateNode,t.type,e))}}function uL(t){fu?du?du.push(t):du=[t]:fu=t}function hL(){if(fu){var t=fu,e=du;if(du=fu=null,Uw(t),e)for(t=0;t<e.length;t++)Uw(e[t])}}function fL(t,e){return t(e)}function dL(){}var Q1=!1;function pL(t,e,n){if(Q1)return t(e,n);Q1=!0;try{return fL(t,e,n)}finally{Q1=!1,(fu!==null||du!==null)&&(dL(),hL())}}function Rf(t,e){var n=t.stateNode;if(n===null)return null;var i=Nm(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Fe(231,e,typeof n));return n}var Ov=!1;if(Wo)try{var wh={};Object.defineProperty(wh,"passive",{get:function(){Ov=!0}}),window.addEventListener("test",wh,wh),window.removeEventListener("test",wh,wh)}catch{Ov=!1}function SN(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var sf=!1,lg=null,cg=!1,Bv=null,_N={onError:function(t){sf=!0,lg=t}};function EN(t,e,n,i,r,s,o,a,l){sf=!1,lg=null,SN.apply(_N,arguments)}function AN(t,e,n,i,r,s,o,a,l){if(EN.apply(this,arguments),sf){if(sf){var c=lg;sf=!1,lg=null}else throw Error(Fe(198));cg||(cg=!0,Bv=c)}}function ic(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $w(t){if(ic(t)!==t)throw Error(Fe(188))}function TN(t){var e=t.alternate;if(!e){if(e=ic(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return $w(r),t;if(s===i)return $w(r),e;s=s.sibling}throw Error(Fe(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(Fe(189))}}if(n.alternate!==i)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?t:e}function mL(t){return t=TN(t),t!==null?yL(t):null}function yL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yL(t);if(e!==null)return e;t=t.sibling}return null}var vL=Ir.unstable_scheduleCallback,zw=Ir.unstable_cancelCallback,LN=Ir.unstable_shouldYield,kN=Ir.unstable_requestPaint,$n=Ir.unstable_now,CN=Ir.unstable_getCurrentPriorityLevel,eb=Ir.unstable_ImmediatePriority,xL=Ir.unstable_UserBlockingPriority,ug=Ir.unstable_NormalPriority,RN=Ir.unstable_LowPriority,bL=Ir.unstable_IdlePriority,km=null,io=null;function PN(t){if(io&&typeof io.onCommitFiberRoot=="function")try{io.onCommitFiberRoot(km,t,void 0,(t.current.flags&128)===128)}catch{}}var Ls=Math.clz32?Math.clz32:DN,NN=Math.log,IN=Math.LN2;function DN(t){return t>>>=0,t===0?32:31-(NN(t)/IN|0)|0}var _p=64,Ep=4194304;function $h(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hg(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=$h(a):(s&=o,s!==0&&(i=$h(s)))}else o=n&~r,o!==0?i=$h(o):s!==0&&(i=$h(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ls(e),r=1<<n,i|=t[n],e&=~r;return i}function MN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FN(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ls(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=MN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function jv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wL(){var t=_p;return _p<<=1,!(_p&4194240)&&(_p=64),t}function Z1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ls(e),t[e]=n}function ON(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ls(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function tb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ls(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var en=0;function SL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _L,nb,EL,AL,TL,Uv=!1,Ap=[],Ma=null,Fa=null,Oa=null,Pf=new Map,Nf=new Map,Aa=[],BN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hw(t,e){switch(t){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Fa=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":Pf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nf.delete(e.pointerId)}}function Sh(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=yd(e),e!==null&&nb(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function jN(t,e,n,i,r){switch(e){case"focusin":return Ma=Sh(Ma,t,e,n,i,r),!0;case"dragenter":return Fa=Sh(Fa,t,e,n,i,r),!0;case"mouseover":return Oa=Sh(Oa,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Pf.set(s,Sh(Pf.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Nf.set(s,Sh(Nf.get(s)||null,t,e,n,i,r)),!0}return!1}function LL(t){var e=Cl(t.target);if(e!==null){var n=ic(e);if(n!==null){if(e=n.tag,e===13){if(e=gL(n),e!==null){t.blockedOn=e,TL(t.priority,function(){EL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function L0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$v(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Mv=i,n.target.dispatchEvent(i),Mv=null}else return e=yd(n),e!==null&&nb(e),t.blockedOn=n,!1;e.shift()}return!0}function Vw(t,e,n){L0(t)&&n.delete(e)}function UN(){Uv=!1,Ma!==null&&L0(Ma)&&(Ma=null),Fa!==null&&L0(Fa)&&(Fa=null),Oa!==null&&L0(Oa)&&(Oa=null),Pf.forEach(Vw),Nf.forEach(Vw)}function _h(t,e){t.blockedOn===e&&(t.blockedOn=null,Uv||(Uv=!0,Ir.unstable_scheduleCallback(Ir.unstable_NormalPriority,UN)))}function If(t){function e(r){return _h(r,t)}if(0<Ap.length){_h(Ap[0],t);for(var n=1;n<Ap.length;n++){var i=Ap[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ma!==null&&_h(Ma,t),Fa!==null&&_h(Fa,t),Oa!==null&&_h(Oa,t),Pf.forEach(e),Nf.forEach(e),n=0;n<Aa.length;n++)i=Aa[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Aa.length&&(n=Aa[0],n.blockedOn===null);)LL(n),n.blockedOn===null&&Aa.shift()}var pu=Qo.ReactCurrentBatchConfig,fg=!0;function $N(t,e,n,i){var r=en,s=pu.transition;pu.transition=null;try{en=1,ib(t,e,n,i)}finally{en=r,pu.transition=s}}function zN(t,e,n,i){var r=en,s=pu.transition;pu.transition=null;try{en=4,ib(t,e,n,i)}finally{en=r,pu.transition=s}}function ib(t,e,n,i){if(fg){var r=$v(t,e,n,i);if(r===null)cy(t,e,i,dg,n),Hw(t,i);else if(jN(r,t,e,n,i))i.stopPropagation();else if(Hw(t,i),e&4&&-1<BN.indexOf(t)){for(;r!==null;){var s=yd(r);if(s!==null&&_L(s),s=$v(t,e,n,i),s===null&&cy(t,e,i,dg,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else cy(t,e,i,null,n)}}var dg=null;function $v(t,e,n,i){if(dg=null,t=Zx(i),t=Cl(t),t!==null)if(e=ic(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return dg=t,null}function kL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CN()){case eb:return 1;case xL:return 4;case ug:case RN:return 16;case bL:return 536870912;default:return 16}default:return 16}}var ka=null,rb=null,k0=null;function CL(){if(k0)return k0;var t,e=rb,n=e.length,i,r="value"in ka?ka.value:ka.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return k0=r.slice(t,1<i?1-i:void 0)}function C0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tp(){return!0}function Gw(){return!1}function Mr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tp:Gw,this.isPropagationStopped=Gw,this}return Rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tp)},persist:function(){},isPersistent:Tp}),e}var ju={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sb=Mr(ju),md=Rn({},ju,{view:0,detail:0}),HN=Mr(md),ey,ty,Eh,Cm=Rn({},md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ob,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eh&&(Eh&&t.type==="mousemove"?(ey=t.screenX-Eh.screenX,ty=t.screenY-Eh.screenY):ty=ey=0,Eh=t),ey)},movementY:function(t){return"movementY"in t?t.movementY:ty}}),Ww=Mr(Cm),VN=Rn({},Cm,{dataTransfer:0}),GN=Mr(VN),WN=Rn({},md,{relatedTarget:0}),ny=Mr(WN),qN=Rn({},ju,{animationName:0,elapsedTime:0,pseudoElement:0}),KN=Mr(qN),YN=Rn({},ju,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XN=Mr(YN),JN=Rn({},ju,{data:0}),qw=Mr(JN),QN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eI[t])?!!e[t]:!1}function ob(){return tI}var nI=Rn({},md,{key:function(t){if(t.key){var e=QN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=C0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ob,charCode:function(t){return t.type==="keypress"?C0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?C0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iI=Mr(nI),rI=Rn({},Cm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kw=Mr(rI),sI=Rn({},md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ob}),oI=Mr(sI),aI=Rn({},ju,{propertyName:0,elapsedTime:0,pseudoElement:0}),lI=Mr(aI),cI=Rn({},Cm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uI=Mr(cI),hI=[9,13,27,32],ab=Wo&&"CompositionEvent"in window,of=null;Wo&&"documentMode"in document&&(of=document.documentMode);var fI=Wo&&"TextEvent"in window&&!of,RL=Wo&&(!ab||of&&8<of&&11>=of),Yw=" ",Xw=!1;function PL(t,e){switch(t){case"keyup":return hI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jc=!1;function dI(t,e){switch(t){case"compositionend":return NL(e);case"keypress":return e.which!==32?null:(Xw=!0,Yw);case"textInput":return t=e.data,t===Yw&&Xw?null:t;default:return null}}function pI(t,e){if(Jc)return t==="compositionend"||!ab&&PL(t,e)?(t=CL(),k0=rb=ka=null,Jc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RL&&e.locale!=="ko"?null:e.data;default:return null}}var gI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gI[t.type]:e==="textarea"}function IL(t,e,n,i){uL(i),e=pg(e,"onChange"),0<e.length&&(n=new sb("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var af=null,Df=null;function mI(t){VL(t,0)}function Rm(t){var e=eu(t);if(iL(e))return t}function yI(t,e){if(t==="change")return e}var DL=!1;if(Wo){var iy;if(Wo){var ry="oninput"in document;if(!ry){var Qw=document.createElement("div");Qw.setAttribute("oninput","return;"),ry=typeof Qw.oninput=="function"}iy=ry}else iy=!1;DL=iy&&(!document.documentMode||9<document.documentMode)}function Zw(){af&&(af.detachEvent("onpropertychange",ML),Df=af=null)}function ML(t){if(t.propertyName==="value"&&Rm(Df)){var e=[];IL(e,Df,t,Zx(t)),pL(mI,e)}}function vI(t,e,n){t==="focusin"?(Zw(),af=e,Df=n,af.attachEvent("onpropertychange",ML)):t==="focusout"&&Zw()}function xI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rm(Df)}function bI(t,e){if(t==="click")return Rm(e)}function wI(t,e){if(t==="input"||t==="change")return Rm(e)}function SI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cs=typeof Object.is=="function"?Object.is:SI;function Mf(t,e){if(Cs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!_v.call(e,r)||!Cs(t[r],e[r]))return!1}return!0}function eS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tS(t,e){var n=eS(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=eS(n)}}function FL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OL(){for(var t=window,e=ag();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ag(t.document)}return e}function lb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _I(t){var e=OL(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&FL(n.ownerDocument.documentElement,n)){if(i!==null&&lb(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=tS(n,s);var o=tS(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EI=Wo&&"documentMode"in document&&11>=document.documentMode,Qc=null,zv=null,lf=null,Hv=!1;function nS(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hv||Qc==null||Qc!==ag(i)||(i=Qc,"selectionStart"in i&&lb(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),lf&&Mf(lf,i)||(lf=i,i=pg(zv,"onSelect"),0<i.length&&(e=new sb("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Qc)))}function Lp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zc={animationend:Lp("Animation","AnimationEnd"),animationiteration:Lp("Animation","AnimationIteration"),animationstart:Lp("Animation","AnimationStart"),transitionend:Lp("Transition","TransitionEnd")},sy={},BL={};Wo&&(BL=document.createElement("div").style,"AnimationEvent"in window||(delete Zc.animationend.animation,delete Zc.animationiteration.animation,delete Zc.animationstart.animation),"TransitionEvent"in window||delete Zc.transitionend.transition);function Pm(t){if(sy[t])return sy[t];if(!Zc[t])return t;var e=Zc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BL)return sy[t]=e[n];return t}var jL=Pm("animationend"),UL=Pm("animationiteration"),$L=Pm("animationstart"),zL=Pm("transitionend"),HL=new Map,iS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Za(t,e){HL.set(t,e),nc(e,[t])}for(var oy=0;oy<iS.length;oy++){var ay=iS[oy],AI=ay.toLowerCase(),TI=ay[0].toUpperCase()+ay.slice(1);Za(AI,"on"+TI)}Za(jL,"onAnimationEnd");Za(UL,"onAnimationIteration");Za($L,"onAnimationStart");Za("dblclick","onDoubleClick");Za("focusin","onFocus");Za("focusout","onBlur");Za(zL,"onTransitionEnd");wu("onMouseEnter",["mouseout","mouseover"]);wu("onMouseLeave",["mouseout","mouseover"]);wu("onPointerEnter",["pointerout","pointerover"]);wu("onPointerLeave",["pointerout","pointerover"]);nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LI=new Set("cancel close invalid load scroll toggle".split(" ").concat(zh));function rS(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,AN(i,e,void 0,t),t.currentTarget=null}function VL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;rS(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;rS(r,a,c),s=l}}}if(cg)throw t=Bv,cg=!1,Bv=null,t}function gn(t,e){var n=e[Kv];n===void 0&&(n=e[Kv]=new Set);var i=t+"__bubble";n.has(i)||(GL(e,t,2,!1),n.add(i))}function ly(t,e,n){var i=0;e&&(i|=4),GL(n,t,i,e)}var kp="_reactListening"+Math.random().toString(36).slice(2);function Ff(t){if(!t[kp]){t[kp]=!0,QT.forEach(function(n){n!=="selectionchange"&&(LI.has(n)||ly(n,!1,t),ly(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kp]||(e[kp]=!0,ly("selectionchange",!1,e))}}function GL(t,e,n,i){switch(kL(e)){case 1:var r=$N;break;case 4:r=zN;break;default:r=ib}n=r.bind(null,e,n,t),r=void 0,!Ov||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function cy(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Cl(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}pL(function(){var c=s,u=Zx(n),h=[];e:{var f=HL.get(t);if(f!==void 0){var d=sb,p=t;switch(t){case"keypress":if(C0(n)===0)break e;case"keydown":case"keyup":d=iI;break;case"focusin":p="focus",d=ny;break;case"focusout":p="blur",d=ny;break;case"beforeblur":case"afterblur":d=ny;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Ww;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=GN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=oI;break;case jL:case UL:case $L:d=KN;break;case zL:d=lI;break;case"scroll":d=HN;break;case"wheel":d=uI;break;case"copy":case"cut":case"paste":d=XN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Kw}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var x=c,b;x!==null;){b=x;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,y!==null&&(E=Rf(x,y),E!=null&&m.push(Of(x,E,b)))),v)break;x=x.return}0<m.length&&(f=new d(f,p,null,n,u),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==Mv&&(p=n.relatedTarget||n.fromElement)&&(Cl(p)||p[qo]))break e;if((d||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=c,p=p?Cl(p):null,p!==null&&(v=ic(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=c),d!==p)){if(m=Ww,E="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=Kw,E="onPointerLeave",y="onPointerEnter",x="pointer"),v=d==null?f:eu(d),b=p==null?f:eu(p),f=new m(E,x+"leave",d,n,u),f.target=v,f.relatedTarget=b,E=null,Cl(u)===c&&(m=new m(y,x+"enter",p,n,u),m.target=b,m.relatedTarget=v,E=m),v=E,d&&p)t:{for(m=d,y=p,x=0,b=m;b;b=Fc(b))x++;for(b=0,E=y;E;E=Fc(E))b++;for(;0<x-b;)m=Fc(m),x--;for(;0<b-x;)y=Fc(y),b--;for(;x--;){if(m===y||y!==null&&m===y.alternate)break t;m=Fc(m),y=Fc(y)}m=null}else m=null;d!==null&&sS(h,f,d,m,!1),p!==null&&v!==null&&sS(h,v,p,m,!0)}}e:{if(f=c?eu(c):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var T=yI;else if(Jw(f))if(DL)T=wI;else{T=xI;var D=vI}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=bI);if(T&&(T=T(t,c))){IL(h,T,n,u);break e}D&&D(t,f,c),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&Rv(f,"number",f.value)}switch(D=c?eu(c):window,t){case"focusin":(Jw(D)||D.contentEditable==="true")&&(Qc=D,zv=c,lf=null);break;case"focusout":lf=zv=Qc=null;break;case"mousedown":Hv=!0;break;case"contextmenu":case"mouseup":case"dragend":Hv=!1,nS(h,n,u);break;case"selectionchange":if(EI)break;case"keydown":case"keyup":nS(h,n,u)}var R;if(ab)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Jc?PL(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(RL&&n.locale!=="ko"&&(Jc||S!=="onCompositionStart"?S==="onCompositionEnd"&&Jc&&(R=CL()):(ka=u,rb="value"in ka?ka.value:ka.textContent,Jc=!0)),D=pg(c,S),0<D.length&&(S=new qw(S,t,null,n,u),h.push({event:S,listeners:D}),R?S.data=R:(R=NL(n),R!==null&&(S.data=R)))),(R=fI?dI(t,n):pI(t,n))&&(c=pg(c,"onBeforeInput"),0<c.length&&(u=new qw("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=R))}VL(h,e)})}function Of(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pg(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Rf(t,n),s!=null&&i.unshift(Of(t,s,r)),s=Rf(t,e),s!=null&&i.push(Of(t,s,r))),t=t.return}return i}function Fc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sS(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Rf(n,s),l!=null&&o.unshift(Of(n,l,a))):r||(l=Rf(n,s),l!=null&&o.push(Of(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kI=/\r\n?/g,CI=/\u0000|\uFFFD/g;function oS(t){return(typeof t=="string"?t:""+t).replace(kI,`
`).replace(CI,"")}function Cp(t,e,n){if(e=oS(e),oS(t)!==e&&n)throw Error(Fe(425))}function gg(){}var Vv=null,Gv=null;function Wv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qv=typeof setTimeout=="function"?setTimeout:void 0,RI=typeof clearTimeout=="function"?clearTimeout:void 0,aS=typeof Promise=="function"?Promise:void 0,PI=typeof queueMicrotask=="function"?queueMicrotask:typeof aS<"u"?function(t){return aS.resolve(null).then(t).catch(NI)}:qv;function NI(t){setTimeout(function(){throw t})}function uy(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),If(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);If(e)}function Ba(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Uu=Math.random().toString(36).slice(2),Ys="__reactFiber$"+Uu,Bf="__reactProps$"+Uu,qo="__reactContainer$"+Uu,Kv="__reactEvents$"+Uu,II="__reactListeners$"+Uu,DI="__reactHandles$"+Uu;function Cl(t){var e=t[Ys];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qo]||n[Ys]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lS(t);t!==null;){if(n=t[Ys])return n;t=lS(t)}return e}t=n,n=t.parentNode}return null}function yd(t){return t=t[Ys]||t[qo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function eu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function Nm(t){return t[Bf]||null}var Yv=[],tu=-1;function el(t){return{current:t}}function yn(t){0>tu||(t.current=Yv[tu],Yv[tu]=null,tu--)}function pn(t,e){tu++,Yv[tu]=t.current,t.current=e}var Ka={},Bi=el(Ka),dr=el(!1),Gl=Ka;function Su(t,e){var n=t.type.contextTypes;if(!n)return Ka;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function pr(t){return t=t.childContextTypes,t!=null}function mg(){yn(dr),yn(Bi)}function cS(t,e,n){if(Bi.current!==Ka)throw Error(Fe(168));pn(Bi,e),pn(dr,n)}function WL(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Fe(108,vN(t)||"Unknown",r));return Rn({},n,i)}function yg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ka,Gl=Bi.current,pn(Bi,t),pn(dr,dr.current),!0}function uS(t,e,n){var i=t.stateNode;if(!i)throw Error(Fe(169));n?(t=WL(t,e,Gl),i.__reactInternalMemoizedMergedChildContext=t,yn(dr),yn(Bi),pn(Bi,t)):yn(dr),pn(dr,n)}var Mo=null,Im=!1,hy=!1;function qL(t){Mo===null?Mo=[t]:Mo.push(t)}function MI(t){Im=!0,qL(t)}function tl(){if(!hy&&Mo!==null){hy=!0;var t=0,e=en;try{var n=Mo;for(en=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Mo=null,Im=!1}catch(r){throw Mo!==null&&(Mo=Mo.slice(t+1)),vL(eb,tl),r}finally{en=e,hy=!1}}return null}var nu=[],iu=0,vg=null,xg=0,Yr=[],Xr=0,Wl=null,Uo=1,$o="";function bl(t,e){nu[iu++]=xg,nu[iu++]=vg,vg=t,xg=e}function KL(t,e,n){Yr[Xr++]=Uo,Yr[Xr++]=$o,Yr[Xr++]=Wl,Wl=t;var i=Uo;t=$o;var r=32-Ls(i)-1;i&=~(1<<r),n+=1;var s=32-Ls(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Uo=1<<32-Ls(e)+r|n<<r|i,$o=s+t}else Uo=1<<s|n<<r|i,$o=t}function cb(t){t.return!==null&&(bl(t,1),KL(t,1,0))}function ub(t){for(;t===vg;)vg=nu[--iu],nu[iu]=null,xg=nu[--iu],nu[iu]=null;for(;t===Wl;)Wl=Yr[--Xr],Yr[Xr]=null,$o=Yr[--Xr],Yr[Xr]=null,Uo=Yr[--Xr],Yr[Xr]=null}var Nr=null,Cr=null,bn=!1,_s=null;function YL(t,e){var n=Qr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nr=t,Cr=Ba(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nr=t,Cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wl!==null?{id:Uo,overflow:$o}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nr=t,Cr=null,!0):!1;default:return!1}}function Xv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jv(t){if(bn){var e=Cr;if(e){var n=e;if(!hS(t,e)){if(Xv(t))throw Error(Fe(418));e=Ba(n.nextSibling);var i=Nr;e&&hS(t,e)?YL(i,n):(t.flags=t.flags&-4097|2,bn=!1,Nr=t)}}else{if(Xv(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,bn=!1,Nr=t}}}function fS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nr=t}function Rp(t){if(t!==Nr)return!1;if(!bn)return fS(t),bn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wv(t.type,t.memoizedProps)),e&&(e=Cr)){if(Xv(t))throw XL(),Error(Fe(418));for(;e;)YL(t,e),e=Ba(e.nextSibling)}if(fS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cr=Ba(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cr=null}}else Cr=Nr?Ba(t.stateNode.nextSibling):null;return!0}function XL(){for(var t=Cr;t;)t=Ba(t.nextSibling)}function _u(){Cr=Nr=null,bn=!1}function hb(t){_s===null?_s=[t]:_s.push(t)}var FI=Qo.ReactCurrentBatchConfig;function Ah(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var i=n.stateNode}if(!i)throw Error(Fe(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,t))}return t}function Pp(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dS(t){var e=t._init;return e(t._payload)}function JL(t){function e(y,x){if(t){var b=y.deletions;b===null?(y.deletions=[x],y.flags|=16):b.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function i(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function r(y,x){return y=za(y,x),y.index=0,y.sibling=null,y}function s(y,x,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<x?(y.flags|=2,x):b):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,x,b,E){return x===null||x.tag!==6?(x=vy(b,y.mode,E),x.return=y,x):(x=r(x,b),x.return=y,x)}function l(y,x,b,E){var T=b.type;return T===Xc?u(y,x,b.props.children,E,b.key):x!==null&&(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ba&&dS(T)===x.type)?(E=r(x,b.props),E.ref=Ah(y,x,b),E.return=y,E):(E=F0(b.type,b.key,b.props,null,y.mode,E),E.ref=Ah(y,x,b),E.return=y,E)}function c(y,x,b,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=xy(b,y.mode,E),x.return=y,x):(x=r(x,b.children||[]),x.return=y,x)}function u(y,x,b,E,T){return x===null||x.tag!==7?(x=Fl(b,y.mode,E,T),x.return=y,x):(x=r(x,b),x.return=y,x)}function h(y,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=vy(""+x,y.mode,b),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case bp:return b=F0(x.type,x.key,x.props,null,y.mode,b),b.ref=Ah(y,null,x),b.return=y,b;case Yc:return x=xy(x,y.mode,b),x.return=y,x;case ba:var E=x._init;return h(y,E(x._payload),b)}if(Uh(x)||bh(x))return x=Fl(x,y.mode,b,null),x.return=y,x;Pp(y,x)}return null}function f(y,x,b,E){var T=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return T!==null?null:a(y,x,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bp:return b.key===T?l(y,x,b,E):null;case Yc:return b.key===T?c(y,x,b,E):null;case ba:return T=b._init,f(y,x,T(b._payload),E)}if(Uh(b)||bh(b))return T!==null?null:u(y,x,b,E,null);Pp(y,b)}return null}function d(y,x,b,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(b)||null,a(x,y,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case bp:return y=y.get(E.key===null?b:E.key)||null,l(x,y,E,T);case Yc:return y=y.get(E.key===null?b:E.key)||null,c(x,y,E,T);case ba:var D=E._init;return d(y,x,b,D(E._payload),T)}if(Uh(E)||bh(E))return y=y.get(b)||null,u(x,y,E,T,null);Pp(x,E)}return null}function p(y,x,b,E){for(var T=null,D=null,R=x,S=x=0,C=null;R!==null&&S<b.length;S++){R.index>S?(C=R,R=null):C=R.sibling;var N=f(y,R,b[S],E);if(N===null){R===null&&(R=C);break}t&&R&&N.alternate===null&&e(y,R),x=s(N,x,S),D===null?T=N:D.sibling=N,D=N,R=C}if(S===b.length)return n(y,R),bn&&bl(y,S),T;if(R===null){for(;S<b.length;S++)R=h(y,b[S],E),R!==null&&(x=s(R,x,S),D===null?T=R:D.sibling=R,D=R);return bn&&bl(y,S),T}for(R=i(y,R);S<b.length;S++)C=d(R,y,S,b[S],E),C!==null&&(t&&C.alternate!==null&&R.delete(C.key===null?S:C.key),x=s(C,x,S),D===null?T=C:D.sibling=C,D=C);return t&&R.forEach(function(k){return e(y,k)}),bn&&bl(y,S),T}function m(y,x,b,E){var T=bh(b);if(typeof T!="function")throw Error(Fe(150));if(b=T.call(b),b==null)throw Error(Fe(151));for(var D=T=null,R=x,S=x=0,C=null,N=b.next();R!==null&&!N.done;S++,N=b.next()){R.index>S?(C=R,R=null):C=R.sibling;var k=f(y,R,N.value,E);if(k===null){R===null&&(R=C);break}t&&R&&k.alternate===null&&e(y,R),x=s(k,x,S),D===null?T=k:D.sibling=k,D=k,R=C}if(N.done)return n(y,R),bn&&bl(y,S),T;if(R===null){for(;!N.done;S++,N=b.next())N=h(y,N.value,E),N!==null&&(x=s(N,x,S),D===null?T=N:D.sibling=N,D=N);return bn&&bl(y,S),T}for(R=i(y,R);!N.done;S++,N=b.next())N=d(R,y,S,N.value,E),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?S:N.key),x=s(N,x,S),D===null?T=N:D.sibling=N,D=N);return t&&R.forEach(function(P){return e(y,P)}),bn&&bl(y,S),T}function v(y,x,b,E){if(typeof b=="object"&&b!==null&&b.type===Xc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case bp:e:{for(var T=b.key,D=x;D!==null;){if(D.key===T){if(T=b.type,T===Xc){if(D.tag===7){n(y,D.sibling),x=r(D,b.props.children),x.return=y,y=x;break e}}else if(D.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ba&&dS(T)===D.type){n(y,D.sibling),x=r(D,b.props),x.ref=Ah(y,D,b),x.return=y,y=x;break e}n(y,D);break}else e(y,D);D=D.sibling}b.type===Xc?(x=Fl(b.props.children,y.mode,E,b.key),x.return=y,y=x):(E=F0(b.type,b.key,b.props,null,y.mode,E),E.ref=Ah(y,x,b),E.return=y,y=E)}return o(y);case Yc:e:{for(D=b.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(y,x.sibling),x=r(x,b.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=xy(b,y.mode,E),x.return=y,y=x}return o(y);case ba:return D=b._init,v(y,x,D(b._payload),E)}if(Uh(b))return p(y,x,b,E);if(bh(b))return m(y,x,b,E);Pp(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(y,x.sibling),x=r(x,b),x.return=y,y=x):(n(y,x),x=vy(b,y.mode,E),x.return=y,y=x),o(y)):n(y,x)}return v}var Eu=JL(!0),QL=JL(!1),bg=el(null),wg=null,ru=null,fb=null;function db(){fb=ru=wg=null}function pb(t){var e=bg.current;yn(bg),t._currentValue=e}function Qv(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function gu(t,e){wg=t,fb=ru=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fr=!0),t.firstContext=null)}function ns(t){var e=t._currentValue;if(fb!==t)if(t={context:t,memoizedValue:e,next:null},ru===null){if(wg===null)throw Error(Fe(308));ru=t,wg.dependencies={lanes:0,firstContext:t}}else ru=ru.next=t;return e}var Rl=null;function gb(t){Rl===null?Rl=[t]:Rl.push(t)}function ZL(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,gb(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ko(t,i)}function Ko(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wa=!1;function mb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ek(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Go(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ja(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ut&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ko(t,n)}return r=i.interleaved,r===null?(e.next=e,gb(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ko(t,n)}function R0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,tb(t,n)}}function pS(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sg(t,e,n,i){var r=t.updateQueue;wa=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,d=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,d=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(d,h,f):p,f==null)break e;h=Rn({},h,f);break e;case 2:wa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=d,l=h):u=u.next=d,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Kl|=o,t.lanes=o,t.memoizedState=h}}function gS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Fe(191,r));r.call(i)}}}var vd={},ro=el(vd),jf=el(vd),Uf=el(vd);function Pl(t){if(t===vd)throw Error(Fe(174));return t}function yb(t,e){switch(pn(Uf,e),pn(jf,t),pn(ro,vd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nv(e,t)}yn(ro),pn(ro,e)}function Au(){yn(ro),yn(jf),yn(Uf)}function tk(t){Pl(Uf.current);var e=Pl(ro.current),n=Nv(e,t.type);e!==n&&(pn(jf,t),pn(ro,n))}function vb(t){jf.current===t&&(yn(ro),yn(jf))}var Tn=el(0);function _g(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fy=[];function xb(){for(var t=0;t<fy.length;t++)fy[t]._workInProgressVersionPrimary=null;fy.length=0}var P0=Qo.ReactCurrentDispatcher,dy=Qo.ReactCurrentBatchConfig,ql=0,Cn=null,ti=null,ci=null,Eg=!1,cf=!1,$f=0,OI=0;function Ti(){throw Error(Fe(321))}function bb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cs(t[n],e[n]))return!1;return!0}function wb(t,e,n,i,r,s){if(ql=s,Cn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,P0.current=t===null||t.memoizedState===null?$I:zI,t=n(i,r),cf){s=0;do{if(cf=!1,$f=0,25<=s)throw Error(Fe(301));s+=1,ci=ti=null,e.updateQueue=null,P0.current=HI,t=n(i,r)}while(cf)}if(P0.current=Ag,e=ti!==null&&ti.next!==null,ql=0,ci=ti=Cn=null,Eg=!1,e)throw Error(Fe(300));return t}function Sb(){var t=$f!==0;return $f=0,t}function Gs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Cn.memoizedState=ci=t:ci=ci.next=t,ci}function is(){if(ti===null){var t=Cn.alternate;t=t!==null?t.memoizedState:null}else t=ti.next;var e=ci===null?Cn.memoizedState:ci.next;if(e!==null)ci=e,ti=t;else{if(t===null)throw Error(Fe(310));ti=t,t={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},ci===null?Cn.memoizedState=ci=t:ci=ci.next=t}return ci}function zf(t,e){return typeof e=="function"?e(t):e}function py(t){var e=is(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var i=ti,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ql&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,Cn.lanes|=u,Kl|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Cs(i,e.memoizedState)||(fr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Cn.lanes|=s,Kl|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gy(t){var e=is(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Cs(s,e.memoizedState)||(fr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function nk(){}function ik(t,e){var n=Cn,i=is(),r=e(),s=!Cs(i.memoizedState,r);if(s&&(i.memoizedState=r,fr=!0),i=i.queue,_b(ok.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||ci!==null&&ci.memoizedState.tag&1){if(n.flags|=2048,Hf(9,sk.bind(null,n,i,r,e),void 0,null),hi===null)throw Error(Fe(349));ql&30||rk(n,e,r)}return r}function rk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Cn.updateQueue,e===null?(e={lastEffect:null,stores:null},Cn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sk(t,e,n,i){e.value=n,e.getSnapshot=i,ak(e)&&lk(t)}function ok(t,e,n){return n(function(){ak(e)&&lk(t)})}function ak(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cs(t,n)}catch{return!0}}function lk(t){var e=Ko(t,1);e!==null&&ks(e,t,1,-1)}function mS(t){var e=Gs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zf,lastRenderedState:t},e.queue=t,t=t.dispatch=UI.bind(null,Cn,t),[e.memoizedState,t]}function Hf(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Cn.updateQueue,e===null?(e={lastEffect:null,stores:null},Cn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function ck(){return is().memoizedState}function N0(t,e,n,i){var r=Gs();Cn.flags|=t,r.memoizedState=Hf(1|e,n,void 0,i===void 0?null:i)}function Dm(t,e,n,i){var r=is();i=i===void 0?null:i;var s=void 0;if(ti!==null){var o=ti.memoizedState;if(s=o.destroy,i!==null&&bb(i,o.deps)){r.memoizedState=Hf(e,n,s,i);return}}Cn.flags|=t,r.memoizedState=Hf(1|e,n,s,i)}function yS(t,e){return N0(8390656,8,t,e)}function _b(t,e){return Dm(2048,8,t,e)}function uk(t,e){return Dm(4,2,t,e)}function hk(t,e){return Dm(4,4,t,e)}function fk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dk(t,e,n){return n=n!=null?n.concat([t]):null,Dm(4,4,fk.bind(null,e,t),n)}function Eb(){}function pk(t,e){var n=is();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&bb(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function gk(t,e){var n=is();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&bb(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function mk(t,e,n){return ql&21?(Cs(n,e)||(n=wL(),Cn.lanes|=n,Kl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fr=!0),t.memoizedState=n)}function BI(t,e){var n=en;en=n!==0&&4>n?n:4,t(!0);var i=dy.transition;dy.transition={};try{t(!1),e()}finally{en=n,dy.transition=i}}function yk(){return is().memoizedState}function jI(t,e,n){var i=$a(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},vk(t))xk(e,n);else if(n=ZL(t,e,n,i),n!==null){var r=qi();ks(n,t,i,r),bk(n,e,i)}}function UI(t,e,n){var i=$a(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(vk(t))xk(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Cs(a,o)){var l=e.interleaved;l===null?(r.next=r,gb(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=ZL(t,e,r,i),n!==null&&(r=qi(),ks(n,t,i,r),bk(n,e,i))}}function vk(t){var e=t.alternate;return t===Cn||e!==null&&e===Cn}function xk(t,e){cf=Eg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bk(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,tb(t,n)}}var Ag={readContext:ns,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useInsertionEffect:Ti,useLayoutEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useMutableSource:Ti,useSyncExternalStore:Ti,useId:Ti,unstable_isNewReconciler:!1},$I={readContext:ns,useCallback:function(t,e){return Gs().memoizedState=[t,e===void 0?null:e],t},useContext:ns,useEffect:yS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,N0(4194308,4,fk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return N0(4194308,4,t,e)},useInsertionEffect:function(t,e){return N0(4,2,t,e)},useMemo:function(t,e){var n=Gs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Gs();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=jI.bind(null,Cn,t),[i.memoizedState,t]},useRef:function(t){var e=Gs();return t={current:t},e.memoizedState=t},useState:mS,useDebugValue:Eb,useDeferredValue:function(t){return Gs().memoizedState=t},useTransition:function(){var t=mS(!1),e=t[0];return t=BI.bind(null,t[1]),Gs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Cn,r=Gs();if(bn){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=e(),hi===null)throw Error(Fe(349));ql&30||rk(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,yS(ok.bind(null,i,s,t),[t]),i.flags|=2048,Hf(9,sk.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Gs(),e=hi.identifierPrefix;if(bn){var n=$o,i=Uo;n=(i&~(1<<32-Ls(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=$f++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=OI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zI={readContext:ns,useCallback:pk,useContext:ns,useEffect:_b,useImperativeHandle:dk,useInsertionEffect:uk,useLayoutEffect:hk,useMemo:gk,useReducer:py,useRef:ck,useState:function(){return py(zf)},useDebugValue:Eb,useDeferredValue:function(t){var e=is();return mk(e,ti.memoizedState,t)},useTransition:function(){var t=py(zf)[0],e=is().memoizedState;return[t,e]},useMutableSource:nk,useSyncExternalStore:ik,useId:yk,unstable_isNewReconciler:!1},HI={readContext:ns,useCallback:pk,useContext:ns,useEffect:_b,useImperativeHandle:dk,useInsertionEffect:uk,useLayoutEffect:hk,useMemo:gk,useReducer:gy,useRef:ck,useState:function(){return gy(zf)},useDebugValue:Eb,useDeferredValue:function(t){var e=is();return ti===null?e.memoizedState=t:mk(e,ti.memoizedState,t)},useTransition:function(){var t=gy(zf)[0],e=is().memoizedState;return[t,e]},useMutableSource:nk,useSyncExternalStore:ik,useId:yk,unstable_isNewReconciler:!1};function bs(t,e){if(t&&t.defaultProps){e=Rn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zv(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Rn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mm={isMounted:function(t){return(t=t._reactInternals)?ic(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=qi(),r=$a(t),s=Go(i,r);s.payload=e,n!=null&&(s.callback=n),e=ja(t,s,r),e!==null&&(ks(e,t,r,i),R0(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=qi(),r=$a(t),s=Go(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ja(t,s,r),e!==null&&(ks(e,t,r,i),R0(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qi(),i=$a(t),r=Go(n,i);r.tag=2,e!=null&&(r.callback=e),e=ja(t,r,i),e!==null&&(ks(e,t,i,n),R0(e,t,i))}};function vS(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Mf(n,i)||!Mf(r,s):!0}function wk(t,e,n){var i=!1,r=Ka,s=e.contextType;return typeof s=="object"&&s!==null?s=ns(s):(r=pr(e)?Gl:Bi.current,i=e.contextTypes,s=(i=i!=null)?Su(t,r):Ka),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mm,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function xS(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Mm.enqueueReplaceState(e,e.state,null)}function e2(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},mb(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ns(s):(s=pr(e)?Gl:Bi.current,r.context=Su(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zv(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Mm.enqueueReplaceState(r,r.state,null),Sg(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Tu(t,e){try{var n="",i=e;do n+=yN(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function my(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function t2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VI=typeof WeakMap=="function"?WeakMap:Map;function Sk(t,e,n){n=Go(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Lg||(Lg=!0,h2=i),t2(t,e)},n}function _k(t,e,n){n=Go(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){t2(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){t2(t,e),typeof i!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bS(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new VI;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=rD.bind(null,t,e,n),e.then(t,t))}function wS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function SS(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Go(-1,1),e.tag=2,ja(n,e,1))),n.lanes|=1),t)}var GI=Qo.ReactCurrentOwner,fr=!1;function Hi(t,e,n,i){e.child=t===null?QL(e,null,n,i):Eu(e,t.child,n,i)}function _S(t,e,n,i,r){n=n.render;var s=e.ref;return gu(e,r),i=wb(t,e,n,i,s,r),n=Sb(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Yo(t,e,r)):(bn&&n&&cb(e),e.flags|=1,Hi(t,e,i,r),e.child)}function ES(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Nb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ek(t,e,s,i,r)):(t=F0(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Mf,n(o,i)&&t.ref===e.ref)return Yo(t,e,r)}return e.flags|=1,t=za(s,i),t.ref=e.ref,t.return=e,e.child=t}function Ek(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Mf(s,i)&&t.ref===e.ref)if(fr=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(fr=!0);else return e.lanes=t.lanes,Yo(t,e,r)}return n2(t,e,n,i,r)}function Ak(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(ou,Ar),Ar|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pn(ou,Ar),Ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,pn(ou,Ar),Ar|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,pn(ou,Ar),Ar|=i;return Hi(t,e,r,n),e.child}function Tk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function n2(t,e,n,i,r){var s=pr(n)?Gl:Bi.current;return s=Su(e,s),gu(e,r),n=wb(t,e,n,i,s,r),i=Sb(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Yo(t,e,r)):(bn&&i&&cb(e),e.flags|=1,Hi(t,e,n,r),e.child)}function AS(t,e,n,i,r){if(pr(n)){var s=!0;yg(e)}else s=!1;if(gu(e,r),e.stateNode===null)I0(t,e),wk(e,n,i),e2(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ns(c):(c=pr(n)?Gl:Bi.current,c=Su(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&xS(e,o,i,c),wa=!1;var f=e.memoizedState;o.state=f,Sg(e,i,o,r),l=e.memoizedState,a!==i||f!==l||dr.current||wa?(typeof u=="function"&&(Zv(e,n,u,i),l=e.memoizedState),(a=wa||vS(e,n,a,i,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,ek(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:bs(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ns(l):(l=pr(n)?Gl:Bi.current,l=Su(e,l));var d=n.getDerivedStateFromProps;(u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&xS(e,o,i,l),wa=!1,f=e.memoizedState,o.state=f,Sg(e,i,o,r);var p=e.memoizedState;a!==h||f!==p||dr.current||wa?(typeof d=="function"&&(Zv(e,n,d,i),p=e.memoizedState),(c=wa||vS(e,n,c,i,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return i2(t,e,n,i,s,r)}function i2(t,e,n,i,r,s){Tk(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&uS(e,n,!1),Yo(t,e,s);i=e.stateNode,GI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Eu(e,t.child,null,s),e.child=Eu(e,null,a,s)):Hi(t,e,a,s),e.memoizedState=i.state,r&&uS(e,n,!0),e.child}function Lk(t){var e=t.stateNode;e.pendingContext?cS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cS(t,e.context,!1),yb(t,e.containerInfo)}function TS(t,e,n,i,r){return _u(),hb(r),e.flags|=256,Hi(t,e,n,i),e.child}var r2={dehydrated:null,treeContext:null,retryLane:0};function s2(t){return{baseLanes:t,cachePool:null,transitions:null}}function kk(t,e,n){var i=e.pendingProps,r=Tn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),pn(Tn,r&1),t===null)return Jv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Bm(o,i,0,null),t=Fl(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=s2(n),e.memoizedState=r2,t):Ab(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return WI(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=za(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=za(a,s):(s=Fl(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?s2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=r2,i}return s=t.child,t=s.sibling,i=za(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ab(t,e){return e=Bm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Np(t,e,n,i){return i!==null&&hb(i),Eu(e,t.child,null,n),t=Ab(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WI(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=my(Error(Fe(422))),Np(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Bm({mode:"visible",children:i.children},r,0,null),s=Fl(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Eu(e,t.child,null,o),e.child.memoizedState=s2(o),e.memoizedState=r2,s);if(!(e.mode&1))return Np(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Fe(419)),i=my(s,i,void 0),Np(t,e,o,i)}if(a=(o&t.childLanes)!==0,fr||a){if(i=hi,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ko(t,r),ks(i,t,r,-1))}return Pb(),i=my(Error(Fe(421))),Np(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=sD.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Cr=Ba(r.nextSibling),Nr=e,bn=!0,_s=null,t!==null&&(Yr[Xr++]=Uo,Yr[Xr++]=$o,Yr[Xr++]=Wl,Uo=t.id,$o=t.overflow,Wl=e),e=Ab(e,i.children),e.flags|=4096,e)}function LS(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Qv(t.return,e,n)}function yy(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ck(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Hi(t,e,i.children,n),i=Tn.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&LS(t,n,e);else if(t.tag===19)LS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(pn(Tn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&_g(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),yy(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&_g(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}yy(e,!0,n,null,s);break;case"together":yy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function I0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Kl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,n=za(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=za(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qI(t,e,n){switch(e.tag){case 3:Lk(e),_u();break;case 5:tk(e);break;case 1:pr(e.type)&&yg(e);break;case 4:yb(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;pn(bg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(pn(Tn,Tn.current&1),e.flags|=128,null):n&e.child.childLanes?kk(t,e,n):(pn(Tn,Tn.current&1),t=Yo(t,e,n),t!==null?t.sibling:null);pn(Tn,Tn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Ck(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),pn(Tn,Tn.current),i)break;return null;case 22:case 23:return e.lanes=0,Ak(t,e,n)}return Yo(t,e,n)}var Rk,o2,Pk,Nk;Rk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};o2=function(){};Pk=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Pl(ro.current);var s=null;switch(n){case"input":r=kv(t,r),i=kv(t,i),s=[];break;case"select":r=Rn({},r,{value:void 0}),i=Rn({},i,{value:void 0}),s=[];break;case"textarea":r=Pv(t,r),i=Pv(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=gg)}Iv(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(kf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(kf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&gn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Nk=function(t,e,n,i){n!==i&&(e.flags|=4)};function Th(t,e){if(!bn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Li(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function KI(t,e,n){var i=e.pendingProps;switch(ub(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(e),null;case 1:return pr(e.type)&&mg(),Li(e),null;case 3:return i=e.stateNode,Au(),yn(dr),yn(Bi),xb(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Rp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_s!==null&&(p2(_s),_s=null))),o2(t,e),Li(e),null;case 5:vb(e);var r=Pl(Uf.current);if(n=e.type,t!==null&&e.stateNode!=null)Pk(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Fe(166));return Li(e),null}if(t=Pl(ro.current),Rp(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Ys]=e,i[Bf]=s,t=(e.mode&1)!==0,n){case"dialog":gn("cancel",i),gn("close",i);break;case"iframe":case"object":case"embed":gn("load",i);break;case"video":case"audio":for(r=0;r<zh.length;r++)gn(zh[r],i);break;case"source":gn("error",i);break;case"img":case"image":case"link":gn("error",i),gn("load",i);break;case"details":gn("toggle",i);break;case"input":Fw(i,s),gn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},gn("invalid",i);break;case"textarea":Bw(i,s),gn("invalid",i)}Iv(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Cp(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Cp(i.textContent,a,t),r=["children",""+a]):kf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gn("scroll",i)}switch(n){case"input":wp(i),Ow(i,s,!0);break;case"textarea":wp(i),jw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=gg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Ys]=e,t[Bf]=i,Rk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Dv(n,i),n){case"dialog":gn("cancel",t),gn("close",t),r=i;break;case"iframe":case"object":case"embed":gn("load",t),r=i;break;case"video":case"audio":for(r=0;r<zh.length;r++)gn(zh[r],t);r=i;break;case"source":gn("error",t),r=i;break;case"img":case"image":case"link":gn("error",t),gn("load",t),r=i;break;case"details":gn("toggle",t),r=i;break;case"input":Fw(t,i),r=kv(t,i),gn("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Rn({},i,{value:void 0}),gn("invalid",t);break;case"textarea":Bw(t,i),r=Pv(t,i),gn("invalid",t);break;default:r=i}Iv(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?cL(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&aL(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Cf(t,l):typeof l=="number"&&Cf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(kf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&gn("scroll",t):l!=null&&Yx(t,s,l,o))}switch(n){case"input":wp(t),Ow(t,i,!1);break;case"textarea":wp(t),jw(t);break;case"option":i.value!=null&&t.setAttribute("value",""+qa(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?hu(t,!!i.multiple,s,!1):i.defaultValue!=null&&hu(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=gg)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Li(e),null;case 6:if(t&&e.stateNode!=null)Nk(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Fe(166));if(n=Pl(Uf.current),Pl(ro.current),Rp(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ys]=e,(s=i.nodeValue!==n)&&(t=Nr,t!==null))switch(t.tag){case 3:Cp(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cp(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ys]=e,e.stateNode=i}return Li(e),null;case 13:if(yn(Tn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bn&&Cr!==null&&e.mode&1&&!(e.flags&128))XL(),_u(),e.flags|=98560,s=!1;else if(s=Rp(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[Ys]=e}else _u(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Li(e),s=!1}else _s!==null&&(p2(_s),_s=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Tn.current&1?ii===0&&(ii=3):Pb())),e.updateQueue!==null&&(e.flags|=4),Li(e),null);case 4:return Au(),o2(t,e),t===null&&Ff(e.stateNode.containerInfo),Li(e),null;case 10:return pb(e.type._context),Li(e),null;case 17:return pr(e.type)&&mg(),Li(e),null;case 19:if(yn(Tn),s=e.memoizedState,s===null)return Li(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Th(s,!1);else{if(ii!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_g(t),o!==null){for(e.flags|=128,Th(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pn(Tn,Tn.current&1|2),e.child}t=t.sibling}s.tail!==null&&$n()>Lu&&(e.flags|=128,i=!0,Th(s,!1),e.lanes=4194304)}else{if(!i)if(t=_g(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Th(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bn)return Li(e),null}else 2*$n()-s.renderingStartTime>Lu&&n!==1073741824&&(e.flags|=128,i=!0,Th(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$n(),e.sibling=null,n=Tn.current,pn(Tn,i?n&1|2:n&1),e):(Li(e),null);case 22:case 23:return Rb(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ar&1073741824&&(Li(e),e.subtreeFlags&6&&(e.flags|=8192)):Li(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function YI(t,e){switch(ub(e),e.tag){case 1:return pr(e.type)&&mg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Au(),yn(dr),yn(Bi),xb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vb(e),null;case 13:if(yn(Tn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));_u()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yn(Tn),null;case 4:return Au(),null;case 10:return pb(e.type._context),null;case 22:case 23:return Rb(),null;case 24:return null;default:return null}}var Ip=!1,Di=!1,XI=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function su(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Mn(t,e,i)}else n.current=null}function a2(t,e,n){try{n()}catch(i){Mn(t,e,i)}}var kS=!1;function JI(t,e){if(Vv=fg,t=OL(),lb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var d;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gv={focusedElem:t,selectionRange:n},fg=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:bs(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(E){Mn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return p=kS,kS=!1,p}function uf(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&a2(e,n,s)}r=r.next}while(r!==i)}}function Fm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function l2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ik(t){var e=t.alternate;e!==null&&(t.alternate=null,Ik(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ys],delete e[Bf],delete e[Kv],delete e[II],delete e[DI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Dk(t){return t.tag===5||t.tag===3||t.tag===4}function CS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function c2(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gg));else if(i!==4&&(t=t.child,t!==null))for(c2(t,e,n),t=t.sibling;t!==null;)c2(t,e,n),t=t.sibling}function u2(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(u2(t,e,n),t=t.sibling;t!==null;)u2(t,e,n),t=t.sibling}var yi=null,Ss=!1;function pa(t,e,n){for(n=n.child;n!==null;)Mk(t,e,n),n=n.sibling}function Mk(t,e,n){if(io&&typeof io.onCommitFiberUnmount=="function")try{io.onCommitFiberUnmount(km,n)}catch{}switch(n.tag){case 5:Di||su(n,e);case 6:var i=yi,r=Ss;yi=null,pa(t,e,n),yi=i,Ss=r,yi!==null&&(Ss?(t=yi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yi.removeChild(n.stateNode));break;case 18:yi!==null&&(Ss?(t=yi,n=n.stateNode,t.nodeType===8?uy(t.parentNode,n):t.nodeType===1&&uy(t,n),If(t)):uy(yi,n.stateNode));break;case 4:i=yi,r=Ss,yi=n.stateNode.containerInfo,Ss=!0,pa(t,e,n),yi=i,Ss=r;break;case 0:case 11:case 14:case 15:if(!Di&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&a2(n,e,o),r=r.next}while(r!==i)}pa(t,e,n);break;case 1:if(!Di&&(su(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Mn(n,e,a)}pa(t,e,n);break;case 21:pa(t,e,n);break;case 22:n.mode&1?(Di=(i=Di)||n.memoizedState!==null,pa(t,e,n),Di=i):pa(t,e,n);break;default:pa(t,e,n)}}function RS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XI),e.forEach(function(i){var r=oD.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function gs(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yi=a.stateNode,Ss=!1;break e;case 3:yi=a.stateNode.containerInfo,Ss=!0;break e;case 4:yi=a.stateNode.containerInfo,Ss=!0;break e}a=a.return}if(yi===null)throw Error(Fe(160));Mk(s,o,r),yi=null,Ss=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Mn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fk(e,t),e=e.sibling}function Fk(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gs(e,t),Us(t),i&4){try{uf(3,t,t.return),Fm(3,t)}catch(m){Mn(t,t.return,m)}try{uf(5,t,t.return)}catch(m){Mn(t,t.return,m)}}break;case 1:gs(e,t),Us(t),i&512&&n!==null&&su(n,n.return);break;case 5:if(gs(e,t),Us(t),i&512&&n!==null&&su(n,n.return),t.flags&32){var r=t.stateNode;try{Cf(r,"")}catch(m){Mn(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&rL(r,s),Dv(a,o);var c=Dv(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?cL(r,h):u==="dangerouslySetInnerHTML"?aL(r,h):u==="children"?Cf(r,h):Yx(r,u,h,c)}switch(a){case"input":Cv(r,s);break;case"textarea":sL(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?hu(r,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?hu(r,!!s.multiple,s.defaultValue,!0):hu(r,!!s.multiple,s.multiple?[]:"",!1))}r[Bf]=s}catch(m){Mn(t,t.return,m)}}break;case 6:if(gs(e,t),Us(t),i&4){if(t.stateNode===null)throw Error(Fe(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){Mn(t,t.return,m)}}break;case 3:if(gs(e,t),Us(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{If(e.containerInfo)}catch(m){Mn(t,t.return,m)}break;case 4:gs(e,t),Us(t);break;case 13:gs(e,t),Us(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(kb=$n())),i&4&&RS(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Di=(c=Di)||u,gs(e,t),Di=c):gs(e,t),Us(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ye=t,u=t.child;u!==null;){for(h=Ye=u;Ye!==null;){switch(f=Ye,d=f.child,f.tag){case 0:case 11:case 14:case 15:uf(4,f,f.return);break;case 1:su(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Mn(i,n,m)}}break;case 5:su(f,f.return);break;case 22:if(f.memoizedState!==null){NS(h);continue}}d!==null?(d.return=f,Ye=d):NS(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=lL("display",o))}catch(m){Mn(t,t.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){Mn(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gs(e,t),Us(t),i&4&&RS(t);break;case 21:break;default:gs(e,t),Us(t)}}function Us(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Dk(n)){var i=n;break e}n=n.return}throw Error(Fe(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Cf(r,""),i.flags&=-33);var s=CS(t);u2(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=CS(t);c2(t,a,o);break;default:throw Error(Fe(161))}}catch(l){Mn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QI(t,e,n){Ye=t,Ok(t)}function Ok(t,e,n){for(var i=(t.mode&1)!==0;Ye!==null;){var r=Ye,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Ip;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Di;a=Ip;var c=Di;if(Ip=o,(Di=l)&&!c)for(Ye=r;Ye!==null;)o=Ye,l=o.child,o.tag===22&&o.memoizedState!==null?IS(r):l!==null?(l.return=o,Ye=l):IS(r);for(;s!==null;)Ye=s,Ok(s),s=s.sibling;Ye=r,Ip=a,Di=c}PS(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ye=s):PS(t)}}function PS(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Di||Fm(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Di)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:bs(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gS(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&If(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}Di||e.flags&512&&l2(e)}catch(f){Mn(e,e.return,f)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function NS(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function IS(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fm(4,e)}catch(l){Mn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Mn(e,r,l)}}var s=e.return;try{l2(e)}catch(l){Mn(e,s,l)}break;case 5:var o=e.return;try{l2(e)}catch(l){Mn(e,o,l)}}}catch(l){Mn(e,e.return,l)}if(e===t){Ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ye=a;break}Ye=e.return}}var ZI=Math.ceil,Tg=Qo.ReactCurrentDispatcher,Tb=Qo.ReactCurrentOwner,ts=Qo.ReactCurrentBatchConfig,Ut=0,hi=null,Yn=null,wi=0,Ar=0,ou=el(0),ii=0,Vf=null,Kl=0,Om=0,Lb=0,hf=null,lr=null,kb=0,Lu=1/0,No=null,Lg=!1,h2=null,Ua=null,Dp=!1,Ca=null,kg=0,ff=0,f2=null,D0=-1,M0=0;function qi(){return Ut&6?$n():D0!==-1?D0:D0=$n()}function $a(t){return t.mode&1?Ut&2&&wi!==0?wi&-wi:FI.transition!==null?(M0===0&&(M0=wL()),M0):(t=en,t!==0||(t=window.event,t=t===void 0?16:kL(t.type)),t):1}function ks(t,e,n,i){if(50<ff)throw ff=0,f2=null,Error(Fe(185));gd(t,n,i),(!(Ut&2)||t!==hi)&&(t===hi&&(!(Ut&2)&&(Om|=n),ii===4&&Ta(t,wi)),gr(t,i),n===1&&Ut===0&&!(e.mode&1)&&(Lu=$n()+500,Im&&tl()))}function gr(t,e){var n=t.callbackNode;FN(t,e);var i=hg(t,t===hi?wi:0);if(i===0)n!==null&&zw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&zw(n),e===1)t.tag===0?MI(DS.bind(null,t)):qL(DS.bind(null,t)),PI(function(){!(Ut&6)&&tl()}),n=null;else{switch(SL(i)){case 1:n=eb;break;case 4:n=xL;break;case 16:n=ug;break;case 536870912:n=bL;break;default:n=ug}n=Gk(n,Bk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Bk(t,e){if(D0=-1,M0=0,Ut&6)throw Error(Fe(327));var n=t.callbackNode;if(mu()&&t.callbackNode!==n)return null;var i=hg(t,t===hi?wi:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Cg(t,i);else{e=i;var r=Ut;Ut|=2;var s=Uk();(hi!==t||wi!==e)&&(No=null,Lu=$n()+500,Ml(t,e));do try{nD();break}catch(a){jk(t,a)}while(!0);db(),Tg.current=s,Ut=r,Yn!==null?e=0:(hi=null,wi=0,e=ii)}if(e!==0){if(e===2&&(r=jv(t),r!==0&&(i=r,e=d2(t,r))),e===1)throw n=Vf,Ml(t,0),Ta(t,i),gr(t,$n()),n;if(e===6)Ta(t,i);else{if(r=t.current.alternate,!(i&30)&&!eD(r)&&(e=Cg(t,i),e===2&&(s=jv(t),s!==0&&(i=s,e=d2(t,s))),e===1))throw n=Vf,Ml(t,0),Ta(t,i),gr(t,$n()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Fe(345));case 2:wl(t,lr,No);break;case 3:if(Ta(t,i),(i&130023424)===i&&(e=kb+500-$n(),10<e)){if(hg(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){qi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=qv(wl.bind(null,t,lr,No),e);break}wl(t,lr,No);break;case 4:if(Ta(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Ls(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=$n()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ZI(i/1960))-i,10<i){t.timeoutHandle=qv(wl.bind(null,t,lr,No),i);break}wl(t,lr,No);break;case 5:wl(t,lr,No);break;default:throw Error(Fe(329))}}}return gr(t,$n()),t.callbackNode===n?Bk.bind(null,t):null}function d2(t,e){var n=hf;return t.current.memoizedState.isDehydrated&&(Ml(t,e).flags|=256),t=Cg(t,e),t!==2&&(e=lr,lr=n,e!==null&&p2(e)),t}function p2(t){lr===null?lr=t:lr.push.apply(lr,t)}function eD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Cs(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ta(t,e){for(e&=~Lb,e&=~Om,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ls(e),i=1<<n;t[n]=-1,e&=~i}}function DS(t){if(Ut&6)throw Error(Fe(327));mu();var e=hg(t,0);if(!(e&1))return gr(t,$n()),null;var n=Cg(t,e);if(t.tag!==0&&n===2){var i=jv(t);i!==0&&(e=i,n=d2(t,i))}if(n===1)throw n=Vf,Ml(t,0),Ta(t,e),gr(t,$n()),n;if(n===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wl(t,lr,No),gr(t,$n()),null}function Cb(t,e){var n=Ut;Ut|=1;try{return t(e)}finally{Ut=n,Ut===0&&(Lu=$n()+500,Im&&tl())}}function Yl(t){Ca!==null&&Ca.tag===0&&!(Ut&6)&&mu();var e=Ut;Ut|=1;var n=ts.transition,i=en;try{if(ts.transition=null,en=1,t)return t()}finally{en=i,ts.transition=n,Ut=e,!(Ut&6)&&tl()}}function Rb(){Ar=ou.current,yn(ou)}function Ml(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RI(n)),Yn!==null)for(n=Yn.return;n!==null;){var i=n;switch(ub(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&mg();break;case 3:Au(),yn(dr),yn(Bi),xb();break;case 5:vb(i);break;case 4:Au();break;case 13:yn(Tn);break;case 19:yn(Tn);break;case 10:pb(i.type._context);break;case 22:case 23:Rb()}n=n.return}if(hi=t,Yn=t=za(t.current,null),wi=Ar=e,ii=0,Vf=null,Lb=Om=Kl=0,lr=hf=null,Rl!==null){for(e=0;e<Rl.length;e++)if(n=Rl[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Rl=null}return t}function jk(t,e){do{var n=Yn;try{if(db(),P0.current=Ag,Eg){for(var i=Cn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Eg=!1}if(ql=0,ci=ti=Cn=null,cf=!1,$f=0,Tb.current=null,n===null||n.return===null){ii=1,Vf=e,Yn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=wi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var d=wS(o);if(d!==null){d.flags&=-257,SS(d,o,a,s,e),d.mode&1&&bS(s,c,e),e=d,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){bS(s,c,e),Pb();break e}l=Error(Fe(426))}}else if(bn&&a.mode&1){var v=wS(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),SS(v,o,a,s,e),hb(Tu(l,a));break e}}s=l=Tu(l,a),ii!==4&&(ii=2),hf===null?hf=[s]:hf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Sk(s,l,e);pS(s,y);break e;case 1:a=l;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ua===null||!Ua.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=_k(s,a,e);pS(s,E);break e}}s=s.return}while(s!==null)}zk(n)}catch(T){e=T,Yn===n&&n!==null&&(Yn=n=n.return);continue}break}while(!0)}function Uk(){var t=Tg.current;return Tg.current=Ag,t===null?Ag:t}function Pb(){(ii===0||ii===3||ii===2)&&(ii=4),hi===null||!(Kl&268435455)&&!(Om&268435455)||Ta(hi,wi)}function Cg(t,e){var n=Ut;Ut|=2;var i=Uk();(hi!==t||wi!==e)&&(No=null,Ml(t,e));do try{tD();break}catch(r){jk(t,r)}while(!0);if(db(),Ut=n,Tg.current=i,Yn!==null)throw Error(Fe(261));return hi=null,wi=0,ii}function tD(){for(;Yn!==null;)$k(Yn)}function nD(){for(;Yn!==null&&!LN();)$k(Yn)}function $k(t){var e=Vk(t.alternate,t,Ar);t.memoizedProps=t.pendingProps,e===null?zk(t):Yn=e,Tb.current=null}function zk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YI(n,e),n!==null){n.flags&=32767,Yn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ii=6,Yn=null;return}}else if(n=KI(n,e,Ar),n!==null){Yn=n;return}if(e=e.sibling,e!==null){Yn=e;return}Yn=e=t}while(e!==null);ii===0&&(ii=5)}function wl(t,e,n){var i=en,r=ts.transition;try{ts.transition=null,en=1,iD(t,e,n,i)}finally{ts.transition=r,en=i}return null}function iD(t,e,n,i){do mu();while(Ca!==null);if(Ut&6)throw Error(Fe(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ON(t,s),t===hi&&(Yn=hi=null,wi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dp||(Dp=!0,Gk(ug,function(){return mu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ts.transition,ts.transition=null;var o=en;en=1;var a=Ut;Ut|=4,Tb.current=null,JI(t,n),Fk(n,t),_I(Gv),fg=!!Vv,Gv=Vv=null,t.current=n,QI(n),kN(),Ut=a,en=o,ts.transition=s}else t.current=n;if(Dp&&(Dp=!1,Ca=t,kg=r),s=t.pendingLanes,s===0&&(Ua=null),PN(n.stateNode),gr(t,$n()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Lg)throw Lg=!1,t=h2,h2=null,t;return kg&1&&t.tag!==0&&mu(),s=t.pendingLanes,s&1?t===f2?ff++:(ff=0,f2=t):ff=0,tl(),null}function mu(){if(Ca!==null){var t=SL(kg),e=ts.transition,n=en;try{if(ts.transition=null,en=16>t?16:t,Ca===null)var i=!1;else{if(t=Ca,Ca=null,kg=0,Ut&6)throw Error(Fe(331));var r=Ut;for(Ut|=4,Ye=t.current;Ye!==null;){var s=Ye,o=s.child;if(Ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ye=c;Ye!==null;){var u=Ye;switch(u.tag){case 0:case 11:case 15:uf(8,u,s)}var h=u.child;if(h!==null)h.return=u,Ye=h;else for(;Ye!==null;){u=Ye;var f=u.sibling,d=u.return;if(Ik(u),u===c){Ye=null;break}if(f!==null){f.return=d,Ye=f;break}Ye=d}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}Ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ye=o;else e:for(;Ye!==null;){if(s=Ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uf(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ye=y;break e}Ye=s.return}}var x=t.current;for(Ye=x;Ye!==null;){o=Ye;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ye=b;else e:for(o=x;Ye!==null;){if(a=Ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fm(9,a)}}catch(T){Mn(a,a.return,T)}if(a===o){Ye=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Ye=E;break e}Ye=a.return}}if(Ut=r,tl(),io&&typeof io.onPostCommitFiberRoot=="function")try{io.onPostCommitFiberRoot(km,t)}catch{}i=!0}return i}finally{en=n,ts.transition=e}}return!1}function MS(t,e,n){e=Tu(n,e),e=Sk(t,e,1),t=ja(t,e,1),e=qi(),t!==null&&(gd(t,1,e),gr(t,e))}function Mn(t,e,n){if(t.tag===3)MS(t,t,n);else for(;e!==null;){if(e.tag===3){MS(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ua===null||!Ua.has(i))){t=Tu(n,t),t=_k(e,t,1),e=ja(e,t,1),t=qi(),e!==null&&(gd(e,1,t),gr(e,t));break}}e=e.return}}function rD(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=qi(),t.pingedLanes|=t.suspendedLanes&n,hi===t&&(wi&n)===n&&(ii===4||ii===3&&(wi&130023424)===wi&&500>$n()-kb?Ml(t,0):Lb|=n),gr(t,e)}function Hk(t,e){e===0&&(t.mode&1?(e=Ep,Ep<<=1,!(Ep&130023424)&&(Ep=4194304)):e=1);var n=qi();t=Ko(t,e),t!==null&&(gd(t,e,n),gr(t,n))}function sD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Hk(t,n)}function oD(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Fe(314))}i!==null&&i.delete(e),Hk(t,n)}var Vk;Vk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dr.current)fr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fr=!1,qI(t,e,n);fr=!!(t.flags&131072)}else fr=!1,bn&&e.flags&1048576&&KL(e,xg,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;I0(t,e),t=e.pendingProps;var r=Su(e,Bi.current);gu(e,n),r=wb(null,e,i,t,r,n);var s=Sb();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pr(i)?(s=!0,yg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,mb(e),r.updater=Mm,e.stateNode=r,r._reactInternals=e,e2(e,i,t,n),e=i2(null,e,i,!0,s,n)):(e.tag=0,bn&&s&&cb(e),Hi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(I0(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=lD(i),t=bs(i,t),r){case 0:e=n2(null,e,i,t,n);break e;case 1:e=AS(null,e,i,t,n);break e;case 11:e=_S(null,e,i,t,n);break e;case 14:e=ES(null,e,i,bs(i.type,t),n);break e}throw Error(Fe(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:bs(i,r),n2(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:bs(i,r),AS(t,e,i,r,n);case 3:e:{if(Lk(e),t===null)throw Error(Fe(387));i=e.pendingProps,s=e.memoizedState,r=s.element,ek(t,e),Sg(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Tu(Error(Fe(423)),e),e=TS(t,e,i,n,r);break e}else if(i!==r){r=Tu(Error(Fe(424)),e),e=TS(t,e,i,n,r);break e}else for(Cr=Ba(e.stateNode.containerInfo.firstChild),Nr=e,bn=!0,_s=null,n=QL(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_u(),i===r){e=Yo(t,e,n);break e}Hi(t,e,i,n)}e=e.child}return e;case 5:return tk(e),t===null&&Jv(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Wv(i,r)?o=null:s!==null&&Wv(i,s)&&(e.flags|=32),Tk(t,e),Hi(t,e,o,n),e.child;case 6:return t===null&&Jv(e),null;case 13:return kk(t,e,n);case 4:return yb(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Eu(e,null,i,n):Hi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:bs(i,r),_S(t,e,i,r,n);case 7:return Hi(t,e,e.pendingProps,n),e.child;case 8:return Hi(t,e,e.pendingProps.children,n),e.child;case 12:return Hi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,pn(bg,i._currentValue),i._currentValue=o,s!==null)if(Cs(s.value,o)){if(s.children===r.children&&!dr.current){e=Yo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Go(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Qv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Hi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,gu(e,n),r=ns(r),i=i(r),e.flags|=1,Hi(t,e,i,n),e.child;case 14:return i=e.type,r=bs(i,e.pendingProps),r=bs(i.type,r),ES(t,e,i,r,n);case 15:return Ek(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:bs(i,r),I0(t,e),e.tag=1,pr(i)?(t=!0,yg(e)):t=!1,gu(e,n),wk(e,i,r),e2(e,i,r,n),i2(null,e,i,!0,t,n);case 19:return Ck(t,e,n);case 22:return Ak(t,e,n)}throw Error(Fe(156,e.tag))};function Gk(t,e){return vL(t,e)}function aD(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(t,e,n,i){return new aD(t,e,n,i)}function Nb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lD(t){if(typeof t=="function")return Nb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jx)return 11;if(t===Qx)return 14}return 2}function za(t,e){var n=t.alternate;return n===null?(n=Qr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function F0(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Nb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xc:return Fl(n.children,r,s,e);case Xx:o=8,r|=8;break;case Ev:return t=Qr(12,n,e,r|2),t.elementType=Ev,t.lanes=s,t;case Av:return t=Qr(13,n,e,r),t.elementType=Av,t.lanes=s,t;case Tv:return t=Qr(19,n,e,r),t.elementType=Tv,t.lanes=s,t;case tL:return Bm(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ZT:o=10;break e;case eL:o=9;break e;case Jx:o=11;break e;case Qx:o=14;break e;case ba:o=16,i=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=Qr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Fl(t,e,n,i){return t=Qr(7,t,i,e),t.lanes=n,t}function Bm(t,e,n,i){return t=Qr(22,t,i,e),t.elementType=tL,t.lanes=n,t.stateNode={isHidden:!1},t}function vy(t,e,n){return t=Qr(6,t,null,e),t.lanes=n,t}function xy(t,e,n){return e=Qr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cD(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Z1(0),this.expirationTimes=Z1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z1(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ib(t,e,n,i,r,s,o,a,l){return t=new cD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Qr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mb(s),t}function uD(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yc,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Wk(t){if(!t)return Ka;t=t._reactInternals;e:{if(ic(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var n=t.type;if(pr(n))return WL(t,n,e)}return e}function qk(t,e,n,i,r,s,o,a,l){return t=Ib(n,i,!0,t,r,s,o,a,l),t.context=Wk(null),n=t.current,i=qi(),r=$a(n),s=Go(i,r),s.callback=e??null,ja(n,s,r),t.current.lanes=r,gd(t,r,i),gr(t,i),t}function jm(t,e,n,i){var r=e.current,s=qi(),o=$a(r);return n=Wk(n),e.context===null?e.context=n:e.pendingContext=n,e=Go(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ja(r,e,o),t!==null&&(ks(t,r,o,s),R0(t,r,o)),o}function Rg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function FS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Db(t,e){FS(t,e),(t=t.alternate)&&FS(t,e)}function hD(){return null}var Kk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mb(t){this._internalRoot=t}Um.prototype.render=Mb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));jm(t,e,null,null)};Um.prototype.unmount=Mb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yl(function(){jm(null,t,null,null)}),e[qo]=null}};function Um(t){this._internalRoot=t}Um.prototype.unstable_scheduleHydration=function(t){if(t){var e=AL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Aa.length&&e!==0&&e<Aa[n].priority;n++);Aa.splice(n,0,t),n===0&&LL(t)}};function Fb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $m(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function OS(){}function fD(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Rg(o);s.call(c)}}var o=qk(e,i,t,0,null,!1,!1,"",OS);return t._reactRootContainer=o,t[qo]=o.current,Ff(t.nodeType===8?t.parentNode:t),Yl(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Rg(l);a.call(c)}}var l=Ib(t,0,!1,null,null,!1,!1,"",OS);return t._reactRootContainer=l,t[qo]=l.current,Ff(t.nodeType===8?t.parentNode:t),Yl(function(){jm(e,l,n,i)}),l}function zm(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Rg(o);a.call(l)}}jm(e,o,t,r)}else o=fD(n,e,t,r,i);return Rg(o)}_L=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$h(e.pendingLanes);n!==0&&(tb(e,n|1),gr(e,$n()),!(Ut&6)&&(Lu=$n()+500,tl()))}break;case 13:Yl(function(){var i=Ko(t,1);if(i!==null){var r=qi();ks(i,t,1,r)}}),Db(t,1)}};nb=function(t){if(t.tag===13){var e=Ko(t,134217728);if(e!==null){var n=qi();ks(e,t,134217728,n)}Db(t,134217728)}};EL=function(t){if(t.tag===13){var e=$a(t),n=Ko(t,e);if(n!==null){var i=qi();ks(n,t,e,i)}Db(t,e)}};AL=function(){return en};TL=function(t,e){var n=en;try{return en=t,e()}finally{en=n}};Fv=function(t,e,n){switch(e){case"input":if(Cv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Nm(i);if(!r)throw Error(Fe(90));iL(i),Cv(i,r)}}}break;case"textarea":sL(t,n);break;case"select":e=n.value,e!=null&&hu(t,!!n.multiple,e,!1)}};fL=Cb;dL=Yl;var dD={usingClientEntryPoint:!1,Events:[yd,eu,Nm,uL,hL,Cb]},Lh={findFiberByHostInstance:Cl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pD={bundleType:Lh.bundleType,version:Lh.version,rendererPackageName:Lh.rendererPackageName,rendererConfig:Lh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mL(t),t===null?null:t.stateNode},findFiberByHostInstance:Lh.findFiberByHostInstance||hD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mp.isDisabled&&Mp.supportsFiber)try{km=Mp.inject(pD),io=Mp}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dD;Dr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fb(e))throw Error(Fe(200));return uD(t,e,null,n)};Dr.createRoot=function(t,e){if(!Fb(t))throw Error(Fe(299));var n=!1,i="",r=Kk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Ib(t,1,!1,null,null,n,!1,i,r),t[qo]=e.current,Ff(t.nodeType===8?t.parentNode:t),new Mb(e)};Dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=mL(e),t=t===null?null:t.stateNode,t};Dr.flushSync=function(t){return Yl(t)};Dr.hydrate=function(t,e,n){if(!$m(e))throw Error(Fe(200));return zm(null,t,e,!0,n)};Dr.hydrateRoot=function(t,e,n){if(!Fb(t))throw Error(Fe(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Kk;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qk(e,null,t,1,n??null,r,!1,s,o),t[qo]=e.current,Ff(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Um(e)};Dr.render=function(t,e,n){if(!$m(e))throw Error(Fe(200));return zm(null,t,e,!1,n)};Dr.unmountComponentAtNode=function(t){if(!$m(t))throw Error(Fe(40));return t._reactRootContainer?(Yl(function(){zm(null,null,t,!1,function(){t._reactRootContainer=null,t[qo]=null})}),!0):!1};Dr.unstable_batchedUpdates=Cb;Dr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!$m(n))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return zm(t,e,n,!1,i)};Dr.version="18.3.1-next-f1338f8080-20240426";function Yk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yk)}catch(t){console.error(t)}}Yk(),YT.exports=Dr;var gD=YT.exports,Xk,BS=gD;Xk=BS.createRoot,BS.hydrateRoot;function mD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jk={exports:{}};(function(t,e){(function(n){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var h=a.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");return h.path=a.normalizePath(h.path),a.buildURLFromParts(h)}var f=a.parseURL(c);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return u.alwaysNormalize?(f.path=a.normalizePath(f.path),a.buildURLFromParts(f)):c;var d=a.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");if(!d.netLoc&&d.path&&d.path[0]!=="/"){var p=r.exec(d.path);d.netLoc=p[1],d.path=p[2]}d.netLoc&&!d.path&&(d.path="/");var m={scheme:d.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(m.netLoc=d.netLoc,f.path[0]!=="/"))if(!f.path)m.path=d.path,f.params||(m.params=d.params,f.query||(m.query=d.query));else{var v=d.path,y=v.substring(0,v.lastIndexOf("/")+1)+f.path;m.path=a.normalizePath(y)}return m.path===null&&(m.path=u.alwaysNormalize?a.normalizePath(f.path):f.path),a.buildURLFromParts(m)},parseURL:function(l){var c=i.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=a})()})(Jk);var Ob=Jk.exports;function jS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jS(Object(n),!0).forEach(function(i){xD(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jS(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yD(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vD(t){var e=yD(t,"string");return typeof e=="symbol"?e:String(e)}function xD(t,e,n){return e=vD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jn(){return Jn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Jn.apply(this,arguments)}const Xe=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},bD=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=wD},wD=Number.MAX_SAFE_INTEGER||9007199254740991;let W=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t}({}),gt=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),Se=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({});const Sl=function(){},g2={trace:Sl,debug:Sl,log:Sl,warn:Sl,info:Sl,error:Sl};let df=g2;function SD(t){const e=self.console[t];return e?e.bind(self.console,`[${t}] >`):Sl}function _D(t,...e){e.forEach(function(n){df[n]=t[n]?t[n].bind(t):SD(n)})}function ED(t,e){if(typeof console=="object"&&t===!0||typeof t=="object"){_D(t,"debug","log","info","warn","error");try{df.log(`Debug logs enabled for "${e}" in hls.js version 1.5.20`)}catch{df=g2}}else df=g2}const me=df,AD=/^(\d+)x(\d+)$/,US=/(.+?)=(".*?"|.*?)(?:,|$)/g;class En{constructor(e){typeof e=="string"&&(e=En.parseAttrList(e)),Jn(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const i=new Uint8Array(n.length/2);for(let r=0;r<n.length/2;r++)i[r]=parseInt(n.slice(r*2,r*2+2),16);return i}else return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const i=this[e];return i?parseFloat(i):n}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const n=AD.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e){let n;const i={},r='"';for(US.lastIndex=0;(n=US.exec(e))!==null;){let s=n[2];s.indexOf(r)===0&&s.lastIndexOf(r)===s.length-1&&(s=s.slice(1,-1));const o=n[1].trim();i[o]=s}return i}}function TD(t){return t!=="ID"&&t!=="CLASS"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function LD(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"}class Qk{constructor(e,n){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,n){const i=n.attr;for(const r in i)if(Object.prototype.hasOwnProperty.call(e,r)&&e[r]!==i[r]){me.warn(`DATERANGE tag attribute: "${r}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=r;break}e=Jn(new En({}),i,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const i=new Date(this.attr["END-DATE"]);Xe(i.getTime())&&(this._endDate=i)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Xe(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Xe(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Hm{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Qt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class Zk{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[Qt.AUDIO]:null,[Qt.VIDEO]:null,[Qt.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,n){const i=e.split("@",2);let r;i.length===1?r=(n==null?void 0:n.byteRangeEndOffset)||0:r=parseInt(i[1]),this._byteRange=[r,parseInt(i[0])+r]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Ob.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class by extends Zk{constructor(e,n){super(n),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Hm,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const i=Object.keys(this.levelkeys);if(i.length===1)return this._decryptdata=this.levelkeys[i[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!Xe(this.programDateTime))return null;const e=Xe(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),i=n.length;if(i>1||i===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const n=this.levelkeys[e];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,i,r,s,o=!1){const{elementaryStreams:a}=this,l=a[e];if(!l){a[e]={startPTS:n,endPTS:i,startDTS:r,endDTS:s,partial:o};return}l.startPTS=Math.min(l.startPTS,n),l.endPTS=Math.max(l.endPTS,i),l.startDTS=Math.min(l.startDTS,r),l.endDTS=Math.max(l.endDTS,s)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Qt.AUDIO]=null,e[Qt.VIDEO]=null,e[Qt.AUDIOVIDEO]=null}}class kD extends Zk{constructor(e,n,i,r,s){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Hm,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=r;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const CD=10;class RD{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?Xe(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||CD}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function Bb(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function PD(t){const e=m2(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function ND(t){const e=function(i,r,s){const o=i[r];i[r]=i[s],i[s]=o};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function ID(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const i=e[1].split(";"),r=i[i.length-1].split(",");if(r.length===2){const s=r[0]==="base64",o=r[1];s?(i.splice(-1,1),n=Bb(o)):n=PD(o)}}return n}function m2(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}const ku=typeof self<"u"?self:void 0;var Gt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},cr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function wy(t){switch(t){case cr.FAIRPLAY:return Gt.FAIRPLAY;case cr.PLAYREADY:return Gt.PLAYREADY;case cr.WIDEVINE:return Gt.WIDEVINE;case cr.CLEARKEY:return Gt.CLEARKEY}}var Fp={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",FAIRPLAY:"94ce86fb07ff4f43adb893d2fa968ca2",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function Sy(t){if(t===Fp.WIDEVINE)return Gt.WIDEVINE;if(t===Fp.PLAYREADY)return Gt.PLAYREADY;if(t===Fp.CENC||t===Fp.CLEARKEY)return Gt.CLEARKEY}function _y(t){switch(t){case Gt.FAIRPLAY:return cr.FAIRPLAY;case Gt.PLAYREADY:return cr.PLAYREADY;case Gt.WIDEVINE:return cr.WIDEVINE;case Gt.CLEARKEY:return cr.CLEARKEY}}function Op(t){const{drmSystems:e,widevineLicenseUrl:n}=t,i=e?[Gt.FAIRPLAY,Gt.WIDEVINE,Gt.PLAYREADY,Gt.CLEARKEY].filter(r=>!!e[r]):[];return!i[Gt.WIDEVINE]&&n&&i.push(Gt.WIDEVINE),i}const e3=function(t){return ku!=null&&(t=ku.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function DD(t,e,n,i){let r;switch(t){case Gt.FAIRPLAY:r=["cenc","sinf"];break;case Gt.WIDEVINE:case Gt.PLAYREADY:r=["cenc"];break;case Gt.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return MD(r,e,n,i)}function MD(t,e,n,i){return[{initDataTypes:t,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs="${s}"`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:n.map(s=>({contentType:`video/mp4; codecs="${s}"`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function t3(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=String.fromCharCode.apply(null,Array.from(e)),i=n.substring(n.indexOf("<"),n.length),o=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("KID")[0];if(o){const a=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(a){const l=Bb(a).subarray(0,16);return ND(l),l}}return null}function Ol(t,e,n){return Uint8Array.prototype.slice?t.slice(e,n):new Uint8Array(Array.prototype.slice.call(t,e,n))}const jb=(t,e)=>e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,n3=(t,e)=>e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,Gf=(t,e)=>{const n=e;let i=0;for(;jb(t,e);){i+=10;const r=Vm(t,e+6);i+=r,n3(t,e+10)&&(i+=10),e+=i}if(i>0)return t.subarray(n,n+i)},Vm=(t,e)=>{let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n},FD=(t,e)=>jb(t,e)&&Vm(t,e+6)+10<=t.length-e,Ub=t=>{const e=r3(t);for(let n=0;n<e.length;n++){const i=e[n];if(i3(i))return zD(i)}},i3=t=>t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp",OD=t=>{const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=Vm(t,4),i=10;return{type:e,size:n,data:t.subarray(i,i+n)}},r3=t=>{let e=0;const n=[];for(;jb(t,e);){const i=Vm(t,e+6);e+=10;const r=e+i;for(;e+8<r;){const s=OD(t.subarray(e)),o=BD(s);o&&n.push(o),e+=s.size+10}n3(t,e)&&(e+=10)}return n},BD=t=>t.type==="PRIV"?jD(t):t.type[0]==="W"?$D(t):UD(t),jD=t=>{if(t.size<2)return;const e=so(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}},UD=t=>{if(t.size<2)return;if(t.type==="TXXX"){let n=1;const i=so(t.data.subarray(n),!0);n+=i.length+1;const r=so(t.data.subarray(n));return{key:t.type,info:i,data:r}}const e=so(t.data.subarray(1));return{key:t.type,data:e}},$D=t=>{if(t.type==="WXXX"){if(t.size<2)return;let n=1;const i=so(t.data.subarray(n),!0);n+=i.length+1;const r=so(t.data.subarray(n));return{key:t.type,info:i,data:r}}const e=so(t.data);return{key:t.type,data:e}},zD=t=>{if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,n&&(i+=4772185884e-2),Math.round(i)}},so=(t,e=!1)=>{const n=HD();if(n){const c=n.decode(t);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const i=t.length;let r,s,o,a="",l=0;for(;l<i;){if(r=t[l++],r===0&&e)return a;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:s=t[l++],a+=String.fromCharCode((r&31)<<6|s&63);break;case 14:s=t[l++],o=t[l++],a+=String.fromCharCode((r&15)<<12|(s&63)<<6|(o&63)<<0);break}}return a};let Ey;function HD(){if(!navigator.userAgent.includes("PlayStation 4"))return!Ey&&typeof self.TextDecoder<"u"&&(Ey=new self.TextDecoder("utf-8")),Ey}const qs={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let i=t[n].toString(16);i.length<2&&(i="0"+i),e+=i}return e}},Pg=Math.pow(2,32)-1,VD=[].push,s3={video:1,audio:2,id3:3,text:4};function ei(t){return String.fromCharCode.apply(null,t)}function o3(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function ht(t,e){const n=a3(t,e);return n<0?4294967296+n:n}function $S(t,e){let n=ht(t,e);return n*=Math.pow(2,32),n+=ht(t,e+4),n}function a3(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Ay(t,e,n){t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n&255}function GD(t){const e=t.byteLength;for(let n=0;n<e;){const i=ht(t,n);if(i>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=i>1?n+i:e}return!1}function Et(t,e){const n=[];if(!e.length)return n;const i=t.byteLength;for(let r=0;r<i;){const s=ht(t,r),o=ei(t.subarray(r+4,r+8)),a=s>1?r+s:i;if(o===e[0])if(e.length===1)n.push(t.subarray(r+8,a));else{const l=Et(t.subarray(r+8,a),e.slice(1));l.length&&VD.apply(n,l)}r=a}return n}function WD(t){const e=[],n=t[0];let i=8;const r=ht(t,i);i+=4;let s=0,o=0;n===0?(s=ht(t,i),o=ht(t,i+4),i+=8):(s=$S(t,i),o=$S(t,i+8),i+=16),i+=2;let a=t.length+o;const l=o3(t,i);i+=2;for(let c=0;c<l;c++){let u=i;const h=ht(t,u);u+=4;const f=h&2147483647;if((h&2147483648)>>>31===1)return me.warn("SIDX has hierarchical references (not supported)"),null;const p=ht(t,u);u+=4,e.push({referenceSize:f,subsegmentDuration:p,info:{duration:p/r,start:a,end:a+f-1}}),a+=f,u+=4,i=u}return{earliestPresentationTime:s,timescale:r,version:n,referencesCount:l,references:e}}function l3(t){const e=[],n=Et(t,["moov","trak"]);for(let r=0;r<n.length;r++){const s=n[r],o=Et(s,["tkhd"])[0];if(o){let a=o[0];const l=ht(o,a===0?12:20),c=Et(s,["mdia","mdhd"])[0];if(c){a=c[0];const u=ht(c,a===0?12:20),h=Et(s,["mdia","hdlr"])[0];if(h){const f=ei(h.subarray(8,12)),d={soun:Qt.AUDIO,vide:Qt.VIDEO}[f];if(d){const p=Et(s,["mdia","minf","stbl","stsd"])[0],m=qD(p);e[l]={timescale:u,type:d},e[d]=fi({timescale:u,id:l},m)}}}}}return Et(t,["moov","mvex","trex"]).forEach(r=>{const s=ht(r,4),o=e[s];o&&(o.default={duration:ht(r,12),flags:ht(r,20)})}),e}function qD(t){const e=t.subarray(8),n=e.subarray(86),i=ei(e.subarray(4,8));let r=i;const s=i==="enca"||i==="encv";if(s){const a=Et(e,[i])[0].subarray(i==="enca"?28:78);Et(a,["sinf"]).forEach(c=>{const u=Et(c,["schm"])[0];if(u){const h=ei(u.subarray(4,8));if(h==="cbcs"||h==="cenc"){const f=Et(c,["frma"])[0];f&&(r=ei(f))}}})}switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const o=Et(n,["avcC"])[0];r+="."+Bp(o[1])+Bp(o[2])+Bp(o[3]);break}case"mp4a":{const o=Et(e,[i])[0],a=Et(o.subarray(28),["esds"])[0];if(a&&a.length>12){let l=4;if(a[l++]!==3)break;l=Ty(a,l),l+=2;const c=a[l++];if(c&128&&(l+=2),c&64&&(l+=a[l++]),a[l++]!==4)break;l=Ty(a,l);const u=a[l++];if(u===64)r+="."+Bp(u);else break;if(l+=12,a[l++]!==5)break;l=Ty(a,l);const h=a[l++];let f=(h&248)>>3;f===31&&(f+=1+((h&7)<<3)+((a[l]&224)>>5)),r+="."+f}break}case"hvc1":case"hev1":{const o=Et(n,["hvcC"])[0],a=o[1],l=["","A","B","C"][a>>6],c=a&31,u=ht(o,2),h=(a&32)>>5?"H":"L",f=o[12],d=o.subarray(6,12);r+="."+l+c,r+="."+u.toString(16).toUpperCase(),r+="."+h+f;let p="";for(let m=d.length;m--;){const v=d[m];(v||p)&&(p="."+v.toString(16).toUpperCase()+p)}r+=p;break}case"dvh1":case"dvhe":{const o=Et(n,["dvcC"])[0],a=o[2]>>1&127,l=o[2]<<5&32|o[3]>>3&31;r+="."+$s(a)+"."+$s(l);break}case"vp09":{const o=Et(n,["vpcC"])[0],a=o[4],l=o[5],c=o[6]>>4&15;r+="."+$s(a)+"."+$s(l)+"."+$s(c);break}case"av01":{const o=Et(n,["av1C"])[0],a=o[1]>>>5,l=o[1]&31,c=o[2]>>>7?"H":"M",u=(o[2]&64)>>6,h=(o[2]&32)>>5,f=a===2&&u?h?12:10:u?10:8,d=(o[2]&16)>>4,p=(o[2]&8)>>3,m=(o[2]&4)>>2,v=o[2]&3;r+="."+a+"."+$s(l)+c+"."+$s(f)+"."+d+"."+p+m+v+"."+$s(1)+"."+$s(1)+"."+$s(1)+"."+0;break}}return{codec:r,encrypted:s}}function Ty(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function Bp(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function $s(t){return(t<10?"0":"")+t}function KD(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&Et(t,["moov","trak"]).forEach(r=>{const o=Et(r,["mdia","minf","stbl","stsd"])[0].subarray(8);let a=Et(o,["enca"]);const l=a.length>0;l||(a=Et(o,["encv"])),a.forEach(c=>{const u=l?c.subarray(28):c.subarray(78);Et(u,["sinf"]).forEach(f=>{const d=c3(f);if(d){const p=d.subarray(8,24);p.some(m=>m!==0)||(me.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${qs.hexDump(p)} -> ${qs.hexDump(n)}`),d.set(n,8))}})})}),t}function c3(t){const e=Et(t,["schm"])[0];if(e){const n=ei(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return Et(t,["schi","tenc"])[0]}return null}function YD(t,e){return Et(e,["moof","traf"]).reduce((n,i)=>{const r=Et(i,["tfdt"])[0],s=r[0],o=Et(i,["tfhd"]).reduce((a,l)=>{const c=ht(l,4),u=t[c];if(u){let h=ht(r,4);if(s===1){if(h===Pg)return me.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),a;h*=Pg+1,h+=ht(r,8)}const f=u.timescale||9e4,d=h/f;if(Xe(d)&&(a===null||d<a))return d}return a},null);return o!==null&&Xe(o)&&(n===null||o<n)?o:n},null)}function XD(t,e){let n=0,i=0,r=0;const s=Et(t,["moof","traf"]);for(let o=0;o<s.length;o++){const a=s[o],l=Et(a,["tfhd"])[0],c=ht(l,4),u=e[c];if(!u)continue;const h=u.default,f=ht(l,0)|(h==null?void 0:h.flags);let d=h==null?void 0:h.duration;f&8&&(f&2?d=ht(l,12):d=ht(l,8));const p=u.timescale||9e4,m=Et(a,["trun"]);for(let v=0;v<m.length;v++){if(n=JD(m[v]),!n&&d){const y=ht(m[v],4);n=d*y}u.type===Qt.VIDEO?i+=n/p:u.type===Qt.AUDIO&&(r+=n/p)}}if(i===0&&r===0){let o=1/0,a=0,l=0;const c=Et(t,["sidx"]);for(let u=0;u<c.length;u++){const h=WD(c[u]);if(h!=null&&h.references){o=Math.min(o,h.earliestPresentationTime/h.timescale);const f=h.references.reduce((d,p)=>d+p.info.duration||0,0);a=Math.max(a,f+h.earliestPresentationTime/h.timescale),l=a-o}}if(l&&Xe(l))return l}return i||r}function JD(t){const e=ht(t,0);let n=8;e&1&&(n+=4),e&4&&(n+=4);let i=0;const r=ht(t,4);for(let s=0;s<r;s++){if(e&256){const o=ht(t,n);i+=o,n+=4}e&512&&(n+=4),e&1024&&(n+=4),e&2048&&(n+=4)}return i}function QD(t,e,n){Et(e,["moof","traf"]).forEach(i=>{Et(i,["tfhd"]).forEach(r=>{const s=ht(r,4),o=t[s];if(!o)return;const a=o.timescale||9e4;Et(i,["tfdt"]).forEach(l=>{const c=l[0],u=n*a;if(u){let h=ht(l,4);if(c===0)h-=u,h=Math.max(h,0),Ay(l,4,h);else{h*=Math.pow(2,32),h+=ht(l,8),h-=u,h=Math.max(h,0);const f=Math.floor(h/(Pg+1)),d=Math.floor(h%(Pg+1));Ay(l,4,f),Ay(l,8,d)}}})})})}function ZD(t){const e={valid:null,remainder:null},n=Et(t,["moof"]);if(n.length<2)return e.remainder=t,e;const i=n[n.length-1];return e.valid=Ol(t,0,i.byteOffset-8),e.remainder=Ol(t,i.byteOffset-8),e}function rs(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function zS(t,e){const n=[],i=e.samples,r=e.timescale,s=e.id;let o=!1;return Et(i,["moof"]).map(l=>{const c=l.byteOffset-8;Et(l,["traf"]).map(h=>{const f=Et(h,["tfdt"]).map(d=>{const p=d[0];let m=ht(d,4);return p===1&&(m*=Math.pow(2,32),m+=ht(d,8)),m/r})[0];return f!==void 0&&(t=f),Et(h,["tfhd"]).map(d=>{const p=ht(d,4),m=ht(d,0)&16777215,v=(m&1)!==0,y=(m&2)!==0,x=(m&8)!==0;let b=0;const E=(m&16)!==0;let T=0;const D=(m&32)!==0;let R=8;p===s&&(v&&(R+=8),y&&(R+=4),x&&(b=ht(d,R),R+=4),E&&(T=ht(d,R),R+=4),D&&(R+=4),e.type==="video"&&(o=eM(e.codec)),Et(h,["trun"]).map(S=>{const C=S[0],N=ht(S,0)&16777215,k=(N&1)!==0;let P=0;const j=(N&4)!==0,F=(N&256)!==0;let H=0;const O=(N&512)!==0;let $=0;const z=(N&1024)!==0,B=(N&2048)!==0;let X=0;const te=ht(S,4);let I=8;k&&(P=ht(S,I),I+=4),j&&(I+=4);let U=P+c;for(let K=0;K<te;K++){if(F?(H=ht(S,I),I+=4):H=b,O?($=ht(S,I),I+=4):$=T,z&&(I+=4),B&&(C===0?X=ht(S,I):X=a3(S,I),I+=4),e.type===Qt.VIDEO){let Q=0;for(;Q<$;){const ee=ht(i,U);if(U+=4,tM(o,i[U])){const oe=i.subarray(U,U+ee);u3(oe,o?2:1,t+X/r,n)}U+=ee,Q+=ee+4}}t+=H/r}}))})})}),n}function eM(t){if(!t)return!1;const e=t.indexOf("."),n=e<0?t:t.substring(0,e);return n==="hvc1"||n==="hev1"||n==="dvh1"||n==="dvhe"}function tM(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function u3(t,e,n,i){const r=h3(t);let s=0;s+=e;let o=0,a=0,l=0;for(;s<r.length;){o=0;do{if(s>=r.length)break;l=r[s++],o+=l}while(l===255);a=0;do{if(s>=r.length)break;l=r[s++],a+=l}while(l===255);const c=r.length-s;let u=s;if(a<c)s+=a;else if(a>c){me.error(`Malformed SEI payload. ${a} is too small, only ${c} bytes left to parse.`);break}if(o===4){if(r[u++]===181){const f=o3(r,u);if(u+=2,f===49){const d=ht(r,u);if(u+=4,d===1195456820){const p=r[u++];if(p===3){const m=r[u++],v=31&m,y=64&m,x=y?2+v*3:0,b=new Uint8Array(x);if(y){b[0]=m;for(let E=1;E<x;E++)b[E]=r[u++]}i.push({type:p,payloadType:o,pts:n,bytes:b})}}}}}else if(o===5&&a>16){const h=[];for(let p=0;p<16;p++){const m=r[u++].toString(16);h.push(m.length==1?"0"+m:m),(p===3||p===5||p===7||p===9)&&h.push("-")}const f=a-16,d=new Uint8Array(f);for(let p=0;p<f;p++)d[p]=r[u++];i.push({payloadType:o,pts:n,uuid:h.join(""),userData:so(d),userDataBytes:d})}}}function h3(t){const e=t.byteLength,n=[];let i=1;for(;i<e-2;)t[i]===0&&t[i+1]===0&&t[i+2]===3?(n.push(i+2),i+=2):i++;if(n.length===0)return t;const r=e-n.length,s=new Uint8Array(r);let o=0;for(i=0;i<r;o++,i++)o===n[0]&&(o++,n.shift()),s[i]=t[o];return s}function nM(t){const e=t[0];let n="",i="",r=0,s=0,o=0,a=0,l=0,c=0;if(e===0){for(;ei(t.subarray(c,c+1))!=="\0";)n+=ei(t.subarray(c,c+1)),c+=1;for(n+=ei(t.subarray(c,c+1)),c+=1;ei(t.subarray(c,c+1))!=="\0";)i+=ei(t.subarray(c,c+1)),c+=1;i+=ei(t.subarray(c,c+1)),c+=1,r=ht(t,12),s=ht(t,16),a=ht(t,20),l=ht(t,24),c=28}else if(e===1){c+=4,r=ht(t,c),c+=4;const h=ht(t,c);c+=4;const f=ht(t,c);for(c+=4,o=2**32*h+f,bD(o)||(o=Number.MAX_SAFE_INTEGER,me.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=ht(t,c),c+=4,l=ht(t,c),c+=4;ei(t.subarray(c,c+1))!=="\0";)n+=ei(t.subarray(c,c+1)),c+=1;for(n+=ei(t.subarray(c,c+1)),c+=1;ei(t.subarray(c,c+1))!=="\0";)i+=ei(t.subarray(c,c+1)),c+=1;i+=ei(t.subarray(c,c+1)),c+=1}const u=t.subarray(c,t.byteLength);return{schemeIdUri:n,value:i,timeScale:r,presentationTime:o,presentationTimeDelta:s,eventDuration:a,id:l,payload:u}}function iM(t,...e){const n=e.length;let i=8,r=n;for(;r--;)i+=e[r].byteLength;const s=new Uint8Array(i);for(s[0]=i>>24&255,s[1]=i>>16&255,s[2]=i>>8&255,s[3]=i&255,s.set(t,4),r=0,i=8;r<n;r++)s.set(e[r],i),i+=e[r].byteLength;return s}function rM(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let i,r;i=0,r=new Uint8Array;let s;i>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const o=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(o.buffer).setUint32(0,n.byteLength,!1),iM([112,115,115,104],new Uint8Array([i,0,0,0]),t,s,r,o,n||new Uint8Array)}function sM(t){const e=[];if(t instanceof ArrayBuffer){const n=t.byteLength;let i=0;for(;i+32<n;){const r=new DataView(t,i),s=oM(r);e.push(s),i+=s.size}}return e}function oM(t){const e=t.getUint32(0),n=t.byteOffset,i=t.byteLength;if(i<e)return{offset:n,size:i};if(t.getUint32(4)!==1886614376)return{offset:n,size:e};const s=t.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:n,size:e};const o=t.buffer,a=qs.hexDump(new Uint8Array(o,n+12,16)),l=t.getUint32(28);let c=null,u=null;if(s===0){if(e-32<l||l<22)return{offset:n,size:e};u=new Uint8Array(o,n+32,l)}else if(s===1){if(!l||i<n+32+l*16+16)return{offset:n,size:e};c=[];for(let h=0;h<l;h++)c.push(new Uint8Array(o,n+32+h*16,16))}return{version:s,systemId:a,kids:c,data:u,offset:n,size:e}}let jp={};class Wf{static clearKeyUriToKeyIdMap(){jp={}}constructor(e,n,i,r=[1],s=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=i,this.keyFormatVersions=r,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case cr.FAIRPLAY:case cr.WIDEVINE:case cr.PLAYREADY:case cr.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&me.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const i=aM(e);return new Wf(this.method,this.uri,"identity",this.keyFormatVersions,i)}const n=ID(this.uri);if(n)switch(this.keyFormat){case cr.WIDEVINE:this.pssh=n,n.length>=22&&(this.keyId=n.subarray(n.length-22,n.length-6));break;case cr.PLAYREADY:{const i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=rM(i,null,n),this.keyId=t3(n);break}default:{let i=n.subarray(0,16);if(i.length!==16){const r=new Uint8Array(16);r.set(i,16-i.length),i=r}this.keyId=i;break}}if(!this.keyId||this.keyId.byteLength!==16){let i=jp[this.uri];if(!i){const r=Object.keys(jp).length%Number.MAX_SAFE_INTEGER;i=new Uint8Array(16),new DataView(i.buffer,12,4).setUint32(0,r),jp[this.uri]=i}this.keyId=i}return this}}function aM(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const f3=/\{\$([a-zA-Z0-9-_]+)\}/g;function HS(t){return f3.test(t)}function ar(t,e,n){if(t.variableList!==null||t.hasVariableRefs)for(let i=n.length;i--;){const r=n[i],s=e[r];s&&(e[r]=y2(t,s))}}function y2(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace(f3,i=>{const r=i.substring(2,i.length-1),s=n==null?void 0:n[r];return s===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),i):s})}return e}function VS(t,e,n){let i=t.variableList;i||(t.variableList=i={});let r,s;if("QUERYPARAM"in e){r=e.QUERYPARAM;try{const o=new self.URL(n).searchParams;if(o.has(r))s=o.get(r);else throw new Error(`"${r}" does not match any query parameter in URI: "${n}"`)}catch(o){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else r=e.NAME,s=e.VALUE;r in i?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):i[r]=s||""}function lM(t,e,n){const i=e.IMPORT;if(n&&i in n){let r=t.variableList;r||(t.variableList=r={}),r[i]=n[i]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}function Xl(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function cM(t){return typeof self<"u"&&t===self.ManagedMediaSource}const Ng={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function uM(t,e){const n=Ng[e];return!!n&&!!n[t.slice(0,4)]}function Ly(t,e,n=!0){return!t.split(",").some(i=>!d3(i,e,n))}function d3(t,e,n=!0){var i;const r=Xl(n);return(i=r==null?void 0:r.isTypeSupported(qf(t,e)))!=null?i:!1}function qf(t,e){return`${e}/mp4;codecs="${t}"`}function GS(t){if(t){const e=t.substring(0,4);return Ng.video[e]}return 2}function Ig(t){return t.split(",").reduce((e,n)=>{const i=Ng.video[n];return i?(i*2+e)/(e?3:2):(Ng.audio[n]+e)/(e?2:1)},0)}const ky={};function hM(t,e=!0){if(ky[t])return ky[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t];for(let i=0;i<n.length;i++)if(d3(n[i],"audio",e))return ky[t]=n[i],n[i];return t}const fM=/flac|opus/i;function Dg(t,e=!0){return t.replace(fM,n=>hM(n.toLowerCase(),e))}function WS(t,e){return t&&t!=="mp4a"?t:e&&e.split(",")[0]}function dM(t){const e=t.split(",");for(let n=0;n<e.length;n++){const i=e[n].split(".");if(i.length>2){let r=i.shift()+".";r+=parseInt(i.shift()).toString(16),r+=("000"+parseInt(i.shift()).toString(16)).slice(-4),e[n]=r}}return e.join(",")}const qS=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,KS=/#EXT-X-MEDIA:(.*)/g,pM=/^#EXT(?:INF|-X-TARGETDURATION):/m,YS=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),gM=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Zs{static findGroup(e,n){for(let i=0;i<e.length;i++){const r=e[i];if(r.id===n)return r}}static resolve(e,n){return Ob.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return pM.test(e)}static parseMasterPlaylist(e,n){const i=HS(e),r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},s=[];qS.lastIndex=0;let o;for(;(o=qS.exec(e))!=null;)if(o[1]){var a;const c=new En(o[1]);ar(r,c,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const u=y2(r,o[2]),h={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:Zs.resolve(u,n)},f=c.decimalResolution("RESOLUTION");f&&(h.width=f.width,h.height=f.height),mM(c.CODECS,h),(a=h.unknownCodecs)!=null&&a.length||s.push(h),r.levels.push(h)}else if(o[3]){const c=o[3],u=o[4];switch(c){case"SESSION-DATA":{const h=new En(u);ar(r,h,["DATA-ID","LANGUAGE","VALUE","URI"]);const f=h["DATA-ID"];f&&(r.sessionData===null&&(r.sessionData={}),r.sessionData[f]=h);break}case"SESSION-KEY":{const h=XS(u,n,r);h.encrypted&&h.isSupported()?(r.sessionKeys===null&&(r.sessionKeys=[]),r.sessionKeys.push(h)):me.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const h=new En(u);ar(r,h,["NAME","VALUE","QUERYPARAM"]),VS(r,h,n)}break}case"CONTENT-STEERING":{const h=new En(u);ar(r,h,["SERVER-URI","PATHWAY-ID"]),r.contentSteering={uri:Zs.resolve(h["SERVER-URI"],n),pathwayId:h["PATHWAY-ID"]||"."};break}case"START":{r.startTimeOffset=JS(u);break}}}const l=s.length>0&&s.length<r.levels.length;return r.levels=l?s:r.levels,r.levels.length===0&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,n,i){let r;const s={},o=i.levels,a={AUDIO:o.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:o.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(KS.lastIndex=0;(r=KS.exec(e))!==null;){const c=new En(r[1]),u=c.TYPE;if(u){const h=a[u],f=s[u]||[];s[u]=f,ar(i,c,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const d=c.LANGUAGE,p=c["ASSOC-LANGUAGE"],m=c.CHANNELS,v=c.CHARACTERISTICS,y=c["INSTREAM-ID"],x={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||d||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:d,url:c.URI?Zs.resolve(c.URI,n):""};if(p&&(x.assocLang=p),m&&(x.channels=m),v&&(x.characteristics=v),y&&(x.instreamId=y),h!=null&&h.length){const b=Zs.findGroup(h,x.groupId)||h[0];QS(x,b,"audioCodec"),QS(x,b,"textCodec")}f.push(x)}}return s}static parseLevelPlaylist(e,n,i,r,s,o){const a=new RD(n),l=a.fragments;let c=null,u=0,h=0,f=0,d=0,p=null,m=new by(r,n),v,y,x,b=-1,E=!1,T=null;for(YS.lastIndex=0,a.m3u8=e,a.hasVariableRefs=HS(e);(v=YS.exec(e))!==null;){E&&(E=!1,m=new by(r,n),m.start=f,m.sn=u,m.cc=d,m.level=i,c&&(m.initSegment=c,m.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null,T&&(m.setByteRange(T),T=null)));const C=v[1];if(C){m.duration=parseFloat(C);const N=(" "+v[2]).slice(1);m.title=N||null,m.tagList.push(N?["INF",C,N]:["INF",C])}else if(v[3]){if(Xe(m.duration)){m.start=f,x&&t_(m,x,a),m.sn=u,m.level=i,m.cc=d,l.push(m);const N=(" "+v[3]).slice(1);m.relurl=y2(a,N),ZS(m,p),p=m,f+=m.duration,u++,h=0,E=!0}}else if(v[4]){const N=(" "+v[4]).slice(1);p?m.setByteRange(N,p):m.setByteRange(N)}else if(v[5])m.rawProgramDateTime=(" "+v[5]).slice(1),m.tagList.push(["PROGRAM-DATE-TIME",m.rawProgramDateTime]),b===-1&&(b=l.length);else{if(v=v[0].match(gM),!v){me.warn("No matches on slow regex match for level playlist!");continue}for(y=1;y<v.length&&!(typeof v[y]<"u");y++);const N=(" "+v[y]).slice(1),k=(" "+v[y+1]).slice(1),P=v[y+2]?(" "+v[y+2]).slice(1):"";switch(N){case"PLAYLIST-TYPE":a.type=k.toUpperCase();break;case"MEDIA-SEQUENCE":u=a.startSN=parseInt(k);break;case"SKIP":{const j=new En(k);ar(a,j,["RECENTLY-REMOVED-DATERANGES"]);const F=j.decimalInteger("SKIPPED-SEGMENTS");if(Xe(F)){a.skippedSegments=F;for(let O=F;O--;)l.unshift(null);u+=F}const H=j.enumeratedString("RECENTLY-REMOVED-DATERANGES");H&&(a.recentlyRemovedDateranges=H.split("	"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(k),1);break;case"VERSION":a.version=parseInt(k);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(k||P)&&m.tagList.push(P?[k,P]:[k]);break;case"DISCONTINUITY":d++,m.tagList.push(["DIS"]);break;case"GAP":m.gap=!0,m.tagList.push([N]);break;case"BITRATE":m.tagList.push([N,k]);break;case"DATERANGE":{const j=new En(k);ar(a,j,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),ar(a,j,j.clientAttrs);const F=new Qk(j,a.dateRanges[j.ID]);F.isValid||a.skippedSegments?a.dateRanges[F.id]=F:me.warn(`Ignoring invalid DATERANGE tag: "${k}"`),m.tagList.push(["EXT-X-DATERANGE",k]);break}case"DEFINE":{{const j=new En(k);ar(a,j,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in j?lM(a,j,o):VS(a,j,n)}break}case"DISCONTINUITY-SEQUENCE":d=parseInt(k);break;case"KEY":{const j=XS(k,n,a);if(j.isSupported()){if(j.method==="NONE"){x=void 0;break}x||(x={}),x[j.keyFormat]&&(x=Jn({},x)),x[j.keyFormat]=j}else me.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${k}"`);break}case"START":a.startTimeOffset=JS(k);break;case"MAP":{const j=new En(k);if(ar(a,j,["BYTERANGE","URI"]),m.duration){const F=new by(r,n);e_(F,j,i,x),c=F,m.initSegment=c,c.rawProgramDateTime&&!m.rawProgramDateTime&&(m.rawProgramDateTime=c.rawProgramDateTime)}else{const F=m.byteRangeEndOffset;if(F){const H=m.byteRangeStartOffset;T=`${F-H}@${H}`}else T=null;e_(m,j,i,x),c=m,E=!0}break}case"SERVER-CONTROL":{const j=new En(k);a.canBlockReload=j.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=j.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&j.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=j.optionalFloat("PART-HOLD-BACK",0),a.holdBack=j.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const j=new En(k);a.partTarget=j.decimalFloatingPoint("PART-TARGET");break}case"PART":{let j=a.partList;j||(j=a.partList=[]);const F=h>0?j[j.length-1]:void 0,H=h++,O=new En(k);ar(a,O,["BYTERANGE","URI"]);const $=new kD(O,m,n,H,F);j.push($),m.duration+=$.duration;break}case"PRELOAD-HINT":{const j=new En(k);ar(a,j,["URI"]),a.preloadHint=j;break}case"RENDITION-REPORT":{const j=new En(k);ar(a,j,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(j);break}default:me.warn(`line parsed but not handled: ${v}`);break}}}p&&!p.relurl?(l.pop(),f-=p.duration,a.partList&&(a.fragmentHint=p)):a.partList&&(ZS(m,p),m.cc=d,a.fragmentHint=m,x&&t_(m,x,a));const D=l.length,R=l[0],S=l[D-1];if(f+=a.skippedSegments*a.targetduration,f>0&&D&&S){a.averagetargetduration=f/D;const C=S.sn;a.endSN=C!=="initSegment"?C:0,a.live||(S.endList=!0),R&&(a.startCC=R.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(f+=a.fragmentHint.duration),a.totalduration=f,a.endCC=d,b>0&&yM(l,b),a}}function XS(t,e,n){var i,r;const s=new En(t);ar(n,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const o=(i=s.METHOD)!=null?i:"",a=s.URI,l=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,u=(r=s.KEYFORMAT)!=null?r:"identity";a&&s.IV&&!l&&me.error(`Invalid IV: ${s.IV}`);const h=a?Zs.resolve(a,e):"",f=(c||"1").split("/").map(Number).filter(Number.isFinite);return new Wf(o,h,u,f,l)}function JS(t){const n=new En(t).decimalFloatingPoint("TIME-OFFSET");return Xe(n)?n:null}function mM(t,e){let n=(t||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{const r=n.filter(s=>uM(s,i));r.length&&(e[`${i}Codec`]=r.join(","),n=n.filter(s=>r.indexOf(s)===-1))}),e.unknownCodecs=n}function QS(t,e,n){const i=e[n];i&&(t[n]=i)}function yM(t,e){let n=t[e];for(let i=e;i--;){const r=t[i];if(!r)return;r.programDateTime=n.programDateTime-r.duration*1e3,n=r}}function ZS(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Xe(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function e_(t,e,n,i){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",i&&(t.levelkeys=i),t.initSegment=null}function t_(t,e,n){t.levelkeys=e;const{encryptedFragments:i}=n;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(r=>e[r].isCommonEncryption)&&i.push(t)}var Bt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},ft={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function n_(t){const{type:e}=t;switch(e){case Bt.AUDIO_TRACK:return ft.AUDIO;case Bt.SUBTITLE_TRACK:return ft.SUBTITLE;default:return ft.MAIN}}function Cy(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class vM{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.LEVEL_LOADING,this.onLevelLoading,this),e.on(W.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(W.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.LEVEL_LOADING,this.onLevelLoading,this),e.off(W.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(W.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const n=this.hls.config,i=n.pLoader,r=n.loader,s=i||r,o=new s(n);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:i}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Bt.MANIFEST,url:i,deliveryDirectives:null})}onLevelLoading(e,n){const{id:i,level:r,pathwayId:s,url:o,deliveryDirectives:a}=n;this.load({id:i,level:r,pathwayId:s,responseType:"text",type:Bt.LEVEL,url:o,deliveryDirectives:a})}onAudioTrackLoading(e,n){const{id:i,groupId:r,url:s,deliveryDirectives:o}=n;this.load({id:i,groupId:r,level:null,responseType:"text",type:Bt.AUDIO_TRACK,url:s,deliveryDirectives:o})}onSubtitleTrackLoading(e,n){const{id:i,groupId:r,url:s,deliveryDirectives:o}=n;this.load({id:i,groupId:r,level:null,responseType:"text",type:Bt.SUBTITLE_TRACK,url:s,deliveryDirectives:o})}load(e){var n;const i=this.hls.config;let r=this.getInternalLoader(e);if(r){const c=r.context;if(c&&c.url===e.url&&c.level===e.level){me.trace("[playlist-loader]: playlist request ongoing");return}me.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}let s;if(e.type===Bt.MANIFEST?s=i.manifestLoadPolicy.default:s=Jn({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),Xe((n=e.deliveryDirectives)==null?void 0:n.part)){let c;if(e.type===Bt.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===Bt.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===Bt.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,h=c.targetduration;if(u&&h){const f=Math.max(u*3,h*.8)*1e3;s=Jn({},s,{maxTimeToFirstByteMs:Math.min(f,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,s.maxTimeToFirstByteMs)})}}}const o=s.errorRetry||s.timeoutRetry||{},a={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(c,u,h,f)=>{const d=this.getInternalLoader(h);this.resetInternalLoader(h.type);const p=c.data;if(p.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,h,new Error("no EXTM3U delimiter"),f||null,u);return}u.parsing.start=performance.now(),Zs.isMediaPlaylist(p)?this.handleTrackOrLevelPlaylist(c,u,h,f||null,d):this.handleMasterPlaylist(c,u,h,f)},onError:(c,u,h,f)=>{this.handleNetworkError(u,h,!1,c,f)},onTimeout:(c,u,h)=>{this.handleNetworkError(u,h,!0,void 0,c)}};r.load(e,a,l)}handleMasterPlaylist(e,n,i,r){const s=this.hls,o=e.data,a=Cy(e,i),l=Zs.parseMasterPlaylist(o,a);if(l.playlistParsingError){this.handleManifestParsingError(e,i,l.playlistParsingError,r,n);return}const{contentSteering:c,levels:u,sessionData:h,sessionKeys:f,startTimeOffset:d,variableList:p}=l;this.variableList=p;const{AUDIO:m=[],SUBTITLES:v,"CLOSED-CAPTIONS":y}=Zs.parseMasterPlaylistMedia(o,a,l);m.length&&!m.some(b=>!b.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(me.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new En({}),bitrate:0,url:""})),s.trigger(W.MANIFEST_LOADED,{levels:u,audioTracks:m,subtitles:v,captions:y,contentSteering:c,url:a,stats:n,networkDetails:r,sessionData:h,sessionKeys:f,startTimeOffset:d,variableList:p})}handleTrackOrLevelPlaylist(e,n,i,r,s){const o=this.hls,{id:a,level:l,type:c}=i,u=Cy(e,i),h=0,f=Xe(l)?l:Xe(a)?a:0,d=n_(i),p=Zs.parseLevelPlaylist(e.data,u,f,d,h,this.variableList);if(c===Bt.MANIFEST){const m={attrs:new En({}),bitrate:0,details:p,name:"",url:u};o.trigger(W.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:u,stats:n,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),i.levelDetails=p,this.handlePlaylistLoaded(p,e,n,i,r,s)}handleManifestParsingError(e,n,i,r,s){this.hls.trigger(W.ERROR,{type:gt.NETWORK_ERROR,details:Se.MANIFEST_PARSING_ERROR,fatal:n.type===Bt.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:n,networkDetails:r,stats:s})}handleNetworkError(e,n,i=!1,r,s){let o=`A network ${i?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===Bt.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===Bt.AUDIO_TRACK||e.type===Bt.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);me.warn(`[playlist-loader]: ${o}`);let l=Se.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case Bt.MANIFEST:l=i?Se.MANIFEST_LOAD_TIMEOUT:Se.MANIFEST_LOAD_ERROR,c=!0;break;case Bt.LEVEL:l=i?Se.LEVEL_LOAD_TIMEOUT:Se.LEVEL_LOAD_ERROR,c=!1;break;case Bt.AUDIO_TRACK:l=i?Se.AUDIO_TRACK_LOAD_TIMEOUT:Se.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case Bt.SUBTITLE_TRACK:l=i?Se.SUBTITLE_TRACK_LOAD_TIMEOUT:Se.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const h={type:gt.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:a,networkDetails:n,stats:s};if(r){const f=(n==null?void 0:n.url)||e.url;h.response=fi({url:f,data:void 0},r)}this.hls.trigger(W.ERROR,h)}handlePlaylistLoaded(e,n,i,r,s,o){const a=this.hls,{type:l,level:c,id:u,groupId:h,deliveryDirectives:f}=r,d=Cy(n,r),p=n_(r),m=typeof r.level=="number"&&p===ft.MAIN?c:void 0;if(!e.fragments.length){const y=new Error("No Segments found in Playlist");a.trigger(W.ERROR,{type:gt.NETWORK_ERROR,details:Se.LEVEL_EMPTY_ERROR,fatal:!1,url:d,error:y,reason:y.message,response:n,context:r,level:m,parent:p,networkDetails:s,stats:i});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const v=e.playlistParsingError;if(v){a.trigger(W.ERROR,{type:gt.NETWORK_ERROR,details:Se.LEVEL_PARSING_ERROR,fatal:!1,url:d,error:v,reason:v.message,response:n,context:r,level:m,parent:p,networkDetails:s,stats:i});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Bt.MANIFEST:case Bt.LEVEL:a.trigger(W.LEVEL_LOADED,{details:e,level:m||0,id:u||0,stats:i,networkDetails:s,deliveryDirectives:f});break;case Bt.AUDIO_TRACK:a.trigger(W.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:h||"",stats:i,networkDetails:s,deliveryDirectives:f});break;case Bt.SUBTITLE_TRACK:a.trigger(W.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:h||"",stats:i,networkDetails:s,deliveryDirectives:f});break}}}function p3(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function g3(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){me.debug(`[texttrack-utils]: ${i}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,t.addCue(r)}catch(r){me.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}n==="disabled"&&(t.mode=n)}function au(t){const e=t.mode;if(e==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)t.removeCue(t.cues[n]);e==="disabled"&&(t.mode=e)}function v2(t,e,n,i){const r=t.mode;if(r==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const s=bM(t.cues,e,n);for(let o=0;o<s.length;o++)(!i||i(s[o]))&&t.removeCue(s[o])}r==="disabled"&&(t.mode=r)}function xM(t,e){if(e<t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let i=0,r=n;for(;i<=r;){const s=Math.floor((r+i)/2);if(e<t[s].startTime)r=s-1;else if(e>t[s].startTime&&i<n)i=s+1;else return s}return t[i].startTime-e<e-t[r].startTime?i:r}function bM(t,e,n){const i=[],r=xM(t,e);if(r>-1)for(let s=r,o=t.length;s<o;s++){const a=t[s];if(a.startTime>=e&&a.endTime<=n)i.push(a);else if(a.startTime>n)return i}return i}function O0(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(t[n])}return e}var Es={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const wM=.25;function x2(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function i_(t,e,n,i,r){let s=new t(e,n,"");try{s.value=i,r&&(s.type=r)}catch{s=new t(e,n,JSON.stringify(r?fi({type:r},i):i))}return s}const Up=(()=>{const t=x2();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Ry(t,e){return t.getTime()/1e3-e}function SM(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class _M{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(W.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(W.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,n){this.media=n.media}onMediaDetaching(){this.id3Track&&(au(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const i=e[n];if(i.kind==="metadata"&&i.label==="id3")return p3(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:r}}}=this;if(!i&&!r)return;const{samples:s}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=x2();if(o)for(let a=0;a<s.length;a++){const l=s[a].type;if(l===Es.emsg&&!i||!r)continue;const c=r3(s[a].data);if(c){const u=s[a].pts;let h=u+s[a].duration;h>Up&&(h=Up),h-u<=0&&(h=u+wM);for(let d=0;d<c.length;d++){const p=c[d];if(!i3(p)){this.updateId3CueEnds(u,l);const m=i_(o,u,h,p,l);m&&this.id3Track.addCue(m)}}}}}updateId3CueEnds(e,n){var i;const r=(i=this.id3Track)==null?void 0:i.cues;if(r)for(let s=r.length;s--;){const o=r[s];o.type===n&&o.startTime<e&&o.endTime===Up&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:i,type:r}){const{id3Track:s,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=o;if(s&&(a||l)){let c;r==="audio"?c=u=>u.type===Es.audioId3&&l:r==="video"?c=u=>u.type===Es.emsg&&a:c=u=>u.type===Es.audioId3&&l||u.type===Es.emsg&&a,v2(s,n,i,c)}}onLevelUpdated(e,{details:n}){if(!this.media||!n.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:i,id3Track:r}=this,{dateRanges:s}=n,o=Object.keys(s);if(r){const u=Object.keys(i).filter(h=>!o.includes(h));for(let h=u.length;h--;){const f=u[h];Object.keys(i[f].cues).forEach(d=>{r.removeCue(i[f].cues[d])}),delete i[f]}}const a=n.fragments[n.fragments.length-1];if(o.length===0||!Xe(a==null?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=a.programDateTime/1e3-a.start,c=x2();for(let u=0;u<o.length;u++){const h=o[u],f=s[h],d=Ry(f.startDate,l),p=i[h],m=(p==null?void 0:p.cues)||{};let v=(p==null?void 0:p.durationKnown)||!1,y=Up;const x=f.endDate;if(x)y=Ry(x,l),v=!0;else if(f.endOnNext&&!v){const E=o.reduce((T,D)=>{if(D!==f.id){const R=s[D];if(R.class===f.class&&R.startDate>f.startDate&&(!T||f.startDate<T.startDate))return R}return T},null);E&&(y=Ry(E.startDate,l),v=!0)}const b=Object.keys(f.attr);for(let E=0;E<b.length;E++){const T=b[E];if(!TD(T))continue;const D=m[T];if(D)v&&!p.durationKnown&&(D.endTime=y);else if(c){let R=f.attr[T];LD(T)&&(R=SM(R));const S=i_(c,d,y,{key:T,data:R},Es.dateRange);S&&(S.id=h,this.id3Track.addCue(S),m[T]=S)}}i[h]={cues:m,dateRange:f,durationKnown:v}}}}class EM{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:n}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:n,partHoldBack:i,targetduration:r}=e,{liveSyncDuration:s,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,l=this.hls.userConfig;let c=a&&i||n;(l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=s!==void 0?s:o*r);const u=r;return c+Math.min(this.stallCount*1,u)}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency,i=this.levelDetails;if(e===null||n===null||i===null)return null;const r=i.edge,s=e-n-this.edgeStalled,o=r-i.totalduration,a=r-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(o,s),a)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e,levelDetails:n}=this;if(!e||!n)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(W.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(W.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(W.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(W.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(W.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(W.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,n){var i;n.details===Se.BUFFER_STALLED_ERROR&&(this.stallCount++,(i=this.levelDetails)!=null&&i.live&&me.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:n}=this;if(!e||!n)return;this.currentTime=e.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:s}=this.config;if(!r||s===1||!n.live)return;const o=this.targetLatency;if(o===null)return;const a=i-o,l=Math.min(this.maxLatency,o+n.targetduration);if(a<l&&a>.05&&this.forwardBufferLength>1){const u=Math.min(2,Math.max(1,s)),h=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,h))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const b2=["NONE","TYPE-0","TYPE-1",null];function AM(t){return b2.indexOf(t)>-1}const Mg=["SDR","PQ","HLG"];function TM(t){return!!t&&Mg.indexOf(t)>-1}var B0={No:"",Yes:"YES",v2:"v2"};function r_(t){const{canSkipUntil:e,canSkipDateRanges:n,age:i}=t,r=i<e/2;return e&&r?n?B0.v2:B0.Yes:B0.No}class s_{constructor(e,n,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=i}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class Cu{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return o_(this._audioGroups,e)}hasSubtitleGroup(e){return o_(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(n)===-1&&i.push(n)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(n)===-1&&i.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function o_(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function Py(t,e){const n=e.startPTS;if(Xe(n)){let i=0,r;e.sn>t.sn?(i=n-t.start,r=t):(i=t.start-n,r=e),r.duration!==i&&(r.duration=i)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function m3(t,e,n,i,r,s){i-n<=0&&(me.warn("Fragment should have a positive duration",e),i=n+e.duration,s=r+e.duration);let a=n,l=i;const c=e.startPTS,u=e.endPTS;if(Xe(c)){const v=Math.abs(c-n);Xe(e.deltaPTS)?e.deltaPTS=Math.max(v,e.deltaPTS):e.deltaPTS=v,a=Math.max(n,c),n=Math.min(n,c),r=Math.min(r,e.startDTS),l=Math.min(i,u),i=Math.max(i,u),s=Math.max(s,e.endDTS)}const h=n-e.start;e.start!==0&&(e.start=n),e.duration=i-e.start,e.startPTS=n,e.maxStartPTS=a,e.startDTS=r,e.endPTS=i,e.minEndPTS=l,e.endDTS=s;const f=e.sn;if(!t||f<t.startSN||f>t.endSN)return 0;let d;const p=f-t.startSN,m=t.fragments;for(m[p]=e,d=p;d>0;d--)Py(m[d],m[d-1]);for(d=p;d<m.length-1;d++)Py(m[d],m[d+1]);return t.fragmentHint&&Py(m[m.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,h}function LM(t,e){let n=null;const i=t.fragments;for(let a=i.length-1;a>=0;a--){const l=i[a].initSegment;if(l){n=l;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let r;RM(t,e,(a,l,c,u)=>{if(e.skippedSegments&&l.cc!==a.cc){const h=a.cc-l.cc;for(let f=c;f<u.length;f++)u[f].cc+=h}Xe(a.startPTS)&&Xe(a.endPTS)&&(l.start=l.startPTS=a.startPTS,l.startDTS=a.startDTS,l.maxStartPTS=a.maxStartPTS,l.endPTS=a.endPTS,l.endDTS=a.endDTS,l.minEndPTS=a.minEndPTS,l.duration=a.endPTS-a.startPTS,l.duration&&(r=l),e.PTSKnown=e.alignedSliding=!0),l.elementaryStreams=a.elementaryStreams,l.loader=a.loader,l.stats=a.stats,a.initSegment&&(l.initSegment=a.initSegment,n=a.initSegment)});const s=e.fragments;if(n&&(e.fragmentHint?s.concat(e.fragmentHint):s).forEach(l=>{var c;l&&(!l.initSegment||l.initSegment.relurl===((c=n)==null?void 0:c.relurl))&&(l.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=s.some(a=>!a),e.deltaUpdateFailed){me.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let a=e.skippedSegments;a--;)s.shift();e.startSN=s[0].sn}else e.canSkipDateRanges&&(e.dateRanges=kM(t.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));e.startCC=e.fragments[0].cc,e.endCC=s[s.length-1].cc}CM(t.partList,e.partList,(a,l)=>{l.elementaryStreams=a.elementaryStreams,l.stats=a.stats}),r?m3(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):y3(t,e),s.length&&(e.totalduration=e.edge-s[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const a=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=a),e.driftEndTime=o,e.driftEnd=a}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function kM(t,e,n){const i=Jn({},t);return n&&n.forEach(r=>{delete i[r]}),Object.keys(e).forEach(r=>{const s=new Qk(e[r].attr,i[r]);s.isValid?i[r]=s:me.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[r].attr)}"`)}),i}function CM(t,e,n){if(t&&e){let i=0;for(let r=0,s=t.length;r<=s;r++){const o=t[r],a=e[r+i];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?n(o,a):i--}}}function RM(t,e,n){const i=e.skippedSegments,r=Math.max(t.startSN,e.startSN)-e.startSN,s=(t.fragmentHint?1:0)+(i?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let c=r;c<=s;c++){const u=l[o+c];let h=a[c];i&&!h&&c<i&&(h=e.fragments[c]=u),u&&h&&n(u,h,c,a)}}function y3(t,e){const n=e.startSN+e.skippedSegments-t.startSN,i=t.fragments;n<0||n>=i.length||w2(e,i[n].start)}function w2(t,e){if(e){const n=t.fragments;for(let i=t.skippedSegments;i<n.length;i++)n[i].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function PM(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const i=t.fragments;if(i.length&&n*4>e){const s=i[i.length-1].duration*1e3;s<n&&(n=s)}}else n/=2;return Math.round(n)}function NM(t,e,n){if(!(t!=null&&t.details))return null;const i=t.details;let r=i.fragments[e-i.startSN];return r||(r=i.fragmentHint,r&&r.sn===e)?r:e<i.startSN&&n&&n.sn===e?n:null}function a_(t,e,n){var i;return t!=null&&t.details?v3((i=t.details)==null?void 0:i.partList,e,n):null}function v3(t,e,n){if(t)for(let i=t.length;i--;){const r=t[i];if(r.index===n&&r.fragment.sn===e)return r}return null}function x3(t){t.forEach((e,n)=>{const{details:i}=e;i!=null&&i.fragments&&i.fragments.forEach(r=>{r.level=n})})}function Fg(t){switch(t.details){case Se.FRAG_LOAD_TIMEOUT:case Se.KEY_LOAD_TIMEOUT:case Se.LEVEL_LOAD_TIMEOUT:case Se.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function l_(t,e){const n=Fg(e);return t.default[`${n?"timeout":"error"}Retry`]}function $b(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function c_(t){return fi(fi({},t),{errorRetry:null,timeoutRetry:null})}function Og(t,e,n,i){if(!t)return!1;const r=i==null?void 0:i.code,s=e<t.maxNumRetry&&(IM(r)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,i,s):s}function IM(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}const b3={search:function(t,e){let n=0,i=t.length-1,r=null,s=null;for(;n<=i;){r=(n+i)/2|0,s=t[r];const o=e(s);if(o>0)n=r+1;else if(o<0)i=r-1;else return s}return null}};function DM(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!Xe(e))return null;const i=t[0].programDateTime;if(e<(i||0))return null;const r=t[t.length-1].endProgramDateTime;if(e>=(r||0))return null;n=n||0;for(let s=0;s<t.length;++s){const o=t[s];if(FM(e,n,o))return o}return null}function Bg(t,e,n=0,i=0,r=.005){let s=null;if(t){s=e[t.sn-e[0].sn+1]||null;const a=t.endDTS-n;a>0&&a<15e-7&&(n+=15e-7)}else n===0&&e[0].start===0&&(s=e[0]);if(s&&((!t||t.level===s.level)&&S2(n,i,s)===0||MM(s,t,Math.min(r,i))))return s;const o=b3.search(e,S2.bind(null,n,i));return o&&(o!==t||!s)?o:s}function MM(t,e,n){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const i=e.tagList.reduce((r,s)=>(s[0]==="INF"&&(r+=parseFloat(s[1])),r),n);return t.start<=i}return!1}function S2(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const i=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=t?1:n.start-i>t&&n.start?-1:0}function FM(t,e,n){const i=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-i>t}function OM(t,e){return b3.search(t,n=>n.cc<e?1:n.cc>e?-1:0)}var vi={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},vs={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class BM{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=me.log.bind(me,"[info]:"),this.warn=me.warn.bind(me,"[warning]:"),this.error=me.error.bind(me,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(W.ERROR,this.onError,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(W.ERROR,this.onError,this),e.off(W.ERROR,this.onErrorOut,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===ft.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var i,r;if(n.fatal)return;const s=this.hls,o=n.context;switch(n.details){case Se.FRAG_LOAD_ERROR:case Se.FRAG_LOAD_TIMEOUT:case Se.KEY_LOAD_ERROR:case Se.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case Se.FRAG_PARSING_ERROR:if((i=n.frag)!=null&&i.gap){n.errorAction={action:vi.DoNothing,flags:vs.None};return}case Se.FRAG_GAP:case Se.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=vi.SendAlternateToPenaltyBox;return}case Se.LEVEL_EMPTY_ERROR:case Se.LEVEL_PARSING_ERROR:{var a,l;const c=n.parent===ft.MAIN?n.level:s.loadLevel;n.details===Se.LEVEL_EMPTY_ERROR&&((a=n.context)!=null&&(l=a.levelDetails)!=null&&l.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,c):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,c))}return;case Se.LEVEL_LOAD_ERROR:case Se.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,o.level));return;case Se.AUDIO_TRACK_LOAD_ERROR:case Se.AUDIO_TRACK_LOAD_TIMEOUT:case Se.SUBTITLE_LOAD_ERROR:case Se.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const c=s.levels[s.loadLevel];if(c&&(o.type===Bt.AUDIO_TRACK&&c.hasAudioGroup(o.groupId)||o.type===Bt.SUBTITLE_TRACK&&c.hasSubtitleGroup(o.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,s.loadLevel),n.errorAction.action=vi.SendAlternateToPenaltyBox,n.errorAction.flags=vs.MoveAllAlternatesMatchingHost;return}}return;case Se.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=s.levels[s.loadLevel],u=c==null?void 0:c.attrs["HDCP-LEVEL"];u?n.errorAction={action:vi.SendAlternateToPenaltyBox,flags:vs.MoveAllAlternatesMatchingHDCP,hdcpLevel:u}:this.keySystemError(n)}return;case Se.BUFFER_ADD_CODEC_ERROR:case Se.REMUX_ALLOC_ERROR:case Se.BUFFER_APPEND_ERROR:n.errorAction=this.getLevelSwitchAction(n,(r=n.level)!=null?r:s.loadLevel);return;case Se.INTERNAL_EXCEPTION:case Se.BUFFER_APPENDING_ERROR:case Se.BUFFER_FULL_ERROR:case Se.LEVEL_SWITCH_ERROR:case Se.BUFFER_STALLED_ERROR:case Se.BUFFER_SEEK_OVER_HOLE:case Se.BUFFER_NUDGE_ON_STALL:n.errorAction={action:vi.DoNothing,flags:vs.None};return}n.type===gt.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(e){const n=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,n)}getPlaylistRetryOrSwitchAction(e,n){const i=this.hls,r=l_(i.config.playlistLoadPolicy,e),s=this.playlistError++;if(Og(r,s,Fg(e),e.response))return{action:vi.RetryRequest,flags:vs.None,retryConfig:r,retryCount:s};const a=this.getLevelSwitchAction(e,n);return r&&(a.retryConfig=r,a.retryCount=s),a}getFragRetryOrSwitchAction(e){const n=this.hls,i=this.getVariantLevelIndex(e.frag),r=n.levels[i],{fragLoadPolicy:s,keyLoadPolicy:o}=n.config,a=l_(e.details.startsWith("key")?o:s,e),l=n.levels.reduce((u,h)=>u+h.fragmentError,0);if(r&&(e.details!==Se.FRAG_GAP&&r.fragmentError++,Og(a,l,Fg(e),e.response)))return{action:vi.RetryRequest,flags:vs.None,retryConfig:a,retryCount:l};const c=this.getLevelSwitchAction(e,i);return a&&(c.retryConfig=a,c.retryCount=l),c}getLevelSwitchAction(e,n){const i=this.hls;n==null&&(n=i.loadLevel);const r=this.hls.levels[n];if(r){var s,o;const c=e.details;r.loadError++,c===Se.BUFFER_APPEND_ERROR&&r.fragmentError++;let u=-1;const{levels:h,loadLevel:f,minAutoLevel:d,maxAutoLevel:p}=i;i.autoLevelEnabled||(i.loadLevel=-1);const m=(s=e.frag)==null?void 0:s.type,y=(m===ft.AUDIO&&c===Se.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===Se.BUFFER_ADD_CODEC_ERROR||c===Se.BUFFER_APPEND_ERROR))&&h.some(({audioCodec:D})=>r.audioCodec!==D),b=e.sourceBufferName==="video"&&(c===Se.BUFFER_ADD_CODEC_ERROR||c===Se.BUFFER_APPEND_ERROR)&&h.some(({codecSet:D,audioCodec:R})=>r.codecSet!==D&&r.audioCodec===R),{type:E,groupId:T}=(o=e.context)!=null?o:{};for(let D=h.length;D--;){const R=(D+f)%h.length;if(R!==f&&R>=d&&R<=p&&h[R].loadError===0){var a,l;const S=h[R];if(c===Se.FRAG_GAP&&m===ft.MAIN&&e.frag){const C=h[R].details;if(C){const N=Bg(e.frag,C.fragments,e.frag.start);if(N!=null&&N.gap)continue}}else{if(E===Bt.AUDIO_TRACK&&S.hasAudioGroup(T)||E===Bt.SUBTITLE_TRACK&&S.hasSubtitleGroup(T))continue;if(m===ft.AUDIO&&(a=r.audioGroups)!=null&&a.some(C=>S.hasAudioGroup(C))||m===ft.SUBTITLE&&(l=r.subtitleGroups)!=null&&l.some(C=>S.hasSubtitleGroup(C))||y&&r.audioCodec===S.audioCodec||!y&&r.audioCodec!==S.audioCodec||b&&r.codecSet===S.codecSet)continue}u=R;break}}if(u>-1&&i.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:vi.SendAlternateToPenaltyBox,flags:vs.None,nextAutoLevel:u}}return{action:vi.SendAlternateToPenaltyBox,flags:vs.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var i;switch((i=n.errorAction)==null?void 0:i.action){case vi.DoNothing:break;case vi.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==Se.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,i=e.errorAction;if(!i)return;const{flags:r,hdcpLevel:s,nextAutoLevel:o}=i;switch(r){case vs.None:this.switchLevel(e,o);break;case vs.MoveAllAlternatesMatchingHDCP:s&&(n.maxHdcpLevel=b2[b2.indexOf(s)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}i.resolved||this.switchLevel(e,o)}switchLevel(e,n){n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class zb{constructor(e,n){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=me.log.bind(me,`${n}:`),this.warn=me.warn.bind(me,`${n}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n,i){const r=n==null?void 0:n.renditionReports;if(r){let s=-1;for(let o=0;o<r.length;o++){const a=r[o];let l;try{l=new self.URL(a.URI,n.url).href}catch(c){me.warn(`Could not construct new URL for Rendition Report: ${c}`),l=a.URI||""}if(l===e){s=o;break}else l===e.substring(0,l.length)&&(s=o)}if(s!==-1){const o=r[s],a=parseInt(o["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let l=parseInt(o["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const u=Math.min(n.age-n.partTarget,n.targetduration);l>=0&&u>n.partTarget&&(l+=1)}const c=i&&r_(i);return new s_(a,l>=0?l:void 0,c)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,n,i){const{details:r,stats:s}=n,o=self.performance.now(),a=s.loading.first?Math.max(0,o-s.loading.first):0;if(r.advancedDateTime=Date.now()-a,r.live||i!=null&&i.live){if(r.reloaded(i),i&&this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),i&&r.fragments.length>0&&LM(i,r),!this.canLoad||!r.live)return;let l,c,u;if(r.canBlockReload&&r.endSN&&r.advanced){const v=this.hls.config.lowLatencyMode,y=r.lastPartSn,x=r.endSN,b=r.lastPartIndex,E=b!==-1,T=y===x,D=v?0:b;E?(c=T?x+1:y,u=T?D:b+1):c=x+1;const R=r.age,S=R+r.ageHeader;let C=Math.min(S-r.partTarget,r.targetduration*1.5);if(C>0){if(i&&C>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${C} with playlist age: ${r.age}`),C=0;else{const N=Math.floor(C/r.targetduration);if(c+=N,u!==void 0){const k=Math.round(C%r.targetduration/r.partTarget);u+=k}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${R.toFixed(2)}s goal: ${C} skip sn ${N} to part ${u}`)}r.tuneInGoal=C}if(l=this.getDeliveryDirectives(r,n.deliveryDirectives,c,u),v||!T){this.loadPlaylist(l);return}}else(r.canBlockReload||r.canSkipUntil)&&(l=this.getDeliveryDirectives(r,n.deliveryDirectives,c,u));const h=this.hls.mainForwardBufferInfo,f=h?h.end-h.len:0,d=(r.edge-f)*1e3,p=PM(r,d);r.updated&&o>this.requestScheduled+p&&(this.requestScheduled=s.loading.start),c!==void 0&&r.canBlockReload?this.requestScheduled=s.loading.first+p-(r.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+p<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=p);let m=this.requestScheduled-o;m=Math.max(0,m),this.log(`reload live playlist ${e} in ${Math.round(m)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),m)}else this.clearTimer()}getDeliveryDirectives(e,n,i,r){let s=r_(e);return n!=null&&n.skip&&e.deltaUpdateFailed&&(i=n.msn,r=n.part,s=B0.No),new s_(i,r,s)}checkRetry(e){const n=e.details,i=Fg(e),r=e.errorAction,{action:s,retryCount:o=0,retryConfig:a}=r||{},l=!!r&&!!a&&(s===vi.RetryRequest||!r.resolved&&s===vi.SendAlternateToPenaltyBox);if(l){var c;if(this.requestScheduled=-1,o>=a.maxNumRetry)return!1;if(i&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const u=$b(a,o);this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" in ${u}ms`)}e.levelRetry=!0,r.resolved=!0}return l}}class Oc{constructor(e,n=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=i}sample(e,n){const i=Math.pow(this.alpha_,e);this.estimate_=n*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class jM{constructor(e,n,i,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Oc(e),this.fast_=new Oc(n),this.defaultTTFB_=r,this.ttfb_=new Oc(e)}update(e,n){const{slow_:i,fast_:r,ttfb_:s}=this;i.halfLife!==e&&(this.slow_=new Oc(e,i.getEstimate(),i.getTotalWeight())),r.halfLife!==n&&(this.fast_=new Oc(n,r.getEstimate(),r.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new Oc(e,s.getEstimate(),s.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const i=8*n,r=e/1e3,s=i/r;this.fast_.sample(r,s),this.slow_.sample(r,s)}sampleTTFB(e){const n=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const w3={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},u_={};function UM(t,e,n,i,r,s){const o=t.audioCodec?t.audioGroups:null,a=s==null?void 0:s.audioCodec,l=s==null?void 0:s.channels,c=l?parseInt(l):a?1/0:2;let u=null;if(o!=null&&o.length)try{o.length===1&&o[0]?u=e.groups[o[0]].channels:u=o.reduce((h,f)=>{if(f){const d=e.groups[f];if(!d)throw new Error(`Audio track group ${f} not found`);Object.keys(d.channels).forEach(p=>{h[p]=(h[p]||0)+d.channels[p]})}return h},{2:0})}catch{return!0}return t.videoCodec!==void 0&&(t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(i,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(r,8e6))||!!u&&Xe(c)&&Object.keys(u).some(h=>parseInt(h)>c)}function $M(t,e,n){const i=t.videoCodec,r=t.audioCodec;if(!i||!r||!n)return Promise.resolve(w3);const s={width:t.width,height:t.height,bitrate:Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)),framerate:t.frameRate||30},o=t.videoRange;o!=="SDR"&&(s.transferFunction=o.toLowerCase());const a=i.split(",").map(l=>({type:"media-source",video:fi(fi({},s),{},{contentType:qf(l,"video")})}));return r&&t.audioGroups&&t.audioGroups.forEach(l=>{var c;l&&((c=e.groups[l])==null||c.tracks.forEach(u=>{if(u.groupId===l){const h=u.channels||"",f=parseFloat(h);Xe(f)&&f>2&&a.push.apply(a,r.split(",").map(d=>({type:"media-source",audio:{contentType:qf(d,"audio"),channels:""+f}})))}}))}),Promise.all(a.map(l=>{const c=zM(l);return u_[c]||(u_[c]=n.decodingInfo(l))})).then(l=>({supported:!l.some(c=>!c.supported),configurations:a,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:a,decodingInfoResults:[],error:l}))}function zM(t){const{audio:e,video:n}=t,i=n||e;if(i){const r=i.contentType.split('"')[1];if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${r}_${Math.ceil(n.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${r}`}return""}function HM(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function VM(t,e){let n=!1,i=[];return t&&(n=t!=="SDR",i=[t]),e&&(i=e.allowedVideoRanges||Mg.slice(0),n=e.preferHDR!==void 0?e.preferHDR:HM(),n?i=i.filter(r=>r!=="SDR"):i=["SDR"]),{preferHDR:n,allowedVideoRanges:i}}function GM(t,e,n,i,r){const s=Object.keys(t),o=i==null?void 0:i.channels,a=i==null?void 0:i.audioCodec,l=o&&parseInt(o)===2;let c=!0,u=!1,h=1/0,f=1/0,d=1/0,p=0,m=[];const{preferHDR:v,allowedVideoRanges:y}=VM(e,r);for(let T=s.length;T--;){const D=t[s[T]];c=D.channels[2]>0,h=Math.min(h,D.minHeight),f=Math.min(f,D.minFramerate),d=Math.min(d,D.minBitrate);const R=y.filter(S=>D.videoRanges[S]>0);R.length>0&&(u=!0,m=R)}h=Xe(h)?h:0,f=Xe(f)?f:0;const x=Math.max(1080,h),b=Math.max(30,f);return d=Xe(d)?d:n,n=Math.max(d,n),u||(e=void 0,m=[]),{codecSet:s.reduce((T,D)=>{const R=t[D];if(D===T)return T;if(R.minBitrate>n)return To(D,`min bitrate of ${R.minBitrate} > current estimate of ${n}`),T;if(!R.hasDefaultAudio)return To(D,"no renditions with default or auto-select sound found"),T;if(a&&D.indexOf(a.substring(0,4))%5!==0)return To(D,`audio codec preference "${a}" not found`),T;if(o&&!l){if(!R.channels[o])return To(D,`no renditions with ${o} channel sound found (channels options: ${Object.keys(R.channels)})`),T}else if((!a||l)&&c&&R.channels[2]===0)return To(D,"no renditions with stereo sound found"),T;return R.minHeight>x?(To(D,`min resolution of ${R.minHeight} > maximum of ${x}`),T):R.minFramerate>b?(To(D,`min framerate of ${R.minFramerate} > maximum of ${b}`),T):m.some(S=>R.videoRanges[S]>0)?R.maxScore<p?(To(D,`max score of ${R.maxScore} < selected max of ${p}`),T):T&&(Ig(D)>=Ig(T)||R.fragmentError>t[T].fragmentError)?T:(p=R.maxScore,D):(To(D,`no variants with VIDEO-RANGE of ${JSON.stringify(m)} found`),T)},void 0),videoRanges:m,preferHDR:v,minFramerate:f,minBitrate:d}}function To(t,e){me.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function WM(t){return t.reduce((e,n)=>{let i=e.groups[n.groupId];i||(i=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(n);const r=n.channels||"2";return i.channels[r]=(i.channels[r]||0)+1,i.hasDefault=i.hasDefault||n.default,i.hasAutoSelect=i.hasAutoSelect||n.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function qM(t,e,n,i){return t.slice(n,i+1).reduce((r,s)=>{if(!s.codecSet)return r;const o=s.audioGroups;let a=r[s.codecSet];a||(r[s.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,s.bitrate);const l=Math.min(s.height,s.width);return a.minHeight=Math.min(a.minHeight,l),a.minFramerate=Math.min(a.minFramerate,s.frameRate),a.maxScore=Math.max(a.maxScore,s.score),a.fragmentError+=s.fragmentError,a.videoRanges[s.videoRange]=(a.videoRanges[s.videoRange]||0)+1,o&&o.forEach(c=>{if(!c)return;const u=e.groups[c];u&&(a.hasDefaultAudio=a.hasDefaultAudio||e.hasDefaultAudio?u.hasDefault:u.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(u.channels).forEach(h=>{a.channels[h]=(a.channels[h]||0)+u.channels[h]}))}),r},{})}function eo(t,e,n){if("attrs"in t){const i=e.indexOf(t);if(i!==-1)return i}for(let i=0;i<e.length;i++){const r=e[i];if(Bl(t,r,n))return i}return-1}function Bl(t,e,n){const{groupId:i,name:r,lang:s,assocLang:o,default:a}=t,l=t.forced;return(i===void 0||e.groupId===i)&&(r===void 0||e.name===r)&&(s===void 0||e.lang===s)&&(s===void 0||e.assocLang===o)&&(a===void 0||e.default===a)&&(l===void 0||e.forced===l)&&(!("characteristics"in t)||KM(t.characteristics||"",e.characteristics))&&(n===void 0||n(t,e))}function KM(t,e=""){const n=t.split(","),i=e.split(",");return n.length===i.length&&!n.some(r=>i.indexOf(r)===-1)}function _l(t,e){const{audioCodec:n,channels:i}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function YM(t,e,n,i,r){const s=e[i],a=e.reduce((f,d,p)=>{const m=d.uri;return(f[m]||(f[m]=[])).push(p),f},{})[s.uri];a.length>1&&(i=Math.max.apply(Math,a));const l=s.videoRange,c=s.frameRate,u=s.codecSet.substring(0,4),h=h_(e,i,f=>{if(f.videoRange!==l||f.frameRate!==c||f.codecSet.substring(0,4)!==u)return!1;const d=f.audioGroups,p=n.filter(m=>!d||d.indexOf(m.groupId)!==-1);return eo(t,p,r)>-1});return h>-1?h:h_(e,i,f=>{const d=f.audioGroups,p=n.filter(m=>!d||d.indexOf(m.groupId)!==-1);return eo(t,p,r)>-1})}function h_(t,e,n){for(let i=e;i>-1;i--)if(n(t[i]))return i;for(let i=e+1;i<t.length;i++)if(n(t[i]))return i;return-1}class XM{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:n,partCurrent:i,hls:r}=this,{autoLevelEnabled:s,media:o}=r;if(!n||!o)return;const a=performance.now(),l=i?i.stats:n.stats,c=i?i.duration:n.duration,u=a-l.loading.start,h=r.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||n.level<=h){this.clearTimer(),this._nextAutoLevel=-1;return}if(!s||o.paused||!o.playbackRate||!o.readyState)return;const f=r.mainForwardBufferInfo;if(f===null)return;const d=this.bwEstimator.getEstimateTTFB(),p=Math.abs(o.playbackRate);if(u<=Math.max(d,1e3*(c/(p*2))))return;const m=f.len/p,v=l.loading.first?l.loading.first-l.loading.start:-1,y=l.loaded&&v>-1,x=this.getBwEstimate(),b=r.levels,E=b[n.level],T=l.total||Math.max(l.loaded,Math.round(c*E.averageBitrate/8));let D=y?u-v:u;D<1&&y&&(D=Math.min(u,l.loaded*8/x));const R=y?l.loaded*1e3/D:0,S=R?(T-l.loaded)/R:T*8/x+d/1e3;if(S<=m)return;const C=R?R*8:x;let N=Number.POSITIVE_INFINITY,k;for(k=n.level-1;k>h;k--){const j=b[k].maxBitrate;if(N=this.getTimeToLoadFrag(d/1e3,C,c*j,!b[k].details),N<m)break}if(N>=S||N>c*10)return;r.nextLoadLevel=r.nextAutoLevel=k,y?this.bwEstimator.sample(u-Math.min(d,v),l.loaded):this.bwEstimator.sampleTTFB(u);const P=b[k].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>P&&this.resetEstimator(P),this.clearTimer(),me.warn(`[abr] Fragment ${n.sn}${i?" part "+i.index:""} of level ${n.level} is loading too slowly;
      Time to underbuffer: ${m.toFixed(3)} s
      Estimated load time for current fragment: ${S.toFixed(3)} s
      Estimated load time for down switch fragment: ${N.toFixed(3)} s
      TTFB estimate: ${v|0} ms
      Current BW estimate: ${Xe(x)?x|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${k} @ ${P|0} bps`),r.trigger(W.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:i,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(me.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new jM(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.FRAG_LOADING,this.onFragLoading,this),e.on(W.FRAG_LOADED,this.onFragLoaded,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this),e.on(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(W.LEVEL_LOADED,this.onLevelLoaded,this),e.on(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(W.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(W.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.FRAG_LOADING,this.onFragLoading,this),e.off(W.FRAG_LOADED,this.onFragLoaded,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this),e.off(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(W.LEVEL_LOADED,this.onLevelLoaded,this),e.off(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(W.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(W.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const i=n.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var r;this.fragCurrent=i,this.partCurrent=(r=n.part)!=null?r:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case Se.BUFFER_ADD_CODEC_ERROR:case Se.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Se.FRAG_LOAD_TIMEOUT:{const i=n.frag,{fragCurrent:r,partCurrent:s}=this;if(i&&r&&i.sn===r.sn&&i.level===r.level){const o=performance.now(),a=s?s.stats:i.stats,l=o-a.loading.start,c=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&c>-1){const h=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(h,c),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,n,i,r){const s=e+i/n,o=r?this.lastLevelLoadSec:0;return s+o}onLevelLoaded(e,n){const i=this.hls.config,{loading:r}=n.stats,s=r.end-r.start;Xe(s)&&(this.lastLevelLoadSec=s/1e3),n.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)}onFragLoaded(e,{frag:n,part:i}){const r=i?i.stats:n.stats;if(n.type===ft.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=i?i.duration:n.duration,o=this.hls.levels[n.level],a=(o.loaded?o.loaded.bytes:0)+r.loaded,l=(o.loaded?o.loaded.duration:0)+s;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(n.bitrateTest){const s={stats:r,frag:n,part:i,id:n.type};this.onFragBuffered(W.FRAG_BUFFERED,s),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:i,part:r}=n,s=r!=null&&r.stats.loaded?r.stats:i.stats;if(s.aborted||this.ignoreFragment(i))return;const o=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,s.loaded),s.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==ft.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,i=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,s=this.findBestLevel(i,n,e,0,r,1,1);if(s>-1)return s;const o=this.hls.firstLevel,a=Math.min(Math.max(o,n),e);return me.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=i&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,s)&&o[e].loadError<=o[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:i}=this,{maxAutoLevel:r,config:s,minAutoLevel:o}=i,a=n?n.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let u=s.abrBandWidthFactor,h=s.abrBandWidthUpFactor;if(c){const v=this.findBestLevel(l,o,r,c,0,u,h);if(v>=0)return v}let f=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay;if(!c){const v=this.bitrateTestDelay;v&&(f=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-v,me.info(`[abr] bitrate test took ${Math.round(1e3*v)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),u=h=1)}const d=this.findBestLevel(l,o,r,c,f,u,h);if(me.info(`[abr] ${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${d}`),d>-1)return d;const p=i.levels[o],m=i.levels[i.loadLevel];return(p==null?void 0:p.bitrate)<(m==null?void 0:m.bitrate)?o:i.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const i=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,i,r,s,o,a){var l;const c=r+s,u=this.lastLoadedFragLevel,h=u===-1?this.hls.firstLevel:u,{fragCurrent:f,partCurrent:d}=this,{levels:p,allAudioTracks:m,loadLevel:v,config:y}=this.hls;if(p.length===1)return 0;const x=p[h],b=!!(x!=null&&(l=x.details)!=null&&l.live),E=v===-1||u===-1;let T,D="SDR",R=(x==null?void 0:x.frameRate)||0;const{audioPreference:S,videoPreference:C}=y,N=this.audioTracksByGroup||(this.audioTracksByGroup=WM(m));if(E){if(this.firstSelection!==-1)return this.firstSelection;const H=this.codecTiers||(this.codecTiers=qM(p,N,n,i)),O=GM(H,D,e,S,C),{codecSet:$,videoRanges:z,minFramerate:B,minBitrate:X,preferHDR:te}=O;T=$,D=te?z[z.length-1]:z[0],R=B,e=Math.max(e,X),me.log(`[abr] picked start tier ${JSON.stringify(O)}`)}else T=x==null?void 0:x.codecSet,D=x==null?void 0:x.videoRange;const k=d?d.duration:f?f.duration:0,P=this.bwEstimator.getEstimateTTFB()/1e3,j=[];for(let H=i;H>=n;H--){var F;const O=p[H],$=H>h;if(!O)continue;if(y.useMediaCapabilities&&!O.supportedResult&&!O.supportedPromise){const K=navigator.mediaCapabilities;typeof(K==null?void 0:K.decodingInfo)=="function"&&UM(O,N,D,R,e,S)?(O.supportedPromise=$M(O,N,K),O.supportedPromise.then(Q=>{if(!this.hls)return;O.supportedResult=Q;const ee=this.hls.levels,oe=ee.indexOf(O);Q.error?me.warn(`[abr] MediaCapabilities decodingInfo error: "${Q.error}" for level ${oe} ${JSON.stringify(Q)}`):Q.supported||(me.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${oe} ${JSON.stringify(Q)}`),oe>-1&&ee.length>1&&(me.log(`[abr] Removing unsupported level ${oe}`),this.hls.removeLevel(oe)))})):O.supportedResult=w3}if(T&&O.codecSet!==T||D&&O.videoRange!==D||$&&R>O.frameRate||!$&&R>0&&R<O.frameRate||O.supportedResult&&!((F=O.supportedResult.decodingInfoResults)!=null&&F[0].smooth)){j.push(H);continue}const z=O.details,B=(d?z==null?void 0:z.partTarget:z==null?void 0:z.averagetargetduration)||k;let X;$?X=a*e:X=o*e;const te=k&&r>=k*2&&s===0?p[H].averageBitrate:p[H].maxBitrate,I=this.getTimeToLoadFrag(P,X,te*B,z===void 0);if(X>=te&&(H===u||O.loadError===0&&O.fragmentError===0)&&(I<=P||!Xe(I)||b&&!this.bitrateTestDelay||I<c)){const K=this.forcedAutoLevel;return H!==v&&(K===-1||K!==v)&&(j.length&&me.trace(`[abr] Skipped level(s) ${j.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${p[j[0]].codecs}" ${p[j[0]].videoRange}; not compatible with "${x.codecs}" ${D}`),me.info(`[abr] switch candidate:${h}->${H} adjustedbw(${Math.round(X)})-bitrate=${Math.round(X-te)} ttfb:${P.toFixed(1)} avgDuration:${B.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${I.toFixed(1)} firstSelection:${E} codecSet:${T} videoRange:${D} hls.loadLevel:${v}`)),E&&(this.firstSelection=H),H}}return-1}set nextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:i}=this.hls,r=Math.min(Math.max(e,i),n);this._nextAutoLevel!==r&&(this.nextAutoLevelKey="",this._nextAutoLevel=r)}}class JM{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var ui={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class QM{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(W.BUFFER_APPENDED,this.onBufferAppended,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this),e.on(W.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.BUFFER_APPENDED,this.onBufferAppended,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this),e.off(W.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const i=this.activePartLists[n];if(i)for(let r=i.length;r--;){const s=i[r];if(!s)break;const o=s.end;if(s.start<=e&&o!==null&&e<=o)return s}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){const{fragments:i}=this,r=Object.keys(i);for(let s=r.length;s--;){const o=i[r[s]];if((o==null?void 0:o.body.type)===n&&o.buffered){const a=o.body;if(a.start<=e&&e<=a.end)return a}}return null}detectEvictedFragments(e,n,i,r){this.timeRanges&&(this.timeRanges[e]=n);const s=(r==null?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a||s>=a.body.sn)return;if(!a.buffered&&!a.loaded){a.body.type===i&&this.removeFragment(a.body);return}const l=a.range[e];l&&l.time.some(c=>{const u=!this.isTimeBuffered(c.startPTS,c.endPTS,n);return u&&this.removeFragment(a.body),u})})}detectPartialFragments(e){const n=this.timeRanges,{frag:i,part:r}=e;if(!n||i.sn==="initSegment")return;const s=Bc(i),o=this.fragments[s];if(!o||o.buffered&&i.gap)return;const a=!i.relurl;Object.keys(n).forEach(l=>{const c=i.elementaryStreams[l];if(!c)return;const u=n[l],h=a||c.partial===!0;o.range[l]=this.getBufferedTimes(i,r,h,u)}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=i.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),$p(o)||this.removeParts(i.sn-1,i.type)):this.removeFragment(o.body)}removeParts(e,n){const i=this.activePartLists[n];i&&(this.activePartLists[n]=i.filter(r=>r.fragment.sn>=e))}fragBuffered(e,n){const i=Bc(e);let r=this.fragments[i];!r&&n&&(r=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,n,i,r){const s={time:[],partial:i},o=e.start,a=e.end,l=e.minEndPTS||a,c=e.maxStartPTS||o;for(let u=0;u<r.length;u++){const h=r.start(u)-this.bufferPadding,f=r.end(u)+this.bufferPadding;if(c>=h&&l<=f){s.time.push({startPTS:Math.max(o,r.start(u)),endPTS:Math.min(a,r.end(u))});break}else if(o<f&&a>h){const d=Math.max(o,r.start(u)),p=Math.min(a,r.end(u));p>d&&(s.partial=!0,s.time.push({startPTS:d,endPTS:p}))}else if(a<=h)break}return s}getPartialFragment(e){let n=null,i,r,s,o=0;const{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&$p(u)&&(r=u.body.start-a,s=u.body.end+a,e>=r&&e<=s&&(i=Math.min(e-r,s-e),o<=i&&(n=u.body,o=i)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||$p(n))}getState(e){const n=Bc(e),i=this.fragments[n];return i?i.buffered?$p(i)?ui.PARTIAL:ui.OK:ui.APPENDING:ui.NOT_LOADED}isTimeBuffered(e,n,i){let r,s;for(let o=0;o<i.length;o++){if(r=i.start(o)-this.bufferPadding,s=i.end(o)+this.bufferPadding,e>=r&&n<=s)return!0;if(n<=r)return!1}return!1}onFragLoaded(e,n){const{frag:i,part:r}=n;if(i.sn==="initSegment"||i.bitrateTest)return;const s=r?null:n,o=Bc(i);this.fragments[o]={body:i,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:i,part:r,timeRanges:s}=n;if(i.sn==="initSegment")return;const o=i.type;if(r){let a=this.activePartLists[o];a||(this.activePartLists[o]=a=[]),a.push(r)}this.timeRanges=s,Object.keys(s).forEach(a=>{const l=s[a];this.detectEvictedFragments(a,l,o,r)})}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=Bc(e);return!!this.fragments[n]}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,i,r,s){r&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a)return;const l=a.body;l.type!==i||r&&!l.gap||l.start<n&&l.end>e&&(a.buffered||s)&&this.removeFragment(l)})}removeFragment(e){const n=Bc(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const r=e.sn;this.activePartLists[e.type]=i.filter(s=>s.fragment.sn!==r)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function $p(t){var e,n,i;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((n=t.range.audio)==null?void 0:n.partial)||((i=t.range.audiovideo)==null?void 0:i.partial))}function Bc(t){return`${t.type}_${t.level}_${t.sn}`}const ZM={length:0,start:()=>0,end:()=>0};class dn{static isBuffered(e,n){try{if(e){const i=dn.getBuffered(e);for(let r=0;r<i.length;r++)if(n>=i.start(r)&&n<=i.end(r))return!0}}catch{}return!1}static bufferInfo(e,n,i){try{if(e){const r=dn.getBuffered(e),s=[];let o;for(o=0;o<r.length;o++)s.push({start:r.start(o),end:r.end(o)});return this.bufferedInfo(s,n,i)}}catch{}return{len:0,start:n,end:n,nextStart:void 0}}static bufferedInfo(e,n,i){n=Math.max(0,n),e.sort(function(c,u){const h=c.start-u.start;return h||u.end-c.end});let r=[];if(i)for(let c=0;c<e.length;c++){const u=r.length;if(u){const h=r[u-1].end;e[c].start-h<i?e[c].end>h&&(r[u-1].end=e[c].end):r.push(e[c])}else r.push(e[c])}else r=e;let s=0,o,a=n,l=n;for(let c=0;c<r.length;c++){const u=r[c].start,h=r[c].end;if(n+i>=u&&n<h)a=u,l=h,s=l-n;else if(n+i<u){o=u;break}}return{len:s,start:a||0,end:l||0,nextStart:o}}static getBuffered(e){try{return e.buffered}catch(n){return me.log("failed to get media.buffered",n),ZM}}}class Hb{constructor(e,n,i,r=0,s=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=zp(),this.buffering={audio:zp(),video:zp(),audiovideo:zp()},this.level=e,this.sn=n,this.id=i,this.size=r,this.part=s,this.partial=o}}function zp(){return{start:0,executeStart:0,executeEnd:0,end:0}}function j0(t,e){for(let i=0,r=t.length;i<r;i++){var n;if(((n=t[i])==null?void 0:n.cc)===e)return t[i]}return null}function e6(t,e,n){return!!(e&&(n.endCC>n.startCC||t&&t.cc<n.startCC))}function t6(t,e){const n=t.fragments,i=e.fragments;if(!i.length||!n.length){me.log("No fragments to align");return}const r=j0(n,i[0].cc);if(!r||r&&!r.startPTS){me.log("No frag in previous level to align on");return}return r}function f_(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function S3(t,e){const n=e.fragments;for(let i=0,r=n.length;i<r;i++)f_(n[i],t);e.fragmentHint&&f_(e.fragmentHint,t),e.alignedSliding=!0}function n6(t,e,n){e&&(i6(t,n,e),!n.alignedSliding&&e&&jg(n,e),!n.alignedSliding&&e&&!n.skippedSegments&&y3(e,n))}function i6(t,e,n){if(e6(t,n,e)){const i=t6(n,e);i&&Xe(i.start)&&(me.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),S3(i.start,e))}}function jg(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,i=e.fragments;if(!n.length||!i.length)return;let r,s;const o=Math.min(e.endCC,t.endCC);e.startCC<o&&t.startCC<o&&(r=j0(i,o),s=j0(n,o)),(!r||!s)&&(r=i[Math.floor(i.length/2)],s=j0(n,r.cc)||n[Math.floor(n.length/2)]);const a=r.programDateTime,l=s.programDateTime;if(!a||!l)return;const c=(l-a)/1e3-(s.start-r.start);S3(c,t)}const d_=Math.pow(2,17);class r6{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const i=e.url;if(!i)return Promise.reject(new Io({type:gt.NETWORK_ERROR,details:Se.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${i?"part list":"url"}`),networkDetails:null}));this.abort();const r=this.config,s=r.fLoader,o=r.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(d=>d[0]==="GAP")){l(g_(e));return}else e.gap=!1;const c=this.loader=e.loader=s?new s(r):new o(r),u=p_(e),h=c_(r.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:d_};e.stats=c.stats,c.load(u,f,{onSuccess:(d,p,m,v)=>{this.resetLoader(e,c);let y=d.data;m.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(y.slice(0,16)),y=y.slice(16)),a({frag:e,part:null,payload:y,networkDetails:v})},onError:(d,p,m,v)=>{this.resetLoader(e,c),l(new Io({type:gt.NETWORK_ERROR,details:Se.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:fi({url:i,data:void 0},d),error:new Error(`HTTP Error ${d.code} ${d.text}`),networkDetails:m,stats:v}))},onAbort:(d,p,m)=>{this.resetLoader(e,c),l(new Io({type:gt.NETWORK_ERROR,details:Se.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:m,stats:d}))},onTimeout:(d,p,m)=>{this.resetLoader(e,c),l(new Io({type:gt.NETWORK_ERROR,details:Se.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:m,stats:d}))},onProgress:(d,p,m,v)=>{n&&n({frag:e,part:null,payload:m,networkDetails:v})}})})}loadPart(e,n,i){this.abort();const r=this.config,s=r.fLoader,o=r.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){l(g_(e,n));return}const c=this.loader=e.loader=s?new s(r):new o(r),u=p_(e,n),h=c_(r.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:d_};n.stats=c.stats,c.load(u,f,{onSuccess:(d,p,m,v)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,n);const y={frag:e,part:n,payload:d.data,networkDetails:v};i(y),a(y)},onError:(d,p,m,v)=>{this.resetLoader(e,c),l(new Io({type:gt.NETWORK_ERROR,details:Se.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:fi({url:u.url,data:void 0},d),error:new Error(`HTTP Error ${d.code} ${d.text}`),networkDetails:m,stats:v}))},onAbort:(d,p,m)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,c),l(new Io({type:gt.NETWORK_ERROR,details:Se.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:m,stats:d}))},onTimeout:(d,p,m)=>{this.resetLoader(e,c),l(new Io({type:gt.NETWORK_ERROR,details:Se.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:m,stats:d}))}})})}updateStatsFromPart(e,n){const i=e.stats,r=n.stats,s=r.total;if(i.loaded+=r.loaded,s){const l=Math.round(e.duration/n.duration),c=Math.min(Math.round(i.loaded/s),l),h=(l-c)*Math.round(i.loaded/c);i.total=i.loaded+h}else i.total=Math.max(i.loaded,i.total);const o=i.loading,a=r.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function p_(t,e=null){const n=e||t,i={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},r=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if(Xe(r)&&Xe(s)){var o;let a=r,l=s;if(t.sn==="initSegment"&&((o=t.decryptdata)==null?void 0:o.method)==="AES-128"){const c=s-r;c%16&&(l=s+(16-c%16)),r!==0&&(i.resetIV=!0,a=r-16)}i.rangeStart=a,i.rangeEnd=l}return i}function g_(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),i={type:gt.MEDIA_ERROR,details:Se.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(i.part=e),(e||t).stats.aborted=!0,new Io(i)}class Io extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class s6{constructor(e,n){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=n}decrypt(e,n){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e)}}class o6{constructor(e,n){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=n}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function a6(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?Ol(t,0,e-n):t}class l6{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),i=new Uint32Array(4);for(let r=0;r<4;r++)i[r]=n.getUint32(r*4);return i}initTable(){const e=this.sBox,n=this.invSBox,i=this.subMix,r=i[0],s=i[1],o=i[2],a=i[3],l=this.invSubMix,c=l[0],u=l[1],h=l[2],f=l[3],d=new Uint32Array(256);let p=0,m=0,v=0;for(v=0;v<256;v++)v<128?d[v]=v<<1:d[v]=v<<1^283;for(v=0;v<256;v++){let y=m^m<<1^m<<2^m<<3^m<<4;y=y>>>8^y&255^99,e[p]=y,n[y]=p;const x=d[p],b=d[x],E=d[b];let T=d[y]*257^y*16843008;r[p]=T<<24|T>>>8,s[p]=T<<16|T>>>16,o[p]=T<<8|T>>>24,a[p]=T,T=E*16843009^b*65537^x*257^p*16843008,c[y]=T<<24|T>>>8,u[y]=T<<16|T>>>16,h[y]=T<<8|T>>>24,f[y]=T,p?(p=x^d[d[d[E^x]]],m^=d[d[m]]):p=m=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let i=!0,r=0;for(;r<n.length&&i;)i=n[r]===this.key[r],r++;if(i)return;this.key=n;const s=this.keySize=n.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const o=this.ksRows=(s+6+1)*4;let a,l;const c=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),h=this.sBox,f=this.rcon,d=this.invSubMix,p=d[0],m=d[1],v=d[2],y=d[3];let x,b;for(a=0;a<o;a++){if(a<s){x=c[a]=n[a];continue}b=x,a%s===0?(b=b<<8|b>>>24,b=h[b>>>24]<<24|h[b>>>16&255]<<16|h[b>>>8&255]<<8|h[b&255],b^=f[a/s|0]<<24):s>6&&a%s===4&&(b=h[b>>>24]<<24|h[b>>>16&255]<<16|h[b>>>8&255]<<8|h[b&255]),c[a]=x=(c[a-s]^b)>>>0}for(l=0;l<o;l++)a=o-l,l&3?b=c[a]:b=c[a-4],l<4||a<=4?u[l]=b:u[l]=p[h[b>>>24]]^m[h[b>>>16&255]]^v[h[b>>>8&255]]^y[h[b&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,i){const r=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],c=a[1],u=a[2],h=a[3],f=this.uint8ArrayToUint32Array_(i);let d=f[0],p=f[1],m=f[2],v=f[3];const y=new Int32Array(e),x=new Int32Array(y.length);let b,E,T,D,R,S,C,N,k,P,j,F,H,O;const $=this.networkToHostOrderSwap;for(;n<y.length;){for(k=$(y[n]),P=$(y[n+1]),j=$(y[n+2]),F=$(y[n+3]),R=k^s[0],S=F^s[1],C=j^s[2],N=P^s[3],H=4,O=1;O<r;O++)b=l[R>>>24]^c[S>>16&255]^u[C>>8&255]^h[N&255]^s[H],E=l[S>>>24]^c[C>>16&255]^u[N>>8&255]^h[R&255]^s[H+1],T=l[C>>>24]^c[N>>16&255]^u[R>>8&255]^h[S&255]^s[H+2],D=l[N>>>24]^c[R>>16&255]^u[S>>8&255]^h[C&255]^s[H+3],R=b,S=E,C=T,N=D,H=H+4;b=o[R>>>24]<<24^o[S>>16&255]<<16^o[C>>8&255]<<8^o[N&255]^s[H],E=o[S>>>24]<<24^o[C>>16&255]<<16^o[N>>8&255]<<8^o[R&255]^s[H+1],T=o[C>>>24]<<24^o[N>>16&255]<<16^o[R>>8&255]<<8^o[S&255]^s[H+2],D=o[N>>>24]<<24^o[R>>16&255]<<16^o[S>>8&255]<<8^o[C&255]^s[H+3],x[n]=$(b^d),x[n+1]=$(D^p),x[n+2]=$(T^m),x[n+3]=$(E^v),d=k,p=P,m=j,v=F,n=n+4}return x.buffer}}const c6=16;class Vb{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?a6(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,i){return this.useSoftware?new Promise((r,s)=>{this.softwareDecrypt(new Uint8Array(e),n,i);const o=this.flush();o?r(o.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,i)}softwareDecrypt(e,n,i){const{currentIV:r,currentResult:s,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=rs(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;r&&(i=r);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new l6),l.expandKey(n);const c=s;return this.currentResult=l.decrypt(a.buffer,0,i),this.currentIV=Ol(a,-16).buffer,c||null}webCryptoDecrypt(e,n,i){if(this.key!==n||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,n,i));this.key=n,this.fastAesKey=new o6(this.subtle,n)}return this.fastAesKey.expandKey().then(r=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new s6(this.subtle,new Uint8Array(i)).decrypt(e.buffer,r)):Promise.reject(new Error("web crypto not initialized"))).catch(r=>(me.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,n,i)))}onWebCryptoError(e,n,i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,i);const r=this.flush();if(r)return r.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let n=e;const i=e.length-e.length%c6;return i!==e.length&&(n=Ol(e,0,i),this.remainderData=Ol(e,i)),n}logOnce(e){this.logEnabled&&(me.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const u6={toString:function(t){let e="";const n=t.length;for(let i=0;i<n;i++)e+=`[${t.start(i).toFixed(3)}-${t.end(i).toFixed(3)}]`;return e}},Ne={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Gb extends JM{constructor(e,n,i,r,s){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Ne.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=s,this.logPrefix=r,this.log=me.log.bind(me,`${r}:`),this.warn=me.warn.bind(me,`${r}:`),this.hls=e,this.fragmentLoader=new r6(e.config),this.keyLoader=i,this.fragmentTracker=n,this.config=e.config,this.decrypter=new Vb(e.config),e.on(W.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ne.STOPPED}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,n){if(n.live||e.nextStart||!e.end||!this.media)return!1;const i=n.partList;if(i!=null&&i.length){const s=i[i.length-1];return dn.isBuffered(this.media,s.start+s.duration/2)}const r=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,n){const i=this.media=this.mediaBuffer=n.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);const r=this.config;this.levels&&r.autoStartLoad&&this.state===Ne.STOPPED&&this.startLoad(r.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:n,media:i,mediaBuffer:r,state:s}=this,o=i?i.currentTime:0,a=dn.bufferInfo(r||i,o,e.maxBufferHole);if(this.log(`media seeking to ${Xe(o)?o.toFixed(3):o}, state: ${s}`),this.state===Ne.ENDED)this.resetLoadingState();else if(n){const l=e.maxFragLookUpTolerance,c=n.start-l,u=n.start+n.duration+l;if(!a.len||u<a.start||c>a.end){const h=o>u;(o<c||h)&&(h&&n.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}i&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),!this.loadedmetadata&&!a.len&&(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(W.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=Ne.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,i){this._loadFragForPlayback(e,n,i)}_loadFragForPlayback(e,n,i){const r=s=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${s.part?" p: "+s.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,n,i,r).then(s=>{if(!s)return;const o=this.state;if(this.fragContextChanged(e)){(o===Ne.FRAG_LOADING||!this.fragCurrent&&o===Ne.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=Ne.IDLE);return}"payload"in s&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(W.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===Ne.STOPPED||this.state===Ne.ERROR||(this.warn(`Frag error: ${(s==null?void 0:s.message)||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:i}=this;if(i.getState(e)===ui.APPENDING){const s=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,s),a=Math.max(e.duration,o?o.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(a,e.duration))&&i.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===ui.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,n,i=null){if(!(e-n))return;const r={startOffset:e,endOffset:n,type:i};this.hls.trigger(W.BUFFER_FLUSHING,r)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(i=>{if(!i||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:r}=this,{payload:s}=i,o=e.decryptdata;if(s&&s.byteLength>0&&o!=null&&o.key&&o.iv&&o.method==="AES-128"){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),o.key.buffer,o.iv.buffer).catch(l=>{throw r.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const c=self.performance.now();return r.trigger(W.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:a,tdecrypt:c}}),i.payload=l,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===Ne.STOPPED||this.state===Ne.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state=Ne.IDLE,e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){var i,r,s,o;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.playlistType===ft.MAIN?"level":"track"} ${e.level} (frag:[${((i=e.startPTS)!=null?i:NaN).toFixed(3)}-${((r=e.endPTS)!=null?r:NaN).toFixed(3)}] > buffer:${a?u6.toString(dn.getBuffered(a)):"(detached)"})`),e.sn!=="initSegment"){var l;if(e.type!==ft.SUBTITLE){const u=e.elementaryStreams;if(!Object.keys(u).some(h=>!!u[h])){this.state=Ne.IDLE;return}}const c=(l=this.levels)==null?void 0:l[e.level];c!=null&&c.fragmentError&&(this.log(`Resetting level fragment error count of ${c.fragmentError} on frag buffered`),c.fragmentError=0)}this.state=Ne.IDLE,a&&(!this.loadedmetadata&&e.type==ft.MAIN&&a.buffered.length&&((s=this.fragCurrent)==null?void 0:s.sn)===((o=this.fragPrevious)==null?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:i,part:r,partsLoaded:s}=e,o=!s||s.length===0||s.some(l=>!l),a=new Hb(i.level,i.sn,i.stats.chunkCount+1,0,r?r.index:-1,!o);n.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,i=null,r){var s;const o=n==null?void 0:n.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)?(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=Ne.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(u=>{if(!this.fragContextChanged(u.frag))return this.hls.trigger(W.KEY_LOADED,u),this.state===Ne.KEY_LOADING&&(this.state=Ne.IDLE),u}),this.hls.trigger(W.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments),i=Math.max(e.start,i||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const u=o.partList;if(u&&r){i>e.end&&o.fragmentHint&&(e=o.fragmentHint);const h=this.getNextPart(u,e,i);if(h>-1){const f=u[h];this.log(`Loading part sn: ${e.sn} p: ${f.index} cc: ${e.cc} of playlist [${o.startSN}-${o.endSN}] parts [0-${h}-${u.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=f.start+f.duration,this.state=Ne.FRAG_LOADING;let d;return a?d=a.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,f,n,r)).catch(p=>this.handleFragLoadError(p)):d=this.doFragPartsLoad(e,f,n,r).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(W.FRAG_LOADING,{frag:e,part:f,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):d}else if(!e.url||this.loadedEndOfParts(u,i))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${o?"of ["+o.startSN+"-"+o.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(i.toFixed(3))}`),Xe(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ne.FRAG_LOADING;const l=this.config.progressive;let c;return l&&a?c=a.then(u=>!u||this.fragContextChanged(u==null?void 0:u.frag)?null:this.fragmentLoader.load(e,r)).catch(u=>this.handleFragLoadError(u)):c=Promise.all([this.fragmentLoader.load(e,l?r:void 0),a]).then(([u])=>(!l&&u&&r&&r(u),u)).catch(u=>this.handleFragLoadError(u)),this.hls.trigger(W.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,n,i,r){return new Promise((s,o)=>{var a;const l=[],c=(a=i.details)==null?void 0:a.partList,u=h=>{this.fragmentLoader.loadPart(e,h,r).then(f=>{l[h.index]=f;const d=f.part;this.hls.trigger(W.FRAG_LOADED,f);const p=a_(i,e.sn,h.index+1)||v3(c,e.sn,h.index+1);if(p)u(p);else return s({frag:e,part:d,partsLoaded:l})}).catch(o)};u(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===Se.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(W.ERROR,n)}else this.hls.trigger(W.ERROR,{type:gt.OTHER_ERROR,details:Se.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==Ne.PARSING){!this.fragCurrent&&this.state!==Ne.STOPPED&&this.state!==Ne.ERROR&&(this.state=Ne.IDLE);return}const{frag:i,part:r,level:s}=n,o=self.performance.now();i.stats.parsing.end=o,r&&(r.stats.parsing.end=o),this.updateLevelTiming(i,r,s,e.partial)}getCurrentContext(e){const{levels:n,fragCurrent:i}=this,{level:r,sn:s,part:o}=e;if(!(n!=null&&n[r]))return this.warn(`Levels object was unset while buffering fragment ${s} of level ${r}. The current chunk will not be buffered.`),null;const a=n[r],l=o>-1?a_(a,s,o):null,c=l?l.fragment:NM(a,s,i);return c?(i&&i!==c&&(c.stats=i.stats),{frag:c,part:l,level:a}):null}bufferFragmentData(e,n,i,r,s){var o;if(!e||this.state!==Ne.PARSING)return;const{data1:a,data2:l}=e;let c=a;if(a&&l&&(c=rs(a,l)),!((o=c)!=null&&o.length))return;const u={type:e.type,frag:n,part:i,chunkMeta:r,parent:n.type,data:c};if(this.hls.trigger(W.BUFFER_APPENDING,u),e.dropped&&e.independent&&!i){if(s)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!dn.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const i=n.currentTime,r=dn.bufferInfo(n,i,0),s=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),a=Math.max(Math.min(e.start-o,r.end-o),i+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,n){const i=this.getLoadPosition();return Xe(i)?this.getFwdBufferInfoAtPos(e,i,n):null}getFwdBufferInfoAtPos(e,n,i){const{config:{maxBufferHole:r}}=this,s=dn.bufferInfo(e,n,r);if(s.len===0&&s.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(n,i);if(o&&s.nextStart<o.end)return dn.bufferInfo(e,n,Math.max(s.nextStart,r))}return s}getMaxBufferLength(e){const{config:n}=this;let i;return e?i=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):i=n.maxBufferLength,Math.min(i,n.maxMaxBufferLength)}reduceMaxBufferLength(e,n){const i=this.config,r=Math.max(Math.min(e-n,i.maxBufferLength),n),s=Math.max(e-n*3,i.maxMaxBufferLength/2,r);return s>=r?(i.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,n=ft.MAIN){const i=this.fragmentTracker.getAppendedFrag(e,ft.MAIN);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,n){const i=n.fragments,r=i.length;if(!r)return null;const{config:s}=this,o=i[0].start;let a;if(n.live){const l=s.initialLiveManifestSize;if(r<l)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${l})`),null;(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o)&&(a=this.getInitialLiveFragment(n,i),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=o&&(a=i[0]);if(!a){const l=s.lowLatencyMode?n.partEnd:n.fragmentEnd;a=this.getFragmentAtPosition(e,l,n)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,n){const i=this.fragmentTracker.getState(e);return(i===ui.OK||i===ui.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,i,r,s){const o=e.gap,a=this.getNextFragment(this.nextLoadPosition,n);if(a===null)return a;if(e=a,o&&e&&!e.gap&&i.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,r);if(l!==null&&i.len+l.len>=s)return this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,i){let r=-1,s=!1,o=!0;for(let a=0,l=e.length;a<l;a++){const c=e[a];if(o=o&&!c.independent,r>-1&&i<c.start)break;const u=c.loaded;u?r=-1:(s||c.independent||o)&&c.fragment===n&&(r=a),s=u}return r}loadedEndOfParts(e,n){const i=e[e.length-1];return i&&n>i.start&&i.loaded}getInitialLiveFragment(e,n){const i=this.fragPrevious;let r=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),r=DM(n,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const s=i.sn+1;if(s>=e.startSN&&s<=e.endSN){const o=n[s-e.startSN];i.cc===o.cc&&(r=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=OM(n,i.cc),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(r=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,n,i){const{config:r}=this;let{fragPrevious:s}=this,{fragments:o,endSN:a}=i;const{fragmentHint:l}=i,{maxFragLookUpTolerance:c}=r,u=i.partList,h=!!(r.lowLatencyMode&&u!=null&&u.length&&l);h&&l&&!this.bitrateTest&&(o=o.concat(l),a=l.sn);let f;if(e<n){const d=e>n-c?0:c;f=Bg(s,o,e,d)}else f=o[o.length-1];if(f){const d=f.sn-i.startSN,p=this.fragmentTracker.getState(f);if((p===ui.OK||p===ui.PARTIAL&&f.gap)&&(s=f),s&&f.sn===s.sn&&(!h||u[0].fragment.sn>f.sn)&&s&&f.level===s.level){const v=o[d+1];f.sn<a&&this.fragmentTracker.getState(v)!==ui.OK?f=v:f=null}}return f}synchronizeToLiveEdge(e){const{config:n,media:i}=this;if(!i)return;const r=this.hls.liveSyncPosition,s=i.currentTime,o=e.fragments[0].start,a=e.edge,l=s>=o-n.maxFragLookUpTolerance&&s<=a;if(r!==null&&i.duration>r&&(s<r||!l)){const c=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;(!l&&i.readyState<4||s<a-c)&&(this.loadedmetadata||(this.nextLoadPosition=r),i.readyState&&(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${r.toFixed(3)}`),i.currentTime=r))}}alignPlaylists(e,n,i){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const s=e.fragments[0].start,o=!n,a=e.alignedSliding&&Xe(s);if(o||!a&&!s){const{fragPrevious:l}=this;n6(l,i,e);const c=e.fragments[0].start;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} prev-sn: ${l?l.sn:"na"} fragments: ${r}`),c}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let i=this.startPosition;if(i<n&&(i=-1),i===-1||this.lastCurrentTime===-1){const r=this.startTimeOffset!==null,s=r?this.startTimeOffset:e.startTimeOffset;s!==null&&Xe(s)?(i=n+s,s<0&&(i+=e.totalduration),i=Math.min(Math.max(n,i),n+e.totalduration),this.log(`Start time offset ${s} found in ${r?"multivariant":"media"} playlist, adjust startPosition to ${i}`),this.startPosition=i):e.live?i=this.hls.liveSyncPosition||n:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i}getLoadPosition(){const{media:e}=this;let n=0;return this.loadedmetadata&&e?n=e.currentTime:this.nextLoadPosition&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,n){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${n?" part "+n.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Ne.FRAG_LOADING_WAITING_RETRY)&&(this.state=Ne.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const u=this.getCurrentContext(n.chunkMeta);u&&(n.frag=u.frag)}const i=n.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var r;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(r=this.fragCurrent)==null?void 0:r.url}`);return}const s=n.details===Se.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(i,!0);const o=n.errorAction,{action:a,retryCount:l=0,retryConfig:c}=o||{};if(o&&a===vi.RetryRequest&&c){this.resetStartWhenNotLoaded(this.levelLastLoaded);const u=$b(c,l);this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${n.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${u}ms`),o.resolved=!0,this.retryDate=self.performance.now()+u,this.state=Ne.FRAG_LOADING_WAITING_RETRY}else if(c&&o)if(this.resetFragmentErrors(e),l<c.maxNumRetry)!s&&a!==vi.RemoveAlternatePermanently&&(o.resolved=!0);else{me.warn(`${n.details} reached or exceeded max retry (${l})`);return}else(o==null?void 0:o.action)===vi.SendAlternateToPenaltyBox?this.state=Ne.WAITING_LEVEL:this.state=Ne.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===Ne.PARSING||this.state===Ne.PARSED){const n=e.frag,i=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,i),s=r&&r.len>.5;s&&this.reduceMaxBufferLength(r.len,(n==null?void 0:n.duration)||10);const o=!s;return o&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${i} buffer`),n&&(this.fragmentTracker.removeFragment(n),this.nextLoadPosition=n.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===ft.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Ne.STOPPED&&(this.state=Ne.IDLE)}afterBufferFlushed(e,n,i){if(!e)return;const r=dn.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,r,i),this.state===Ne.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Ne.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const n=e?e.details:null;n!=null&&n.live?(this.startPosition=-1,this.setStartPosition(n,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,i,r){var s;const o=i.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const u=e.elementaryStreams[c];if(u){const h=u.endPTS-u.startPTS;if(h<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${h})`),l||!1;const f=r?0:m3(o,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS);return this.hls.trigger(W.LEVEL_PTS_UPDATED,{details:o,level:i,drift:f,type:c,frag:e,start:u.startPTS,end:u.endPTS}),!0}return l},!1)&&((s=this.transmuxer)==null?void 0:s.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(i.fragmentError===0&&(i.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of level "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=Ne.PARSED,this.hls.trigger(W.FRAG_PARSED,{frag:e,part:n})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}class _3{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let i;if(e.length)e.length===1?i=e[0]:i=h6(e,n);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}}function h6(t,e){const n=new Uint8Array(e);let i=0;for(let r=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function f6(){return typeof __HLS_WORKER_BUNDLE__=="function"}function d6(){const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t);return{worker:new self.Worker(e),objectURL:e}}function p6(t){const e=new self.URL(t,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function Ks(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Wb{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,i,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,i){}demux(e,n){this.cachedData&&(e=rs(this.cachedData,e),this.cachedData=null);let i=Gf(e,0),r=i?i.length:0,s;const o=this._audioTrack,a=this._id3Track,l=i?Ub(i):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Xe(l))&&(this.basePTS=g6(l,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Es.audioId3,duration:Number.POSITIVE_INFINITY});r<c;){if(this.canParse(e,r)){const u=this.appendFrame(o,e,r);u?(this.frameIndex++,this.lastPTS=u.sample.pts,r+=u.length,s=r):r=c}else FD(e,r)?(i=Gf(e,r),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Es.audioId3,duration:Number.POSITIVE_INFINITY}),r+=i.length,s=r):r++;if(r===c&&s!==c){const u=Ol(e,s);this.cachedData?this.cachedData=rs(this.cachedData,u):this.cachedData=u}}return{audioTrack:o,videoTrack:Ks(),id3Track:a,textTrack:Ks()}}demuxSampleAes(e,n,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:Ks(),id3Track:this._id3Track,textTrack:Ks()}}destroy(){}}const g6=(t,e,n)=>{if(Xe(t))return t*90;const i=n?n.baseTime*9e4/n.timescale:0;return e*9e4+i};function m6(t,e,n,i){let r,s,o,a;const l=navigator.userAgent.toLowerCase(),c=i,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=((e[n+2]&192)>>>6)+1;const h=(e[n+2]&60)>>>2;if(h>u.length-1){const f=new Error(`invalid ADTS sampling index:${h}`);t.emit(W.ERROR,W.ERROR,{type:gt.MEDIA_ERROR,details:Se.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message});return}return o=(e[n+2]&1)<<2,o|=(e[n+3]&192)>>>6,me.log(`manifest codec:${i}, ADTS type:${r}, samplingIndex:${h}`),/firefox/i.test(l)?h>=6?(r=5,a=new Array(4),s=h-3):(r=2,a=new Array(2),s=h):l.indexOf("android")!==-1?(r=2,a=new Array(2),s=h):(r=5,a=new Array(4),i&&(i.indexOf("mp4a.40.29")!==-1||i.indexOf("mp4a.40.5")!==-1)||!i&&h>=6?s=h-3:((i&&i.indexOf("mp4a.40.2")!==-1&&(h>=6&&o===1||/vivaldi/i.test(l))||!i&&o===1)&&(r=2,a=new Array(2)),s=h)),a[0]=r<<3,a[0]|=(h&14)>>1,a[1]|=(h&1)<<7,a[1]|=o<<3,r===5&&(a[1]|=(s&14)>>1,a[2]=(s&1)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:u[h],channelCount:o,codec:"mp4a.40."+r,manifestCodec:c}}function E3(t,e){return t[e]===255&&(t[e+1]&246)===240}function A3(t,e){return t[e+1]&1?7:9}function qb(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function y6(t,e){return e+5<t.length}function Ug(t,e){return e+1<t.length&&E3(t,e)}function v6(t,e){return y6(t,e)&&E3(t,e)&&qb(t,e)<=t.length-e}function x6(t,e){if(Ug(t,e)){const n=A3(t,e);if(e+n>=t.length)return!1;const i=qb(t,e);if(i<=n)return!1;const r=e+i;return r===t.length||Ug(t,r)}return!1}function T3(t,e,n,i,r){if(!t.samplerate){const s=m6(e,n,i,r);if(!s)return;t.config=s.config,t.samplerate=s.samplerate,t.channelCount=s.channelCount,t.codec=s.codec,t.manifestCodec=s.manifestCodec,me.log(`parsed codec:${t.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function L3(t){return 1024*9e4/t}function b6(t,e){const n=A3(t,e);if(e+n<=t.length){const i=qb(t,e)-n;if(i>0)return{headerLength:n,frameLength:i}}}function k3(t,e,n,i,r){const s=L3(t.samplerate),o=i+r*s,a=b6(e,n);let l;if(a){const{frameLength:h,headerLength:f}=a,d=f+h,p=Math.max(0,n+d-e.length);p?(l=new Uint8Array(d-f),l.set(e.subarray(n+f,e.length),0)):l=e.subarray(n+f,n+d);const m={unit:l,pts:o};return p||t.samples.push(m),{sample:m,length:d,missing:p}}const c=e.length-n;return l=new Uint8Array(c),l.set(e.subarray(n,e.length),0),{sample:{unit:l,pts:o},length:c,missing:-1}}let Hp=null;const w6=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],S6=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],_6=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],E6=[0,1,1,4];function C3(t,e,n,i,r){if(n+24>e.length)return;const s=R3(e,n);if(s&&n+s.frameLength<=e.length){const o=s.samplesPerFrame*9e4/s.sampleRate,a=i+r*o,l={unit:e.subarray(n,n+s.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function R3(t,e){const n=t[e+1]>>3&3,i=t[e+1]>>1&3,r=t[e+2]>>4&15,s=t[e+2]>>2&3;if(n!==1&&r!==0&&r!==15&&s!==3){const o=t[e+2]>>1&1,a=t[e+3]>>6,l=n===3?3-i:i===3?3:4,c=w6[l*14+r-1]*1e3,h=S6[(n===3?0:n===2?1:2)*3+s],f=a===3?1:2,d=_6[n][i],p=E6[i],m=d*8*p,v=Math.floor(d*c/h+o)*p;if(Hp===null){const b=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Hp=b?parseInt(b[1]):0}return!!Hp&&Hp<=87&&i===2&&c>=224e3&&a===0&&(t[e+3]=t[e+3]|128),{sampleRate:h,channelCount:f,frameLength:v,samplesPerFrame:m}}}function Kb(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function P3(t,e){return e+1<t.length&&Kb(t,e)}function A6(t,e){return Kb(t,e)&&4<=t.length-e}function N3(t,e){if(e+1<t.length&&Kb(t,e)){const i=R3(t,e);let r=4;i!=null&&i.frameLength&&(r=i.frameLength);const s=e+r;return s===t.length||P3(t,s)}return!1}class T6 extends Wb{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,i,r){super.resetInitSegment(e,n,i,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=Gf(e,0);let i=(n==null?void 0:n.length)||0;if(N3(e,i))return!1;for(let r=e.length;i<r;i++)if(x6(e,i))return me.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return v6(e,n)}appendFrame(e,n,i){T3(e,this.observer,n,i,e.manifestCodec);const r=k3(e,n,i,this.basePTS,this.frameIndex);if(r&&r.missing===0)return r}}const L6=/\/emsg[-/]ID3/i;class k6{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,i,r){const s=this.videoTrack=Ks("video",1),o=this.audioTrack=Ks("audio",1),a=this.txtTrack=Ks("text",1);if(this.id3Track=Ks("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=l3(e);if(l.video){const{id:c,timescale:u,codec:h}=l.video;s.id=c,s.timescale=a.timescale=u,s.codec=h}if(l.audio){const{id:c,timescale:u,codec:h}=l.audio;o.id=c,o.timescale=u,o.codec=h}a.id=s3.text,s.sampleDuration=0,s.duration=o.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return GD(e)}demux(e,n){this.timeOffset=n;let i=e;const r=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=rs(this.remainderData,e));const a=ZD(i);this.remainderData=a.remainder,r.samples=a.valid||new Uint8Array}else r.samples=i;const o=this.extractID3Track(r,n);return s.samples=zS(n,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,i=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(n,this.timeOffset);return i.samples=zS(e,n),{videoTrack:n,audioTrack:Ks(),id3Track:r,textTrack:Ks()}}extractID3Track(e,n){const i=this.id3Track;if(e.samples.length){const r=Et(e.samples,["emsg"]);r&&r.forEach(s=>{const o=nM(s);if(L6.test(o.schemeIdUri)){const a=Xe(o.presentationTime)?o.presentationTime/o.timeScale:n+o.presentationTimeDelta/o.timeScale;let l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=o.payload;i.samples.push({data:c,len:c.byteLength,dts:a,pts:a,type:Es.emsg,duration:l})}})}return i}demuxSampleAes(e,n,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const I3=(t,e)=>{let n=0,i=5;e+=i;const r=new Uint32Array(1),s=new Uint32Array(1),o=new Uint8Array(1);for(;i>0;){o[0]=t[e];const a=Math.min(i,8),l=8-a;s[0]=4278190080>>>24+l<<l,r[0]=(o[0]&s[0])>>l,n=n?n<<a|r[0]:r[0],e+=1,i-=a}return n};class C6 extends Wb{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,i,r){super.resetInitSegment(e,n,i,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,i){const r=D3(e,n,i,this.basePTS,this.frameIndex);if(r!==-1)return{sample:e.samples[e.samples.length-1],length:r,missing:0}}static probe(e){if(!e)return!1;const n=Gf(e,0);if(!n)return!1;const i=n.length;return e[i]===11&&e[i+1]===119&&Ub(n)!==void 0&&I3(e,i)<16}}function D3(t,e,n,i,r){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const s=e[n+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],l=e[n+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+s]*2;if(n+u>e.length)return-1;const h=e[n+6]>>5;let f=0;h===2?f+=2:(h&1&&h!==1&&(f+=2),h&4&&(f+=2));const d=(e[n+6]<<8|e[n+7])>>12-f&1,m=[2,1,2,3,3,4,4,5][h]+d,v=e[n+5]>>3,y=e[n+5]&7,x=new Uint8Array([s<<6|v<<1|y>>2,(y&3)<<6|h<<3|d<<2|l>>4,l<<4&224]),b=1536/a*9e4,E=i+r*b,T=e.subarray(n,n+u);return t.config=x,t.channelCount=m,t.samplerate=a,t.samples.push({unit:T,pts:E}),u}class R6{constructor(){this.VideoSample=null}createVideoSample(e,n,i,r){return{key:e,frame:!1,pts:n,dts:i,units:[],debug:r,length:0}}getLastNalUnit(e){var n;let i=this.VideoSample,r;if((!i||i.units.length===0)&&(i=e[e.length-1]),(n=i)!=null&&n.units){const s=i.units;r=s[s.length-1]}return r}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const i=n.samples,r=i.length;if(r){const s=i[r-1];e.pts=s.pts,e.dts=s.dts}else{n.dropped++;return}}n.samples.push(e)}e.debug.length&&me.log(e.pts+"/"+e.dts+":"+e.debug)}}class m_{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,i=e.byteLength-n,r=new Uint8Array(4),s=Math.min(4,n);if(s===0)throw new Error("no bytes available");r.set(e.subarray(i,i+s)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const i=this.word>>>32-n;if(e>32&&me.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?i<<n|this.readBits(n):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let n=8,i=8,r;for(let s=0;s<e;s++)i!==0&&(r=this.readEG(),i=(n+r+256)%256),n=i===0?n:i}readSPS(){let e=0,n=0,i=0,r=0,s,o,a;const l=this.readUByte.bind(this),c=this.readBits.bind(this),u=this.readUEG.bind(this),h=this.readBoolean.bind(this),f=this.skipBits.bind(this),d=this.skipEG.bind(this),p=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);l();const v=l();if(c(5),f(3),l(),p(),v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128){const D=u();if(D===3&&f(1),p(),p(),f(1),h())for(o=D!==3?8:12,a=0;a<o;a++)h()&&(a<6?m(16):m(64))}p();const y=u();if(y===0)u();else if(y===1)for(f(1),d(),d(),s=u(),a=0;a<s;a++)d();p(),f(1);const x=u(),b=u(),E=c(1);E===0&&f(1),f(1),h()&&(e=u(),n=u(),i=u(),r=u());let T=[1,1];if(h()&&h())switch(l()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:{T=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((x+1)*16-e*2-n*2),height:(2-E)*(b+1)*16-(E?2:4)*(i+r),pixelRatio:T}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class P6 extends R6{parseAVCPES(e,n,i,r,s){const o=this.parseAVCNALu(e,i.data);let a=this.VideoSample,l,c=!1;i.data=null,a&&o.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"")),o.forEach(u=>{var h;switch(u.type){case 1:{let m=!1;l=!0;const v=u.data;if(c&&v.length>4){const y=new m_(v).readSliceType();(y===2||y===4||y===7||y===9)&&(m=!0)}if(m){var f;(f=a)!=null&&f.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),a.frame=!0,a.key=m;break}case 5:l=!0,(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts,"")),a.key=!0,a.frame=!0;break;case 6:{l=!0,u3(u.data,1,i.pts,n.samples);break}case 7:{var d,p;l=!0,c=!0;const m=u.data,y=new m_(m).readSPS();if(!e.sps||e.width!==y.width||e.height!==y.height||((d=e.pixelRatio)==null?void 0:d[0])!==y.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==y.pixelRatio[1]){e.width=y.width,e.height=y.height,e.pixelRatio=y.pixelRatio,e.sps=[m],e.duration=s;const x=m.subarray(1,4);let b="avc1.";for(let E=0;E<3;E++){let T=x[E].toString(16);T.length<2&&(T="0"+T),b+=T}e.codec=b}break}case 8:l=!0,e.pps=[u.data];break;case 9:l=!0,e.audFound=!0,a&&this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"");break;case 12:l=!0;break;default:l=!1,a&&(a.debug+="unknown NAL "+u.type+" ");break}a&&l&&a.units.push(u)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}parseAVCNALu(e,n){const i=n.byteLength;let r=e.naluState||0;const s=r,o=[];let a=0,l,c,u,h=-1,f=0;for(r===-1&&(h=0,f=n[0]&31,r=0,a=1);a<i;){if(l=n[a++],!r){r=l?0:1;continue}if(r===1){r=l?0:2;continue}if(!l)r=3;else if(l===1){if(c=a-r-1,h>=0){const d={data:n.subarray(h,c),type:f};o.push(d)}else{const d=this.getLastNalUnit(e.samples);d&&(s&&a<=4-s&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-s)),c>0&&(d.data=rs(d.data,n.subarray(0,c)),d.state=0))}a<i?(u=n[a]&31,h=a,f=u,r=0):r=-1}else r=0}if(h>=0&&r>=0){const d={data:n.subarray(h,i),type:f,state:r};o.push(d)}if(o.length===0){const d=this.getLastNalUnit(e.samples);d&&(d.data=rs(d.data,n))}return e.naluState=r,o}}class N6{constructor(e,n,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new Vb(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,n,i){const r=e[n].unit;if(r.length<=16)return;const s=r.subarray(16,r.length-r.length%16),o=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(o).then(a=>{const l=new Uint8Array(a);r.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,i)})}decryptAacSamples(e,n,i){for(;;n++){if(n>=e.length){i();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(n);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)i.set(e.subarray(s,s+16),r);return i}getAvcDecryptedUnit(e,n){const i=new Uint8Array(n);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)e.set(i.subarray(r,r+16),s);return e}decryptAvcSample(e,n,i,r,s){const o=h3(s.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(e,n,i+1,r)})}decryptAvcSamples(e,n,i,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,i=0){if(n>=e.length){r();return}const s=e[n].units;for(;!(i>=s.length);i++){const o=s[i];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,n,i,r,o),!this.decrypter.isSync()))return}}}}const li=188;class Sa{constructor(e,n,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=i,this.videoParser=new P6}static probe(e){const n=Sa.syncOffset(e);return n>0&&me.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const n=e.length;let i=Math.min(li*5,n-li)+1,r=0;for(;r<i;){let s=!1,o=-1,a=0;for(let l=r;l<n;l+=li)if(e[l]===71&&(n-l===li||e[l+li]===71)){if(a++,o===-1&&(o=l,o!==0&&(i=Math.min(o+li*99,e.length-li)+1)),s||(s=_2(e,l)===0),s&&a>1&&(o===0&&a>2||l+li>i))return o}else{if(a)return-1;break}r++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:s3[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,i,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Sa.createTrack("video"),this._audioTrack=Sa.createTrack("audio",r),this._id3Track=Sa.createTrack("id3"),this._txtTrack=Sa.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=i,this._duration=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:i}=this;e&&(e.pesData=null),n&&(n.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,i=!1,r=!1){i||(this.sampleAes=null);let s;const o=this._videoTrack,a=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=o.pid,h=o.pesData,f=a.pid,d=l.pid,p=a.pesData,m=l.pesData,v=null,y=this.pmtParsed,x=this._pmtId,b=e.length;if(this.remainderData&&(e=rs(this.remainderData,e),b=e.length,this.remainderData=null),b<li&&!r)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};const E=Math.max(0,Sa.syncOffset(e));b-=(b-E)%li,b<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,b,e.buffer.byteLength-b));let T=0;for(let R=E;R<b;R+=li)if(e[R]===71){const S=!!(e[R+1]&64),C=_2(e,R),N=(e[R+3]&48)>>4;let k;if(N>1){if(k=R+5+e[R+4],k===R+li)continue}else k=R+4;switch(C){case u:S&&(h&&(s=jc(h))&&this.videoParser.parseAVCPES(o,c,s,!1,this._duration),h={data:[],size:0}),h&&(h.data.push(e.subarray(k,R+li)),h.size+=R+li-k);break;case f:if(S){if(p&&(s=jc(p)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,s);break;case"mp3":this.parseMPEGPES(a,s);break;case"ac3":this.parseAC3PES(a,s);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(k,R+li)),p.size+=R+li-k);break;case d:S&&(m&&(s=jc(m))&&this.parseID3PES(l,s),m={data:[],size:0}),m&&(m.data.push(e.subarray(k,R+li)),m.size+=R+li-k);break;case 0:S&&(k+=e[k]+1),x=this._pmtId=I6(e,k);break;case x:{S&&(k+=e[k]+1);const P=D6(e,k,this.typeSupported,i,this.observer);u=P.videoPid,u>0&&(o.pid=u,o.segmentCodec=P.segmentVideoCodec),f=P.audioPid,f>0&&(a.pid=f,a.segmentCodec=P.segmentAudioCodec),d=P.id3Pid,d>0&&(l.pid=d),v!==null&&!y&&(me.warn(`MPEG-TS PMT found at ${R} after unknown PID '${v}'. Backtracking to sync byte @${E} to parse all TS packets.`),v=null,R=E-188),y=this.pmtParsed=!0;break}case 17:case 8191:break;default:v=C;break}}else T++;T>0&&$g(this.observer,new Error(`Found ${T} TS packet/s that do not start with 0x47`)),o.pesData=h,a.pesData=p,l.pesData=m;const D={audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};return r&&this.extractRemainingSamples(D),D}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:i,id3Track:r,textTrack:s}=e,o=i.pesData,a=n.pesData,l=r.pesData;let c;if(o&&(c=jc(o))?(this.videoParser.parseAVCPES(i,s,c,!0,this._duration),i.pesData=null):i.pesData=o,a&&(c=jc(a))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,c);break;case"mp3":this.parseMPEGPES(n,c);break;case"ac3":this.parseAC3PES(n,c);break}n.pesData=null}else a!=null&&a.size&&me.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=a;l&&(c=jc(l))?(this.parseID3PES(r,c),r.pesData=null):r.pesData=l}demuxSampleAes(e,n,i){const r=this.demux(e,i,!0,!this.config.progressive),s=this.sampleAes=new N6(this.observer,this.config,n);return this.decrypt(r,s)}decrypt(e,n){return new Promise(i=>{const{audioTrack:r,videoTrack:s}=e;r.samples&&r.segmentCodec==="aac"?n.decryptAacSamples(r.samples,0,()=>{s.samples?n.decryptAvcSamples(s.samples,0,0,()=>{i(e)}):i(e)}):s.samples&&n.decryptAvcSamples(s.samples,0,0,()=>{i(e)})})}destroy(){this._duration=0}parseAACPES(e,n){let i=0;const r=this.aacOverFlow;let s=n.data;if(r){this.aacOverFlow=null;const h=r.missing,f=r.sample.unit.byteLength;if(h===-1)s=rs(r.sample.unit,s);else{const d=f-h;r.sample.unit.set(s.subarray(0,h),d),e.samples.push(r.sample),i=r.missing}}let o,a;for(o=i,a=s.length;o<a-1&&!Ug(s,o);o++);if(o!==i){let h;const f=o<a-1;if(f?h=`AAC PES did not start with ADTS header,offset:${o}`:h="No ADTS header found in AAC PES",$g(this.observer,new Error(h),f),!f)return}T3(e,this.observer,s,o,this.audioCodec);let l;if(n.pts!==void 0)l=n.pts;else if(r){const h=L3(e.samplerate);l=r.sample.pts+h}else{me.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;o<a;)if(u=k3(e,s,o,l,c),o+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;o<a-1&&!Ug(s,o);o++);}parseMPEGPES(e,n){const i=n.data,r=i.length;let s=0,o=0;const a=n.pts;if(a===void 0){me.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<r;)if(P3(i,o)){const l=C3(e,i,o,a,s);if(l)o+=l.length,s++;else break}else o++}parseAC3PES(e,n){{const i=n.data,r=n.pts;if(r===void 0){me.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=i.length;let o=0,a=0,l;for(;a<s&&(l=D3(e,i,a,r,o++))>0;)a+=l}}parseID3PES(e,n){if(n.pts===void 0){me.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const i=Jn({},n,{type:this._videoTrack?Es.emsg:Es.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function _2(t,e){return((t[e+1]&31)<<8)+t[e+2]}function I6(t,e){return(t[e+10]&31)<<8|t[e+11]}function D6(t,e,n,i,r){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(t[e+1]&15)<<8|t[e+2],a=e+3+o-4,l=(t[e+10]&15)<<8|t[e+11];for(e+=12+l;e<a;){const c=_2(t,e),u=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!i){Ny("ADTS AAC");break}case 15:s.audioPid===-1&&(s.audioPid=c);break;case 21:s.id3Pid===-1&&(s.id3Pid=c);break;case 219:if(!i){Ny("H.264");break}case 27:s.videoPid===-1&&(s.videoPid=c,s.segmentVideoCodec="avc");break;case 3:case 4:!n.mpeg&&!n.mp3?me.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=c,s.segmentAudioCodec="mp3");break;case 193:if(!i){Ny("AC-3");break}case 129:n.ac3?s.audioPid===-1&&(s.audioPid=c,s.segmentAudioCodec="ac3"):me.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&u>0){let h=e+5,f=u;for(;f>2;){switch(t[h]){case 106:n.ac3!==!0?me.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=c,s.segmentAudioCodec="ac3");break}const p=t[h+1]+2;h+=p,f-=p}}break;case 194:case 135:return $g(r,new Error("Unsupported EC-3 in M2TS found")),s;case 36:return $g(r,new Error("Unsupported HEVC in M2TS found")),s}e+=u+5}return s}function $g(t,e,n){me.warn(`parsing error: ${e.message}`),t.emit(W.ERROR,W.ERROR,{type:gt.MEDIA_ERROR,details:Se.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:e,reason:e.message})}function Ny(t){me.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function jc(t){let e=0,n,i,r,s,o;const a=t.data;if(!t||t.size===0)return null;for(;a[0].length<19&&a.length>1;)a[0]=rs(a[0],a[1]),a.splice(1,1);if(n=a[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(i=(n[4]<<8)+n[5],i&&i>t.size-6)return null;const c=n[7];c&192&&(s=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,c&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,s-o>60*9e4&&(me.warn(`${Math.round((s-o)/9e4)}s delta between PTS and DTS, align them`),s=o)):o=s),r=n[8];let u=r+9;if(t.size<=u)return null;t.size-=u;const h=new Uint8Array(t.size);for(let f=0,d=a.length;f<d;f++){n=a[f];let p=n.byteLength;if(u)if(u>p){u-=p;continue}else n=n.subarray(u),p-=u,u=0;h.set(n,e),e+=p}return i&&(i-=r+3),{data:h,pts:s,dts:o,len:i}}return null}class M6 extends Wb{resetInitSegment(e,n,i,r){super.resetInitSegment(e,n,i,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=Gf(e,0);let i=(n==null?void 0:n.length)||0;if(n&&e[i]===11&&e[i+1]===119&&Ub(n)!==void 0&&I3(e,i)<=16)return!1;for(let r=e.length;i<r;i++)if(N3(e,i))return me.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return A6(e,n)}appendFrame(e,n,i){if(this.basePTS!==null)return C3(e,n,i,this.basePTS,this.frameIndex)}}class y_{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ga=Math.pow(2,32)-1;class xe{static init(){xe.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in xe.types)xe.types.hasOwnProperty(e)&&(xe.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);xe.HDLR_TYPES={video:n,audio:i};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);xe.STTS=xe.STSC=xe.STCO=s,xe.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),xe.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),xe.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),xe.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);xe.FTYP=xe.box(xe.types.ftyp,o,l,o,a),xe.DINF=xe.box(xe.types.dinf,xe.box(xe.types.dref,r))}static box(e,...n){let i=8,r=n.length;const s=r;for(;r--;)i+=n[r].byteLength;const o=new Uint8Array(i);for(o[0]=i>>24&255,o[1]=i>>16&255,o[2]=i>>8&255,o[3]=i&255,o.set(e,4),r=0,i=8;r<s;r++)o.set(n[r],i),i+=n[r].byteLength;return o}static hdlr(e){return xe.box(xe.types.hdlr,xe.HDLR_TYPES[e])}static mdat(e){return xe.box(xe.types.mdat,e)}static mdhd(e,n){n*=e;const i=Math.floor(n/(ga+1)),r=Math.floor(n%(ga+1));return xe.box(xe.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,r>>24,r>>16&255,r>>8&255,r&255,85,196,0,0]))}static mdia(e){return xe.box(xe.types.mdia,xe.mdhd(e.timescale,e.duration),xe.hdlr(e.type),xe.minf(e))}static mfhd(e){return xe.box(xe.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?xe.box(xe.types.minf,xe.box(xe.types.smhd,xe.SMHD),xe.DINF,xe.stbl(e)):xe.box(xe.types.minf,xe.box(xe.types.vmhd,xe.VMHD),xe.DINF,xe.stbl(e))}static moof(e,n,i){return xe.box(xe.types.moof,xe.mfhd(e),xe.traf(i,n))}static moov(e){let n=e.length;const i=[];for(;n--;)i[n]=xe.trak(e[n]);return xe.box.apply(null,[xe.types.moov,xe.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(xe.mvex(e)))}static mvex(e){let n=e.length;const i=[];for(;n--;)i[n]=xe.trex(e[n]);return xe.box.apply(null,[xe.types.mvex,...i])}static mvhd(e,n){n*=e;const i=Math.floor(n/(ga+1)),r=Math.floor(n%(ga+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,r>>24,r>>16&255,r>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return xe.box(xe.types.mvhd,s)}static sdtp(e){const n=e.samples||[],i=new Uint8Array(4+n.length);let r,s;for(r=0;r<n.length;r++)s=n[r].flags,i[r+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return xe.box(xe.types.sdtp,i)}static stbl(e){return xe.box(xe.types.stbl,xe.stsd(e),xe.box(xe.types.stts,xe.STTS),xe.box(xe.types.stsc,xe.STSC),xe.box(xe.types.stsz,xe.STSZ),xe.box(xe.types.stco,xe.STCO))}static avc1(e){let n=[],i=[],r,s,o;for(r=0;r<e.sps.length;r++)s=e.sps[r],o=s.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(s));for(r=0;r<e.pps.length;r++)s=e.pps[r],o=s.byteLength,i.push(o>>>8&255),i.push(o&255),i=i.concat(Array.prototype.slice.call(s));const a=xe.box(xe.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(i))),l=e.width,c=e.height,u=e.pixelRatio[0],h=e.pixelRatio[1];return xe.box(xe.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,xe.box(xe.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),xe.box(xe.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,h>>24,h>>16&255,h>>8&255,h&255])))}static esds(e){const n=e.config.length;return new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const n=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return xe.box(xe.types.mp4a,xe.audioStsd(e),xe.box(xe.types.esds,xe.esds(e)))}static mp3(e){return xe.box(xe.types[".mp3"],xe.audioStsd(e))}static ac3(e){return xe.box(xe.types["ac-3"],xe.audioStsd(e),xe.box(xe.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?xe.box(xe.types.stsd,xe.STSD,xe.mp3(e)):e.segmentCodec==="ac3"?xe.box(xe.types.stsd,xe.STSD,xe.ac3(e)):xe.box(xe.types.stsd,xe.STSD,xe.mp4a(e)):xe.box(xe.types.stsd,xe.STSD,xe.avc1(e))}static tkhd(e){const n=e.id,i=e.duration*e.timescale,r=e.width,s=e.height,o=Math.floor(i/(ga+1)),a=Math.floor(i%(ga+1));return xe.box(xe.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,r&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,n){const i=xe.sdtp(e),r=e.id,s=Math.floor(n/(ga+1)),o=Math.floor(n%(ga+1));return xe.box(xe.types.traf,xe.box(xe.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])),xe.box(xe.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255])),xe.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,xe.box(xe.types.trak,xe.tkhd(e),xe.mdia(e))}static trex(e){const n=e.id;return xe.box(xe.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const i=e.samples||[],r=i.length,s=12+16*r,o=new Uint8Array(s);let a,l,c,u,h,f;for(n+=8+s,o.set([e.type==="video"?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,r&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),a=0;a<r;a++)l=i[a],c=l.duration,u=l.size,h=l.flags,f=l.cts,o.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,h.degradPrio&61440,h.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*a);return xe.box(xe.types.trun,o)}static initSegment(e){xe.types||xe.init();const n=xe.moov(e);return rs(xe.FTYP,n)}}xe.types=void 0;xe.HDLR_TYPES=void 0;xe.STTS=void 0;xe.STSC=void 0;xe.STCO=void 0;xe.STSZ=void 0;xe.VMHD=void 0;xe.SMHD=void 0;xe.STSD=void 0;xe.FTYP=void 0;xe.DINF=void 0;const M3=9e4;function Yb(t,e,n=1,i=!1){const r=t*e*n;return i?Math.round(r):r}function F6(t,e,n=1,i=!1){return Yb(t,e,1/n,i)}function kh(t,e=!1){return Yb(t,1e3,1/M3,e)}function O6(t,e=1){return Yb(t,M3,1/e)}const B6=10*1e3,v_=1024,j6=1152,U6=1536;let Uc=null,Iy=null;class U0{constructor(e,n,i,r=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=i,this.ISGenerated=!1,Uc===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Uc=o?parseInt(o[1]):0}if(Iy===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);Iy=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){me.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){me.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){me.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const i=e[0].pts,r=e.reduce((s,o)=>{let a=o.pts,l=a-s;return l<-4294967296&&(n=!0,a=Kr(a,i),l=a-s),l>0?s:a},i);return n&&me.debug("PTS rollover detected"),r}remux(e,n,i,r,s,o,a,l){let c,u,h,f,d,p,m=s,v=s;const y=e.pid>-1,x=n.pid>-1,b=n.samples.length,E=e.samples.length>0,T=a&&b>0||b>1;if((!y||E)&&(!x||T)||this.ISGenerated||a){if(this.ISGenerated){var R,S,C,N;const F=this.videoTrackConfig;F&&(n.width!==F.width||n.height!==F.height||((R=n.pixelRatio)==null?void 0:R[0])!==((S=F.pixelRatio)==null?void 0:S[0])||((C=n.pixelRatio)==null?void 0:C[1])!==((N=F.pixelRatio)==null?void 0:N[1]))&&this.resetInitSegment()}else h=this.generateIS(e,n,s,o);const k=this.isVideoContiguous;let P=-1,j;if(T&&(P=$6(n.samples),!k&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,P>0){me.warn(`[mp4-remuxer]: Dropped ${P} out of ${b} video samples due to a missing keyframe`);const F=this.getVideoStartPts(n.samples);n.samples=n.samples.slice(P),n.dropped+=P,v+=(n.samples[0].pts-F)/n.inputTimeScale,j=v}else P===-1&&(me.warn(`[mp4-remuxer]: No keyframe found out of ${b} video samples`),p=!1);if(this.ISGenerated){if(E&&T){const F=this.getVideoStartPts(n.samples),O=(Kr(e.samples[0].pts,F)-F)/n.inputTimeScale;m+=Math.max(0,O),v+=Math.max(0,-O)}if(E){if(e.samplerate||(me.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(e,n,s,o)),u=this.remuxAudio(e,m,this.isAudioContiguous,o,x||T||l===ft.AUDIO?v:void 0),T){const F=u?u.endPTS-u.startPTS:0;n.inputTimeScale||(me.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(e,n,s,o)),c=this.remuxVideo(n,v,k,F)}}else T&&(c=this.remuxVideo(n,v,k,0));c&&(c.firstKeyFrame=P,c.independent=P!==-1,c.firstKeyFramePTS=j)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(d=F3(i,s,this._initPTS,this._initDTS)),r.samples.length&&(f=O3(r,s,this._initPTS))),{audio:u,video:c,initSegment:h,independent:p,text:f,id3:d}}generateIS(e,n,i,r){const s=e.samples,o=n.samples,a=this.typeSupported,l={},c=this._initPTS;let u=!c||r,h="audio/mp4",f,d,p;if(u&&(f=d=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(h="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:h,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):xe.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(p=e.inputTimeScale,!c||p!==c.timescale?f=d=s[0].pts-Math.round(p*i):u=!1)}if(n.sps&&n.pps&&o.length){if(n.timescale=n.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:xe.initSegment([n]),metadata:{width:n.width,height:n.height}},u)if(p=n.inputTimeScale,!c||p!==c.timescale){const m=this.getVideoStartPts(o),v=Math.round(p*i);d=Math.min(d,Kr(o[0].dts,m)-v),f=Math.min(f,m-v)}else u=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:f,timescale:p},this._initDTS={baseTime:d,timescale:p}):f=p=void 0,{tracks:l,initPTS:f,timescale:p}}remuxVideo(e,n,i,r){const s=e.inputTimeScale,o=e.samples,a=[],l=o.length,c=this._initPTS;let u=this.nextAvcDts,h=8,f=this.videoSampleDuration,d,p,m=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,y=!1;if(!i||u===null){const B=n*s,X=o[0].pts-Kr(o[0].dts,o[0].pts);Uc&&u!==null&&Math.abs(B-X-u)<15e3?i=!0:u=B-X}const x=c.baseTime*s/c.timescale;for(let B=0;B<l;B++){const X=o[B];X.pts=Kr(X.pts-x,u),X.dts=Kr(X.dts-x,u),X.dts<o[B>0?B-1:B].dts&&(y=!0)}y&&o.sort(function(B,X){const te=B.dts-X.dts,I=B.pts-X.pts;return te||I}),d=o[0].dts,p=o[o.length-1].dts;const b=p-d,E=b?Math.round(b/(l-1)):f||e.inputTimeScale/30;if(i){const B=d-u,X=B>E,te=B<-1;if((X||te)&&(X?me.warn(`AVC: ${kh(B,!0)} ms (${B}dts) hole between fragments detected at ${n.toFixed(3)}`):me.warn(`AVC: ${kh(-B,!0)} ms (${B}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!te||u>=o[0].pts||Uc)){d=u;const I=o[0].pts-B;if(X)o[0].dts=d,o[0].pts=I;else for(let U=0;U<o.length&&!(o[U].dts>I);U++)o[U].dts-=B,o[U].pts-=B;me.log(`Video: Initial PTS/DTS adjusted: ${kh(I,!0)}/${kh(d,!0)}, delta: ${kh(B,!0)} ms`)}}d=Math.max(0,d);let T=0,D=0,R=d;for(let B=0;B<l;B++){const X=o[B],te=X.units,I=te.length;let U=0;for(let K=0;K<I;K++)U+=te[K].data.length;D+=U,T+=I,X.length=U,X.dts<R?(X.dts=R,R+=E/4|0||1):R=X.dts,m=Math.min(X.pts,m),v=Math.max(X.pts,v)}p=o[l-1].dts;const S=D+4*T+8;let C;try{C=new Uint8Array(S)}catch(B){this.observer.emit(W.ERROR,W.ERROR,{type:gt.MUX_ERROR,details:Se.REMUX_ALLOC_ERROR,fatal:!1,error:B,bytes:S,reason:`fail allocating video mdat ${S}`});return}const N=new DataView(C.buffer);N.setUint32(0,S),C.set(xe.types.mdat,4);let k=!1,P=Number.POSITIVE_INFINITY,j=Number.POSITIVE_INFINITY,F=Number.NEGATIVE_INFINITY,H=Number.NEGATIVE_INFINITY;for(let B=0;B<l;B++){const X=o[B],te=X.units;let I=0;for(let Q=0,ee=te.length;Q<ee;Q++){const oe=te[Q],se=oe.data,ae=oe.data.byteLength;N.setUint32(h,ae),h+=4,C.set(se,h),h+=ae,I+=4+ae}let U;if(B<l-1)f=o[B+1].dts-X.dts,U=o[B+1].pts-X.pts;else{const Q=this.config,ee=B>0?X.dts-o[B-1].dts:E;if(U=B>0?X.pts-o[B-1].pts:E,Q.stretchShortVideoTrack&&this.nextAudioPts!==null){const oe=Math.floor(Q.maxBufferHole*s),se=(r?m+r*s:this.nextAudioPts)-X.pts;se>oe?(f=se-ee,f<0?f=ee:k=!0,me.log(`[mp4-remuxer]: It is approximately ${se/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=ee}else f=ee}const K=Math.round(X.pts-X.dts);P=Math.min(P,f),F=Math.max(F,f),j=Math.min(j,U),H=Math.max(H,U),a.push(new x_(X.key,f,I,K))}if(a.length){if(Uc){if(Uc<70){const B=a[0].flags;B.dependsOn=2,B.isNonSync=0}}else if(Iy&&H-j<F-P&&E/F<.025&&a[0].cts===0){me.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let B=d;for(let X=0,te=a.length;X<te;X++){const I=B+a[X].duration,U=B+a[X].cts;if(X<te-1){const K=I+a[X+1].cts;a[X].duration=K-U}else a[X].duration=X?a[X-1].duration:E;a[X].cts=0,B=I}}}f=k||!f?E:f,this.nextAvcDts=u=p+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const z={data1:xe.moof(e.sequenceNumber++,d,Jn({},e,{samples:a})),data2:C,startPTS:m/s,endPTS:(v+f)/s,startDTS:d/s,endDTS:u/s,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,z}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return j6;case"ac3":return U6;default:return v_}}remuxAudio(e,n,i,r,s){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,c=this.getSamplesPerFrame(e),u=c*l,h=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,d=[],p=s!==void 0;let m=e.samples,v=f?0:8,y=this.nextAudioPts||-1;const x=n*o,b=h.baseTime*o/h.timescale;if(this.isAudioContiguous=i=i||m.length&&y>0&&(r&&Math.abs(x-y)<9e3||Math.abs(Kr(m[0].pts-b,x)-y)<20*u),m.forEach(function(O){O.pts=Kr(O.pts-b,x)}),!i||y<0){if(m=m.filter(O=>O.pts>=0),!m.length)return;s===0?y=0:r&&!p?y=Math.max(0,x):y=m[0].pts}if(e.segmentCodec==="aac"){const O=this.config.maxAudioFramesDrift;for(let $=0,z=y;$<m.length;$++){const B=m[$],X=B.pts,te=X-z,I=Math.abs(1e3*te/o);if(te<=-O*u&&p)$===0&&(me.warn(`Audio frame @ ${(X/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*te/o)} ms.`),this.nextAudioPts=y=z=X);else if(te>=O*u&&I<B6&&p){let U=Math.round(te/u);z=X-U*u,z<0&&(U--,z+=u),$===0&&(this.nextAudioPts=y=z),me.warn(`[mp4-remuxer]: Injecting ${U} audio frame @ ${(z/o).toFixed(3)}s due to ${Math.round(1e3*te/o)} ms gap.`);for(let K=0;K<U;K++){const Q=Math.max(z,0);let ee=y_.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);ee||(me.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ee=B.unit.subarray()),m.splice($,0,{unit:ee,pts:Q}),z+=u,$++}}B.pts=z,z+=u}}let E=null,T=null,D,R=0,S=m.length;for(;S--;)R+=m[S].unit.byteLength;for(let O=0,$=m.length;O<$;O++){const z=m[O],B=z.unit;let X=z.pts;if(T!==null){const I=d[O-1];I.duration=Math.round((X-T)/l)}else if(i&&e.segmentCodec==="aac"&&(X=y),E=X,R>0){R+=v;try{D=new Uint8Array(R)}catch(I){this.observer.emit(W.ERROR,W.ERROR,{type:gt.MUX_ERROR,details:Se.REMUX_ALLOC_ERROR,fatal:!1,error:I,bytes:R,reason:`fail allocating audio mdat ${R}`});return}f||(new DataView(D.buffer).setUint32(0,R),D.set(xe.types.mdat,4))}else return;D.set(B,v);const te=B.byteLength;v+=te,d.push(new x_(!0,c,te,0)),T=X}const C=d.length;if(!C)return;const N=d[d.length-1];this.nextAudioPts=y=T+l*N.duration;const k=f?new Uint8Array(0):xe.moof(e.sequenceNumber++,E/l,Jn({},e,{samples:d}));e.samples=[];const P=E/o,j=y/o,H={data1:k,data2:D,startPTS:P,endPTS:j,startDTS:P,endDTS:j,type:"audio",hasAudio:!0,hasVideo:!1,nb:C};return this.isAudioContiguous=!0,H}remuxEmptyAudio(e,n,i,r){const s=e.inputTimeScale,o=e.samplerate?e.samplerate:s,a=s/o,l=this.nextAudioPts,c=this._initDTS,u=c.baseTime*9e4/c.timescale,h=(l!==null?l:r.startDTS*s)+u,f=r.endDTS*s+u,d=a*v_,p=Math.ceil((f-h)/d),m=y_.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(me.warn("[mp4-remuxer]: remux empty Audio"),!m){me.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const v=[];for(let y=0;y<p;y++){const x=h+y*d;v.push({unit:m,pts:x,dts:x})}return e.samples=v,this.remuxAudio(e,n,i,!1)}}function Kr(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function $6(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function F3(t,e,n,i){const r=t.samples.length;if(!r)return;const s=t.inputTimeScale;for(let a=0;a<r;a++){const l=t.samples[a];l.pts=Kr(l.pts-n.baseTime*s/n.timescale,e*s)/s,l.dts=Kr(l.dts-i.baseTime*s/i.timescale,e*s)/s}const o=t.samples;return t.samples=[],{samples:o}}function O3(t,e,n){const i=t.samples.length;if(!i)return;const r=t.inputTimeScale;for(let o=0;o<i;o++){const a=t.samples[o];a.pts=Kr(a.pts-n.baseTime*r/n.timescale,e*r)/r}t.samples.sort((o,a)=>o.pts-a.pts);const s=t.samples;return t.samples=[],{samples:s}}class x_{constructor(e,n,i,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=n,this.size=i,this.cts=r,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class z6{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,n,i,r){this.audioCodec=n,this.videoCodec=i,this.generateInitSegment(KD(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const r=this.initData=l3(e);r.audio&&(n=b_(r.audio,Qt.AUDIO)),r.video&&(i=b_(r.video,Qt.VIDEO));const s={};r.audio&&r.video?s.audiovideo={container:"video/mp4",codec:n+","+i,initSegment:e,id:"main"}:r.audio?s.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:r.video?s.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:me.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,n,i,r,s,o){var a,l;let{initPTS:c,lastEndTime:u}=this;const h={audio:void 0,video:void 0,text:r,id3:i,initSegment:void 0};Xe(u)||(u=this.lastEndTime=s||0);const f=n.samples;if(!(f!=null&&f.length))return h;const d={initPTS:void 0,timescale:1};let p=this.initData;if((a=p)!=null&&a.length||(this.generateInitSegment(f),p=this.initData),!((l=p)!=null&&l.length))return me.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),h;this.emitInitSegment&&(d.tracks=this.initTracks,this.emitInitSegment=!1);const m=XD(f,p),v=YD(p,f),y=v===null?s:v;(H6(c,y,s,m)||d.timescale!==c.timescale&&o)&&(d.initPTS=y-s,c&&c.timescale===1&&me.warn(`Adjusting initPTS by ${d.initPTS-c.baseTime}`),this.initPTS=c={baseTime:d.initPTS,timescale:1});const x=e?y-c.baseTime/c.timescale:u,b=x+m;QD(p,f,c.baseTime/c.timescale),m>0?this.lastEndTime=b:(me.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const E=!!p.audio,T=!!p.video;let D="";E&&(D+="audio"),T&&(D+="video");const R={data1:f,startPTS:x,startDTS:x,endPTS:b,endDTS:b,type:D,hasAudio:E,hasVideo:T,nb:1,dropped:0};return h.audio=R.type==="audio"?R:void 0,h.video=R.type!=="audio"?R:void 0,h.initSegment=d,h.id3=F3(i,s,c,c),r.samples.length&&(h.text=O3(r,s,c)),h}}function H6(t,e,n,i){if(t===null)return!0;const r=Math.max(i,1),s=e-t.baseTime/t.timescale;return Math.abs(s-n)>r}function b_(t,e){const n=t==null?void 0:t.codec;if(n&&n.length>4)return n;if(e===Qt.AUDIO){if(n==="ec-3"||n==="ac-3"||n==="alac")return n;if(n==="fLaC"||n==="Opus")return Dg(n,!1);const i="mp4a.40.5";return me.info(`Parsed audio codec "${n}" or audio object type not handled. Using "${i}"`),i}return me.warn(`Unhandled video codec "${n}"`),n==="hvc1"||n==="hev1"?"hvc1.1.6.L120.90":n==="av01"?"av01.0.04M.08":"avc1.42e01e"}let Do;try{Do=self.performance.now.bind(self.performance)}catch{me.debug("Unable to use Performance API on this environment"),Do=ku==null?void 0:ku.Date.now}const $0=[{demux:k6,remux:z6},{demux:Sa,remux:U0},{demux:T6,remux:U0},{demux:M6,remux:U0}];$0.splice(2,0,{demux:C6,remux:U0});class w_{constructor(e,n,i,r,s){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=i,this.vendor=r,this.id=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,i,r){const s=i.transmuxing;s.executeStart=Do();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;r&&(this.currentTransmuxState=r);const{contiguous:c,discontinuity:u,trackSwitch:h,accurateTimeOffset:f,timeOffset:d,initSegmentChange:p}=r||a,{audioCodec:m,videoCodec:v,defaultInitPts:y,duration:x,initSegmentData:b}=l,E=V6(o,n);if(E&&E.method==="AES-128"){const S=this.getDecrypter();if(S.isSync()){let C=S.softwareDecrypt(o,E.key.buffer,E.iv.buffer);if(i.part>-1&&(C=S.flush()),!C)return s.executeEnd=Do(),Dy(i);o=new Uint8Array(C)}else return this.decryptionPromise=S.webCryptoDecrypt(o,E.key.buffer,E.iv.buffer).then(C=>{const N=this.push(C,null,i);return this.decryptionPromise=null,N}),this.decryptionPromise}const T=this.needsProbing(u,h);if(T){const S=this.configureTransmuxer(o);if(S)return me.warn(`[transmuxer] ${S.message}`),this.observer.emit(W.ERROR,W.ERROR,{type:gt.MEDIA_ERROR,details:Se.FRAG_PARSING_ERROR,fatal:!1,error:S,reason:S.message}),s.executeEnd=Do(),Dy(i)}(u||h||p||T)&&this.resetInitSegment(b,m,v,x,n),(u||p||T)&&this.resetInitialTimestamp(y),c||this.resetContiguity();const D=this.transmux(o,E,d,f,i),R=this.currentTransmuxState;return R.contiguous=!0,R.discontinuity=!1,R.trackSwitch=!1,s.executeEnd=Do(),D}flush(e){const n=e.transmuxing;n.executeStart=Do();const{decrypter:i,currentTransmuxState:r,decryptionPromise:s}=this;if(s)return s.then(()=>this.flush(e));const o=[],{timeOffset:a}=r;if(i){const h=i.flush();h&&o.push(this.push(h,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c)return n.executeEnd=Do(),[Dy(e)];const u=l.flush(a);return z0(u)?u.then(h=>(this.flushRemux(o,h,e),o)):(this.flushRemux(o,u,e),o)}flushRemux(e,n,i){const{audioTrack:r,videoTrack:s,id3Track:o,textTrack:a}=n,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;me.log(`[transmuxer.ts]: Flushed fragment ${i.sn}${i.part>-1?" p: "+i.part:""} of level ${i.level}`);const u=this.remuxer.remux(r,s,o,a,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:i}),i.transmuxing.executeEnd=Do()}resetInitialTimestamp(e){const{demuxer:n,remuxer:i}=this;!n||!i||(n.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,i,r,s){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,n,i,r),a.resetInitSegment(e,n,i,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,i,r,s){let o;return n&&n.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,n,i,r,s):o=this.transmuxUnencrypted(e,i,r,s),o}transmuxUnencrypted(e,n,i,r){const{audioTrack:s,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,o,a,l,n,i,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,n,i,r,s){return this.demuxer.demuxSampleAes(e,n,i).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,i,r,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:n,observer:i,typeSupported:r,vendor:s}=this;let o;for(let f=0,d=$0.length;f<d;f++){var a;if((a=$0[f].demux)!=null&&a.probe(e)){o=$0[f];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,c=this.remuxer,u=o.remux,h=o.demux;(!c||!(c instanceof u))&&(this.remuxer=new u(i,n,r,s)),(!l||!(l instanceof h))&&(this.demuxer=new h(i,n,r),this.probe=h.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Vb(this.config)),e}}function V6(t,e){let n=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const Dy=t=>({remuxResult:{},chunkMeta:t});function z0(t){return"then"in t&&t.then instanceof Function}class G6{constructor(e,n,i,r,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=i,this.duration=r,this.defaultInitPts=s||null}}class W6{constructor(e,n,i,r,s,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=i,this.trackSwitch=r,this.timeOffset=s,this.initSegmentChange=o}}var B3={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new r(u,h||l,f),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,d=h.length,p=new Array(d);f<d;f++)p[f]=h[f].fn;return p},a.prototype.listenerCount=function(c){var u=n?n+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,f,d,p){var m=n?n+c:c;if(!this._events[m])return!1;var v=this._events[m],y=arguments.length,x,b;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,f),!0;case 5:return v.fn.call(v.context,u,h,f,d),!0;case 6:return v.fn.call(v.context,u,h,f,d,p),!0}for(b=1,x=new Array(y-1);b<y;b++)x[b-1]=arguments[b];v.fn.apply(v.context,x)}else{var E=v.length,T;for(b=0;b<E;b++)switch(v[b].once&&this.removeListener(c,v[b].fn,void 0,!0),y){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,u);break;case 3:v[b].fn.call(v[b].context,u,h);break;case 4:v[b].fn.call(v[b].context,u,h,f);break;default:if(!x)for(T=1,x=new Array(y-1);T<y;T++)x[T-1]=arguments[T];v[b].fn.apply(v[b].context,x)}}return!0},a.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,f){var d=n?n+c:c;if(!this._events[d])return this;if(!u)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===u&&(!f||p.once)&&(!h||p.context===h)&&o(this,d);else{for(var m=0,v=[],y=p.length;m<y;m++)(p[m].fn!==u||f&&!p[m].once||h&&p[m].context!==h)&&v.push(p[m]);v.length?this._events[d]=v.length===1?v[0]:v:o(this,d)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(B3);var q6=B3.exports,Xb=mD(q6);class j3{constructor(e,n,i,r){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const s=e.config;this.hls=e,this.id=n,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=i,this.onFlush=r;const o=(c,u)=>{u=u||{},u.frag=this.frag,u.id=this.id,c===W.ERROR&&(this.error=u.error),this.hls.trigger(c,u)};this.observer=new Xb,this.observer.on(W.FRAG_DECRYPTED,o),this.observer.on(W.ERROR,o);const a=Xl(s.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(s.workerPath||f6())){try{s.workerPath?(me.log(`loading Web Worker ${s.workerPath} for "${n}"`),this.workerContext=p6(s.workerPath)):(me.log(`injecting Web Worker for "${n}"`),this.workerContext=d6()),this.onwmsg=h=>this.onWorkerMessage(h);const{worker:u}=this.workerContext;u.addEventListener("message",this.onwmsg),u.onerror=h=>{const f=new Error(`${h.message}  (${h.filename}:${h.lineno})`);s.enableWorker=!1,me.warn(`Error in "${n}" Web Worker, fallback to inline`),this.hls.trigger(W.ERROR,{type:gt.OTHER_ERROR,details:Se.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:f})},u.postMessage({cmd:"init",typeSupported:l,vendor:"",id:n,config:JSON.stringify(s)})}catch(u){me.warn(`Error setting up "${n}" Web Worker, fallback to inline`,u),this.resetWorker(),this.error=null,this.transmuxer=new w_(this.observer,l,s,"",n)}return}this.transmuxer=new w_(this.observer,l,s,"",n)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:n}=this.workerContext;n&&self.URL.revokeObjectURL(n),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,n,i,r,s,o,a,l,c,u){var h,f;c.transmuxing.start=self.performance.now();const{transmuxer:d}=this,p=o?o.start:s.start,m=s.decryptdata,v=this.frag,y=!(v&&s.cc===v.cc),x=!(v&&c.level===v.level),b=v?c.sn-v.sn:-1,E=this.part?c.part-this.part.index:-1,T=b===0&&c.id>1&&c.id===(v==null?void 0:v.stats.chunkCount),D=!x&&(b===1||b===0&&(E===1||T&&E<=0)),R=self.performance.now();(x||b||s.stats.parsing.start===0)&&(s.stats.parsing.start=R),o&&(E||!D)&&(o.stats.parsing.start=R);const S=!(v&&((h=s.initSegment)==null?void 0:h.url)===((f=v.initSegment)==null?void 0:f.url)),C=new W6(y,D,l,x,p,S);if(!D||y||S){me.log(`[transmuxer-interface, ${s.type}]: Starting new transmux session for sn: ${c.sn} p: ${c.part} level: ${c.level} id: ${c.id}
        discontinuity: ${y}
        trackSwitch: ${x}
        contiguous: ${D}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${S}`);const N=new G6(i,r,n,a,u);this.configureTransmuxer(N)}if(this.frag=s,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:m,chunkMeta:c,state:C},e instanceof ArrayBuffer?[e]:[]);else if(d){const N=d.push(e,m,c,C);z0(N)?(d.async=!0,N.then(k=>{this.handleTransmuxComplete(k)}).catch(k=>{this.transmuxerError(k,c,"transmuxer-interface push error")})):(d.async=!1,this.handleTransmuxComplete(N))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(n){let i=n.flush(e);z0(i)||n.async?(z0(i)||(i=Promise.resolve(i)),i.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")})):this.handleFlushResult(i,e)}}transmuxerError(e,n,i){this.hls&&(this.error=e,this.hls.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.FRAG_PARSING_ERROR,chunkMeta:n,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,n){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(n)}onWorkerMessage(e){const n=e.data;if(!(n!=null&&n.event)){me.warn(`worker message received with no ${n?"event name":"data"}`);return}const i=this.hls;if(this.hls)switch(n.event){case"init":{var r;const s=(r=this.workerContext)==null?void 0:r.objectURL;s&&self.URL.revokeObjectURL(s);break}case"transmuxComplete":{this.handleTransmuxComplete(n.data);break}case"flush":{this.onFlush(n.data);break}case"workerLog":me[n.data.logType]&&me[n.data.logType](n.data.message);break;default:{n.data=n.data||{},n.data.frag=this.frag,n.data.id=this.id,i.trigger(n.event,n.data);break}}}configureTransmuxer(e){const{transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const S_=100;class K6 extends Gb{constructor(e,n,i){super(e,n,i,"[audio-stream-controller]",ft.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.LEVEL_LOADED,this.onLevelLoaded,this),e.on(W.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(W.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(W.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(W.ERROR,this.onError,this),e.on(W.BUFFER_RESET,this.onBufferReset,this),e.on(W.BUFFER_CREATED,this.onBufferCreated,this),e.on(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(W.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(W.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.LEVEL_LOADED,this.onLevelLoaded,this),e.off(W.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(W.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(W.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(W.ERROR,this.onError,this),e.off(W.BUFFER_RESET,this.onBufferReset,this),e.off(W.BUFFER_CREATED,this.onBufferCreated,this),e.off(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(W.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(W.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:n,id:i,initPTS:r,timescale:s}){if(i==="main"){const o=n.cc;this.initPTS[n.cc]={baseTime:r,timescale:s},this.log(`InitPTS for cc: ${o} found from main: ${r}`),this.videoTrackCC=o,this.state===Ne.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=Ne.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(S_),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=Ne.IDLE):(this.loadedmetadata=!1,this.state=Ne.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case Ne.IDLE:this.doTickIdle();break;case Ne.WAITING_TRACK:{var e;const{levels:i,trackId:r}=this,s=i==null||(e=i[r])==null?void 0:e.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state=Ne.WAITING_INIT_PTS}break}case Ne.FRAG_LOADING_WAITING_RETRY:{var n;const i=performance.now(),r=this.retryDate;if(!r||i>=r||(n=this.media)!=null&&n.seeking){const{levels:s,trackId:o}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((s==null?void 0:s[o])||null),this.state=Ne.IDLE}break}case Ne.WAITING_INIT_PTS:{const i=this.waitingData;if(i){const{frag:r,part:s,cache:o,complete:a}=i;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=Ne.FRAG_LOADING;const l=o.flush(),c={frag:r,part:s,payload:l,networkDetails:null};this._handleFragmentLoadProgress(c),a&&super._handleFragmentLoadComplete(c)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${r.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),c=dn.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);S2(c.end,this.config.maxFragLookUpTolerance,r)<0&&(this.log(`Waiting fragment cc (${r.cc}) @ ${r.start} cancelled because another fragment at ${c.end} is needed`),this.clearWaitingFragment())}}else this.state=Ne.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Ne.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:n,media:i,trackId:r}=this,s=e.config;if(!this.buffering||!i&&(this.startFragRequested||!s.startFragPrefetch)||!(n!=null&&n[r]))return;const o=n[r],a=o.details;if(!a||a.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(a)){this.state=Ne.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,Qt.AUDIO,ft.AUDIO));const c=this.getFwdBufferInfo(l,ft.AUDIO);if(c===null)return;if(!this.switchingTrack&&this._streamEnded(c,a)){e.trigger(W.BUFFER_EOS,{type:"audio"}),this.state=Ne.ENDED;return}const u=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,ft.MAIN),h=c.len,f=this.getMaxBufferLength(u==null?void 0:u.len),d=a.fragments,p=d[0].start,m=this.getLoadPosition(),v=this.flushing?m:c.end;if(this.switchingTrack&&i){const E=m;a.PTSKnown&&E<p&&(c.end>p||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=p+.05)}if(h>=f&&!this.switchingTrack&&v<d[d.length-1].start)return;let y=this.getNextFragment(v,a),x=!1;if(y&&this.isLoopLoading(y,v)&&(x=!!y.gap,y=this.getNextFragmentLoopLoading(y,a,c,ft.MAIN,f)),!y){this.bufferFlushed=!0;return}const b=u&&y.start>u.end+a.targetduration;if(b||!(u!=null&&u.len)&&c.len){const E=this.getAppendedFrag(y.start,ft.MAIN);if(E===null||(x||(x=!!E.gap||!!b&&u.len===0),b&&!x||x&&c.nextStart&&c.nextStart<E.end))return}this.loadFragment(y,o,v)}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.min(Math.max(n,e),this.config.maxMaxBufferLength):n}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(i=>new Cu(i))}onAudioTrackSwitching(e,n){const i=!!n.url;this.trackId=n.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),i?this.setInterval(S_):this.resetTransmuxer(),i?(this.switchingTrack=n,this.state=Ne.IDLE,this.flushAudioIfNeeded(n)):(this.switchingTrack=null,this.bufferedTrack=n,this.state=Ne.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,n){this.mainDetails=n.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(W.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,n){var i;if(this.mainDetails==null){this.cachedTrackLoadedData=n;return}const{levels:r}=this,{details:s,id:o}=n;if(!r){this.warn(`Audio tracks were reset while loading level ${o}`);return}this.log(`Audio track ${o} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const a=r[o];let l=0;if(s.live||(i=a.details)!=null&&i.live){this.checkLiveUpdate(s);const u=this.mainDetails;if(s.deltaUpdateFailed||!u)return;if(!a.details&&s.hasProgramDateTime&&u.hasProgramDateTime)jg(s,u),l=s.fragments[0].start;else{var c;l=this.alignPlaylists(s,a.details,(c=this.levelLastLoaded)==null?void 0:c.details)}}a.details=s,this.levelLastLoaded=a,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(this.mainDetails||s,l),this.state===Ne.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=Ne.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:i,part:r,payload:s}=e,{config:o,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const c=l[a];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}const h=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new j3(this.hls,ft.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const d=this.initPTS[i.cc],p=(n=i.initSegment)==null?void 0:n.data;if(d!==void 0){const v=r?r.index:-1,y=v!==-1,x=new Hb(i.level,i.sn,i.stats.chunkCount,s.byteLength,v,y);f.push(s,p,h,"",i,r,u.totalduration,!1,x,d)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${u.startSN} ,${u.endSN}],track ${a}`);const{cache:m}=this.waitingData=this.waitingData||{frag:i,part:r,cache:new _3,complete:!1};m.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state=Ne.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,n){const i=n.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),n.tracks.video&&(this.videoBuffer=n.tracks.video.buffer||null)}onFragBuffered(e,n){const{frag:i,part:r}=n;if(i.type!==ft.AUDIO){if(!this.loadedmetadata&&i.type===ft.MAIN){const s=this.videoBuffer||this.media;s&&dn.getBuffered(s).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(i.sn!=="initSegment"){this.fragPrevious=i;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(W.AUDIO_TRACK_SWITCHED,fi({},s)))}this.fragBufferedComplete(i,r)}onError(e,n){var i;if(n.fatal){this.state=Ne.ERROR;return}switch(n.details){case Se.FRAG_GAP:case Se.FRAG_PARSING_ERROR:case Se.FRAG_DECRYPT_ERROR:case Se.FRAG_LOAD_ERROR:case Se.FRAG_LOAD_TIMEOUT:case Se.KEY_LOAD_ERROR:case Se.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ft.AUDIO,n);break;case Se.AUDIO_TRACK_LOAD_ERROR:case Se.AUDIO_TRACK_LOAD_TIMEOUT:case Se.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===Ne.WAITING_TRACK&&((i=n.context)==null?void 0:i.type)===Bt.AUDIO_TRACK&&(this.state=Ne.IDLE);break;case Se.BUFFER_APPEND_ERROR:case Se.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="audio")return;if(n.details===Se.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Se.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==Qt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==Qt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Ne.ENDED&&(this.state=Ne.IDLE);const i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,n,ft.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const i="audio",{hls:r}=this,{remuxResult:s,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:u}=a,{details:h}=u,{audio:f,text:d,id3:p,initSegment:m}=s;if(this.fragContextChanged(l)||!h){this.fragmentTracker.removeFragment(l);return}if(this.state=Ne.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),m!=null&&m.tracks){const v=l.initSegment||l;this._bufferInitSegment(u,m.tracks,v,o),r.trigger(W.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:i,tracks:m.tracks})}if(f){const{startPTS:v,endPTS:y,startDTS:x,endDTS:b}=f;c&&(c.elementaryStreams[Qt.AUDIO]={startPTS:v,endPTS:y,startDTS:x,endDTS:b}),l.setElementaryStreamInfo(Qt.AUDIO,v,y,x,b),this.bufferFragmentData(f,l,c,o)}if(p!=null&&(n=p.samples)!=null&&n.length){const v=Jn({id:i,frag:l,details:h},p);r.trigger(W.FRAG_PARSING_METADATA,v)}if(d){const v=Jn({id:i,frag:l,details:h},d);r.trigger(W.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(e,n,i,r){if(this.state!==Ne.PARSING)return;n.video&&delete n.video;const s=n.audio;if(!s)return;s.id="audio";const o=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${o}/${s.codec}]`),o&&o.split(",").length===1&&(s.levelCodec=o),this.hls.trigger(W.BUFFER_CODECS,n);const a=s.initSegment;if(a!=null&&a.byteLength){const l={type:"audio",frag:i,part:null,chunkMeta:r,parent:i.type,data:a};this.hls.trigger(W.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,n,i){const r=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||r===ui.NOT_LOADED||r===ui.PARTIAL){var s;if(e.sn==="initSegment")this._loadInitSegment(e,n);else if((s=n.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Ne.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragments[0].start!==n.details.fragments[0].start&&jg(n.details,o)}else this.startFragRequested=!0,super.loadFragment(e,n,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:n,lang:i,assocLang:r,characteristics:s,audioCodec:o,channels:a}=this.bufferedTrack;Bl({name:n,lang:i,assocLang:r,characteristics:s,audioCodec:o,channels:a},e,_l)||(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(W.AUDIO_TRACK_SWITCHED,fi({},e))}}function U3(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Kf(t[n].attrs,e[n].attrs))return!1;return!0}function Kf(t,e,n){const i=t["STABLE-RENDITION-ID"];return i&&!n?i===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>t[r]!==e[r])}function E2(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class Y6 extends zb{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.LEVEL_LOADING,this.onLevelLoading,this),e.on(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(W.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(W.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.LEVEL_LOADING,this.onLevelLoading,this),e.off(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(W.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(W.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:i,groupId:r,details:s}=n,o=this.tracksInGroup[i];if(!o||o.groupId!==r){this.warn(`Audio track with id:${i} and group:${r} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Audio track ${i} "${o.name}" lang:${o.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),i===this.trackId&&this.playlistLoaded(i,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const i=n.audioGroups||null,r=this.groupIds;let s=this.currentTrack;if(!i||(r==null?void 0:r.length)!==(i==null?void 0:i.length)||i!=null&&i.some(a=>(r==null?void 0:r.indexOf(a))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(f=>!i||i.indexOf(f.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(f=>f.default)&&(this.selectDefaultTrack=!1),a.forEach((f,d)=>{f.id=d});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.audioPreference;if(!s&&l){const f=eo(l,a,_l);if(f>-1)s=a[f];else{const d=eo(l,this.tracks);s=this.tracks[d]}}let c=this.findTrackId(s);c===-1&&s&&(c=this.findTrackId(null));const u={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${i==null?void 0:i.join(",")}`),this.hls.trigger(W.AUDIO_TRACKS_UPDATED,u);const h=this.trackId;if(c!==-1&&h===-1)this.setAudioTrack(c);else if(a.length&&h===-1){var o;const f=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${a.length}`);this.warn(f.message),this.hls.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}else this.shouldReloadPlaylist(s)&&this.setAudioTrack(this.trackId)}onError(e,n){n.fatal||!n.context||n.context.type===Bt.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(n))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const r=this.currentTrack;if(r&&Bl(e,r,_l))return r;const s=eo(e,this.tracksInGroup,_l);if(s>-1){const o=this.tracksInGroup[s];return this.setAudioTrack(s),o}else if(r){let o=n.loadLevel;o===-1&&(o=n.firstAutoLevel);const a=YM(e,n.levels,i,o,_l);if(a===-1)return null;n.nextLoadLevel=a}if(e.channels||e.audioCodec){const o=eo(e,i);if(o>-1)return i[o]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,r=n[e],s=r.details&&!r.details.live;if(e===this.trackId&&r===i&&s||(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(W.AUDIO_TRACK_SWITCHING,fi({},r)),s))return;const o=this.switchParams(r.url,i==null?void 0:i.details,r.details);this.loadPlaylist(o)}findTrackId(e){const n=this.tracksInGroup;for(let i=0;i<n.length;i++){const r=n[i];if(!(this.selectDefaultTrack&&!r.default)&&(!e||Bl(e,r,_l)))return i}if(e){const{name:i,lang:r,assocLang:s,characteristics:o,audioCodec:a,channels:l}=e;for(let c=0;c<n.length;c++){const u=n[c];if(Bl({name:i,lang:r,assocLang:s,characteristics:o,audioCodec:a,channels:l},u,_l))return c}for(let c=0;c<n.length;c++){const u=n[c];if(Kf(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<n.length;c++){const u=n[c];if(Kf(e.attrs,u.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){super.loadPlaylist();const i=n.id,r=n.groupId;let s=n.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`loading audio-track playlist ${i} "${n.name}" lang:${n.lang} group:${r}`),this.clearTimer(),this.hls.trigger(W.AUDIO_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:e||null})}}}const __=500;class X6 extends Gb{constructor(e,n,i){super(e,n,i,"[subtitle-stream-controller]",ft.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.LEVEL_LOADED,this.onLevelLoaded,this),e.on(W.ERROR,this.onError,this),e.on(W.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(W.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(W.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(W.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.LEVEL_LOADED,this.onLevelLoaded,this),e.off(W.ERROR,this.onError,this),e.off(W.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(W.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(W.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(W.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=Ne.IDLE,this.setInterval(__),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:i,success:r}=n;if(this.fragPrevious=i,this.state=Ne.IDLE,!r)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let o;const a=i.start;for(let c=0;c<s.length;c++)if(a>=s[c].start&&a<=s[c].end){o=s[c];break}const l=i.start+i.duration;o?o.end=l:(o={start:a,end:l},s.push(o)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null)}onBufferFlushing(e,n){const{startOffset:i,endOffset:r}=n;if(i===0&&r!==Number.POSITIVE_INFINITY){const s=r-1;if(s<=0)return;n.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=s){o.shift();continue}else if(o[a].start<s)o[a].start=s;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(i,s,ft.SUBTITLE)}}onFragBuffered(e,n){if(!this.loadedmetadata&&n.frag.type===ft.MAIN){var i;(i=this.media)!=null&&i.buffered.length&&(this.loadedmetadata=!0)}}onError(e,n){const i=n.frag;(i==null?void 0:i.type)===ft.SUBTITLE&&(n.details===Se.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Ne.STOPPED&&(this.state=Ne.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&U3(this.levels,n)){this.levels=n.map(i=>new Cu(i));return}this.tracksBuffered=[],this.levels=n.map(i=>{const r=new Cu(i);return this.tracksBuffered[r.id]=[],r}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,ft.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var i;if(this.currentTrackId=n.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}const r=this.levels[this.currentTrackId];r!=null&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(__)}onSubtitleTrackLoaded(e,n){var i;const{currentTrackId:r,levels:s}=this,{details:o,id:a}=n;if(!s){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}const l=s[a];if(a>=s.length||!l)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(o.live||(i=l.details)!=null&&i.live){const h=this.mainDetails;if(o.deltaUpdateFailed||!h)return;const f=h.fragments[0];if(!l.details)o.hasProgramDateTime&&h.hasProgramDateTime?(jg(o,h),c=o.fragments[0].start):f&&(c=f.start,w2(o,c));else{var u;c=this.alignPlaylists(o,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),c===0&&f&&(c=f.start,w2(o,c))}}l.details=o,this.levelLastLoaded=l,a===r&&(!this.startFragRequested&&(this.mainDetails||!o.live)&&this.setStartPosition(this.mainDetails||o,c),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===Ne.IDLE&&(Bg(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:n,payload:i}=e,r=n.decryptdata,s=this.hls;if(!this.fragContextChanged(n)&&i&&i.byteLength>0&&r!=null&&r.key&&r.iv&&r.method==="AES-128"){const o=performance.now();this.decrypter.decrypt(new Uint8Array(i),r.key.buffer,r.iv.buffer).catch(a=>{throw s.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:n}),a}).then(a=>{const l=performance.now();s.trigger(W.FRAG_DECRYPTED,{frag:n,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=Ne.IDLE})}}doTick(){if(!this.media){this.state=Ne.IDLE;return}if(this.state===Ne.IDLE){const{currentTrackId:e,levels:n}=this,i=n==null?void 0:n[e];if(!i||!n.length||!i.details)return;const{config:r}=this,s=this.getLoadPosition(),o=dn.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,r.maxBufferHole),{end:a,len:l}=o,c=this.getFwdBufferInfo(this.media,ft.MAIN),u=i.details,h=this.getMaxBufferLength(c==null?void 0:c.len)+u.levelTargetDuration;if(l>h)return;const f=u.fragments,d=f.length,p=u.edge;let m=null;const v=this.fragPrevious;if(a<p){const y=r.maxFragLookUpTolerance,x=a>p-y?0:y;m=Bg(v,f,Math.max(f[0].start,a),x),!m&&v&&v.start<f[0].start&&(m=f[0])}else m=f[d-1];if(!m)return;if(m=this.mapToInitFragWhenRequired(m),m.sn!=="initSegment"){const y=m.sn-u.startSN,x=f[y-1];x&&x.cc===m.cc&&this.fragmentTracker.getState(x)===ui.NOT_LOADED&&(m=x)}this.fragmentTracker.getState(m)===ui.NOT_LOADED&&this.loadFragment(m,i,a)}}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.max(n,e):n}loadFragment(e,n,i){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,n):(this.startFragRequested=!0,super.loadFragment(e,n,i))}get mediaBufferTimeRanges(){return new J6(this.tracksBuffered[this.currentTrackId]||[])}}class J6{constructor(e){this.buffered=void 0;const n=(i,r,s)=>{if(r=r>>>0,r>s-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${s})`);return e[r][i]};this.buffered={get length(){return e.length},end(i){return n("end",i,e.length)},start(i){return n("start",i,e.length)}}}}class Q6 extends zb{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const i=O0(this.media.textTracks);for(let s=0;s<i.length;s++)if(i[s].mode==="hidden")n=i[s];else if(i[s].mode==="showing"){n=i[s];break}const r=this.findTrackForTextTrack(n);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.LEVEL_LOADING,this.onLevelLoading,this),e.on(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(W.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(W.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.LEVEL_LOADING,this.onLevelLoading,this),e.off(W.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(W.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(W.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),O0(this.media.textTracks).forEach(n=>{au(n)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:i,groupId:r,details:s}=n,o=this.tracksInGroup[i];if(!o||o.groupId!==r){this.warn(`Subtitle track with id:${i} and group:${r} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Subtitle track ${i} "${o.name}" lang:${o.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),i===this.trackId&&this.playlistLoaded(i,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const i=n.subtitleGroups||null,r=this.groupIds;let s=this.currentTrack;if(!i||(r==null?void 0:r.length)!==(i==null?void 0:i.length)||i!=null&&i.some(o=>(r==null?void 0:r.indexOf(o))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(u=>!i||i.indexOf(u.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(u=>u.default)&&(this.selectDefaultTrack=!1),o.forEach((u,h)=>{u.id=h});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const a=this.hls.config.subtitlePreference;if(!s&&a){this.selectDefaultTrack=!1;const u=eo(a,o);if(u>-1)s=o[u];else{const h=eo(a,this.tracks);s=this.tracks[h]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const c={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${i==null?void 0:i.join(",")}" group-id`),this.hls.trigger(W.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(s)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const n=this.tracksInGroup,i=this.selectDefaultTrack;for(let r=0;r<n.length;r++){const s=n[r];if(!(i&&!s.default||!i&&!e)&&(!e||Bl(s,e)))return r}if(e){for(let r=0;r<n.length;r++){const s=n[r];if(Kf(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<n.length;r++){const s=n[r];if(Kf(e.attrs,s.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let i=0;i<n.length;i++){const r=n[i];if(E2(r,e))return i}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===Bt.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&Bl(e,i))return i;const r=eo(e,this.tracksInGroup);if(r>-1){const s=this.tracksInGroup[r];return this.setSubtitleTrack(r),s}else{if(i)return null;{const s=eo(e,n);if(s>-1)return n[s]}}}}return null}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;if(this.shouldLoadPlaylist(n)&&n){const i=n.id,r=n.groupId;let s=n.url;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`Loading subtitle playlist for id ${i}`),this.hls.trigger(W.SUBTITLE_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=O0(e.textTracks),i=this.currentTrack;let r;if(i&&(r=n.filter(s=>E2(i,s))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(n).forEach(s=>{s.mode!=="disabled"&&s!==r&&(s.mode="disabled")}),r){const s=this.subtitleDisplay?"showing":"hidden";r.mode!==s&&(r.mode=s)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!Xe(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const i=this.currentTrack,r=n[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r){this.hls.trigger(W.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!r.details&&!r.details.live;if(e===this.trackId&&r===i&&s)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:o,groupId:a="",name:l,type:c,url:u}=r;this.hls.trigger(W.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:c,url:u});const h=this.switchParams(r.url,i==null?void 0:i.details,r.details);this.loadPlaylist(h)}}class Z6{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,n,i){const r=this.queues[n];r.push(e),r.length===1&&!i&&this.executeNext(n)}insertAbort(e,n){this.queues[n].unshift(e),this.executeNext(n)}appendBlocker(e){let n;const i=new Promise(s=>{n=s}),r={execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(r,e),i}executeNext(e){const n=this.queues[e];if(n.length){const i=n[0];try{i.execute()}catch(r){me.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${r}`),i.onError(r);const s=this.buffers[e];s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const E_=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class eF{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=i=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:i,mediaSource:r}=this;this.log("Media source opened"),i&&(i.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(W.MEDIA_ATTACHED,{media:i,mediaSource:r})),r&&r.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:i,_objectUrl:r}=this;i!==r&&me.error(`Media element src was set while attaching MediaSource (${r} > ${i})`)},this.hls=e;const n="[buffer-controller]";this.appendSource=cM(Xl(e.config.preferManagedMediaSource)),this.log=me.log.bind(me,n),this.warn=me.warn.bind(me,n),this.error=me.error.bind(me,n),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.BUFFER_RESET,this.onBufferReset,this),e.on(W.BUFFER_APPENDING,this.onBufferAppending,this),e.on(W.BUFFER_CODECS,this.onBufferCodecs,this),e.on(W.BUFFER_EOS,this.onBufferEos,this),e.on(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(W.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(W.FRAG_PARSED,this.onFragParsed,this),e.on(W.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.BUFFER_RESET,this.onBufferReset,this),e.off(W.BUFFER_APPENDING,this.onBufferAppending,this),e.off(W.BUFFER_CODECS,this.onBufferCodecs,this),e.off(W.BUFFER_EOS,this.onBufferEos,this),e.off(W.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(W.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(W.FRAG_PARSED,this.onFragParsed,this),e.off(W.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new Z6(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){let i=2;(n.audio&&!n.video||!n.altAudio)&&(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,n){const i=this.media=n.media,r=Xl(this.appendSource);if(i&&r){var s;const o=this.mediaSource=new r;this.log(`created media source: ${(s=o.constructor)==null?void 0:s.name}`),o.addEventListener("sourceopen",this._onMediaSourceOpen),o.addEventListener("sourceended",this._onMediaSourceEnded),o.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming));const a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{i.removeAttribute("src");const l=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||l&&o instanceof l,A_(i),tF(i,a),i.load()}catch{i.src=a}else i.src=a;i.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:n,_objectUrl:i}=this;if(n){if(this.log("media source detaching"),n.readyState==="open")try{n.endOfStream()}catch(r){this.warn(`onMediaDetaching: ${r.message} while calling endOfStream`)}this.onBufferReset(),n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(n.removeEventListener("startstreaming",this._onStartStreaming),n.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),this.mediaSrc===i?(e.removeAttribute("src"),this.appendSource&&A_(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(W.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const n=this.sourceBuffer[e];try{if(n){var i;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}}catch(r){this.warn(`onBufferReset ${e}`,r)}}onBufferCodecs(e,n){const i=this.getSourceBufferTypes().length,r=Object.keys(n);if(r.forEach(o=>{if(i){const l=this.tracks[o];if(l&&typeof l.buffer.changeType=="function"){var a;const{id:c,codec:u,levelCodec:h,container:f,metadata:d}=n[o],p=WS(l.codec,l.levelCodec),m=p==null?void 0:p.replace(E_,"$1");let v=WS(u,h);const y=(a=v)==null?void 0:a.replace(E_,"$1");if(v&&m!==y){o.slice(0,5)==="audio"&&(v=Dg(v,this.appendSource));const x=`${f};codecs=${v}`;this.appendChangeType(o,x),this.log(`switching codec ${p} to ${v}`),this.tracks[o]={buffer:l.buffer,codec:u,container:f,levelCodec:h,metadata:d,id:c}}}}else this.pendingTracks[o]=n[o]}),i)return;const s=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==s&&(this.log(`${s} bufferCodec event(s) expected ${r.join(",")}`),this.bufferCodecEventsExpected=s),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,n){const{operationQueue:i}=this,r={execute:()=>{const s=this.sourceBuffer[e];s&&(this.log(`changing ${e} sourceBuffer type to ${n}`),s.changeType(n)),i.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};i.append(r,e,!!this.pendingTracks[e])}onBufferAppending(e,n){const{hls:i,operationQueue:r,tracks:s}=this,{data:o,type:a,frag:l,part:c,chunkMeta:u}=n,h=u.buffering[a],f=self.performance.now();h.start=f;const d=l.stats.buffering,p=c?c.stats.buffering:null;d.start===0&&(d.start=f),p&&p.start===0&&(p.start=f);const m=s.audio;let v=!1;a==="audio"&&(m==null?void 0:m.container)==="audio/mpeg"&&(v=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const y=l.start,x={execute:()=>{if(h.executeStart=self.performance.now(),v){const b=this.sourceBuffer[a];if(b){const E=y-b.timestampOffset;Math.abs(E)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${y} (delta: ${E}) sn: ${l.sn})`),b.timestampOffset=y)}}this.appendExecutor(o,a)},onStart:()=>{},onComplete:()=>{const b=self.performance.now();h.executeEnd=h.end=b,d.first===0&&(d.first=b),p&&p.first===0&&(p.first=b);const{sourceBuffer:E}=this,T={};for(const D in E)T[D]=dn.getBuffered(E[D]);this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(W.BUFFER_APPENDED,{type:a,frag:l,part:c,chunkMeta:u,parent:l.type,timeRanges:T})},onError:b=>{const E={type:gt.MEDIA_ERROR,parent:l.type,details:Se.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:l,part:c,chunkMeta:u,error:b,err:b,fatal:!1};if(b.code===DOMException.QUOTA_EXCEEDED_ERR)E.details=Se.BUFFER_FULL_ERROR;else{const T=++this.appendErrors[a];E.details=Se.BUFFER_APPEND_ERROR,this.warn(`Failed ${T}/${i.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer`),T>=i.config.appendErrorMaxRetry&&(E.fatal=!0)}i.trigger(W.ERROR,E)}};r.append(x,a,!!this.pendingTracks[a])}onBufferFlushing(e,n){const{operationQueue:i}=this,r=s=>({execute:this.removeExecutor.bind(this,s,n.startOffset,n.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(W.BUFFER_FLUSHED,{type:s})},onError:o=>{this.warn(`Failed to remove from ${s} SourceBuffer`,o)}});n.type?i.append(r(n.type),n.type):this.getSourceBufferTypes().forEach(s=>{i.append(r(s),s)})}onFragParsed(e,n){const{frag:i,part:r}=n,s=[],o=r?r.elementaryStreams:i.elementaryStreams;o[Qt.AUDIOVIDEO]?s.push("audiovideo"):(o[Qt.AUDIO]&&s.push("audio"),o[Qt.VIDEO]&&s.push("video"));const a=()=>{const l=self.performance.now();i.stats.buffering.end=l,r&&(r.stats.buffering.end=l);const c=r?r.stats:i.stats;this.hls.trigger(W.FRAG_BUFFERED,{frag:i,part:r,stats:c,id:i.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(a,s)}onFragChanged(e,n){this.trimBuffers()}onBufferEos(e,n){this.getSourceBufferTypes().reduce((r,s)=>{const o=this.sourceBuffer[s];return o&&(!n.type||n.type===s)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${s} sourceBuffer now EOS`))),r&&!!(!o||o.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(s=>{const o=this.sourceBuffer[s];o&&(o.ending=!1)});const{mediaSource:r}=this;if(!r||r.readyState!=="open"){r&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${r.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),r.endOfStream()}))}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:n,media:i}=this;if(!i||n===null||!this.getSourceBufferTypes().length)return;const s=e.config,o=i.currentTime,a=n.levelTargetDuration,l=n.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(Xe(l)&&l>0){const c=Math.max(l,a),u=Math.floor(o/a)*a-c;this.flushBackBuffer(o,a,u)}if(Xe(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const c=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),u=Math.max(c,a),h=Math.floor(o/a)*a+u;this.flushFrontBuffer(o,a,h)}}flushBackBuffer(e,n,i){const{details:r,sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(a=>{const l=s[a];if(l){const c=dn.getBuffered(l);if(c.length>0&&i>c.start(0)){if(this.hls.trigger(W.BACK_BUFFER_REACHED,{bufferEnd:i}),r!=null&&r.live)this.hls.trigger(W.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(l.ended&&c.end(c.length-1)-e<n*2){this.log(`Cannot flush ${a} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(W.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:a})}}})}flushFrontBuffer(e,n,i){const{sourceBuffer:r}=this;this.getSourceBufferTypes().forEach(o=>{const a=r[o];if(a){const l=dn.getBuffered(a),c=l.length;if(c<2)return;const u=l.start(c-1),h=l.end(c-1);if(i>u||e>=u&&e<=h)return;if(a.ended&&e-h<2*n){this.log(`Cannot flush ${o} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(W.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:o})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:n,media:i,mediaSource:r}=this,s=e.fragments[0].start+e.totalduration,o=i.duration,a=Xe(r.duration)?r.duration:0;e.live&&n.config.liveDurationInfinity?(r.duration=1/0,this.updateSeekableRange(e)):(s>a&&s>o||!Xe(o))&&(this.log(`Updating Media Source duration to ${s.toFixed(3)}`),r.duration=s)}updateSeekableRange(e){const n=this.mediaSource,i=e.fragments;if(i.length&&e.live&&n!=null&&n.setLiveSeekableRange){const s=Math.max(0,i[0].start),o=Math.max(s,s+e.totalduration);this.log(`Media Source duration is set to ${n.duration}. Setting seekable range to ${s}-${o}.`),n.setLiveSeekableRange(s,o)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:n,pendingTracks:i}=this,r=Object.keys(i).length;if(r&&(!e||r===2||"audiovideo"in i)){this.createSourceBuffers(i),this.pendingTracks={};const s=this.getSourceBufferTypes();if(s.length)this.hls.trigger(W.BUFFER_CREATED,{tracks:this.tracks}),s.forEach(o=>{n.executeNext(o)});else{const o=new Error("could not create source buffer for media codec(s)");this.hls.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:o,reason:o.message})}}}createSourceBuffers(e){const{sourceBuffer:n,mediaSource:i}=this;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(const s in e)if(!n[s]){var r;const o=e[s];if(!o)throw Error(`source buffer exists for track ${s}, however track does not`);let a=((r=o.levelCodec)==null?void 0:r.indexOf(","))===-1?o.levelCodec:o.codec;a&&s.slice(0,5)==="audio"&&(a=Dg(a,this.appendSource));const l=`${o.container};codecs=${a}`;this.log(`creating sourceBuffer(${l})`);try{const c=n[s]=i.addSourceBuffer(l),u=s;this.addBufferListener(u,"updatestart",this._onSBUpdateStart),this.addBufferListener(u,"updateend",this._onSBUpdateEnd),this.addBufferListener(u,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(u,"bufferedchange",(h,f)=>{const d=f.removedRanges;d!=null&&d.length&&this.hls.trigger(W.BUFFER_FLUSHED,{type:s})}),this.tracks[s]={buffer:c,codec:a,container:o.container,levelCodec:o.levelCodec,metadata:o.metadata,id:o.id}}catch(c){this.error(`error while trying to add sourceBuffer: ${c.message}`),this.hls.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,sourceBufferName:s,mimeType:l})}}}get mediaSrc(){var e,n;const i=((e=this.media)==null||(n=e.querySelector)==null?void 0:n.call(e,"source"))||this.media;return i==null?void 0:i.src}_onSBUpdateStart(e){const{operationQueue:n}=this;n.current(e).onStart()}_onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:i}=this;i.current(e).onComplete(),i.shiftAndExecuteNext(e)}_onSBUpdateError(e,n){var i;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(i=this.mediaSource)==null?void 0:i.readyState}`);this.error(`${r}`,n),this.hls.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const s=this.operationQueue.current(e);s&&s.onError(r)}removeExecutor(e,n,i){const{media:r,mediaSource:s,operationQueue:o,sourceBuffer:a}=this,l=a[e];if(!r||!s||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),o.shiftAndExecuteNext(e);return}const c=Xe(r.duration)?r.duration:1/0,u=Xe(s.duration)?s.duration:1/0,h=Math.max(0,n),f=Math.min(i,c,u);f>h&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${h},${f}] from the ${e} SourceBuffer`),l.remove(h,f)):o.shiftAndExecuteNext(e)}appendExecutor(e,n){const i=this.sourceBuffer[n];if(!i){if(!this.pendingTracks[n])throw new Error(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);return}i.ended=!1,i.appendBuffer(e)}blockBuffers(e,n=this.getSourceBufferTypes()){if(!n.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:i}=this,r=n.map(s=>i.appendBlocker(s));Promise.all(r).then(()=>{e(),n.forEach(s=>{const o=this.sourceBuffer[s];o!=null&&o.updating||i.shiftAndExecuteNext(s)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,n,i){const r=this.sourceBuffer[e];if(!r)return;const s=i.bind(this,e);this.listeners[e].push({event:n,listener:s}),r.addEventListener(n,s)}removeBufferListeners(e){const n=this.sourceBuffer[e];n&&this.listeners[e].forEach(i=>{n.removeEventListener(i.event,i.listener)})}}function A_(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function tF(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}const nF={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},$3=t=>String.fromCharCode(nF[t]||t),xs=15,Lo=100,iF={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},rF={17:2,18:4,21:6,22:8,23:10,19:13,20:15},sF={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},oF={25:2,26:4,29:6,30:8,31:10,27:13,28:15},aF=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class lF{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const i=typeof n=="function"?n():n;me.log(`${this.time} [${e}] ${i}`)}}}const pl=function(e){const n=[];for(let i=0;i<e.length;i++)n.push(e[i].toString(16));return n};class z3{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let i=0;i<n.length;i++){const r=n[i];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class cF{constructor(){this.uchar=" ",this.penState=new z3}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class uF{constructor(e){this.chars=[],this.pos=0,this.currPenState=new z3,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<Lo;n++)this.chars.push(new cF);this.logger=e}equals(e){for(let n=0;n<Lo;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<Lo;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<Lo;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Lo&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Lo)}moveCursor(e){const n=this.pos+e;if(e>1)for(let i=this.pos+1;i<n+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=$3(e);if(this.pos>=Lo){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<Lo;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let i=0;i<Lo;i++){const r=this.chars[i].uchar;r!==" "&&(n=!1),e.push(r)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class My{constructor(e){this.rows=[],this.currRow=xs-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<xs;n++)this.rows.push(new uF(e));this.logger=e}reset(){for(let e=0;e<xs;e++)this.rows[e].clear();this.currRow=xs-1}equals(e){let n=!0;for(let i=0;i<xs;i++)if(!this.rows[i].equals(e.rows[i])){n=!1;break}return n}copy(e){for(let n=0;n<xs;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<xs;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let a=0;a<xs;a++)this.rows[a].clear();const s=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[s].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[n-this.nrRollUpRows+c+1].copy(o.rows[s+c])}}this.currRow=n;const i=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,o=Math.max(s-1,0);i.setCursor(e.indent),e.color=i.chars[o].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let i="",r=-1;for(let s=0;s<xs;s++){const o=this.rows[s].getTextString();o&&(r=s+1,e?n.push("Row "+r+": '"+o+"'"):n.push(o.trim()))}return n.length>0&&(e?i="["+n.join(" | ")+"]":i=n.join(`
`)),i}getTextAndFormat(){return this.rows}}class T_{constructor(e,n,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new My(i),this.nonDisplayedMemory=new My(i),this.lastOutputScreen=new My(i),this.currRollUpRow=this.displayedMemory.rows[xs-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[xs-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const i=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=r[i]}this.logger.log(2,"MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class L_{constructor(e,n,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=fF(),this.logger=void 0;const r=this.logger=new lF;this.channels=[null,new T_(e,n,r),new T_(e+1,i,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){this.logger.time=e;for(let i=0;i<n.length;i+=2){const r=n[i]&127,s=n[i+1]&127;let o=!1,a=null;if(r===0&&s===0)continue;this.logger.log(3,()=>"["+pl([n[i],n[i+1]])+"] -> ("+pl([r,s])+")");const l=this.cmdHistory;if(r>=16&&r<=31){if(hF(r,s,l)){Vp(null,null,l),this.logger.log(3,()=>"Repeated command ("+pl([r,s])+") is dropped");continue}Vp(r,s,this.cmdHistory),o=this.parseCmd(r,s),o||(o=this.parseMidrow(r,s)),o||(o=this.parsePAC(r,s)),o||(o=this.parseBackgroundAttributes(r,s))}else Vp(null,null,l);if(!o&&(a=this.parseChars(r,s),a)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!a&&this.logger.log(2,()=>"Couldn't parse cleaned data "+pl([r,s])+" orig: "+pl([n[i],n[i+1]]))}}parseCmd(e,n){const i=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,r=(e===23||e===31)&&n>=33&&n<=35;if(!(i||r))return!1;const s=e===20||e===21||e===23?1:2,o=this.channels[s];return e===20||e===21||e===28||e===29?n===32?o.ccRCL():n===33?o.ccBS():n===34?o.ccAOF():n===35?o.ccAON():n===36?o.ccDER():n===37?o.ccRU(2):n===38?o.ccRU(3):n===39?o.ccRU(4):n===40?o.ccFON():n===41?o.ccRDC():n===42?o.ccTR():n===43?o.ccRTD():n===44?o.ccEDM():n===45?o.ccCR():n===46?o.ccENM():n===47&&o.ccEOC():o.ccTO(n-32),this.currentChannel=s,!0}parseMidrow(e,n){let i=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[i];return r?(r.ccMIDROW(n),this.logger.log(3,()=>"MIDROW ("+pl([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let i;const r=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,s=(e===16||e===24)&&n>=64&&n<=95;if(!(r||s))return!1;const o=e<=23?1:2;n>=64&&n<=95?i=o===1?iF[e]:sF[e]:i=o===1?rF[e]:oF[e];const a=this.channels[o];return a?(a.setPAC(this.interpretPAC(i,n)),this.currentChannel=o,!0):!1}interpretPAC(e,n){let i;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?i=n-96:i=n-64,r.underline=(i&1)===1,i<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(r.italics=!0,r.color="white"):r.indent=Math.floor((i-16)/2)*4,r}parseChars(e,n){let i,r=null,s=null;if(e>=25?(i=2,s=e-8):(i=1,s=e),s>=17&&s<=19){let o;s===17?o=n+80:s===18?o=n+112:o=n+144,this.logger.log(2,()=>"Special char '"+$3(o)+"' in channel "+i),r=[o]}else e>=32&&e<=127&&(r=n===0?[e]:[e,n]);return r&&this.logger.log(3,()=>"Char codes =  "+pl(r).join(",")),r}parseBackgroundAttributes(e,n){const i=(e===16||e===24)&&n>=32&&n<=47,r=(e===23||e===31)&&n>=45&&n<=47;if(!(i||r))return!1;let s;const o={};e===16||e===24?(s=Math.floor((n-32)/2),o.background=aF[s],n%2===1&&(o.background=o.background+"_semi")):n===45?o.background="transparent":(o.foreground="black",n===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}Vp(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const i=this.channels[n];i&&i.cueSplitAtTime(e)}}}function Vp(t,e,n){n.a=t,n.b=e}function hF(t,e,n){return n.a===t&&n.b===e}function fF(){return{a:null,b:null}}class Gp{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Jb=function(){if(ku!=null&&ku.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const c=l.toLowerCase();return~a.indexOf(c)?c:!1}function i(a){return n(t,a)}function r(a){return n(e,a)}function s(a,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const h in u)a[h]=u[h]}return a}function o(a,l,c){const u=this,h={enumerable:!0};u.hasBeenReset=!1;let f="",d=!1,p=a,m=l,v=c,y=null,x="",b=!0,E="auto",T="start",D=50,R="middle",S=50,C="middle";Object.defineProperty(u,"id",s({},h,{get:function(){return f},set:function(N){f=""+N}})),Object.defineProperty(u,"pauseOnExit",s({},h,{get:function(){return d},set:function(N){d=!!N}})),Object.defineProperty(u,"startTime",s({},h,{get:function(){return p},set:function(N){if(typeof N!="number")throw new TypeError("Start time must be set to a number.");p=N,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",s({},h,{get:function(){return m},set:function(N){if(typeof N!="number")throw new TypeError("End time must be set to a number.");m=N,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",s({},h,{get:function(){return v},set:function(N){v=""+N,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",s({},h,{get:function(){return y},set:function(N){y=N,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",s({},h,{get:function(){return x},set:function(N){const k=i(N);if(k===!1)throw new SyntaxError("An invalid or illegal string was specified.");x=k,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",s({},h,{get:function(){return b},set:function(N){b=!!N,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",s({},h,{get:function(){return E},set:function(N){if(typeof N!="number"&&N!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");E=N,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",s({},h,{get:function(){return T},set:function(N){const k=r(N);if(!k)throw new SyntaxError("An invalid or illegal string was specified.");T=k,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",s({},h,{get:function(){return D},set:function(N){if(N<0||N>100)throw new Error("Position must be between 0 and 100.");D=N,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",s({},h,{get:function(){return R},set:function(N){const k=r(N);if(!k)throw new SyntaxError("An invalid or illegal string was specified.");R=k,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",s({},h,{get:function(){return S},set:function(N){if(N<0||N>100)throw new Error("Size must be between 0 and 100.");S=N,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",s({},h,{get:function(){return C},set:function(N){const k=r(N);if(!k)throw new SyntaxError("An invalid or illegal string was specified.");C=k,this.hasBeenReset=!0}})),u.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class dF{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function H3(t){function e(i,r,s,o){return(i|0)*3600+(r|0)*60+(s|0)+parseFloat(o||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}let pF=class{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,i){return i?this.has(e)?this.values[e]:n[i]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,i){for(let r=0;r<i.length;++r)if(n===i[r]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const i=parseFloat(n);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}};function V3(t,e,n,i){const r=i?t.split(i):[t];for(const s in r){if(typeof r[s]!="string")continue;const o=r[s].split(n);if(o.length!==2)continue;const a=o[0],l=o[1];e(a,l)}}const A2=new Jb(0,0,""),Wp=A2.align==="middle"?"middle":"center";function gF(t,e,n){const i=t;function r(){const a=H3(t);if(a===null)throw new Error("Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),a}function s(a,l){const c=new pF;V3(a,function(f,d){let p;switch(f){case"region":for(let m=n.length-1;m>=0;m--)if(n[m].id===d){c.set(f,n[m].region);break}break;case"vertical":c.alt(f,d,["rl","lr"]);break;case"line":p=d.split(","),c.integer(f,p[0]),c.percent(f,p[0])&&c.set("snapToLines",!1),c.alt(f,p[0],["auto"]),p.length===2&&c.alt("lineAlign",p[1],["start",Wp,"end"]);break;case"position":p=d.split(","),c.percent(f,p[0]),p.length===2&&c.alt("positionAlign",p[1],["start",Wp,"end","line-left","line-right","auto"]);break;case"size":c.percent(f,d);break;case"align":c.alt(f,d,["start",Wp,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&A2.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",Wp);let h=c.get("position","auto");h==="auto"&&A2.position===50&&(h=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=h}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=r(),o(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);t=t.slice(3),o(),e.endTime=r(),o(),s(t,e)}function G3(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class mF{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new dF,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function i(){let s=n.buffer,o=0;for(s=G3(s);o<s.length&&s[o]!=="\r"&&s[o]!==`
`;)++o;const a=s.slice(0,o);return s[o]==="\r"&&++o,s[o]===`
`&&++o,n.buffer=s.slice(o),a}function r(s){V3(s,function(o,a){},/:/)}try{let s="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;s=i();const a=s.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let o=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:s=i(),n.state){case"HEADER":/:/.test(s)?r(s):s||(n.state="ID");continue;case"NOTE":s||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){n.state="NOTE";break}if(!s)continue;if(n.cue=new Jb(0,0,""),n.state="CUE",s.indexOf("-->")===-1){n.cue.id=s;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{gF(s,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const a=s.indexOf("-->")!==-1;if(!s||a&&(o=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=s}continue;case"BADCUE":s||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const yF=/\r\n|\n\r|\n|\r/g,Fy=function(e,n,i=0){return e.slice(i,i+n.length)===n},vF=function(e){let n=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Xe(n)||!Xe(i)||!Xe(r)||!Xe(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*i,n+=60*1e3*r,n+=60*60*1e3*s,n},Oy=function(e){let n=5381,i=e.length;for(;i;)n=n*33^e.charCodeAt(--i);return(n>>>0).toString()};function Qb(t,e,n){return Oy(t.toString())+Oy(e.toString())+Oy(n)}const xF=function(e,n,i){let r=e[n],s=e[r.prevCC];if(!s||!s.new&&r.new){e.ccOffset=e.presentationOffset=r.start,r.new=!1;return}for(;(o=s)!=null&&o.new;){var o;e.ccOffset+=r.start-s.start,r.new=!1,r=s,s=e[r.prevCC]}e.presentationOffset=i};function bF(t,e,n,i,r,s,o){const a=new mF,l=so(new Uint8Array(t)).trim().replace(yF,`
`).split(`
`),c=[],u=e?O6(e.baseTime,e.timescale):0;let h="00:00.000",f=0,d=0,p,m=!0;a.oncue=function(v){const y=n[i];let x=n.ccOffset;const b=(f-u)/9e4;if(y!=null&&y.new&&(d!==void 0?x=n.ccOffset=y.start:xF(n,i,b)),b){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}x=b-n.presentationOffset}const E=v.endTime-v.startTime,T=Kr((v.startTime+x-d)*9e4,r*9e4)/9e4;v.startTime=Math.max(T,0),v.endTime=Math.max(T+E,0);const D=v.text.trim();v.text=decodeURIComponent(encodeURIComponent(D)),v.id||(v.id=Qb(v.startTime,v.endTime,D)),v.endTime>0&&c.push(v)},a.onparsingerror=function(v){p=v},a.onflush=function(){if(p){o(p);return}s(c)},l.forEach(v=>{if(m)if(Fy(v,"X-TIMESTAMP-MAP=")){m=!1,v.slice(16).split(",").forEach(y=>{Fy(y,"LOCAL:")?h=y.slice(6):Fy(y,"MPEGTS:")&&(f=parseInt(y.slice(7)))});try{d=vF(h)/1e3}catch(y){p=y}return}else v===""&&(m=!1);a.parse(v+`
`)}),a.flush()}const By="stpp.ttml.im1t",W3=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,q3=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,wF={left:"start",center:"center",right:"end",start:"start",end:"end"};function k_(t,e,n,i){const r=Et(new Uint8Array(t),["mdat"]);if(r.length===0){i(new Error("Could not parse IMSC1 mdat"));return}const s=r.map(a=>so(a)),o=F6(e.baseTime,1,e.timescale);try{s.forEach(a=>n(SF(a,o)))}catch(a){i(a)}}function SF(t,e){const r=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(s).reduce((h,f)=>(h[f]=r.getAttribute(`ttp:${f}`)||s[f],h),{}),a=r.getAttribute("xml:space")!=="preserve",l=C_(jy(r,"styling","style")),c=C_(jy(r,"layout","region")),u=jy(r,"body","[begin]");return[].map.call(u,h=>{const f=K3(h,a);if(!f||!h.hasAttribute("begin"))return null;const d=$y(h.getAttribute("begin"),o),p=$y(h.getAttribute("dur"),o);let m=$y(h.getAttribute("end"),o);if(d===null)throw R_(h);if(m===null){if(p===null)throw R_(h);m=d+p}const v=new Jb(d-e,m-e,f);v.id=Qb(v.startTime,v.endTime,v.text);const y=c[h.getAttribute("region")],x=l[h.getAttribute("style")],b=_F(y,x,l),{textAlign:E}=b;if(E){const T=wF[E];T&&(v.lineAlign=T),v.align=E}return Jn(v,b),v}).filter(h=>h!==null)}function jy(t,e,n){const i=t.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(n)):[]}function C_(t){return t.reduce((e,n)=>{const i=n.getAttribute("xml:id");return i&&(e[i]=n),e},{})}function K3(t,e){return[].slice.call(t.childNodes).reduce((n,i,r)=>{var s;return i.nodeName==="br"&&r?n+`
`:(s=i.childNodes)!=null&&s.length?K3(i,e):e?n+i.textContent.trim().replace(/\s+/g," "):n+i.textContent},"")}function _F(t,e,n){const i="http://www.w3.org/ns/ttml#styling";let r=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return o&&n.hasOwnProperty(o)&&(r=n[o]),s.reduce((a,l)=>{const c=Uy(e,i,l)||Uy(t,i,l)||Uy(r,i,l);return c&&(a[l]=c),a},{})}function Uy(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function R_(t){return new Error(`Could not parse ttml timestamp ${t}`)}function $y(t,e){if(!t)return null;let n=H3(t);return n===null&&(W3.test(t)?n=EF(t,e):q3.test(t)&&(n=AF(t,e))),n}function EF(t,e){const n=W3.exec(t),i=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+i/e.frameRate}function AF(t,e){const n=q3.exec(t),i=Number(n[1]);switch(n[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}class TF{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=N_(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(W.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(W.FRAG_LOADING,this.onFragLoading,this),e.on(W.FRAG_LOADED,this.onFragLoaded,this),e.on(W.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(W.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(W.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(W.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(W.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(W.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(W.FRAG_LOADING,this.onFragLoading,this),e.off(W.FRAG_LOADED,this.onFragLoaded,this),e.off(W.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(W.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(W.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(W.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(W.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new Gp(this,"textTrack1"),n=new Gp(this,"textTrack2"),i=new Gp(this,"textTrack3"),r=new Gp(this,"textTrack4");this.cea608Parser1=new L_(1,e,n),this.cea608Parser2=new L_(3,i,r)}}addCues(e,n,i,r,s){let o=!1;for(let a=s.length;a--;){const l=s[a],c=LF(l[0],l[1],n,i);if(c>=0&&(l[0]=Math.min(l[0],n),l[1]=Math.max(l[1],i),o=!0,c/(i-n)>.5))return}if(o||s.push([n,i]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,n,i,r)}else{const a=this.Cues.newCue(null,n,i,r);this.hls.trigger(W.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:n,id:i,initPTS:r,timescale:s}){const{unparsedVttFrags:o}=this;i==="main"&&(this.initPTS[n.cc]={baseTime:r,timescale:s}),o.length&&(this.unparsedVttFrags=[],o.forEach(a=>{this.onFragLoaded(W.FRAG_LOADED,a)}))}getExistingTrack(e,n){const{media:i}=this;if(i)for(let r=0;r<i.textTracks.length;r++){const s=i.textTracks[r];if(P_(s,{name:e,lang:n,attrs:{}}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:i,media:r}=this,{label:s,languageCode:o}=n[e],a=this.getExistingTrack(s,o);if(a)i[e]=a,au(i[e]),p3(i[e],r);else{const l=this.createTextTrack("captions",s,o);l&&(l[e]=!0,i[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const i=n.label,r={_id:e,label:i,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(W.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,n,i){const r=this.media;if(r)return r.addTextTrack(e,n,i)}onMediaAttaching(e,n){this.media=n.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(n=>{au(e[n]),delete e[n]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=N_(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let i=0;i<n.length;i++)au(n[i])}onSubtitleTracksUpdated(e,n){const i=n.subtitleTracks||[],r=i.some(s=>s.textCodec===By);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(U3(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const o=this.media,a=o?O0(o.textTracks):null;if(this.tracks.forEach((l,c)=>{let u;if(a){let h=null;for(let f=0;f<a.length;f++)if(a[f]&&P_(a[f],l)){h=a[f],a[f]=null;break}h&&(u=h)}if(u)au(u);else{const h=Y3(l);u=this.createTextTrack(h,l.name,l.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),a!=null&&a.length){const l=a.filter(c=>c!==null).map(c=>c.label);l.length&&me.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(W.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(i=>{const r=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!r)return;const s=`textTrack${r[1]}`,o=this.captionsProperties[s];o&&(o.label=i.name,i.lang&&(o.languageCode=i.lang),o.media=i)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){if(this.enabled&&n.frag.type===ft.MAIN){var i,r;const{cea608Parser1:s,cea608Parser2:o,lastSn:a}=this,{cc:l,sn:c}=n.frag,u=(i=(r=n.part)==null?void 0:r.index)!=null?i:-1;s&&o&&(c!==a+1||c===a&&u!==this.lastPartIndex+1||l!==this.lastCc)&&(s.reset(),o.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(e,n){const{frag:i,payload:r}=n;if(i.type===ft.SUBTITLE)if(r.byteLength){const s=i.decryptdata,o="stats"in n;if(s==null||!s.encrypted||o){const a=this.tracks[i.level],l=this.vttCCs;l[i.cc]||(l[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),a&&a.textCodec===By?this._parseIMSC1(i,r):this._parseVTTs(n)}}else this.hls.trigger(W.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const i=this.hls;k_(n,this.initPTS[e.cc],r=>{this._appendCues(r,e.level),i.trigger(W.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},r=>{me.log(`Failed to parse IMSC1: ${r}`),i.trigger(W.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})})}_parseVTTs(e){var n;const{frag:i,payload:r}=e,{initPTS:s,unparsedVttFrags:o}=this,a=s.length-1;if(!s[i.cc]&&a===-1){o.push(e);return}const l=this.hls,c=(n=i.initSegment)!=null&&n.data?rs(i.initSegment.data,new Uint8Array(r)):r;bF(c,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,u=>{this._appendCues(u,i.level),l.trigger(W.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},u=>{const h=u.message==="Missing initPTS for VTT MPEGTS";h?o.push(e):this._fallbackToIMSC1(i,r),me.log(`Failed to parse VTT cue: ${u}`),!(h&&a>i.cc)&&l.trigger(W.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:u})})}_fallbackToIMSC1(e,n){const i=this.tracks[e.level];i.textCodec||k_(n,this.initPTS[e.cc],()=>{i.textCodec=By,this._parseIMSC1(e,n)},()=>{i.textCodec="wvtt"})}_appendCues(e,n){const i=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[n];if(!r||r.mode==="disabled")return;e.forEach(s=>g3(r,s))}else{const r=this.tracks[n];if(!r)return;const s=r.default?"default":"subtitles"+n;i.trigger(W.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,n){const{frag:i}=n;i.type===ft.SUBTITLE&&this.onFragLoaded(W.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){this.initCea608Parsers();const{cea608Parser1:i,cea608Parser2:r}=this;if(!this.enabled||!i||!r)return;const{frag:s,samples:o}=n;if(!(s.type===ft.MAIN&&this.closedCaptionsForLevel(s)==="NONE"))for(let a=0;a<o.length;a++){const l=o[a].bytes;if(l){const c=this.extractCea608Data(l);i.addData(o[a].pts,c[0]),r.addData(o[a].pts,c[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:i,endOffsetSubtitles:r,type:s}){const{media:o}=this;if(!(!o||o.currentTime<i)){if(!s||s==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>v2(a[l],n,i))}if(this.config.renderTextTracksNatively&&n===0&&r!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>v2(a[l],n,r))}}}extractCea608Data(e){const n=[[],[]],i=e[0]&31;let r=2;for(let s=0;s<i;s++){const o=e[r++],a=127&e[r++],l=127&e[r++];if(a===0&&l===0)continue;if((4&o)!==0){const u=3&o;(u===0||u===1)&&(n[u].push(a),n[u].push(l))}}return n}}function Y3(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function P_(t,e){return!!t&&t.kind===Y3(e)&&E2(e,t)}function LF(t,e,n,i){return Math.min(e,i)-Math.max(t,n)}function N_(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class Zb{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(W.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(W.BUFFER_CODECS,this.onBufferCodecs,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(W.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(W.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(W.BUFFER_CODECS,this.onBufferCodecs,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const i=this.hls.levels[n.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const i=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,i.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&Xe(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&me.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=i,n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const i=n.filter((r,s)=>this.isLevelAllowed(r)&&s<=e);return this.clientRect=null,Zb.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const i=e.getBoundingClientRect();n.width=i.width,n.height=i.height,!n.width&&!n.height&&(n.width=i.right-i.left||e.width||0,n.height=i.bottom-i.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,n,i){if(!(e!=null&&e.length))return-1;const r=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0;let s=e.length-1;const o=Math.max(n,i);for(let a=0;a<e.length;a+=1){const l=e[a];if((l.width>=o||l.height>=o)&&r(l,e[a+1])){s=a;break}}return s}}class kF{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(W.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(W.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const i=this.hls.config;if(i.capLevelOnFPSDrop){const r=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=r,r&&typeof r.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}checkFPS(e,n,i){const r=performance.now();if(n){if(this.lastTime){const s=r-this.lastTime,o=i-this.lastDroppedFrames,a=n-this.lastDecodedFrames,l=1e3*o/s,c=this.hls;if(c.trigger(W.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:i}),l>0&&o>c.config.fpsDroppedMonitoringThreshold*a){let u=c.currentLevel;me.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(W.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=i,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const qp="[eme]";class yu{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=yu.CDMCleanupPromise?[yu.CDMCleanupPromise]:[],this.debug=me.debug.bind(me,qp),this.log=me.log.bind(me,qp),this.warn=me.warn.bind(me,qp),this.error=me.error.bind(me,qp),this.onMediaEncrypted=n=>{const{initDataType:i,initData:r}=n,s=`"${n.type}" event: init data type: "${i}"`;if(this.debug(s),r!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=Op(this.config));const a=o.map(_y).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(a)}this.keyFormatPromise.then(o=>{const a=wy(o);let l,c;if(i==="sinf"){if(a!==Gt.FAIRPLAY){this.warn(`Ignoring unexpected "${n.type}" event with init data type: "${i}" for selected key-system ${a}`);return}const p=ei(new Uint8Array(r));try{const m=Bb(JSON.parse(p).sinf),v=c3(m);if(!v)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=v.subarray(8,24),c=Gt.FAIRPLAY}catch(m){this.warn(`${s} Failed to parse sinf: ${m}`);return}}else{if(a!==Gt.WIDEVINE&&a!==Gt.PLAYREADY){this.warn(`Ignoring unexpected "${n.type}" event with init data type: "${i}" for selected key-system ${a}`);return}const p=sM(r),m=p.filter(y=>!!y.systemId&&Sy(y.systemId)===a);m.length>1&&this.warn(`${s} Using first of ${m.length} pssh found for selected key-system ${a}`);const v=m[0];if(!v){p.length===0||p.some(y=>!y.systemId)?this.warn(`${s} contains incomplete or invalid pssh data`):this.log(`ignoring ${s} for ${p.map(y=>Sy(y.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(c=Sy(v.systemId),v.version===0&&v.data)if(c===Gt.WIDEVINE){const y=v.data.length-22;l=v.data.subarray(y,y+16)}else c===Gt.PLAYREADY&&(l=t3(v.data))}if(!c||!l){this.log(`Unable to handle ${s} with key-system ${a}`);return}const u=qs.hexDump(l),{keyIdToKeySessionPromise:h,mediaKeySessions:f}=this;let d=h[u];for(let p=0;p<f.length;p++){const m=f[p],v=m.decryptdata;if(!v.keyId)continue;const y=qs.hexDump(v.keyId);if(u===y||v.uri.replace(/-/g,"").indexOf(u)!==-1){if(d=h[y],v.pssh)break;delete h[y],v.pssh=new Uint8Array(r),v.keyId=l,d=h[u]=d.then(()=>this.generateRequestWithPreferredKeySession(m,i,r,"encrypted-event-key-match")),d.catch(x=>this.handleError(x));break}}if(!d){if(c!==a){this.log(`Ignoring "${s}" with ${c} init data for selected key-system ${a}`);return}d=h[u]=this.getKeySystemSelectionPromise([c]).then(({keySystem:p,mediaKeys:m})=>{var v;this.throwIfDestroyed();const y=new Wf("ISO-23001-7",u,(v=_y(p))!=null?v:"");return y.pssh=new Uint8Array(r),y.keyId=l,this.attemptSetMediaKeys(p,m).then(()=>{this.throwIfDestroyed();const x=this.createMediaKeySessionContext({decryptdata:y,keySystem:p,mediaKeys:m});return this.generateRequestWithPreferredKeySession(x,i,r,"encrypted-event-no-match")})}),d.catch(p=>this.handleError(p))}})}},this.onWaitingForKey=n=>{this.log(`"${n.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(W.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(W.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(W.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(W.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(W.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(W.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:i}=this.config,r=n[e];if(r)return r.licenseUrl;if(e===Gt.WIDEVINE&&i)return i}getLicenseServerUrlOrThrow(e){const n=this.getLicenseServerUrl(e);if(n===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return n}getServerCertificateUrl(e){const{drmSystems:n}=this.config,i=n[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,i=(o,a,l)=>!!o&&l.indexOf(o)===a,r=n.map(o=>o.audioCodec).filter(i),s=n.map(o=>o.videoCodec).filter(i);return r.length+s.length===0&&s.push("avc1.42e01e"),new Promise((o,a)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,r,s).then(h=>o({keySystem:u,mediaKeys:h})).catch(h=>{c.length?l(c):h instanceof Gr?a(h):a(new Gr({type:gt.KEY_SYSTEM_ERROR,details:Se.KEY_SYSTEM_NO_ACCESS,error:h,fatal:!0},h.message))})};l(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let r=`Configured requestMediaKeySystemAccess is not a function ${i}`;return e3===null&&self.location.protocol==="http:"&&(r=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(r))}return i(e,n)}getMediaKeysPromise(e,n,i){const r=DD(e,n,i,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e];let o=s==null?void 0:s.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(r)}`),o=this.requestMediaKeySystemAccess(e,r);const a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),o.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const c=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),a.mediaKeys=l.createMediaKeys().then(u=>(this.log(`Media-keys created for "${e}"`),c.then(h=>h?this.setMediaKeysServerCertificate(u,e,h):u))),a.mediaKeys.catch(u=>{this.error(`Failed to create media-keys for "${e}"}: ${u}`)}),a.mediaKeys})}return o.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:i}){this.log(`Creating key-system session "${n}" keyId: ${qs.hexDump(e.keyId||[])}`);const r=i.createSession(),s={decryptdata:e,keySystem:n,mediaKeys:i,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const i=this.createMediaKeySessionContext(e),r=this.getKeyIdString(n),s="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(i,s,n.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return qs.hexDump(e.keyId)}updateKeySession(e,n){var i;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${qs.hexDump(((i=e.decryptdata)==null?void 0:i.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),r.update(n)}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((n,i)=>{const r=Op(this.config),s=e.map(wy).filter(o=>!!o&&r.indexOf(o)!==-1);return this.getKeySystemSelectionPromise(s).then(({keySystem:o})=>{const a=_y(o);a?n(a):i(new Error(`Unable to find format for key-system "${o}"`))}).catch(i)})}loadKey(e){const n=e.keyInfo.decryptdata,i=this.getKeyIdString(n),r=`(keyId: ${i} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${r}`);let s=this.keyIdToKeySessionPromise[i];return s||(s=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(n).then(({keySystem:o,mediaKeys:a})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(o,a).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:o,mediaKeys:a,decryptdata:n});return this.generateRequestWithPreferredKeySession(l,"cenc",n.pssh,"playlist-key")}))),s.catch(o=>this.handleError(o))),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Gr?this.hls.trigger(W.ERROR,e.data):this.hls.trigger(W.ERROR,{type:gt.KEY_SYSTEM_ERROR,details:Se.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[n];if(!i){const r=wy(e.keyFormat),s=r?[r]:Op(this.config);return this.attemptKeySystemAccess(s)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=Op(this.config)),e.length===0)throw new Gr({type:gt.KEY_SYSTEM_ERROR,details:Se.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,n){const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(i).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>i.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,n,i,r){var s,o;const a=(s=this.config.drmSystems)==null||(o=s[e.keySystem])==null?void 0:o.generateRequest;if(a)try{const p=a.call(this.hls,n,i,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");n=p.initDataType,i=e.decryptdata.pssh=p.initData?new Uint8Array(p.initData):null}catch(p){var l;if(this.warn(p.message),(l=this.hls)!=null&&l.config.debug)throw p}if(i===null)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${c} (init data type: ${n} length: ${i?i.byteLength:null})`);const u=new Xb,h=e._onmessage=p=>{const m=e.mediaKeysSession;if(!m){u.emit("error",new Error("invalid state"));return}const{messageType:v,message:y}=p;this.log(`"${v}" message event for session "${m.sessionId}" message size: ${y.byteLength}`),v==="license-request"||v==="license-renewal"?this.renewLicense(e,y).catch(x=>{this.handleError(x),u.emit("error",x)}):v==="license-release"?e.keySystem===Gt.FAIRPLAY&&(this.updateKeySession(e,m2("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${v}"`)},f=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const v=e.keyStatus;u.emit("keyStatus",v),v==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",h),e.mediaKeysSession.addEventListener("keystatuseschange",f);const d=new Promise((p,m)=>{u.on("error",m),u.on("keyStatus",v=>{v.startsWith("usable")?p():v==="output-restricted"?m(new Gr({type:gt.KEY_SYSTEM_ERROR,details:Se.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):v==="internal-error"?m(new Gr({type:gt.KEY_SYSTEM_ERROR,details:Se.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${v}"`)):v==="expired"?m(new Error("key expired while generating request")):this.warn(`unhandled key status change "${v}"`)})});return e.mediaKeysSession.generateRequest(n,i).then(()=>{var p;this.log(`Request generated for key-session "${(p=e.mediaKeysSession)==null?void 0:p.sessionId}" keyId: ${c}`)}).catch(p=>{throw new Gr({type:gt.KEY_SYSTEM_ERROR,details:Se.KEY_SYSTEM_NO_SESSION,error:p,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>d).catch(p=>{throw u.removeAllListeners(),this.removeSession(e),p}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,i)=>{this.log(`key status change "${n}" for keyStatuses keyId: ${qs.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))} session keyId: ${qs.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,i=n.loader,r=new i(n),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,a)=>{const l={responseType:"arraybuffer",url:s},c=n.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(f,d,p,m)=>{o(f.data)},onError:(f,d,p,m)=>{a(new Gr({type:gt.KEY_SYSTEM_ERROR,details:Se.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:fi({url:l.url,data:void 0},f)},`"${e}" certificate request failed (${s}). Status: ${f.code} (${f.text})`))},onTimeout:(f,d,p)=>{a(new Gr({type:gt.KEY_SYSTEM_ERROR,details:Se.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(f,d,p)=>{a(new Error("aborted"))}};r.load(l,u,h)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,i){return new Promise((r,s)=>{e.setServerCertificate(i).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${i==null?void 0:i.byteLength}) on "${n}"`),r(e)}).catch(o=>{s(new Gr({type:gt.KEY_SYSTEM_ERROR,details:Se.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(r=>{throw new Gr({type:gt.KEY_SYSTEM_ERROR,details:Se.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:r,fatal:!0},r.message)}))}unpackPlayReadyKeyMessage(e,n){const i=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const r=new DOMParser().parseFromString(i,"application/xml"),s=r.querySelectorAll("HttpHeader");if(s.length>0){let u;for(let h=0,f=s.length;h<f;h++){var o,a;u=s[h];const d=(o=u.querySelector("name"))==null?void 0:o.textContent,p=(a=u.querySelector("value"))==null?void 0:a.textContent;d&&p&&e.setRequestHeader(d,p)}}const l=r.querySelector("Challenge"),c=l==null?void 0:l.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return m2(atob(c))}setupLicenseXHR(e,n,i,r){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,n,i,r)}).catch(o=>{if(!i.decryptdata)throw o;return e.open("POST",n,!0),s.call(this.hls,e,n,i,r)}).then(o=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:o||r})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,n){const i=this.config.keyLoadPolicy.default;return new Promise((r,s)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,a,o,e)}catch(u){this.error(u)}r(l)}else{const l=i.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||a.status>=400&&a.status<500)s(new Gr({type:gt.KEY_SYSTEM_ERROR,details:Se.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,n).then(r,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,n).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==Gt.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)})})}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const i=n.media;this.media=i,i.removeEventListener("encrypted",this.onMediaEncrypted),i.removeEventListener("waitingforkey",this.onWaitingForKey),i.addEventListener("encrypted",this.onMediaEncrypted),i.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,n=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Wf.clearKeyUriToKeyIdMap();const i=n.length;yu.CDMCleanupPromise=Promise.all(n.map(r=>this.removeSession(r)).concat(e==null?void 0:e.setMediaKeys(null).catch(r=>{this.log(`Could not clear media keys: ${r}`)}))).then(()=>{i&&(this.log("finished closing key sessions and clearing media keys"),n.length=0)}).catch(r=>{this.log(`Could not close sessions and clear media keys: ${r}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const i=n.reduce((r,s)=>(r.indexOf(s.keyFormat)===-1&&r.push(s.keyFormat),r),[]);this.log(`Selecting key-system from session-keys ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:i}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);return r>-1&&this.mediaKeySessions.splice(r,1),n.remove().catch(s=>{this.log(`Could not remove session: ${s}`)}).then(()=>n.close()).catch(s=>{this.log(`Could not close session: ${s}`)})}}}yu.CDMCleanupPromise=void 0;class Gr extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}var Ni;(function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"})(Ni||(Ni={}));var T2;(function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"})(T2||(T2={}));var Nl;(function(t){t.OBJECT="CMCD-Object",t.REQUEST="CMCD-Request",t.SESSION="CMCD-Session",t.STATUS="CMCD-Status"})(Nl||(Nl={}));const CF={[Nl.OBJECT]:["br","d","ot","tb"],[Nl.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[Nl.SESSION]:["cid","pr","sf","sid","st","v"],[Nl.STATUS]:["bs","rtp"]};class Ru{constructor(e,n){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(i=>i instanceof Ru?i:new Ru(i))),this.value=e,this.params=n}}class X3{constructor(e){this.description=void 0,this.description=e}}const RF="Dict";function PF(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function NF(t,e,n,i){return new Error(`failed to ${t} "${PF(e)}" as ${n}`,{cause:i})}const I_="Bare Item",IF="Boolean",DF="Byte Sequence",MF="Decimal",FF="Integer";function OF(t){return t<-999999999999999||999999999999999<t}const BF=/[\x00-\x1f\x7f]+/,jF="Token",UF="Key";function co(t,e,n){return NF("serialize",t,e,n)}function $F(t){if(typeof t!="boolean")throw co(t,IF);return t?"?1":"?0"}function zF(t){return btoa(String.fromCharCode(...t))}function HF(t){if(ArrayBuffer.isView(t)===!1)throw co(t,DF);return`:${zF(t)}:`}function J3(t){if(OF(t))throw co(t,FF);return t.toString()}function VF(t){return`@${J3(t.getTime()/1e3)}`}function Q3(t,e){if(t<0)return-Q3(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const r=Math.floor(t*n);return(r%2===0?r:r+1)/n}else return Math.round(t*n)/n}function GF(t){const e=Q3(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw co(t,MF);const n=e.toString();return n.includes(".")?n:`${n}.0`}const WF="String";function qF(t){if(BF.test(t))throw co(t,WF);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function KF(t){return t.description||t.toString().slice(7,-1)}function D_(t){const e=KF(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw co(e,jF);return e}function L2(t){switch(typeof t){case"number":if(!Xe(t))throw co(t,I_);return Number.isInteger(t)?J3(t):GF(t);case"string":return qF(t);case"symbol":return D_(t);case"boolean":return $F(t);case"object":if(t instanceof Date)return VF(t);if(t instanceof Uint8Array)return HF(t);if(t instanceof X3)return D_(t);default:throw co(t,I_)}}function k2(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw co(t,UF);return t}function e5(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${k2(e)}`:`;${k2(e)}=${L2(n)}`).join("")}function Z3(t){return t instanceof Ru?`${L2(t.value)}${e5(t.params)}`:L2(t)}function YF(t){return`(${t.value.map(Z3).join(" ")})${e5(t.params)}`}function XF(t,e={whitespace:!0}){if(typeof t!="object")throw co(t,RF);const n=t instanceof Map?t.entries():Object.entries(t),i=e!=null&&e.whitespace?" ":"";return Array.from(n).map(([r,s])=>{s instanceof Ru||(s=new Ru(s));let o=k2(r);return s.value===!0?o+=e5(s.params):(o+="=",Array.isArray(s.value)?o+=YF(s):o+=Z3(s)),o}).join(`,${i}`)}function JF(t,e){return XF(t,e)}const QF=t=>t==="ot"||t==="sf"||t==="st",ZF=t=>typeof t=="number"?Xe(t):t!=null&&t!==""&&t!==!1;function e8(t,e){const n=new URL(t),i=new URL(e);if(n.origin!==i.origin)return t;const r=n.pathname.split("/").slice(1),s=i.pathname.split("/").slice(1,-1);for(;r[0]===s[0];)r.shift(),s.shift();for(;s.length;)s.shift(),r.unshift("..");return r.join("/")}function t8(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const s=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(r=="x"?s:s&3|8).toString(16)})}}}const H0=t=>Math.round(t),n8=(t,e)=>(e!=null&&e.baseUrl&&(t=e8(t,e.baseUrl)),encodeURIComponent(t)),Kp=t=>H0(t/100)*100,i8={br:H0,d:H0,bl:Kp,dl:Kp,mtp:Kp,nor:n8,rtp:Kp,tb:H0};function r8(t,e){const n={};if(t==null||typeof t!="object")return n;const i=Object.keys(t).sort(),r=Jn({},i8,e==null?void 0:e.formatters),s=e==null?void 0:e.filter;return i.forEach(o=>{if(s!=null&&s(o))return;let a=t[o];const l=r[o];l&&(a=l(a,e)),!(o==="v"&&a===1)&&(o=="pr"&&a===1||ZF(a)&&(QF(o)&&typeof a=="string"&&(a=new X3(a)),n[o]=a))}),n}function eC(t,e={}){return t?JF(r8(t,e),Jn({whitespace:!1},e)):""}function s8(t,e={}){if(!t)return{};const n=Object.entries(t),i=Object.entries(CF).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),r=n.reduce((s,o)=>{var a,l;const[c,u]=o,h=((a=i.find(f=>f[1].includes(c)))==null?void 0:a[0])||Nl.REQUEST;return(l=s[h])!=null||(s[h]={}),s[h][c]=u,s},{});return Object.entries(r).reduce((s,[o,a])=>(s[o]=eC(a,e),s),{})}function o8(t,e,n){return Jn(t,s8(e,n))}const a8="CMCD";function l8(t,e={}){if(!t)return"";const n=eC(t,e);return`${a8}=${encodeURIComponent(n)}`}const M_=/CMCD=[^&#]+/;function c8(t,e,n){const i=l8(e,n);if(!i)return t;if(M_.test(t))return t.replace(M_,i);const r=t.includes("?")?"&":"?";return`${t}${r}${i}`}class u8{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=r=>{try{this.apply(r,{ot:Ni.MANIFEST,su:!this.initialized})}catch(s){me.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=r=>{try{const s=r.frag,o=this.hls.levels[s.level],a=this.getObjectType(s),l={d:s.duration*1e3,ot:a};(a===Ni.VIDEO||a===Ni.AUDIO||a==Ni.MUXED)&&(l.br=o.bitrate/1e3,l.tb=this.getTopBandwidth(a)/1e3,l.bl=this.getBufferLength(a)),this.apply(r,l)}catch(s){me.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const n=this.config=e.config,{cmcd:i}=n;i!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||t8(),this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHED,this.onMediaDetached,this),e.on(W.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHED,this.onMediaDetached,this),e.off(W.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var i,r;this.audioBuffer=(i=n.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(r=n.tracks.video)==null?void 0:r.buffer}createData(){var e;return{v:1,sf:T2.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){Jn(n,this.createData());const i=n.ot===Ni.INIT||n.ot===Ni.VIDEO||n.ot===Ni.MUXED;this.starved&&i&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:r}=this;r&&(n=Object.keys(n).reduce((s,o)=>(r.includes(o)&&(s[o]=n[o]),s),{})),this.useHeaders?(e.headers||(e.headers={}),o8(e.headers,n)):e.url=c8(e.url,n)}getObjectType(e){const{type:n}=e;if(n==="subtitle")return Ni.TIMED_TEXT;if(e.sn==="initSegment")return Ni.INIT;if(n==="audio")return Ni.AUDIO;if(n==="main")return this.hls.audioTracks.length?Ni.VIDEO:Ni.MUXED}getTopBandwidth(e){let n=0,i;const r=this.hls;if(e===Ni.AUDIO)i=r.audioTracks;else{const s=r.maxAutoLevel,o=s>-1?s+1:r.levels.length;i=r.levels.slice(0,o)}for(const s of i)s.bitrate>n&&(n=s.bitrate);return n>0?n:NaN}getBufferLength(e){const n=this.hls.media,i=e===Ni.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!n?NaN:dn.bufferInfo(i,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){n(s),this.loader.load(s,o,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){n(s),this.loader.load(s,o,a)}}}}const h8=3e5;class f8{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=me.log.bind(me,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:i}=n;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:i}=n;if((i==null?void 0:i.action)===vi.SendAlternateToPenaltyBox&&i.flags===vs.MoveAllAlternatesMatchingHost){const r=this.levels;let s=this.pathwayPriority,o=this.pathwayId;if(n.context){const{groupId:a,pathwayId:l,type:c}=n.context;a&&r?o=this.getPathwayForGroupId(a,c,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!s&&r&&(s=r.reduce((a,l)=>(a.indexOf(l.pathwayId)===-1&&a.push(l.pathwayId),a),[])),s&&s.length>1&&(this.updatePathwayPriority(s),i.resolved=this.pathwayId!==o),i.resolved||me.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${o} levels: ${r&&r.length} priorities: ${JSON.stringify(s)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),n=this.getLevelsForPathway(i),this.pathwayId=i}return n.length!==e.length&&this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let n;const i=this.penalizedPathways,r=performance.now();Object.keys(i).forEach(s=>{r-i[s]>h8&&delete i[s]});for(let s=0;s<e.length;s++){const o=e[s];if(o in i)continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(n=this.getLevelsForPathway(o),n.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,x3(n),this.hls.trigger(W.LEVELS_UPDATED,{levels:n});const c=this.hls.levels[a];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,n,i){const r=this.getLevelsForPathway(i).concat(this.levels||[]);for(let s=0;s<r.length;s++)if(n===Bt.AUDIO_TRACK&&r[s].hasAudioGroup(e)||n===Bt.SUBTITLE_TRACK&&r[s].hasSubtitleGroup(e))return r[s].pathwayId;return i}clonePathways(e){const n=this.levels;if(!n)return;const i={},r={};e.forEach(s=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=s;if(n.some(u=>u.pathwayId===o))return;const c=this.getLevelsForPathway(a).map(u=>{const h=new En(u.attrs);h["PATHWAY-ID"]=o;const f=h.AUDIO&&`${h.AUDIO}_clone_${o}`,d=h.SUBTITLES&&`${h.SUBTITLES}_clone_${o}`;f&&(i[h.AUDIO]=f,h.AUDIO=f),d&&(r[h.SUBTITLES]=d,h.SUBTITLES=d);const p=tC(u.uri,h["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),m=new Cu({attrs:h,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:p,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let v=1;v<u.audioGroups.length;v++)m.addGroupId("audio",`${u.audioGroups[v]}_clone_${o}`);if(u.subtitleGroups)for(let v=1;v<u.subtitleGroups.length;v++)m.addGroupId("text",`${u.subtitleGroups[v]}_clone_${o}`);return m});n.push(...c),F_(this.audioTracks,i,l,o),F_(this.subtitleTracks,r,l,o)})}loadSteeringManifest(e){const n=this.hls.config,i=n.loader;this.loader&&this.loader.destroy(),this.loader=new i(n);let r;try{r=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(r.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+u)}const s={responseType:"json",url:r.href},o=n.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},c={onSuccess:(u,h,f,d)=>{this.log(`Loaded steering manifest: "${r}"`);const p=u.data;if(p.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":m,"PATHWAY-CLONES":v,"PATHWAY-PRIORITY":y}=p;if(m)try{this.uri=new self.URL(m,r).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${m}`);return}this.scheduleRefresh(this.uri||f.url),v&&this.clonePathways(v);const x={steeringManifest:p,url:r.toString()};this.hls.trigger(W.STEERING_MANIFEST_LOADED,x),y&&this.updatePathwayPriority(y)},onError:(u,h,f,d)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${h.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${h.url} no longer available`);return}let p=this.timeToLoad*1e3;if(u.code===429){const m=this.loader;if(typeof(m==null?void 0:m.getResponseHeader)=="function"){const v=m.getResponseHeader("Retry-After");v&&(p=parseFloat(v)*1e3)}this.log(`Steering manifest ${h.url} rate limited`);return}this.scheduleRefresh(this.uri||h.url,p)},onTimeout:(u,h,f)=>{this.log(`Timeout loading steering manifest (${h.url})`),this.scheduleRefresh(this.uri||h.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(s,l,c)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;const r=(i=this.hls)==null?void 0:i.media;if(r&&!r.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function F_(t,e,n,i){t&&Object.keys(e).forEach(r=>{const s=t.filter(o=>o.groupId===r).map(o=>{const a=Jn({},o);return a.details=void 0,a.attrs=new En(a.attrs),a.url=a.attrs.URI=tC(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=e[r],a.attrs["PATHWAY-ID"]=i,a});t.push(...s)})}function tC(t,e,n,i){const{HOST:r,PARAMS:s,[n]:o}=i;let a;e&&(a=o==null?void 0:o[e],a&&(t=a));const l=new self.URL(t);return r&&!a&&(l.host=r),s&&Object.keys(s).sort().forEach(c=>{c&&l.searchParams.set(c,s[c])}),l.href}const d8=/^age:\s*[\d.]+\s*$/im;class nC{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Hm,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const i=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return s(i,n.url)}).catch(o=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",n.url,!0),s(i,n.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,n,e)}).catch(o=>{this.callbacks.onError({code:i.status,text:o.message},n,i,r)}):this.openAndSendXhr(i,n,e)}openAndSendXhr(e,n,i){e.readyState||e.open("GET",n.url,!0);const r=n.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:o}=i.loadPolicy;if(r)for(const a in r)e.setRequestHeader(a,r[a]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),i.timeout=s&&Xe(s)?s:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:i}=this;if(!e||!n)return;const r=n.readyState,s=this.config;if(!i.aborted&&r>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),r===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const o=n.status,a=n.responseType==="text"?n.responseText:null;if(o>=200&&o<300){const h=a??n.response;if(h!=null){i.loading.end=Math.max(self.performance.now(),i.loading.first);const f=n.responseType==="arraybuffer"?h.byteLength:h.length;if(i.loaded=i.total=f,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first),!this.callbacks)return;const d=this.callbacks.onProgress;if(d&&d(i,e,h,n),!this.callbacks)return;const p={url:n.responseURL,data:h,code:o};this.callbacks.onSuccess(p,i,e,n);return}}const l=s.loadPolicy.errorRetry,c=i.retry,u={url:e.url,data:void 0,code:o};Og(l,c,!1,u)?this.retry(l):(me.error(`${o} while loading ${e.url}`),this.callbacks.onError({code:o,text:n.statusText},e,n,i))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,n=this.stats.retry;if(Og(e,n,!0))this.retry(e);else{var i;me.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:i}=this;this.retryDelay=$b(e,i.retry),i.retry++,me.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&d8.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function p8(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const g8=/(\d+)-(\d+)\/(\d+)/;class O_{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||x8,this.controller=new self.AbortController,this.stats=new Hm}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,i){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const s=m8(e,this.controller.signal),o=i.onProgress,a=e.responseType==="arraybuffer",l=a?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:u}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=i,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),n.timeout=c&&Xe(c)?c:u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),i.onTimeout(r,e,this.response)},n.timeout),self.fetch(this.request).then(h=>{this.response=this.loader=h;const f=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),i.onTimeout(r,e,this.response)},u-(f-r.loading.start)),!h.ok){const{status:d,statusText:p}=h;throw new b8(p||"fetch, bad network response",d,h)}return r.loading.first=f,r.total=v8(h.headers)||r.total,o&&Xe(n.highWaterMark)?this.loadProgressively(h,r,e,n.highWaterMark,o):a?h.arrayBuffer():e.responseType==="json"?h.json():h.text()}).then(h=>{const f=this.response;if(!f)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const d=h[l];d&&(r.loaded=r.total=d);const p={url:f.url,data:h,code:f.status};o&&!Xe(n.highWaterMark)&&o(r,e,h,f),i.onSuccess(p,r,e,f)}).catch(h=>{if(self.clearTimeout(this.requestTimeout),r.aborted)return;const f=h&&h.code||0,d=h?h.message:null;i.onError({code:f,text:d},e,h?h.details:null,r)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,i,r=0,s){const o=new _3,a=e.body.getReader(),l=()=>a.read().then(c=>{if(c.done)return o.dataLength&&s(n,i,o.flush(),e),Promise.resolve(new ArrayBuffer(0));const u=c.value,h=u.length;return n.loaded+=h,h<r||o.dataLength?(o.push(u),o.dataLength>=r&&s(n,i,o.flush(),e)):s(n,i,u,e),l()}).catch(()=>Promise.reject());return l()}}function m8(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Jn({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function y8(t){const e=g8.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function v8(t){const e=t.get("Content-Range");if(e){const i=y8(e);if(Xe(i))return i}const n=t.get("Content-Length");if(n)return parseInt(n)}function x8(t,e){return new self.Request(t.url,e)}class b8 extends Error{constructor(e,n,i){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=i}}const w8=/\s/,S8={newCue(t,e,n,i){const r=[];let s,o,a,l,c;const u=self.VTTCue||self.TextTrackCue;for(let f=0;f<i.rows.length;f++)if(s=i.rows[f],a=!0,l=0,c="",!s.isEmpty()){var h;for(let m=0;m<s.chars.length;m++)w8.test(s.chars[m].uchar)&&a?l++:(c+=s.chars[m].uchar,a=!1);s.cueStartTime=e,e===n&&(n+=1e-4),l>=16?l--:l++;const d=G3(c.trim()),p=Qb(e,n,d);t!=null&&(h=t.cues)!=null&&h.getCueById(p)||(o=new u(e,n,d),o.id=p,o.line=f+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),r.push(o))}return t&&r.length&&(r.sort((f,d)=>f.line==="auto"||d.line==="auto"?0:f.line>8&&d.line>8?d.line-f.line:f.line-d.line),r.forEach(f=>g3(t,f))),r}},_8={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},iC=fi(fi({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:nC,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:XM,bufferController:eF,capLevelController:Zb,errorController:BM,fpsController:kF,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:e3,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:_8},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},E8()),{},{subtitleStreamController:X6,subtitleTrackController:Q6,timelineController:TF,audioStreamController:K6,audioTrackController:Y6,emeController:yu,cmcdController:u8,contentSteeringController:f8});function E8(){return{cueHandler:S8,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function A8(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=C2(t),i=["manifest","level","frag"],r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(s=>{const o=`${s==="level"?"playlist":s}LoadPolicy`,a=e[o]===void 0,l=[];r.forEach(c=>{const u=`${s}Loading${c}`,h=e[u];if(h!==void 0&&a){l.push(u);const f=n[o].default;switch(e[o]={default:f},c){case"TimeOut":f.maxLoadTimeMs=h,f.maxTimeToFirstByteMs=h;break;case"MaxRetry":f.errorRetry.maxNumRetry=h,f.timeoutRetry.maxNumRetry=h;break;case"RetryDelay":f.errorRetry.retryDelayMs=h,f.timeoutRetry.retryDelayMs=h;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=h,f.timeoutRetry.maxRetryDelayMs=h;break}}}),l.length&&me.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${o}": ${JSON.stringify(e[o])}`)}),fi(fi({},n),e)}function C2(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(C2):Object.keys(t).reduce((e,n)=>(e[n]=C2(t[n]),e),{}):t}function T8(t){const e=t.loader;e!==O_&&e!==nC?(me.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):p8()&&(t.loader=O_,t.progressive=!0,t.enableSoftwareAES=!0,me.log("[config]: Progressive streaming enabled, using FetchLoader"))}let zy;class L8 extends zb{constructor(e,n){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(W.LEVEL_LOADED,this.onLevelLoaded,this),e.on(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this),e.on(W.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(W.LEVEL_LOADED,this.onLevelLoaded,this),e.off(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this),e.off(W.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const i=this.hls.config.preferManagedMediaSource,r=[],s={},o={};let a=!1,l=!1,c=!1;n.levels.forEach(u=>{var h,f;const d=u.attrs;let{audioCodec:p,videoCodec:m}=u;((h=p)==null?void 0:h.indexOf("mp4a.40.34"))!==-1&&(zy||(zy=/chrome|firefox/i.test(navigator.userAgent)),zy&&(u.audioCodec=p=void 0)),p&&(u.audioCodec=p=Dg(p,i)),((f=m)==null?void 0:f.indexOf("avc1"))===0&&(m=u.videoCodec=dM(m));const{width:v,height:y,unknownCodecs:x}=u;if(a||(a=!!(v&&y)),l||(l=!!m),c||(c=!!p),x!=null&&x.length||p&&!Ly(p,"audio",i)||m&&!Ly(m,"video",i))return;const{CODECS:b,"FRAME-RATE":E,"HDCP-LEVEL":T,"PATHWAY-ID":D,RESOLUTION:R,"VIDEO-RANGE":S}=d,N=`${`${D||"."}-`}${u.bitrate}-${R}-${E}-${b}-${S}-${T}`;if(s[N])if(s[N].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const k=o[N]+=1;u.attrs["PATHWAY-ID"]=new Array(k+1).join(".");const P=new Cu(u);s[N]=P,r.push(P)}else s[N].addGroupId("audio",d.AUDIO),s[N].addGroupId("text",d.SUBTITLES);else{const k=new Cu(u);s[N]=k,o[N]=1,r.push(k)}}),this.filterAndSortMediaOptions(r,n,a,l,c)}filterAndSortMediaOptions(e,n,i,r,s){let o=[],a=[],l=e;if((i||r)&&s&&(l=l.filter(({videoCodec:p,videoRange:m,width:v,height:y})=>(!!p||!!(v&&y))&&TM(m))),l.length===0){Promise.resolve().then(()=>{if(this.hls){n.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(n.levels[0].attrs)}`);const p=new Error("no level with compatible codecs found in manifest");this.hls.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:p,reason:p.message})}});return}if(n.audioTracks){const{preferManagedMediaSource:p}=this.hls.config;o=n.audioTracks.filter(m=>!m.audioCodec||Ly(m.audioCodec,"audio",p)),B_(o)}n.subtitles&&(a=n.subtitles,B_(a));const c=l.slice(0);l.sort((p,m)=>{if(p.attrs["HDCP-LEVEL"]!==m.attrs["HDCP-LEVEL"])return(p.attrs["HDCP-LEVEL"]||"")>(m.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&p.height!==m.height)return p.height-m.height;if(p.frameRate!==m.frameRate)return p.frameRate-m.frameRate;if(p.videoRange!==m.videoRange)return Mg.indexOf(p.videoRange)-Mg.indexOf(m.videoRange);if(p.videoCodec!==m.videoCodec){const v=GS(p.videoCodec),y=GS(m.videoCodec);if(v!==y)return y-v}if(p.uri===m.uri&&p.codecSet!==m.codecSet){const v=Ig(p.codecSet),y=Ig(m.codecSet);if(v!==y)return y-v}return p.averageBitrate!==m.averageBitrate?p.averageBitrate-m.averageBitrate:0});let u=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==c.length)){for(let p=0;p<c.length;p++)if(c[p].pathwayId===l[0].pathwayId){u=c[p];break}}this._levels=l;for(let p=0;p<l.length;p++)if(l[p]===u){var h;this._firstLevel=p;const m=u.bitrate,v=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${m}`),((h=this.hls.userConfig)==null?void 0:h.abrEwmaDefaultEstimate)===void 0){const y=Math.min(m,this.hls.config.abrEwmaDefaultEstimateMax);y>v&&v===iC.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=y)}break}const f=s&&!r,d={levels:l,audioTracks:o,subtitleTracks:a,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:s,video:r,altAudio:!f&&o.some(p=>!!p.url)};this.hls.trigger(W.MANIFEST_PARSED,d),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const u=new Error("invalid level idx"),h=e<0;if(this.hls.trigger(W.ERROR,{type:gt.OTHER_ERROR,details:Se.LEVEL_SWITCH_ERROR,level:e,fatal:h,error:u,reason:u.message}),h)return;e=Math.min(e,n.length-1)}const i=this.currentLevelIndex,r=this.currentLevel,s=r?r.attrs["PATHWAY-ID"]:void 0,o=n[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,i===e&&o.details&&r&&s===a)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${i}${s?" with Pathway "+s:""}`);const l={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(W.LEVEL_SWITCHING,l);const c=o.details;if(!c||c.live){const u=this.switchParams(o.uri,r==null?void 0:r.details,c);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,n){n.fatal||!n.context||n.context.type===Bt.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(e,{frag:n}){if(n!==void 0&&n.type===ft.MAIN){const i=n.elementaryStreams;if(!Object.keys(i).some(s=>!!i[s]))return;const r=this._levels[n.level];r!=null&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,n){var i;const{level:r,details:s}=n,o=this._levels[r];if(!o){var a;this.warn(`Invalid level index ${r}`),(a=n.deliveryDirectives)!=null&&a.skip&&(s.deltaUpdateFailed=!0);return}r===this.currentLevelIndex?(o.fragmentError===0&&(o.loadError=0),this.playlistLoaded(r,n,o.details)):(i=n.deliveryDirectives)!=null&&i.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const n=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){let r=i.uri;if(e)try{r=e.addDirectives(r)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}const s=i.attrs["PATHWAY-ID"];this.log(`Loading level index ${n}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${s?" Pathway "+s:""} ${r}`),this.clearTimer(),this.hls.trigger(W.LEVEL_LOADING,{url:r,level:n,pathwayId:i.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var n;const i=this._levels.filter((r,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(r),r===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,r.details&&r.details.fragments.forEach(o=>o.level=-1)),!1));x3(i),this._levels=i,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(W.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:n,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(W.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function B_(t){const e={};t.forEach(n=>{const i=n.groupId||"";n.id=e[i]=e[i]||0,e[i]++})}class k8{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[i].loader;if(r){var n;if(e&&e!==((n=r.context)==null?void 0:n.frag.type))return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,n=Se.KEY_LOAD_ERROR,i,r,s){return new Io({type:gt.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:s,error:i,networkDetails:r})}loadClear(e,n){if(this.emeController&&this.config.emeEnabled){const{sn:i,cc:r}=e;for(let s=0;s<n.length;s++){const o=n[s];if(r<=o.cc&&(i==="initSegment"||o.sn==="initSegment"||i<o.sn)){this.emeController.selectKeySystemFormat(o).then(a=>{o.setKeyFormat(a)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var i,r;n&&e.setKeyFormat(n);const s=e.decryptdata;if(!s){const c=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,Se.KEY_LOAD_ERROR,c))}const o=s.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,Se.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let a=this.keyUriToKeyInfo[o];if((i=a)!=null&&i.decryptdata.key)return s.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});if((r=a)!=null&&r.keyLoadPromise){var l;switch((l=a.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then(c=>(s.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:a}))}}switch(a=this.keyUriToKeyInfo[o]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,Se.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,n){const i={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const r=this.emeController.loadKey(i);if(r)return(e.keyLoadPromise=r.then(s=>(e.mediaKeySessionContext=s,i))).catch(s=>{throw e.keyLoadPromise=null,s})}return Promise.resolve(i)}loadKeyHTTP(e,n){const i=this.config,r=i.loader,s=new r(i);return n.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((o,a)=>{const l={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},c=i.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(f,d,p,m)=>{const{frag:v,keyInfo:y,url:x}=p;if(!v.decryptdata||y!==this.keyUriToKeyInfo[x])return a(this.createKeyLoadError(v,Se.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),m));y.decryptdata.key=v.decryptdata.key=new Uint8Array(f.data),v.keyLoader=null,y.loader=null,o({frag:v,keyInfo:y})},onError:(f,d,p,m)=>{this.resetLoader(d),a(this.createKeyLoadError(n,Se.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),p,fi({url:l.url,data:void 0},f)))},onTimeout:(f,d,p)=>{this.resetLoader(d),a(this.createKeyLoadError(n,Se.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(f,d,p)=>{this.resetLoader(d),a(this.createKeyLoadError(n,Se.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};s.load(l,u,h)})}resetLoader(e){const{frag:n,keyInfo:i,url:r}=e,s=i.loader;n.keyLoader===s&&(n.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[r],s&&s.destroy()}}function rC(){return self.SourceBuffer||self.WebKitSourceBuffer}function sC(){if(!Xl())return!1;const e=rC();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function C8(){if(!sC())return!1;const t=Xl();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(qf(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(qf(e,"audio"))))}function R8(){var t;const e=rC();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const P8=250,V0=2,N8=.1,I8=.05;class D8{constructor(e,n,i,r){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=n,this.fragmentTracker=i,this.hls=r}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,n){const{config:i,media:r,stalled:s}=this;if(r===null)return;const{currentTime:o,seeking:a}=r,l=this.seeking&&!a,c=!this.seeking&&a;if(this.seeking=a,o!==e){if(this.moved=!0,a||(this.nudgeRetry=0),s!==null){if(this.stallReported){const v=self.performance.now()-s;me.warn(`playback not stuck anymore @${o}, after ${Math.round(v)}ms`),this.stallReported=!1}this.stalled=null}return}if(c||l){this.stalled=null;return}if(r.paused&&!a||r.ended||r.playbackRate===0||!dn.getBuffered(r).length){this.nudgeRetry=0;return}const u=dn.bufferInfo(r,o,0),h=u.nextStart||0;if(a){const v=u.len>V0,y=!h||n&&n.start<=o||h-o>V0&&!this.fragmentTracker.getPartialFragment(o);if(v||y)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var f;if(!(u.len>0)&&!h)return;const y=Math.max(h,u.start||0)-o,x=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,E=(x==null||(f=x.details)==null?void 0:f.live)?x.details.targetduration*2:V0,T=this.fragmentTracker.getPartialFragment(o);if(y>0&&(y<=E||T)){r.paused||this._trySkipBufferHole(T);return}}const d=self.performance.now();if(s===null){this.stalled=d;return}const p=d-s;if(!a&&p>=P8&&(this._reportStall(u),!this.media))return;const m=dn.bufferInfo(r,o,i.maxBufferHole);this._tryFixBufferStall(m,p)}_tryFixBufferStall(e,n){const{config:i,fragmentTracker:r,media:s}=this;if(s===null)return;const o=s.currentTime,a=r.getPartialFragment(o);a&&(this._trySkipBufferHole(a)||!this.media)||(e.len>i.maxBufferHole||e.nextStart&&e.nextStart-o<i.maxBufferHole)&&n>i.highBufferWatchdogPeriod*1e3&&(me.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:n,media:i,stallReported:r}=this;if(!r&&i){this.stallReported=!0;const s=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${JSON.stringify(e)})`);me.warn(s.message),n.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len})}}_trySkipBufferHole(e){const{config:n,hls:i,media:r}=this;if(r===null)return 0;const s=r.currentTime,o=dn.bufferInfo(r,s,0),a=s<o.start?o.start:o.nextStart;if(a){const l=o.len<=n.maxBufferHole,c=o.len>0&&o.len<1&&r.readyState<3,u=a-s;if(u>0&&(l||c)){if(u>n.maxBufferHole){const{fragmentTracker:f}=this;let d=!1;if(s===0){const p=f.getAppendedFrag(0,ft.MAIN);p&&a<p.end&&(d=!0)}if(!d){const p=e||f.getAppendedFrag(s,ft.MAIN);if(p){let m=!1,v=p.end;for(;v<a;){const y=f.getPartialFragment(v);if(y)v+=y.duration;else{m=!0;break}}if(m)return 0}}}const h=Math.max(a+I8,s+N8);if(me.warn(`skipping hole, adjusting currentTime from ${s} to ${h}`),this.moved=!0,this.stalled=null,r.currentTime=h,e&&!e.gap){const f=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${h}`);i.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:e})}return h}}return 0}_tryNudgeBuffer(){const{config:e,hls:n,media:i,nudgeRetry:r}=this;if(i===null)return;const s=i.currentTime;if(this.nudgeRetry++,r<e.nudgeMaxRetry){const o=s+(r+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${s} to ${o}`);me.warn(a.message),i.currentTime=o,n.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const o=new Error(`Playhead still not moving while enough data buffered @${s} after ${e.nudgeMaxRetry} nudges`);me.error(o.message),n.trigger(W.ERROR,{type:gt.MEDIA_ERROR,details:Se.BUFFER_STALLED_ERROR,error:o,fatal:!0})}}}const M8=100;class F8 extends Gb{constructor(e,n,i){super(e,n,i,"[stream-controller]",ft.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(W.MANIFEST_LOADING,this.onManifestLoading,this),e.on(W.MANIFEST_PARSED,this.onManifestParsed,this),e.on(W.LEVEL_LOADING,this.onLevelLoading,this),e.on(W.LEVEL_LOADED,this.onLevelLoaded,this),e.on(W.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(W.ERROR,this.onError,this),e.on(W.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(W.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(W.BUFFER_CREATED,this.onBufferCreated,this),e.on(W.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(W.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(W.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(W.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(W.MANIFEST_LOADING,this.onManifestLoading,this),e.off(W.MANIFEST_PARSED,this.onManifestParsed,this),e.off(W.LEVEL_LOADED,this.onLevelLoaded,this),e.off(W.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(W.ERROR,this.onError,this),e.off(W.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(W.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(W.BUFFER_CREATED,this.onBufferCreated,this),e.off(W.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(W.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(W.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:n,hls:i}=this;if(this.stopLoad(),this.setInterval(M8),this.level=-1,!this.startFragRequested){let r=i.startLevel;r===-1&&(i.config.testBandwidth&&this.levels.length>1?(r=0,this.bitrateTest=!0):r=i.firstAutoLevel),i.nextLoadLevel=r,this.level=i.loadLevel,this.loadedmetadata=!1}n>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=Ne.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=Ne.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Ne.WAITING_LEVEL:{const{levels:n,level:i}=this,r=n==null?void 0:n[i],s=r==null?void 0:r.details;if(s&&(!s.live||this.levelLastLoaded===r)){if(this.waitForCdnTuneIn(s))break;this.state=Ne.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Ne.IDLE;break}break}case Ne.FRAG_LOADING_WAITING_RETRY:{var e;const n=self.performance.now(),i=this.retryDate;if(!i||n>=i||(e=this.media)!=null&&e.seeking){const{levels:r,level:s}=this,o=r==null?void 0:r[s];this.resetStartWhenNotLoaded(o||null),this.state=Ne.IDLE}}break}this.state===Ne.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:i,media:r}=this;if(n===null||!r&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(i!=null&&i[s]))return;const o=i[s],a=this.getMainFwdBufferInfo();if(a===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(a,l)){const m={};this.altAudio&&(m.type="video"),this.hls.trigger(W.BUFFER_EOS,m),this.state=Ne.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const c=o.details;if(!c||this.state===Ne.WAITING_LEVEL||c.live&&this.levelLastLoaded!==o){this.level=s,this.state=Ne.WAITING_LEVEL;return}const u=a.len,h=this.getMaxBufferLength(o.maxBitrate);if(u>=h)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:a.end;let d=this.getNextFragment(f,c);if(this.couldBacktrack&&!this.fragPrevious&&d&&d.sn!=="initSegment"&&this.fragmentTracker.getState(d)!==ui.OK){var p;const v=((p=this.backtrackFragment)!=null?p:d).sn-c.startSN,y=c.fragments[v-1];y&&d.cc===y.cc&&(d=y,this.fragmentTracker.removeFragment(y))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(d&&this.isLoopLoading(d,f)){if(!d.gap){const v=this.audioOnly&&!this.altAudio?Qt.AUDIO:Qt.VIDEO,y=(v===Qt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,v,ft.MAIN)}d=this.getNextFragmentLoopLoading(d,c,a,ft.MAIN,h)}d&&(d.initSegment&&!d.initSegment.data&&!this.bitrateTest&&(d=d.initSegment),this.loadFragment(d,o,f))}loadFragment(e,n,i){const r=this.fragmentTracker.getState(e);this.fragCurrent=e,r===ui.NOT_LOADED||r===ui.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,n):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):(this.startFragRequested=!0,super.loadFragment(e,n,i)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ft.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let i;const r=this.getAppendedFrag(n.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<s.targetduration*2)return}if(!n.paused&&e){const a=this.hls.nextLoadLevel,l=e[a],c=this.fragLastKbps;c&&this.fragCurrent?i=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:i=0}else i=0;const o=this.getBufferedFrag(n.currentTime+i);if(o){const a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();const l=a.maxStartPTS?a.maxStartPTS:a.start,c=a.duration,u=Math.max(o.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Ne.KEY_LOADING:case Ne.FRAG_LOADING:case Ne.FRAG_LOADING_WAITING_RETRY:case Ne.PARSING:case Ne.PARSED:this.state=Ne.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const i=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new D8(this.config,i,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,n=e?e.currentTime:null;Xe(n)&&this.log(`Media seeked to ${n.toFixed(3)}`);const i=this.getMainFwdBufferInfo();if(i===null||i.len===0){this.warn(`Main forward buffer length on "seeked" event ${i?i.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(W.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,n){let i=!1,r=!1;n.levels.forEach(s=>{const o=s.audioCodec;o&&(i=i||o.indexOf("mp4a.40.2")!==-1,r=r||o.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=i&&r&&!R8(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:i}=this;if(!i||this.state!==Ne.IDLE)return;const r=i[n.level];(!r.details||r.details.live&&this.levelLastLoaded!==r||this.waitForCdnTuneIn(r.details))&&(this.state=Ne.WAITING_LEVEL)}onLevelLoaded(e,n){var i;const{levels:r}=this,s=n.level,o=n.details,a=o.totalduration;if(!r){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${a}`);const l=r[s],c=this.fragCurrent;c&&(this.state===Ne.FRAG_LOADING||this.state===Ne.FRAG_LOADING_WAITING_RETRY)&&c.level!==n.level&&c.loader&&this.abortCurrentFrag();let u=0;if(o.live||(i=l.details)!=null&&i.live){var h;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;u=this.alignPlaylists(o,l.details,(h=this.levelLastLoaded)==null?void 0:h.details)}if(l.details=o,this.levelLastLoaded=l,this.hls.trigger(W.LEVEL_UPDATED,{details:o,level:s}),this.state===Ne.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=Ne.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,u),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:i,part:r,payload:s}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const a=o[i.level],l=a.details;if(!l){this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),this.fragmentTracker.removeFragment(i);return}const c=a.videoCodec,u=l.PTSKnown||!l.live,h=(n=i.initSegment)==null?void 0:n.data,f=this._getAudioCodec(a),d=this.transmuxer=this.transmuxer||new j3(this.hls,ft.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=r?r.index:-1,m=p!==-1,v=new Hb(i.level,i.sn,i.stats.chunkCount,s.byteLength,p,m),y=this.initPTS[i.cc];d.push(s,h,f,c,i,r,l.totalduration,u,v,y)}onAudioTrackSwitching(e,n){const i=this.altAudio;if(!!!n.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const s=this.hls;i&&(s.trigger(W.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),s.trigger(W.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const i=n.id,r=!!this.hls.audioTracks[i].url;if(r){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=r,this.tick()}onBufferCreated(e,n){const i=n.tracks;let r,s,o=!1;for(const a in i){const l=i[a];if(l.id==="main"){if(s=a,r=l,a==="video"){const c=i[a];c&&(this.videoBuffer=c.buffer)}}else o=!0}o&&r?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:i,part:r}=n;if(i&&i.type!==ft.MAIN)return;if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Ne.PARSED&&(this.state=Ne.IDLE);return}const s=r?r.stats:i.stats;this.fragLastKbps=Math.round(8*s.total/(s.buffering.end-s.loading.first)),i.sn!=="initSegment"&&(this.fragPrevious=i),this.fragBufferedComplete(i,r)}onError(e,n){var i;if(n.fatal){this.state=Ne.ERROR;return}switch(n.details){case Se.FRAG_GAP:case Se.FRAG_PARSING_ERROR:case Se.FRAG_DECRYPT_ERROR:case Se.FRAG_LOAD_ERROR:case Se.FRAG_LOAD_TIMEOUT:case Se.KEY_LOAD_ERROR:case Se.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ft.MAIN,n);break;case Se.LEVEL_LOAD_ERROR:case Se.LEVEL_LOAD_TIMEOUT:case Se.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===Ne.WAITING_LEVEL&&((i=n.context)==null?void 0:i.type)===Bt.LEVEL&&(this.state=Ne.IDLE);break;case Se.BUFFER_APPEND_ERROR:case Se.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="main")return;if(n.details===Se.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case Se.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}checkBuffer(){const{media:e,gapController:n}=this;if(!(!e||!n||!e.readyState)){if(this.loadedmetadata||!dn.getBuffered(e).length){const i=this.state!==Ne.IDLE?this.fragCurrent:null;n.poll(this.lastCurrentTime,i)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=Ne.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==Qt.AUDIO||this.audioOnly&&!this.altAudio){const i=(n===Qt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,n,ft.MAIN),this.tick()}}onLevelsUpdated(e,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let i=this.startPosition;if(i>=0&&n<i){if(e.seeking){this.log(`could not seek to ${i}, already seeking at ${n}`);return}const r=dn.getBuffered(e),o=(r.length?r.start(0):0)-i;o>0&&(o<this.config.maxBufferHole||o<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${o} to match buffer start`),i+=o,this.startPosition=i),this.log(`seek to target start position ${i} from current time ${n}`),e.currentTime=i}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(i=>{const{hls:r}=this;if(!i||this.fragContextChanged(e))return;n.fragmentError=0,this.state=Ne.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=e.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),r.trigger(W.FRAG_LOADED,i),e.bitrateTest=!1})}_handleTransmuxComplete(e){var n;const i="main",{hls:r}=this,{remuxResult:s,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:u}=a,{video:h,text:f,id3:d,initSegment:p}=s,{details:m}=u,v=this.altAudio?void 0:s.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=Ne.PARSING,p){if(p!=null&&p.tracks){const b=l.initSegment||l;this._bufferInitSegment(u,p.tracks,b,o),r.trigger(W.FRAG_PARSING_INIT_SEGMENT,{frag:b,id:i,tracks:p.tracks})}const y=p.initPTS,x=p.timescale;Xe(y)&&(this.initPTS[l.cc]={baseTime:y,timescale:x},r.trigger(W.INIT_PTS_FOUND,{frag:l,id:i,initPTS:y,timescale:x}))}if(h&&m&&l.sn!=="initSegment"){const y=m.fragments[l.sn-1-m.startSN],x=l.sn===m.startSN,b=!y||l.cc>y.cc;if(s.independent!==!1){const{startPTS:E,endPTS:T,startDTS:D,endDTS:R}=h;if(c)c.elementaryStreams[h.type]={startPTS:E,endPTS:T,startDTS:D,endDTS:R};else if(h.firstKeyFrame&&h.independent&&o.id===1&&!b&&(this.couldBacktrack=!0),h.dropped&&h.independent){const S=this.getMainFwdBufferInfo(),C=(S?S.end:this.getLoadPosition())+this.config.maxBufferHole,N=h.firstKeyFramePTS?h.firstKeyFramePTS:E;if(!x&&C<N-this.config.maxBufferHole&&!b){this.backtrack(l);return}else b&&(l.gap=!0);l.setElementaryStreamInfo(h.type,l.start,T,l.start,R,!0)}else x&&E>V0&&(l.gap=!0);l.setElementaryStreamInfo(h.type,E,T,D,R),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(h,l,c,o,x||b)}else if(x||b)l.gap=!0;else{this.backtrack(l);return}}if(v){const{startPTS:y,endPTS:x,startDTS:b,endDTS:E}=v;c&&(c.elementaryStreams[Qt.AUDIO]={startPTS:y,endPTS:x,startDTS:b,endDTS:E}),l.setElementaryStreamInfo(Qt.AUDIO,y,x,b,E),this.bufferFragmentData(v,l,c,o)}if(m&&d!=null&&(n=d.samples)!=null&&n.length){const y={id:i,frag:l,details:m,samples:d.samples};r.trigger(W.FRAG_PARSING_METADATA,y)}if(m&&f){const y={id:i,frag:l,details:m,samples:f.samples};r.trigger(W.FRAG_PARSING_USERDATA,y)}}_bufferInitSegment(e,n,i,r){if(this.state!==Ne.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&delete n.audio;const{audio:s,video:o,audiovideo:a}=n;if(s){let l=e.audioCodec;const c=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5");const u=s.metadata;u&&"channelCount"in u&&(u.channelCount||1)!==1&&c.indexOf("firefox")===-1&&(l="mp4a.40.5")}l&&l.indexOf("mp4a.40.5")!==-1&&c.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),s.levelCodec=l,s.id="main",this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${s.codec}]`)}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${o.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),this.hls.trigger(W.BUFFER_CODECS,n),Object.keys(n).forEach(l=>{const u=n[l].initSegment;u!=null&&u.byteLength&&this.hls.trigger(W.BUFFER_APPENDING,{type:l,data:u,frag:i,part:null,chunkMeta:r,parent:i.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,ft.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Ne.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const i=e.currentTime;if(dn.isBuffered(e,i)?n=this.getAppendedFrag(i):dn.isBuffered(e,i+.1)&&(n=this.getAppendedFrag(i+.1)),n){this.backtrackFragment=null;const r=this.fragPlaying,s=n.level;(!r||n.sn!==r.sn||r.level!==s)&&(this.fragPlaying=n,this.hls.trigger(W.FRAG_CHANGED,{frag:n}),(!r||r.level!==s)&&this.hls.trigger(W.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const n=e.currentTime,i=this.currentFrag;if(i&&Xe(n)&&Xe(i.programDateTime)){const r=i.programDateTime+(n-i.start)*1e3;return new Date(r)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class xi{static get version(){return"1.5.20"}static isMSESupported(){return sC()}static isSupported(){return C8()}static getMediaSource(){return Xl()}static get Events(){return W}static get ErrorTypes(){return gt}static get ErrorDetails(){return Se}static get DefaultConfig(){return xi.defaultConfig?xi.defaultConfig:iC}static set DefaultConfig(e){xi.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new Xb,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,ED(e.debug||!1,"Hls instance");const n=this.config=A8(xi.DefaultConfig,e);this.userConfig=e,n.progressive&&T8(n);const{abrController:i,bufferController:r,capLevelController:s,errorController:o,fpsController:a}=n,l=new o(this),c=this.abrController=new i(this),u=this.bufferController=new r(this),h=this.capLevelController=new s(this),f=new a(this),d=new vM(this),p=new _M(this),m=n.contentSteeringController,v=m?new m(this):null,y=this.levelController=new L8(this,v),x=new QM(this),b=new k8(this.config),E=this.streamController=new F8(this,x,b);h.setStreamController(E),f.setStreamController(E);const T=[d,y,E];v&&T.splice(1,0,v),this.networkControllers=T;const D=[c,u,h,f,p,x];this.audioTrackController=this.createController(n.audioTrackController,T);const R=n.audioStreamController;R&&T.push(new R(this,x,b)),this.subtitleTrackController=this.createController(n.subtitleTrackController,T);const S=n.subtitleStreamController;S&&T.push(new S(this,x,b)),this.createController(n.timelineController,D),b.emeController=this.emeController=this.createController(n.emeController,D),this.cmcdController=this.createController(n.cmcdController,D),this.latencyController=this.createController(EM,D),this.coreComponents=D,T.push(l);const C=l.onErrorOut;typeof C=="function"&&this.on(W.ERROR,C,l)}createController(e,n){if(e){const i=new e(this);return n&&n.push(i),i}return null}on(e,n,i=this){this._emitter.on(e,n,i)}once(e,n,i=this){this._emitter.once(e,n,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,i=this,r){this._emitter.off(e,n,i,r)}listeners(e){return this._emitter.listeners(e)}emit(e,n,i){return this._emitter.emit(e,n,i)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(i){if(me.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const r=e===W.ERROR;this.trigger(W.ERROR,{type:gt.OTHER_ERROR,details:Se.INTERNAL_EXCEPTION,fatal:r,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){me.log("destroy"),this.trigger(W.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){me.log("attachMedia"),this._media=e,this.trigger(W.MEDIA_ATTACHING,{media:e})}detachMedia(){me.log("detachMedia"),this.trigger(W.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const n=this.media,i=this.url,r=this.url=Ob.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,me.log(`loadSource:${r}`),n&&i&&(i!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(W.MANIFEST_LOADING,{url:e})}startLoad(e=-1){me.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e),!(!this.started||!this.networkControllers));n++);}stopLoad(){me.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}resumeBuffering(){me.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()})}pauseBuffering(){me.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()})}swapAudioCodec(){me.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){me.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){me.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){me.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){me.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){me.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){me.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(me.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){AM(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const i=e.length;for(let r=0;r<i;r++)if(e[r].maxBitrate>=n)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:i}=this;let r;if(n===-1&&e!=null&&e.length?r=e.length-1:r=n,i)for(let s=r;s--;){const o=e[s].attrs["HDCP-LEVEL"];if(o&&o<=i)return s}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var n;return(n=this.audioTrackController)==null?void 0:n.setAudioOption(e)}setSubtitleOption(e){var n;return(n=this.subtitleTrackController)==null||n.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}xi.defaultConfig=void 0;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Rt=(t,e)=>{const n=fe.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>fe.createElement("svg",{ref:u,...O8,width:r,height:r,stroke:i,strokeWidth:o?Number(s)*24/Number(r):s,className:["lucide",`lucide-${B8(t)}`,a].join(" "),...c},[...e.map(([h,f])=>fe.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=Rt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=Rt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=Rt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=Rt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=Rt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=Rt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=Rt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=Rt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=Rt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=Rt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=Rt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=Rt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=Rt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=Rt("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=Rt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=Rt("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=Rt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=Rt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=Rt("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=Rt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=Rt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=Rt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=Rt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=Rt("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=Rt("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=Rt("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=Rt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=Rt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=Rt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=Rt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=Rt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=Rt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=Rt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=Rt("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=Rt("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=Rt("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=Rt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=Rt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yf(){return Yf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yf.apply(this,arguments)}var Ra;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ra||(Ra={}));const q_="popstate";function cO(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return N2("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:zg(r)}return hO(e,n,null,t)}function Xn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function aC(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uO(){return Math.random().toString(36).substr(2,8)}function K_(t,e){return{usr:t.state,key:t.key,idx:e}}function N2(t,e,n,i){return n===void 0&&(n=null),Yf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$u(e):e,{state:n,key:e&&e.key||i||uO()})}function zg(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function $u(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function hO(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Ra.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Yf({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Ra.Pop;let v=u(),y=v==null?null:v-c;c=v,l&&l({action:a,location:m.location,delta:y})}function f(v,y){a=Ra.Push;let x=N2(m.location,v,y);c=u()+1;let b=K_(x,c),E=m.createHref(x);try{o.pushState(b,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;r.location.assign(E)}s&&l&&l({action:a,location:m.location,delta:1})}function d(v,y){a=Ra.Replace;let x=N2(m.location,v,y);c=u();let b=K_(x,c),E=m.createHref(x);o.replaceState(b,"",E),s&&l&&l({action:a,location:m.location,delta:0})}function p(v){let y=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof v=="string"?v:zg(v);return x=x.replace(/ $/,"%20"),Xn(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let m={get action(){return a},get location(){return t(r,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(q_,h),l=v,()=>{r.removeEventListener(q_,h),l=null}},createHref(v){return e(r,v)},createURL:p,encodeLocation(v){let y=p(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:d,go(v){return o.go(v)}};return m}var Y_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Y_||(Y_={}));function fO(t,e,n){return n===void 0&&(n="/"),dO(t,e,n,!1)}function dO(t,e,n,i){let r=typeof e=="string"?$u(e):e,s=t5(r.pathname||"/",n);if(s==null)return null;let o=lC(t);pO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=AO(s);a=_O(o[l],c,i)}return a}function lC(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Xn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Ha([i,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Xn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),lC(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:wO(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of cC(s.path))r(s,o,l)}),e}function cC(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=cC(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function pO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:SO(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const gO=/^:[\w-]+$/,mO=3,yO=2,vO=1,xO=10,bO=-2,X_=t=>t==="*";function wO(t,e){let n=t.split("/"),i=n.length;return n.some(X_)&&(i+=bO),e&&(i+=yO),n.filter(r=>!X_(r)).reduce((r,s)=>r+(gO.test(s)?mO:s===""?vO:xO),i)}function SO(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function _O(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=J_({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&n&&!i[i.length-1].route.index&&(h=J_({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:Ha([s,h.pathname]),pathnameBase:CO(Ha([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Ha([s,h.pathnameBase]))}return o}function J_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=EO(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,h)=>{let{paramName:f,isOptional:d}=u;if(f==="*"){let m=a[h]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[h];return d&&!p?c[f]=void 0:c[f]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function EO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),aC(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function AO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return aC(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function t5(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function TO(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?$u(t):t;return{pathname:n?n.startsWith("/")?n:LO(n,e):e,search:RO(i),hash:PO(r)}}function LO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Hy(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function uC(t,e){let n=kO(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function hC(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=$u(t):(r=Yf({},t),Xn(!r.pathname||!r.pathname.includes("?"),Hy("?","pathname","search",r)),Xn(!r.pathname||!r.pathname.includes("#"),Hy("#","pathname","hash",r)),Xn(!r.search||!r.search.includes("#"),Hy("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=TO(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ha=t=>t.join("/").replace(/\/\/+/g,"/"),CO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),RO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function NO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fC=["post","put","patch","delete"];new Set(fC);const IO=["get",...fC];new Set(IO);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xf(){return Xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xf.apply(this,arguments)}const n5=fe.createContext(null),DO=fe.createContext(null),rc=fe.createContext(null),Gm=fe.createContext(null),sc=fe.createContext({outlet:null,matches:[],isDataRoute:!1}),dC=fe.createContext(null);function MO(t,e){let{relative:n}=e===void 0?{}:e;xd()||Xn(!1);let{basename:i,navigator:r}=fe.useContext(rc),{hash:s,pathname:o,search:a}=gC(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Ha([i,o])),r.createHref({pathname:l,search:a,hash:s})}function xd(){return fe.useContext(Gm)!=null}function bd(){return xd()||Xn(!1),fe.useContext(Gm).location}function pC(t){fe.useContext(rc).static||fe.useLayoutEffect(t)}function FO(){let{isDataRoute:t}=fe.useContext(sc);return t?YO():OO()}function OO(){xd()||Xn(!1);let t=fe.useContext(n5),{basename:e,future:n,navigator:i}=fe.useContext(rc),{matches:r}=fe.useContext(sc),{pathname:s}=bd(),o=JSON.stringify(uC(r,n.v7_relativeSplatPath)),a=fe.useRef(!1);return pC(()=>{a.current=!0}),fe.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let h=hC(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ha([e,h.pathname])),(u.replace?i.replace:i.push)(h,u.state,u)},[e,i,o,s,t])}function gC(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=fe.useContext(rc),{matches:r}=fe.useContext(sc),{pathname:s}=bd(),o=JSON.stringify(uC(r,i.v7_relativeSplatPath));return fe.useMemo(()=>hC(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function BO(t,e){return jO(t,e)}function jO(t,e,n,i){xd()||Xn(!1);let{navigator:r,static:s}=fe.useContext(rc),{matches:o}=fe.useContext(sc),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=bd(),h;if(e){var f;let y=typeof e=="string"?$u(e):e;c==="/"||(f=y.pathname)!=null&&f.startsWith(c)||Xn(!1),h=y}else h=u;let d=h.pathname||"/",p=d;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=!s&&n&&n.matches&&n.matches.length>0?n.matches:fO(t,{pathname:p}),v=VO(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Ha([c,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Ha([c,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,i);return e&&v?fe.createElement(Gm.Provider,{value:{location:Xf({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ra.Pop}},v):v}function UO(){let t=KO(),e=NO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return fe.createElement(fe.Fragment,null,fe.createElement("h2",null,"Unexpected Application Error!"),fe.createElement("h3",{style:{fontStyle:"italic"}},e),n?fe.createElement("pre",{style:r},n):null,null)}const $O=fe.createElement(UO,null);class zO extends fe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?fe.createElement(sc.Provider,{value:this.props.routeContext},fe.createElement(dC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HO(t){let{routeContext:e,match:n,children:i}=t,r=fe.useContext(n5);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),fe.createElement(sc.Provider,{value:e},i)}function VO(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Xn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:d}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!d||d[h.route.id]===void 0);if(h.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let d,p=!1,m=null,v=null;n&&(d=a&&h.route.id?a[h.route.id]:void 0,m=h.route.errorElement||$O,l&&(c<0&&f===0?(p=!0,v=null):c===f&&(p=!0,v=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),x=()=>{let b;return d?b=m:p?b=v:h.route.Component?b=fe.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,fe.createElement(HO,{match:h,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?fe.createElement(zO,{location:n.location,revalidation:n.revalidation,component:m,error:d,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var mC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mC||{}),Hg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Hg||{});function GO(t){let e=fe.useContext(n5);return e||Xn(!1),e}function WO(t){let e=fe.useContext(DO);return e||Xn(!1),e}function qO(t){let e=fe.useContext(sc);return e||Xn(!1),e}function yC(t){let e=qO(),n=e.matches[e.matches.length-1];return n.route.id||Xn(!1),n.route.id}function KO(){var t;let e=fe.useContext(dC),n=WO(Hg.UseRouteError),i=yC(Hg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function YO(){let{router:t}=GO(mC.UseNavigateStable),e=yC(Hg.UseNavigateStable),n=fe.useRef(!1);return pC(()=>{n.current=!0}),fe.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Xf({fromRouteId:e},s)))},[t,e])}function XO(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function W0(t){Xn(!1)}function JO(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Ra.Pop,navigator:s,static:o=!1,future:a}=t;xd()&&Xn(!1);let l=e.replace(/^\/*/,"/"),c=fe.useMemo(()=>({basename:l,navigator:s,static:o,future:Xf({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=$u(i));let{pathname:u="/",search:h="",hash:f="",state:d=null,key:p="default"}=i,m=fe.useMemo(()=>{let v=t5(u,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:d,key:p},navigationType:r}},[l,u,h,f,d,p,r]);return m==null?null:fe.createElement(rc.Provider,{value:c},fe.createElement(Gm.Provider,{children:n,value:m}))}function QO(t){let{children:e,location:n}=t;return BO(I2(e),n)}new Promise(()=>{});function I2(t,e){e===void 0&&(e=[]);let n=[];return fe.Children.forEach(t,(i,r)=>{if(!fe.isValidElement(i))return;let s=[...e,r];if(i.type===fe.Fragment){n.push.apply(n,I2(i.props.children,s));return}i.type!==W0&&Xn(!1),!i.props.index||!i.props.children||Xn(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=I2(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D2(){return D2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},D2.apply(this,arguments)}function ZO(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function e7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function t7(t,e){return t.button===0&&(!e||e==="_self")&&!e7(t)}const n7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],i7="6";try{window.__reactRouterVersion=i7}catch{}const r7="startTransition",Q_=rN[r7];function s7(t){let{basename:e,children:n,future:i,window:r}=t,s=fe.useRef();s.current==null&&(s.current=cO({window:r,v5Compat:!0}));let o=s.current,[a,l]=fe.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=fe.useCallback(h=>{c&&Q_?Q_(()=>l(h)):l(h)},[l,c]);return fe.useLayoutEffect(()=>o.listen(u),[o,u]),fe.useEffect(()=>XO(i),[i]),fe.createElement(JO,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const o7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",a7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vC=fe.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,f=ZO(e,n7),{basename:d}=fe.useContext(rc),p,m=!1;if(typeof c=="string"&&a7.test(c)&&(p=c,o7))try{let b=new URL(window.location.href),E=c.startsWith("//")?new URL(b.protocol+c):new URL(c),T=t5(E.pathname,d);E.origin===b.origin&&T!=null?c=T+E.search+E.hash:m=!0}catch{}let v=MO(c,{relative:r}),y=l7(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,viewTransition:h});function x(b){i&&i(b),b.defaultPrevented||y(b)}return fe.createElement("a",D2({},f,{href:p||v,onClick:m||s?i:x,ref:n,target:l}))});var Z_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Z_||(Z_={}));var eE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(eE||(eE={}));function l7(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=FO(),c=bd(),u=gC(t,{relative:o});return fe.useCallback(h=>{if(t7(h,n)){h.preventDefault();let f=i!==void 0?i:zg(c)===zg(u);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,i,r,n,t,s,o,a])}const c7=()=>{const t=bd();return A.jsx("header",{className:"bg-[#0e0b14] py-4 border-b border-gray-800",children:A.jsxs("div",{className:"container mx-auto px-4 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsxs(vC,{to:"/",className:"flex items-center mr-8",children:[A.jsx(P2,{className:"w-8 h-8 text-blue-500 fill-current"}),A.jsx("span",{className:"ml-2 text-xl font-bold",children:"BenFarr.com"})]}),A.jsxs("nav",{className:"hidden md:flex space-x-6",children:[A.jsx(Ch,{href:"/",active:t.pathname==="/",children:"Home"}),A.jsx(Ch,{href:"/about",active:t.pathname==="/about",children:"About"}),A.jsx(Ch,{href:"/analysis",active:t.pathname==="/analysis",children:"Data Analysis"}),A.jsx(Ch,{href:"/technology",children:"Technology"}),A.jsx(Ch,{href:"/performance",children:"Performance"})]})]}),A.jsx("div",{className:"flex items-center space-x-4",children:A.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium transition-colors",children:"Contact Me"})})]})})},Ch=({href:t,children:e,active:n})=>A.jsx(vC,{to:t,className:`text-sm font-medium transition-colors hover:text-blue-400 ${n?"text-white":"text-gray-400"}`,children:e}),u7=()=>A.jsx("div",{className:"min-h-screen bg-[#0e0b14] text-white",children:A.jsx("div",{className:"container mx-auto px-4 py-12",children:A.jsx("div",{className:"max-w-5xl mx-auto",children:A.jsx("div",{className:"bg-[#1a1d29] rounded-lg p-8 shadow-xl",children:A.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-8",children:[A.jsx("div",{className:"w-full md:w-1/3",children:A.jsxs("div",{className:"sticky top-8",children:[A.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Ben Farr"}),A.jsx("h2",{className:"text-xl text-blue-400 mb-6",children:"Senior Product Leader"}),A.jsxs("div",{className:"mb-8 p-4 bg-[#252a3a] rounded-lg",children:[A.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-400",children:"Summary"}),A.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Product leader with 14+ years of experience blending technology and storytelling to craft innovative digital experiences that drive business growth and delight customers. Skilled in leading cross-functional teams to elevate ecommerce and mobile platforms, I'm excited to bring my strategic vision and collaborative leadership to Disney, where creativity and technology create unforgettable moments."})]}),A.jsxs("div",{className:"space-y-4 mb-8",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(X8,{className:"w-5 h-5 text-blue-400"}),A.jsx("a",{href:"mailto:benjifarr@gmail.com",className:"hover:text-blue-400 transition-colors",children:"benjifarr@gmail.com"})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(K8,{className:"w-5 h-5 text-blue-400"}),A.jsx("a",{href:"https://linkedin.com/in/benjamenfarr",className:"hover:text-blue-400 transition-colors",target:"_blank",rel:"noopener noreferrer",children:"linkedin.com/in/benjamenfarr"})]})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-400",children:"Education"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"mb-3",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(G_,{className:"w-4 h-4 text-blue-400"}),A.jsx("span",{className:"font-medium",children:"M.B.A."})]}),A.jsx("p",{className:"text-gray-300",children:"Imperial Business School, London"}),A.jsx("p",{className:"text-sm text-gray-400",children:"2020"})]}),A.jsxs("div",{className:"mb-3",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(G_,{className:"w-4 h-4 text-blue-400"}),A.jsx("span",{className:"font-medium",children:"Bachelor of Science in Business"})]}),A.jsx("p",{className:"text-gray-300",children:"Biola University, La Mirada, California"}),A.jsx("p",{className:"text-sm text-gray-400",children:"2013"})]}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(U_,{className:"w-4 h-4 text-blue-400"}),A.jsx("span",{className:"font-medium",children:"Scrum Master Certification"})]}),A.jsx("p",{className:"text-gray-300",children:"Scrum Alliance"}),A.jsx("p",{className:"text-sm text-gray-400",children:"2015"})]})]})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-400",children:"Skills"}),A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2",children:[A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Product Strategy & Vision"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Cloud & CDN Technologies"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Performance Monitoring"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Cloud Infrastructure"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"API & System Architecture"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Edge Computing"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Monetization & Pricing Strategy"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Data Analytics & SQL"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Stakeholder Management"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Design Thinking & Product Discovery"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Agile, Scrum, Kanban"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Product Lifecycle Management"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Cross-Functional Leadership"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Hiring & Mentorship"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Executive Communication & Storytelling"})]}),A.jsxs("div",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Change Management & Resilience"})]})]})]})]})]})}),A.jsxs("div",{className:"w-full md:w-2/3",children:[A.jsxs("section",{className:"mb-8",children:[A.jsxs("h3",{className:"text-xl font-bold mb-4 text-blue-400 flex items-center",children:[A.jsx(z8,{className:"w-5 h-5 mr-2"}),"Professional Experience"]}),A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"bg-[#252a3a] p-5 rounded-lg",children:[A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-2",children:[A.jsx("h4",{className:"text-lg font-semibold",children:"Director of Product Management"}),A.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[A.jsx($c,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"Fuller Theological Seminary"}),A.jsx("span",{className:"mx-2",children:"•"}),A.jsx(El,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"July 2021 - Present"})]})]}),A.jsxs("ul",{className:"space-y-2 mt-3",children:[A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Led disciplined Agile rituals, aligning development with business objectives and shifting to objective-driven roadmaps to enhance prioritization, impact, and time-to-value."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Integrated a CDN to enhance platform scalability and performance, with a focus on optimizing content delivery in rural and underserved global markets."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Pioneered digital learning experiences for underserved markets, leveraging cutting-edge technology to deliver 'magical' engagement, boosting active learners by 81% globally in 13 months."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Utilized advanced audience segmentation techniques to enhance customer satisfaction ratings by 25%, optimizing product features based on detailed data analysis."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Optimized mobile user experiences, leading to a 48% increase in mobile session engagement."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Established governance practices, ensuring compliance with privacy policies and optimizing metadata."})]})]})]}),A.jsxs("div",{className:"bg-[#252a3a] p-5 rounded-lg",children:[A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-2",children:[A.jsx("h4",{className:"text-lg font-semibold",children:"Head of Product"}),A.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[A.jsx($c,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"Download Youth Ministry"}),A.jsx("span",{className:"mx-2",children:"•"}),A.jsx(El,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"June 2018 - July 2021"})]})]}),A.jsxs("ul",{className:"space-y-2 mt-3",children:[A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Led the replatforming of e-commerce store to Salesforce Commerce Cloud."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Implemented data-driven product strategies to optimize ad targeting, increasing customer lifetime value by 23% and enhancing ROI for stakeholders."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Led cross-functional teams in delivering solutions aligned with objectives, boosting weekly active users by 18%."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Led upward to shift from a feature-focused to an objective-driven roadmap culture, securing stakeholder buy-in to prioritize outcomes over output and accelerate key initiatives."})]})]})]}),A.jsxs("div",{className:"bg-[#252a3a] p-5 rounded-lg",children:[A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-2",children:[A.jsx("h4",{className:"text-lg font-semibold",children:"Senior Product Manager"}),A.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[A.jsx($c,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"The Daily Mail"}),A.jsx("span",{className:"mx-2",children:"•"}),A.jsx(El,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"June 2017 - May 2018"})]})]}),A.jsxs("ul",{className:"space-y-2 mt-3",children:[A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Mentored and Managed a team of associate product managers, nurturing their growth and development."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Leveraged data-driven insights to drive an 18% increase in average order value."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Launched the rewards platform, integrating it with the Nectar rewards program across the United Kingdom."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Increased monthly active shoppers by 68% in one year through strategic product enhancements."})]})]})]}),A.jsxs("div",{className:"bg-[#252a3a] p-5 rounded-lg",children:[A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-2",children:[A.jsx("h4",{className:"text-lg font-semibold",children:"Product Manager"}),A.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[A.jsx($c,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"Saddleback Church"}),A.jsx("span",{className:"mx-2",children:"•"}),A.jsx(El,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"October 2013 - May 2017"})]})]}),A.jsxs("ul",{className:"space-y-2 mt-3",children:[A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Launched the beta engagement product, quickly reaching over 120,000 active users within the first 10 days."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Significantly reduced time-to-sign-up on the platform, decreasing sign-up abandonment rates."})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Led the successful launch of Transform, the church's first-ever mobile app."})]})]})]}),A.jsxs("div",{className:"bg-[#252a3a] p-5 rounded-lg",children:[A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-2",children:[A.jsx("h4",{className:"text-lg font-semibold",children:"Product Manager"}),A.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[A.jsx($c,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"Houzz"}),A.jsx("span",{className:"mx-2",children:"•"}),A.jsx(El,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"April 2013 - October 2013"})]})]}),A.jsx("ul",{className:"space-y-2 mt-3",children:A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Helped lead the development of the eCommerce marketplace experience and growth strategy. Developed an obsessive understanding of the customer to drive product decisions. Saw $3M in sales in week 1 across mobile and web and grew significantly in the weeks and months following."})]})})]}),A.jsxs("div",{className:"bg-[#252a3a] p-5 rounded-lg",children:[A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-2",children:[A.jsx("h4",{className:"text-lg font-semibold",children:"eCommerce Product Manager"}),A.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[A.jsx($c,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"Buy.com (Acquired by Rakuten)"}),A.jsx("span",{className:"mx-2",children:"•"}),A.jsx(El,{className:"w-4 h-4 mr-1"}),A.jsx("span",{children:"September 2009 - April 2013"})]})]}),A.jsx("ul",{className:"space-y-2 mt-3",children:A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Responsible for the user experience and overall product for the seller acquisition website. Lead the redesign and redevelopment using the Agile Scrum Framework. With a close focus on user experience and an initiative to drive growth, seller acquisition increased by 29%."})]})})]})]})]}),A.jsxs("section",{className:"mb-8",children:[A.jsxs("h3",{className:"text-xl font-bold mb-4 text-blue-400 flex items-center",children:[A.jsx(U_,{className:"w-5 h-5 mr-2"}),"Projects & Achievements"]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"bg-[#252a3a] p-5 rounded-lg",children:[A.jsxs("h4",{className:"text-lg font-semibold mb-2 flex items-center",children:[A.jsx(G0,{className:"w-4 h-4 mr-2 text-blue-400"}),"Global CDN Optimization Framework"]}),A.jsx("p",{className:"text-gray-300",children:"Developed an open-source framework for multi-CDN optimization that dynamically routes traffic based on real-time performance metrics. Adopted by multiple streaming platforms and contributed to a 25% average improvement in viewer experience metrics."})]}),A.jsxs("div",{className:"bg-[#252a3a] p-5 rounded-lg",children:[A.jsxs("h4",{className:"text-lg font-semibold mb-2 flex items-center",children:[A.jsx(G0,{className:"w-4 h-4 mr-2 text-blue-400"}),"Video Streaming Performance Summit"]}),A.jsx("p",{className:"text-gray-300",children:"Organized and led annual industry conference focused on video streaming performance optimization. Brought together 500+ engineers from major streaming platforms to share best practices and innovations in content delivery."})]}),A.jsxs("div",{className:"bg-[#252a3a] p-5 rounded-lg",children:[A.jsxs("h4",{className:"text-lg font-semibold mb-2 flex items-center",children:[A.jsx(G0,{className:"w-4 h-4 mr-2 text-blue-400"}),"Edge Computing Research"]}),A.jsx("p",{className:"text-gray-300",children:"Published research on next-generation edge computing architectures for content delivery networks. Work has been cited in 15+ academic papers and influenced product development at major CDN providers."})]})]})]})]})]})})})})}),h7=({videoRef:t,videoSrc:e,poster:n,isPlaying:i,isLoading:r,error:s,hlsInstance:o,availableQualities:a,currentLevel:l,currentBitrate:c,bufferHealth:u,onPlay:h,onRetry:f})=>{const[d,p]=fe.useState(!1),[m,v]=fe.useState(null),[y,x]=fe.useState(1),[b,E]=fe.useState(!1),[T,D]=fe.useState(!1),[R,S]=fe.useState(0),[C,N]=fe.useState(0),[k,P]=fe.useState(0),[j,F]=fe.useState(!1),[H,O]=fe.useState("auto"),[$,z]=fe.useState(!1),B=fe.useRef(null),X=fe.useRef(null),te=fe.useRef(null);fe.useEffect(()=>{const be=localStorage.getItem("preferredQuality");if(be)try{const ke=JSON.parse(be);O(ke),o&&ke!=="auto"&&typeof ke=="number"?o.currentLevel=ke:o&&ke==="auto"&&(o.currentLevel=-1)}catch(ke){console.error("Error parsing saved quality preference:",ke)}},[o]),fe.useEffect(()=>{const be=localStorage.getItem("videoPlayerVolume");if(be)try{const pe=JSON.parse(be);x(pe),t.current&&(t.current.volume=pe)}catch(pe){console.error("Error parsing saved volume:",pe)}const ke=localStorage.getItem("videoPlayerMuted");if(ke)try{const pe=JSON.parse(ke);E(pe),t.current&&(t.current.muted=pe)}catch(pe){console.error("Error parsing saved muted state:",pe)}},[t]),fe.useEffect(()=>{const be=t.current;if(!be)return;const ke=()=>{P(be.currentTime),N(be.duration||0),S(be.currentTime/(be.duration||1)*100)},pe=()=>{ke()},ie=()=>{N(be.duration||0)};return be.addEventListener("timeupdate",pe),be.addEventListener("loadedmetadata",ie),()=>{be.removeEventListener("timeupdate",pe),be.removeEventListener("loadedmetadata",ie)}},[t]),fe.useEffect(()=>{const be=()=>{D(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",be),()=>{document.removeEventListener("fullscreenchange",be)}},[]),fe.useEffect(()=>{const be=ke=>{X.current&&!X.current.contains(ke.target)&&F(!1),te.current&&!te.current.contains(ke.target)&&z(!1)};return document.addEventListener("mousedown",be),()=>{document.removeEventListener("mousedown",be)}},[]);const I=()=>{p(!0),m&&window.clearTimeout(m);const be=window.setTimeout(()=>{i&&!j&&!$&&p(!1)},3e3);v(be)},U=()=>{m&&window.clearTimeout(m),i&&!j&&!$&&p(!1)},K=()=>{const be=t.current;be&&(be.paused?be.play().catch(ke=>console.error("Error playing video:",ke)):be.pause())},Q=be=>{const ke=parseFloat(be.target.value);x(ke),t.current&&(t.current.volume=ke,t.current.muted=ke===0,E(ke===0)),localStorage.setItem("videoPlayerVolume",JSON.stringify(ke))},ee=()=>{const be=!b;E(be),t.current&&(t.current.muted=be),localStorage.setItem("videoPlayerMuted",JSON.stringify(be))},oe=be=>{const ke=parseFloat(be.target.value)/100*C;P(ke),t.current&&(t.current.currentTime=ke)},se=()=>{B.current&&(document.fullscreenElement?document.exitFullscreen():B.current.requestFullscreen().catch(be=>{console.error(`Error attempting to enable fullscreen: ${be.message}`)}))},ae=be=>{o&&(O(be),localStorage.setItem("preferredQuality",JSON.stringify(be)),be==="auto"?o.currentLevel=-1:o.currentLevel=be,F(!1))},Ee=be=>{if(isNaN(be))return"00:00";const ke=Math.floor(be/60),pe=Math.floor(be%60);return`${ke.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`},we=()=>H==="auto"?l>=0&&l<a.length?`Auto (${a[l].split(" ")[0]})`:"Auto":typeof H=="number"&&H>=0&&H<a.length?a[H].split(" ")[0]:"Quality",Pe=be=>{if(be.target instanceof HTMLElement){const ke=document.querySelector(".video-controls-area");if(ke&&ke.contains(be.target))return}K()};return A.jsxs("div",{ref:B,className:"relative aspect-video bg-black rounded-lg overflow-hidden shadow-2xl",onMouseMove:I,onMouseLeave:U,children:[s&&!i&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70 z-10",children:A.jsxs("div",{className:"text-center p-4",children:[A.jsx("p",{className:"text-red-500 font-bold text-lg mb-2",children:"Error"}),A.jsx("p",{className:"text-white",children:s}),A.jsx("button",{className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium transition-colors",onClick:f,children:"Reload Page"})]})}),r&&!s&&!i&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-70 z-10",children:A.jsxs("div",{className:"text-center p-4",children:[A.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mb-2"}),A.jsx("p",{className:"text-white",children:"Loading video stream..."})]})}),A.jsx("div",{className:"w-full h-full",onClick:Pe,children:A.jsx("video",{ref:t,className:"w-full h-full object-contain",playsInline:!0,crossOrigin:"anonymous",poster:n})}),!i&&!s&&!r&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-40 z-5",children:A.jsx("button",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-700 transition-colors",onClick:h,"aria-label":"Play video",children:A.jsx(P2,{className:"w-10 h-10 text-white"})})}),A.jsxs("div",{className:`video-controls-area absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent px-4 py-2 transition-opacity duration-300 ${d?"opacity-100":"opacity-0 pointer-events-none"}`,children:[A.jsxs("div",{className:"relative w-full h-1 bg-gray-600 rounded-full mb-3 cursor-pointer group",children:[A.jsx("input",{type:"range",min:"0",max:"100",value:R,onChange:oe,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10","aria-label":"Seek video"}),A.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-500 rounded-full",style:{width:`${R}%`}}),A.jsx("div",{className:"absolute top-0 left-0 h-full w-full opacity-0 group-hover:opacity-100 transition-opacity",children:A.jsx("div",{className:"absolute top-0 left-0 h-3 -mt-1 bg-blue-500 rounded-full",style:{width:`${R}%`}})}),A.jsx("div",{className:"absolute top-0 left-0 h-full bg-gray-400 rounded-full opacity-50",style:{width:`${Math.min(u/(C||1)*100,100)}%`}})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center space-x-4",children:[A.jsx("button",{onClick:K,className:"text-white hover:text-blue-400 transition-colors flex items-center justify-center w-8 h-8","aria-label":i?"Pause":"Play",children:i?A.jsx(Z8,{className:"w-5 h-5"}):A.jsx(P2,{className:"w-5 h-5"})}),A.jsxs("div",{className:"relative",ref:te,children:[A.jsx("button",{onClick:ee,onMouseEnter:()=>z(!0),className:"text-white hover:text-blue-400 transition-colors flex items-center justify-center w-8 h-8","aria-label":b?"Unmute":"Mute",children:b||y===0?A.jsx(oO,{className:"w-5 h-5"}):A.jsx(sO,{className:"w-5 h-5"})}),A.jsx("div",{className:`absolute bottom-8 left-0 bg-[#252a3a] rounded-md p-2 shadow-lg transition-opacity duration-200 ${$?"opacity-100":"opacity-0 pointer-events-none"}`,onMouseLeave:()=>z(!1),children:A.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:y,onChange:Q,className:"w-24 h-1 appearance-none bg-gray-600 rounded-full outline-none [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-500","aria-label":"Volume"})})]}),A.jsxs("div",{className:"text-white text-sm",children:[A.jsx("span",{children:Ee(k)}),A.jsx("span",{className:"mx-1",children:"/"}),A.jsx("span",{children:Ee(C)})]})]}),A.jsxs("div",{className:"flex items-center space-x-4",children:[A.jsx("div",{className:"text-white text-sm hidden md:block",children:c>0&&A.jsxs("span",{children:[c," kbps"]})}),a.length>0&&A.jsxs("div",{className:"relative",ref:X,children:[A.jsxs("button",{onClick:()=>F(!j),className:"flex items-center space-x-1 text-white hover:text-blue-400 transition-colors","aria-haspopup":"true","aria-expanded":j,"aria-label":"Select video quality",children:[A.jsx(iO,{className:"w-5 h-5"}),A.jsx("span",{className:"text-sm hidden sm:inline",children:we()})]}),j&&A.jsx("div",{className:"absolute right-0 bottom-8 w-48 bg-[#252a3a] rounded-md shadow-lg z-50 py-1 border border-gray-700",children:A.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[A.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-[#2d3343] flex items-center justify-between",onClick:()=>ae("auto"),"aria-label":"Automatic quality selection",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(oC,{className:"w-4 h-4 mr-2 text-blue-400"}),A.jsx("span",{children:"Auto"})]}),H==="auto"&&A.jsx($_,{className:"w-4 h-4 text-blue-400"})]}),A.jsx("div",{className:"border-t border-gray-700 my-1"}),a.map((be,ke)=>{const pe=be.split(" ")[0];return A.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-[#2d3343] flex items-center justify-between",onClick:()=>ae(ke),"aria-label":`Select ${pe} quality`,children:[A.jsx("span",{children:pe}),H===ke&&A.jsx($_,{className:"w-4 h-4 text-blue-400"})]},ke)})]})})]}),A.jsx("button",{onClick:se,className:"text-white hover:text-blue-400 transition-colors flex items-center justify-center w-8 h-8","aria-label":T?"Exit fullscreen":"Enter fullscreen",children:A.jsx(J8,{className:"w-5 h-5"})})]})]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function wd(t){return t+.5|0}const Pa=(t,e,n)=>Math.max(Math.min(t,n),e);function Hh(t){return Pa(wd(t*2.55),0,255)}function Va(t){return Pa(wd(t*255),0,255)}function Fo(t){return Pa(wd(t/2.55)/100,0,1)}function tE(t){return Pa(wd(t*100),0,100)}const Wr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},M2=[..."0123456789ABCDEF"],f7=t=>M2[t&15],d7=t=>M2[(t&240)>>4]+M2[t&15],Yp=t=>(t&240)>>4===(t&15),p7=t=>Yp(t.r)&&Yp(t.g)&&Yp(t.b)&&Yp(t.a);function g7(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Wr[t[1]]*17,g:255&Wr[t[2]]*17,b:255&Wr[t[3]]*17,a:e===5?Wr[t[4]]*17:255}:(e===7||e===9)&&(n={r:Wr[t[1]]<<4|Wr[t[2]],g:Wr[t[3]]<<4|Wr[t[4]],b:Wr[t[5]]<<4|Wr[t[6]],a:e===9?Wr[t[7]]<<4|Wr[t[8]]:255})),n}const m7=(t,e)=>t<255?e(t):"";function y7(t){var e=p7(t)?f7:d7;return t?"#"+e(t.r)+e(t.g)+e(t.b)+m7(t.a,e):void 0}const v7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function xC(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function x7(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function b7(t,e,n){const i=xC(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function w7(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function i5(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=w7(n,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function r5(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Va)}function s5(t,e,n){return r5(xC,t,e,n)}function S7(t,e,n){return r5(b7,t,e,n)}function _7(t,e,n){return r5(x7,t,e,n)}function bC(t){return(t%360+360)%360}function E7(t){const e=v7.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Hh(+e[5]):Va(+e[5]));const r=bC(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=S7(r,s,o):e[1]==="hsv"?i=_7(r,s,o):i=s5(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function A7(t,e){var n=i5(t);n[0]=bC(n[0]+e),n=s5(n),t.r=n[0],t.g=n[1],t.b=n[2]}function T7(t){if(!t)return;const e=i5(t),n=e[0],i=tE(e[1]),r=tE(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Fo(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const nE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},iE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function L7(){const t={},e=Object.keys(iE),n=Object.keys(nE);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,nE[s]);s=parseInt(iE[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Xp;function k7(t){Xp||(Xp=L7(),Xp.transparent=[0,0,0,0]);const e=Xp[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const C7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function R7(t){const e=C7.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Hh(o):Pa(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Hh(i):Pa(i,0,255)),r=255&(e[4]?Hh(r):Pa(r,0,255)),s=255&(e[6]?Hh(s):Pa(s,0,255)),{r:i,g:r,b:s,a:n}}}function P7(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Fo(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Vy=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,zc=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function N7(t,e,n){const i=zc(Fo(t.r)),r=zc(Fo(t.g)),s=zc(Fo(t.b));return{r:Va(Vy(i+n*(zc(Fo(e.r))-i))),g:Va(Vy(r+n*(zc(Fo(e.g))-r))),b:Va(Vy(s+n*(zc(Fo(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Jp(t,e,n){if(t){let i=i5(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=s5(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function wC(t,e){return t&&Object.assign(e||{},t)}function rE(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Va(t[3]))):(e=wC(t,{r:0,g:0,b:0,a:1}),e.a=Va(e.a)),e}function I7(t){return t.charAt(0)==="r"?R7(t):E7(t)}let SC=class F2{constructor(e){if(e instanceof F2)return e;const n=typeof e;let i;n==="object"?i=rE(e):n==="string"&&(i=g7(e)||k7(e)||I7(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=wC(this._rgb);return e&&(e.a=Fo(e.a)),e}set rgb(e){this._rgb=rE(e)}rgbString(){return this._valid?P7(this._rgb):void 0}hexString(){return this._valid?y7(this._rgb):void 0}hslString(){return this._valid?T7(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=N7(this._rgb,e._rgb,n)),this}clone(){return new F2(this.rgb)}alpha(e){return this._rgb.a=Va(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=wd(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Jp(this._rgb,2,e),this}darken(e){return Jp(this._rgb,2,-e),this}saturate(e){return Jp(this._rgb,1,e),this}desaturate(e){return Jp(this._rgb,1,-e),this}rotate(e){return A7(this._rgb,e),this}};/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ko(){}const D7=(()=>{let t=0;return()=>t++})();function $t(t){return t==null}function wn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Dt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function di(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function zs(t,e){return di(t)?t:e}function kt(t,e){return typeof t>"u"?e:t}const M7=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,_C=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function fn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Jt(t,e,n,i){let r,s,o;if(wn(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(Dt(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Vg(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Gg(t){if(wn(t))return t.map(Gg);if(Dt(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Gg(t[n[r]]);return e}return t}function EC(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function F7(t,e,n,i){if(!EC(t))return;const r=e[t],s=n[t];Dt(r)&&Dt(s)?Jf(r,s,i):e[t]=Gg(s)}function Jf(t,e,n){const i=wn(e)?e:[e],r=i.length;if(!Dt(t))return t;n=n||{};const s=n.merger||F7;let o;for(let a=0;a<r;++a){if(o=i[a],!Dt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function pf(t,e){return Jf(t,e,{merger:O7})}function O7(t,e,n){if(!EC(t))return;const i=e[t],r=n[t];Dt(i)&&Dt(r)?pf(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Gg(r))}const sE={"":t=>t,x:t=>t.x,y:t=>t.y};function B7(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function j7(t){const e=B7(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Ya(t,e){return(sE[e]||(sE[e]=j7(e)))(t)}function o5(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Qf=t=>typeof t<"u",Xa=t=>typeof t=="function",oE=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function U7(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Sn=Math.PI,vn=2*Sn,$7=vn+Sn,Wg=Number.POSITIVE_INFINITY,z7=Sn/180,Gn=Sn/2,gl=Sn/4,aE=Sn*2/3,O2=Math.log10,oo=Math.sign;function gf(t,e,n){return Math.abs(t-e)<n}function lE(t){const e=Math.round(t);t=gf(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(O2(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function H7(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function V7(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Zf(t){return!V7(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function G7(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function W7(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function to(t){return t*(Sn/180)}function a5(t){return t*(180/Sn)}function cE(t){if(!di(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function AC(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Sn&&(s+=vn),{angle:s,distance:r}}function B2(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function q7(t,e){return(t-e+$7)%vn-Sn}function Lr(t){return(t%vn+vn)%vn}function ed(t,e,n,i){const r=Lr(t),s=Lr(e),o=Lr(n),a=Lr(s-r),l=Lr(o-r),c=Lr(r-s),u=Lr(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function Fi(t,e,n){return Math.max(e,Math.min(n,t))}function K7(t){return Fi(t,-32768,32767)}function zo(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function l5(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Il=(t,e,n,i)=>l5(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),Y7=(t,e,n)=>l5(t,n,i=>t[i][e]>=n);function X7(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const TC=["push","pop","shift","splice","unshift"];function J7(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),TC.forEach(n=>{const i="_onData"+o5(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function uE(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(TC.forEach(s=>{delete t[s]}),delete t._chartjs)}function LC(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const kC=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function CC(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,kC.call(window,()=>{i=!1,t.apply(e,n)}))}}function Q7(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const c5=t=>t==="start"?"left":t==="end"?"right":"center",Ii=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Z7=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function eB(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:d,maxDefined:p}=o.getUserBounds();if(d){if(r=Math.min(Il(l,u,h).lo,n?i:Il(e,u,o.getPixelForValue(h)).lo),c){const m=l.slice(0,r+1).reverse().findIndex(v=>!$t(v[a.axis]));r-=Math.max(0,m)}r=Fi(r,0,i-1)}if(p){let m=Math.max(Il(l,o.axis,f,!0).hi+1,n?0:Il(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const v=l.slice(m-1).findIndex(y=>!$t(y[a.axis]));m+=Math.max(0,v)}s=Fi(m,r,i)-r}else s=i-r}return{start:r,count:s}}function tB(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Qp=t=>t===0||t===1,hE=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*vn/n)),fE=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*vn/n)+1,mf={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Gn)+1,easeOutSine:t=>Math.sin(t*Gn),easeInOutSine:t=>-.5*(Math.cos(Sn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Qp(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Qp(t)?t:hE(t,.075,.3),easeOutElastic:t=>Qp(t)?t:fE(t,.075,.3),easeInOutElastic(t){return Qp(t)?t:t<.5?.5*hE(t*2,.1125,.45):.5+.5*fE(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-mf.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?mf.easeInBounce(t*2)*.5:mf.easeOutBounce(t*2-1)*.5+.5};function u5(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function dE(t){return u5(t)?t:new SC(t)}function Gy(t){return u5(t)?t:new SC(t).saturate(.5).darken(.1).hexString()}const nB=["x","y","borderWidth","radius","tension"],iB=["color","borderColor","backgroundColor"];function rB(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:iB},numbers:{type:"number",properties:nB}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function sB(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const pE=new Map;function oB(t,e){e=e||{};const n=t+JSON.stringify(e);let i=pE.get(n);return i||(i=new Intl.NumberFormat(t,e),pE.set(n,i)),i}function h5(t,e,n){return oB(e,n).format(t)}const RC={values(t){return wn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=aB(t,n)}const o=O2(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),h5(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(O2(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?RC.numeric.call(this,t,e,n):""}};function aB(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var f5={formatters:RC};function lB(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:f5.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Jl=Object.create(null),j2=Object.create(null);function yf(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function Wy(t,e,n){return typeof e=="string"?Jf(yf(t,e),n):Jf(yf(t,""),e)}class cB{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Gy(r.backgroundColor),this.hoverBorderColor=(i,r)=>Gy(r.borderColor),this.hoverColor=(i,r)=>Gy(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Wy(this,e,n)}get(e){return yf(this,e)}describe(e,n){return Wy(j2,e,n)}override(e,n){return Wy(Jl,e,n)}route(e,n,i,r){const s=yf(this,e),o=yf(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Dt(l)?Object.assign({},c,l):kt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var On=new cB({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[rB,sB,lB]);function uB(t){return!t||$t(t.size)||$t(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function qg(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function hB(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,f;for(l=0;l<a;l++)if(h=n[l],h!=null&&!wn(h))o=qg(t,r,s,o,h);else if(wn(h))for(c=0,u=h.length;c<u;c++)f=h[c],f!=null&&!wn(f)&&(o=qg(t,r,s,o,f));t.restore();const d=s.length/2;if(d>n.length){for(l=0;l<d;l++)delete r[s[l]];s.splice(0,d)}return o}function ml(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function gE(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function U2(t,e,n,i){PC(t,e,n,i,null)}function PC(t,e,n,i,r){let s,o,a,l,c,u,h,f;const d=e.pointStyle,p=e.rotation,m=e.radius;let v=(p||0)*z7;if(d&&typeof d=="object"&&(s=d.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(v),t.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),d){default:r?t.ellipse(n,i,r/2,m,0,0,vn):t.arc(n,i,m,0,vn),t.closePath();break;case"triangle":u=r?r/2:m,t.moveTo(n+Math.sin(v)*u,i-Math.cos(v)*m),v+=aE,t.lineTo(n+Math.sin(v)*u,i-Math.cos(v)*m),v+=aE,t.lineTo(n+Math.sin(v)*u,i-Math.cos(v)*m),t.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(v+gl)*l,h=Math.cos(v+gl)*(r?r/2-c:l),a=Math.sin(v+gl)*l,f=Math.sin(v+gl)*(r?r/2-c:l),t.arc(n-h,i-a,c,v-Sn,v-Gn),t.arc(n+f,i-o,c,v-Gn,v),t.arc(n+h,i+a,c,v,v+Gn),t.arc(n-f,i+o,c,v+Gn,v+Sn),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}v+=gl;case"rectRot":h=Math.cos(v)*(r?r/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,f=Math.sin(v)*(r?r/2:m),t.moveTo(n-h,i-a),t.lineTo(n+f,i-o),t.lineTo(n+h,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":v+=gl;case"cross":h=Math.cos(v)*(r?r/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,f=Math.sin(v)*(r?r/2:m),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":h=Math.cos(v)*(r?r/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,f=Math.sin(v)*(r?r/2:m),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),v+=gl,h=Math.cos(v)*(r?r/2:m),o=Math.cos(v)*m,a=Math.sin(v)*m,f=Math.sin(v)*(r?r/2:m),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(v)*m,a=Math.sin(v)*m,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(v)*(r?r/2:m),i+Math.sin(v)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ho(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Wm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function qm(t){t.restore()}function fB(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function dB(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function pB(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),$t(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function gB(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function mB(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ql(t,e,n,i,r,s={}){const o=wn(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,pB(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&mB(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),$t(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),gB(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function td(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Sn,Sn,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Sn,Gn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Gn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Gn,!0),t.lineTo(n+o.topLeft,i)}const yB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,vB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function xB(t,e){const n=(""+t).match(yB);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const bB=t=>+t||0;function d5(t,e){const n={},i=Dt(e),r=i?Object.keys(e):e,s=Dt(t)?i?o=>kt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=bB(s(o));return n}function NC(t){return d5(t,{top:"y",right:"x",bottom:"y",left:"x"})}function jl(t){return d5(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ji(t){const e=NC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ri(t,e){t=t||{},e=e||On.font;let n=kt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=kt(t.style,e.style);i&&!(""+i).match(vB)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:kt(t.family,e.family),lineHeight:xB(kt(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:kt(t.weight,e.weight),string:""};return r.string=uB(r),r}function Zp(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function wB(t,e,n){const{min:i,max:r}=t,s=_C(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function nl(t,e){return Object.assign(Object.create(t),e)}function p5(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=FC("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>p5([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return DC(a,l,()=>CB(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return yE(a).includes(l)},ownKeys(a){return yE(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function Pu(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:IC(t,i),setContext:s=>Pu(t,s,n,i),override:s=>Pu(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return DC(s,o,()=>_B(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function IC(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Xa(n)?n:()=>n,isIndexable:Xa(i)?i:()=>i}}const SB=(t,e)=>t?t+o5(e):e,g5=(t,e)=>Dt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function DC(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function _B(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Xa(a)&&o.isScriptable(e)&&(a=EB(e,a,t,n)),wn(a)&&a.length&&(a=AB(e,a,t,o.isIndexable)),g5(e,a)&&(a=Pu(a,r,s&&s[e],o)),a}function EB(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),g5(t,l)&&(l=m5(r._scopes,r,t,l)),l}function AB(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(Dt(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=m5(c,r,t,u);e.push(Pu(h,s,o&&o[t],a))}}return e}function MC(t,e,n){return Xa(t)?t(e,n):t}const TB=(t,e)=>t===!0?e:typeof t=="string"?Ya(e,t):void 0;function LB(t,e,n,i,r){for(const s of e){const o=TB(n,s);if(o){t.add(o);const a=MC(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function m5(t,e,n,i){const r=e._rootScopes,s=MC(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=mE(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=mE(a,o,s,l,i),l===null)?!1:p5(Array.from(a),[""],r,s,()=>kB(e,n,i))}function mE(t,e,n,i,r){for(;n;)n=LB(t,e,n,i,r);return n}function kB(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return wn(r)&&Dt(n)?n:r||{}}function CB(t,e,n,i){let r;for(const s of e)if(r=FC(SB(s,t),n),typeof r<"u")return g5(t,r)?m5(n,i,t,r):r}function FC(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function yE(t){let e=t._keys;return e||(e=t._keys=RB(t._scopes)),e}function RB(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function PB(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={r:r.parse(Ya(u,s),c)};return o}const NB=Number.EPSILON||1e-14,Nu=(t,e)=>e<t.length&&!t[e].skip&&t[e],OC=t=>t==="x"?"y":"x";function IB(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=B2(s,r),l=B2(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,f=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function DB(t,e,n){const i=t.length;let r,s,o,a,l,c=Nu(t,0);for(let u=0;u<i-1;++u)if(l=c,c=Nu(t,u+1),!(!l||!c)){if(gf(e[u],0,NB)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=s*o*e[u])}}function MB(t,e,n="x"){const i=OC(n),r=t.length;let s,o,a,l=Nu(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Nu(t,c+1),!a)continue;const u=a[n],h=a[i];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${i}`]=h-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${i}`]=h+s*e[c])}}function FB(t,e="x"){const n=OC(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Nu(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=Nu(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?oo(r[o-1])!==oo(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}DB(t,r,s),MB(t,s,e)}function e0(t,e,n){return Math.max(Math.min(t,n),e)}function OB(t,e){let n,i,r,s,o,a=Ho(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&Ho(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=e0(r.cp1x,e.left,e.right),r.cp1y=e0(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=e0(r.cp2x,e.left,e.right),r.cp2y=e0(r.cp2y,e.top,e.bottom)))}function BB(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")FB(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=IB(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&OB(t,n)}function y5(){return typeof window<"u"&&typeof document<"u"}function v5(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Kg(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Km=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function jB(t,e){return Km(t).getPropertyValue(e)}const UB=["top","right","bottom","left"];function Ul(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=UB[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const $B=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function zB(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if($B(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Al(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Km(n),s=r.boxSizing==="border-box",o=Ul(r,"padding"),a=Ul(r,"border","width"),{x:l,y:c,box:u}=zB(t,n),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:d,height:p}=e;return s&&(d-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/d*n.width/i),y:Math.round((c-f)/p*n.height/i)}}function HB(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&v5(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Km(s),l=Ul(a,"border","width"),c=Ul(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Kg(a.maxWidth,s,"clientWidth"),r=Kg(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Wg,maxHeight:r||Wg}}const t0=t=>Math.round(t*10)/10;function VB(t,e,n,i){const r=Km(t),s=Ul(r,"margin"),o=Kg(r.maxWidth,t,"clientWidth")||Wg,a=Kg(r.maxHeight,t,"clientHeight")||Wg,l=HB(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const f=Ul(r,"border","width"),d=Ul(r,"padding");c-=d.width+f.width,u-=d.height+f.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=t0(Math.min(c,o,l.maxWidth)),u=t0(Math.min(u,a,l.maxHeight)),c&&!u&&(u=t0(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=t0(Math.floor(u*i))),{width:c,height:u}}function vE(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const GB=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};y5()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function xE(t,e){const n=jB(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Tl(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function WB(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function qB(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Tl(t,r,n),a=Tl(r,s,n),l=Tl(s,e,n),c=Tl(o,a,n),u=Tl(a,l,n);return Tl(c,u,n)}const KB=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},YB=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function vu(t,e,n){return t?KB(e,n):YB()}function BC(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function jC(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function UC(t){return t==="angle"?{between:ed,compare:q7,normalize:Lr}:{between:zo,compare:(e,n)=>e-n,normalize:e=>e}}function bE({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function XB(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=UC(i),l=e.length;let{start:c,end:u,loop:h}=t,f,d;if(h){for(c+=l,u+=l,f=0,d=l;f<d&&o(a(e[c%l][i]),r,s);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function $C(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=UC(i),{start:u,end:h,loop:f,style:d}=XB(t,e,n),p=[];let m=!1,v=null,y,x,b;const E=()=>l(r,b,y)&&a(r,b)!==0,T=()=>a(s,y)===0||l(s,b,y),D=()=>m||E(),R=()=>!m||T();for(let S=u,C=u;S<=h;++S)x=e[S%o],!x.skip&&(y=c(x[i]),y!==b&&(m=l(y,r,s),v===null&&D()&&(v=a(y,r)===0?S:C),v!==null&&R()&&(p.push(bE({start:v,end:S,loop:f,count:o,style:d})),v=null),C=S,b=y));return v!==null&&p.push(bE({start:v,end:h,loop:f,count:o,style:d})),p}function zC(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=$C(i[r],t.points,e);s.length&&n.push(...s)}return n}function JB(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function QB(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function ZB(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=JB(n,r,s,i);if(i===!0)return wE(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return wE(t,QB(n,o,l,c),n,e)}function wE(t,e,n,i){return!i||!i.setContext||!n?e:ej(t,e,n,i)}function ej(t,e,n,i){const r=t._chart.getContext(),s=SE(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,f=h;function d(p,m,v,y){const x=a?-1:1;if(p!==m){for(p+=l;n[p%l].skip;)p-=x;for(;n[m%l].skip;)m+=x;p%l!==m%l&&(c.push({start:p%l,end:m%l,loop:v,style:y}),u=y,h=m%l)}}for(const p of e){h=a?h:p.start;let m=n[h%l],v;for(f=h+1;f<=p.end;f++){const y=n[f%l];v=SE(i.setContext(nl(r,{type:"segment",p0:m,p1:y,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),tj(v,u)&&d(h,f-1,p.loop,u),m=y,u=v}h<f-1&&d(h,f-1,p.loop,u)}return c}function SE(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function tj(t,e){if(!e)return!1;const n=[],i=function(r,s){return u5(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class nj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=kC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ro=new nj;const _E="transparent",ij={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=dE(t||_E),r=i.valid&&dE(e||_E);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class rj{constructor(e,n,i,r){const s=n[i];r=Zp([e.to,r,s,e.from]);const o=Zp([e.from,s,r]);this._active=!0,this._fn=e.fn||ij[e.type||typeof o],this._easing=mf[e.easing]||mf.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Zp([e.to,n,r,e.from]),this._from=Zp([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class HC{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Dt(e))return;const n=Object.keys(On.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!Dt(s))return;const o={};for(const a of n)o[a]=s[a];(wn(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=oj(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&sj(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let h=s[c];const f=i.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}s[c]=h=new rj(f,e,c,u),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Ro.add(this._chart,i),!0}}function sj(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function oj(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function EE(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function aj(t,e,n){if(n===!1)return!1;const i=EE(t,n),r=EE(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function lj(t){let e,n,i,r;return Dt(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function VC(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function AE(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,i.all)continue;break}c=t.values[l],di(c)&&(s||e===0||oo(e)===oo(c))&&(e+=c)}return!u&&!i.all?0:e}function cj(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:t[u]};return a}function qy(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function uj(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function hj(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function fj(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function TE(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function LE(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=uj(s,o,i),h=e.length;let f;for(let d=0;d<h;++d){const p=e[d],{[l]:m,[c]:v}=p,y=p._stacks||(p._stacks={});f=y[c]=fj(r,u,m),f[a]=v,f._top=TE(f,o,!0,i.type),f._bottom=TE(f,o,!1,i.type);const x=f._visualValues||(f._visualValues={});x[a]=v}}function Ky(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function dj(t,e){return nl(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function pj(t,e,n){return nl(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Rh(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const Yy=t=>t==="reset"||t==="none",kE=(t,e)=>e?t:Object.assign({},t),gj=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:VC(n,!0),values:null};class Ga{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=qy(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Rh(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(h,f,d,p)=>h==="x"?f:h==="r"?p:d,s=n.xAxisID=kt(i.xAxisID,Ky(e,"x")),o=n.yAxisID=kt(i.yAxisID,Ky(e,"y")),a=n.rAxisID=kt(i.rAxisID,Ky(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),u=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&uE(this._data,this),e._stacked&&Rh(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Dt(n)){const r=this._cachedMeta;this._data=cj(n,r)}else if(i!==n){if(i){uE(i,this);const r=this._cachedMeta;Rh(r),r._parsed=[]}n&&Object.isExtensible(n)&&J7(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=qy(n.vScale,n),n.stack!==i.stack&&(r=!0,Rh(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(LE(this,n._parsed),n._stacked=qy(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{wn(r[e])?f=this.parseArrayData(i,r,e,n):Dt(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const d=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=f[u],l&&(d()&&(l=!1),c=h);i._sorted=l}o&&LE(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let f,d,p;for(f=0,d=r;f<d;++f)p=f+i,h[f]={[a]:u||s.parse(c[p],p),[l]:o.parse(n[p],p)};return h}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,f,d;for(u=0,h=r;u<h;++u)f=u+i,d=n[f],c[u]={x:s.parse(Ya(d,a),f),y:o.parse(Ya(d,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:VC(r,!0),values:n._stacks[e.axis]._visualValues};return AE(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=AE(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=gj(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=hj(a);let f,d;function p(){d=r[f];const m=d[a.axis];return!di(d[e.axis])||u>m||h<m}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(c,e,d,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(c,e,d,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],di(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=lj(kt(this.options.clip,aj(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=pj(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=dj(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Qf(i);if(a)return kE(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),d=Object.keys(On.elements[e]),p=()=>this.getContext(i,r,n),m=c.resolveNamedOptions(f,d,p,h);return m.$shared&&(m.$shared=l,s[o]=Object.freeze(kE(m,l))),m}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,i,n))}const c=new HC(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Yy(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){Yy(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!Yy(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Rh(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}qe(Ga,"defaults",{}),qe(Ga,"datasetElementType",null),qe(Ga,"dataElementType",null);function mj(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=LC(i.sort((r,s)=>r-s))}return t._cache.$bar}function yj(t){const e=t.iScale,n=mj(e,t.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(Qf(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function vj(t,e,n,i){const r=n.barThickness;let s,o;return $t(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function xj(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function bj(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function GC(t,e,n,i){return wn(t)?bj(t,e,n,i):e[n.axis]=n.parse(t,i),e}function CE(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,f;for(c=n,u=n+i;c<u;++c)f=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(GC(f,h,s,c));return l}function Xy(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function wj(t,e,n){return t!==0?oo(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function Sj(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function _j(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Sj(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[RE(u,o,a,l)]=!0,r=c)),s[RE(r,o,a,l)]=!0,t.borderSkipped=s}function RE(t,e,n,i){return i?(t=Ej(t,e,n),t=PE(t,n,e)):t=PE(t,e,n),t}function Ej(t,e,n){return t===e?n:t===n?e:t}function PE(t,e,n){return t==="start"?e:t==="end"?n:t}function Aj(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class q0 extends Ga{parsePrimitiveData(e,n,i,r){return CE(e,n,i,r)}parseArrayData(e,n,i,r){return CE(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let f,d,p,m;for(f=i,d=i+r;f<d;++f)m=n[f],p={},p[s.axis]=s.parse(Ya(m,c),f),h.push(GC(Ya(m,u),p,o,f));return h}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,a=Xy(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let d=n;d<n+i;d++){const p=this.getParsed(d),m=s||$t(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(d),v=this._calculateBarIndexPixels(d,u),y=(p._stacks||{})[a.axis],x={horizontal:c,base:m.base,enableBorderRadius:!y||Xy(p._custom)||o===y._top||o===y._bottom,x:c?m.head:v.center,y:c?v.center:m.head,height:c?v.size:Math.abs(m.size),width:c?Math.abs(m.size):v.size};f&&(x.options=h||this.resolveDataElementOptions(d,e[d].active?"active":r));const b=x.options||e[d].options;_j(x,b,y,o),Aj(x,b,u.ratio),this.updateElement(e[d],d,x,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=u=>{const h=u._parsed.find(d=>d[i.axis]===l),f=h&&h[u.vScale.axis];if($t(f)||isNaN(f))return!0};for(const u of r)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||yj(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=Xy(c);let h=l[n.axis],f=0,d=i?this.applyStack(n,l,i):h,p,m;d!==h&&(f=d-h,d=h),u&&(h=c.barStart,d=c.barEnd-c.barStart,h!==0&&oo(h)!==oo(c.barEnd)&&(f=0),f+=h);const v=!$t(s)&&!u?s:f;let y=n.getPixelForValue(v);if(this.chart.getDataVisibility(e)?p=n.getPixelForValue(f+d):p=y,m=p-y,Math.abs(m)<o){m=wj(m,n,a)*o,h===a&&(y-=m/2);const x=n.getPixelForDecimal(0),b=n.getPixelForDecimal(1),E=Math.min(x,b),T=Math.max(x,b);y=Math.max(Math.min(y,T),E),p=y+m,i&&!u&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(p)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const x=oo(m)*n.getLineWidthForValue(a)/2;y+=x,m-=x}return{size:m,base:y,head:p,center:p+m/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=kt(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=r.barThickness==="flex"?xj(e,n,r,c):vj(e,n,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}qe(q0,"id","bar"),qe(q0,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),qe(q0,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Tj(t,e,n){let i=1,r=1,s=0,o=0;if(e<vn){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),f=Math.sin(l),d=(b,E,T)=>ed(b,a,l,!0)?1:Math.max(E,E*n,T,T*n),p=(b,E,T)=>ed(b,a,l,!0)?-1:Math.min(E,E*n,T,T*n),m=d(0,c,h),v=d(Gn,u,f),y=p(Sn,c,h),x=p(Sn+Gn,u,f);i=(m-y)/2,r=(v-x)/2,s=-(m+y)/2,o=-(v+x)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class Vh extends Ga{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(Dt(i[e])){const{key:l="value"}=this._parsing;s=c=>+Ya(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return to(this.options.rotation-90)}_getCircumference(){return to(this.options.circumference)}_getRotationExtents(){let e=vn,n=-vn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(M7(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:d,offsetX:p,offsetY:m}=Tj(h,u,l),v=(i.width-o)/f,y=(i.height-o)/d,x=Math.max(Math.min(v,y)/2,0),b=_C(this.options.radius,x),E=Math.max(b*l,0),T=(b-E)/this._getVisibleDatasetWeightTotal();this.offsetX=p*b,this.offsetY=m*b,r.total=this.calculateTotal(),this.outerRadius=b-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/vn)}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=s&&c.animateScale,d=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:m,includeOptions:v}=this._getSharedOptions(n,r);let y=this._getRotation(),x;for(x=0;x<n;++x)y+=this._circumference(x,s);for(x=n;x<n+i;++x){const b=this._circumference(x,s),E=e[x],T={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+b,circumference:b,outerRadius:p,innerRadius:d};v&&(T.options=m||this.resolveDataElementOptions(x,E.active?"active":r)),y+=b,this.updateElement(E,x,T,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,r;for(r=0;r<n.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?vn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=h5(n._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const i=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(kt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}qe(Vh,"id","doughnut"),qe(Vh,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),qe(Vh,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),qe(Vh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class K0 extends Ga{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=eB(n,r,o);this._drawStart=a,this._drawCount=l,tB(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,r),f=o.axis,d=a.axis,{spanGaps:p,segment:m}=this.options,v=Zf(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||r==="none",x=n+i,b=e.length;let E=n>0&&this.getParsed(n-1);for(let T=0;T<b;++T){const D=e[T],R=y?D:{};if(T<n||T>=x){R.skip=!0;continue}const S=this.getParsed(T),C=$t(S[d]),N=R[f]=o.getPixelForValue(S[f],T),k=R[d]=s||C?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,S,l):S[d],T);R.skip=isNaN(N)||isNaN(k)||C,R.stop=T>0&&Math.abs(S[f]-E[f])>v,m&&(R.parsed=S,R.raw=c.data[T]),h&&(R.options=u||this.resolveDataElementOptions(T,D.active?"active":r)),y||this.updateElement(D,T,R,r),E=S}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}qe(K0,"id","line"),qe(K0,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),qe(K0,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class $2 extends Vh{}qe($2,"id","pie"),qe($2,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Y0 extends Ga{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,r){return PB.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta,i=n.dataset,r=n.data||[],s=n.iScale.getLabels();if(i.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,n,i,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=n;a<n+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":r),u=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:u.x,f=o?s.yCenter:u.y,d={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:c};this.updateElement(l,a,d,r)}}}qe(Y0,"id","radar"),qe(Y0,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),qe(Y0,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});function yl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class x5{constructor(e){qe(this,"options");this.options=e||{}}static override(e){Object.assign(x5.prototype,e)}init(){}formats(){return yl()}parse(){return yl()}format(){return yl()}add(){return yl()}diff(){return yl()}startOf(){return yl()}endOf(){return yl()}}var Lj={_date:x5};function kj(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?Y7:Il;if(i){if(r._sharedOptions){const u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=c(s,e,n-h),d=c(s,e,n+h);return{lo:f.lo,hi:d.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,d=f.slice(0,u.lo+1).reverse().findIndex(m=>!$t(m[h.axis]));u.lo-=Math.max(0,d);const p=f.slice(u.hi).findIndex(m=>!$t(m[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:s.length-1}}function Sd(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:f}=kj(s[a],e,o,r);for(let d=h;d<=f;++d){const p=u[d];p.skip||i(p,c,d)}}}function Cj(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Jy(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Sd(t,n,e,function(a,l,c){!r&&!Ho(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Rj(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=AC(o,{x:e.x,y:e.y});ed(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Sd(t,n,e,s),r}function Pj(t,e,n,i,r,s){let o=[];const a=Cj(n);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const d=u.inRange(e.x,e.y,r);if(i&&!d)return;const p=u.getCenterPoint(r);if(!(!!s||t.isPointInArea(p))&&!d)return;const v=a(e,p);v<l?(o=[{element:u,datasetIndex:h,index:f}],l=v):v===l&&o.push({element:u,datasetIndex:h,index:f})}return Sd(t,n,e,c),o}function Qy(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?Rj(t,e,n,r):Pj(t,e,n,i,r,s)}function NE(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Sd(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var Nj={evaluateInteractionItems:Sd,modes:{index(t,e,n,i){const r=Al(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Jy(t,r,s,i,o):Qy(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const r=Al(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Jy(t,r,s,i,o):Qy(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const r=Al(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Jy(t,r,s,i,o)},nearest(t,e,n,i){const r=Al(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Qy(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Al(e,t);return NE(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Al(e,t);return NE(t,r,"y",n.intersect,i)}}};const WC=["left","top","right","bottom"];function Ph(t,e){return t.filter(n=>n.pos===e)}function IE(t,e){return t.filter(n=>WC.indexOf(n.pos)===-1&&n.box.axis===e)}function Nh(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function Ij(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function Dj(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!WC.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Mj(t,e){const n=Dj(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return n}function Fj(t){const e=Ij(t),n=Nh(e.filter(c=>c.box.fullSize),!0),i=Nh(Ph(e,"left"),!0),r=Nh(Ph(e,"right")),s=Nh(Ph(e,"top"),!0),o=Nh(Ph(e,"bottom")),a=IE(e,"x"),l=IE(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Ph(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function DE(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function qC(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Oj(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!Dt(r)){n.size&&(t[r]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[r]+=n.size}s.getPadding&&qC(o,s.getPadding());const a=Math.max(0,e.outerWidth-DE(o,t,"left","right")),l=Math.max(0,e.outerHeight-DE(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Bj(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function jj(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Gh(t,e,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,jj(a.horizontal,e));const{same:h,other:f}=Oj(e,n,a,i);c|=h&&r.length,u=u||f,l.fullSize||r.push(a)}return c&&Gh(r,e,n,i)||u}function n0(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function ME(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;Qf(c.start)&&(o=c.start),l.fullSize?n0(l,r.left,o,n.outerWidth-r.right-r.left,f):n0(l,e.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,f=c.size||l.width;Qf(c.start)&&(s=c.start),l.fullSize?n0(l,s,r.top,f,n.outerHeight-r.bottom-r.top):n0(l,s,e.top+c.placed,f,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var Zr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=ji(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=Fj(t.boxes),l=a.vertical,c=a.horizontal;Jt(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,v)=>v.box.options&&v.box.options.display===!1?m:m+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);qC(f,ji(i));const d=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),p=Mj(l.concat(c),h);Gh(a.fullSize,d,h,p),Gh(l,d,h,p),Gh(c,d,h,p)&&Gh(l,d,h,p),Bj(d),ME(a.leftAndTop,d,h,p),d.x+=d.w,d.y+=d.h,ME(a.rightAndBottom,d,h,p),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},Jt(a.chartArea,m=>{const v=m.box;Object.assign(v,t.chartArea),v.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class KC{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class Uj extends KC{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const X0="$chartjs",$j={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},FE=t=>t===null||t==="";function zj(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[X0]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",FE(r)){const s=xE(t,"width");s!==void 0&&(t.width=s)}if(FE(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=xE(t,"height");s!==void 0&&(t.height=s)}return t}const YC=GB?{passive:!0}:!1;function Hj(t,e,n){t&&t.addEventListener(e,n,YC)}function Vj(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,YC)}function Gj(t,e){const n=$j[t.type]||t.type,{x:i,y:r}=Al(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Yg(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Wj(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Yg(a.addedNodes,i),o=o&&!Yg(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function qj(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Yg(a.removedNodes,i),o=o&&!Yg(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const nd=new Map;let OE=0;function XC(){const t=window.devicePixelRatio;t!==OE&&(OE=t,nd.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Kj(t,e){nd.size||window.addEventListener("resize",XC),nd.set(t,e)}function Yj(t){nd.delete(t),nd.size||window.removeEventListener("resize",XC)}function Xj(t,e,n){const i=t.canvas,r=i&&v5(i);if(!r)return;const s=CC((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),Kj(t,s),o}function Zy(t,e,n){n&&n.disconnect(),e==="resize"&&Yj(t)}function Jj(t,e,n){const i=t.canvas,r=CC(s=>{t.ctx!==null&&n(Gj(s,t))},t);return Hj(i,e,r),r}class Qj extends KC{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(zj(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[X0])return!1;const i=n[X0].initial;["height","width"].forEach(s=>{const o=i[s];$t(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[X0],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:Wj,detach:qj,resize:Xj}[n]||Jj;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Zy,detach:Zy,resize:Zy}[n]||Vj)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return VB(e,n,i,r)}isAttached(e){const n=e&&v5(e);return!!(n&&n.isConnected)}}function Zj(t){return!y5()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Uj:Qj}class Rs{constructor(){qe(this,"x");qe(this,"y");qe(this,"active",!1);qe(this,"options");qe(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Zf(this.x)&&Zf(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}qe(Rs,"defaults",{}),qe(Rs,"defaultRoutes");function e9(t,e){const n=t.options.ticks,i=t9(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?i9(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return r9(e,c,s,o/r),c;const u=n9(s,e,r);if(o>0){let h,f;const d=o>1?Math.round((l-a)/(o-1)):null;for(i0(e,c,u,$t(d)?0:a-d,a),h=0,f=o-1;h<f;h++)i0(e,c,u,s[h],s[h+1]);return i0(e,c,u,l,$t(d)?e.length:l+d),c}return i0(e,c,u),c}function t9(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function n9(t,e,n){const i=s9(t),r=e.length/n;if(!i)return Math.max(r,1);const s=H7(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function i9(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function r9(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function i0(t,e,n,i,r){const s=kt(i,0),o=Math.min(kt(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function s9(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const o9=t=>t==="left"?"right":t==="right"?"left":t,BE=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,jE=(t,e)=>Math.min(e||t,t);function UE(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function a9(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function l9(t,e){Jt(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Ih(t){return t.drawTicks?t.tickLength:0}function $E(t,e){if(!t.display)return 0;const n=ri(t.font,e),i=ji(t.padding);return(wn(t.text)?t.text.length:1)*n.lineHeight+i.height}function c9(t,e){return nl(t,{scale:e,type:"scale"})}function u9(t,e,n){return nl(t,{tick:n,index:e,type:"tick"})}function h9(t,e,n){let i=c5(t);return(n&&e!=="right"||!n&&e==="right")&&(i=o9(i)),i}function f9(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,d,p;const m=o-r,v=a-s;if(t.isHorizontal()){if(d=Ii(i,s,a),Dt(n)){const y=Object.keys(n)[0],x=n[y];p=u[y].getPixelForValue(x)+m-e}else n==="center"?p=(c.bottom+c.top)/2+m-e:p=BE(t,n,e);f=a-s}else{if(Dt(n)){const y=Object.keys(n)[0],x=n[y];d=u[y].getPixelForValue(x)-v+e}else n==="center"?d=(c.left+c.right)/2-v+e:d=BE(t,n,e);p=Ii(i,o,r),h=n==="left"?-Gn:Gn}return{titleX:d,titleY:p,maxWidth:f,rotation:h}}class zu extends Rs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=zs(e,Number.POSITIVE_INFINITY),n=zs(n,Number.NEGATIVE_INFINITY),i=zs(i,Number.POSITIVE_INFINITY),r=zs(r,Number.NEGATIVE_INFINITY),{min:zs(e,i),max:zs(n,r),minDefined:di(e),maxDefined:di(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:zs(n,zs(i,n)),max:zs(i,zs(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){fn(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=wB(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?UE(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=e9(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){fn(this.options.afterUpdate,[this])}beforeSetDimensions(){fn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){fn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),fn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){fn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=fn(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){fn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){fn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=jE(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,d=Fi(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:d/(i-1),h+6>a&&(a=d/(i-(e.offset?.5:1)),l=this.maxHeight-Ih(e.grid)-n.padding-$E(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=a5(Math.min(Math.asin(Fi((u.highest.height+6)/a,-1,1)),Math.asin(Fi(l/c,-1,1))-Math.asin(Fi(f/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){fn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){fn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=$E(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ih(s)+l):(e.height=this.maxHeight,e.width=Ih(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),d=i.padding*2,p=to(this.labelRotation),m=Math.cos(p),v=Math.sin(p);if(a){const y=i.mirror?0:v*h.width+m*f.height;e.height=Math.min(this.maxHeight,e.height+y+d)}else{const y=i.mirror?0:m*h.width+v*f.height;e.width=Math.min(this.maxWidth,e.width+y+d)}this._calculatePadding(c,u,v,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,d=0;l?c?(f=r*e.width,d=i*n.height):(f=i*e.height,d=r*n.width):s==="start"?d=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,d=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){fn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)$t(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=UE(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/jE(n,i));let c=0,u=0,h,f,d,p,m,v,y,x,b,E,T;for(h=0;h<n;h+=l){if(p=e[h].label,m=this._resolveTickFontOptions(h),r.font=v=m.string,y=s[v]=s[v]||{data:{},gc:[]},x=m.lineHeight,b=E=0,!$t(p)&&!wn(p))b=qg(r,y.data,y.gc,b,p),E=x;else if(wn(p))for(f=0,d=p.length;f<d;++f)T=p[f],!$t(T)&&!wn(T)&&(b=qg(r,y.data,y.gc,b,T),E+=x);o.push(b),a.push(E),c=Math.max(b,c),u=Math.max(E,u)}l9(s,n);const D=o.indexOf(c),R=a.indexOf(u),S=C=>({width:o[C]||0,height:a[C]||0});return{first:S(0),last:S(n-1),widest:S(D),highest:S(R),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return K7(this._alignToPixels?ml(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=u9(this.getContext(),e,i))}return this.$context||(this.$context=c9(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=to(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=Ih(s),d=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,v=m/2,y=function(O){return ml(i,O,m)};let x,b,E,T,D,R,S,C,N,k,P,j;if(o==="top")x=y(this.bottom),R=this.bottom-f,C=x-v,k=y(e.top)+v,j=e.bottom;else if(o==="bottom")x=y(this.top),k=e.top,j=y(e.bottom)-v,R=x+v,C=this.top+f;else if(o==="left")x=y(this.right),D=this.right-f,S=x-v,N=y(e.left)+v,P=e.right;else if(o==="right")x=y(this.left),N=e.left,P=y(e.right)-v,D=x+v,S=this.left+f;else if(n==="x"){if(o==="center")x=y((e.top+e.bottom)/2+.5);else if(Dt(o)){const O=Object.keys(o)[0],$=o[O];x=y(this.chart.scales[O].getPixelForValue($))}k=e.top,j=e.bottom,R=x+v,C=R+f}else if(n==="y"){if(o==="center")x=y((e.left+e.right)/2);else if(Dt(o)){const O=Object.keys(o)[0],$=o[O];x=y(this.chart.scales[O].getPixelForValue($))}D=x-v,S=D-f,N=e.left,P=e.right}const F=kt(r.ticks.maxTicksLimit,h),H=Math.max(1,Math.ceil(h/F));for(b=0;b<h;b+=H){const O=this.getContext(b),$=s.setContext(O),z=a.setContext(O),B=$.lineWidth,X=$.color,te=z.dash||[],I=z.dashOffset,U=$.tickWidth,K=$.tickColor,Q=$.tickBorderDash||[],ee=$.tickBorderDashOffset;E=a9(this,b,l),E!==void 0&&(T=ml(i,E,B),c?D=S=N=P=T:R=C=k=j=T,d.push({tx1:D,ty1:R,tx2:S,ty2:C,x1:N,y1:k,x2:P,y2:j,width:B,color:X,borderDash:te,borderDashOffset:I,tickWidth:U,tickColor:K,tickBorderDash:Q,tickBorderDashOffset:ee}))}return this._ticksLength=h,this._borderValue=x,d}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,f=Ih(i.grid),d=f+u,p=h?-u:d,m=-to(this.labelRotation),v=[];let y,x,b,E,T,D,R,S,C,N,k,P,j="middle";if(r==="top")D=this.bottom-p,R=this._getXAxisLabelAlignment();else if(r==="bottom")D=this.top+p,R=this._getXAxisLabelAlignment();else if(r==="left"){const H=this._getYAxisLabelAlignment(f);R=H.textAlign,T=H.x}else if(r==="right"){const H=this._getYAxisLabelAlignment(f);R=H.textAlign,T=H.x}else if(n==="x"){if(r==="center")D=(e.top+e.bottom)/2+d;else if(Dt(r)){const H=Object.keys(r)[0],O=r[H];D=this.chart.scales[H].getPixelForValue(O)+d}R=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")T=(e.left+e.right)/2-d;else if(Dt(r)){const H=Object.keys(r)[0],O=r[H];T=this.chart.scales[H].getPixelForValue(O)}R=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?j="top":l==="end"&&(j="bottom"));const F=this._getLabelSizes();for(y=0,x=a.length;y<x;++y){b=a[y],E=b.label;const H=s.setContext(this.getContext(y));S=this.getPixelForTick(y)+s.labelOffset,C=this._resolveTickFontOptions(y),N=C.lineHeight,k=wn(E)?E.length:1;const O=k/2,$=H.color,z=H.textStrokeColor,B=H.textStrokeWidth;let X=R;o?(T=S,R==="inner"&&(y===x-1?X=this.options.reverse?"left":"right":y===0?X=this.options.reverse?"right":"left":X="center"),r==="top"?c==="near"||m!==0?P=-k*N+N/2:c==="center"?P=-F.highest.height/2-O*N+N:P=-F.highest.height+N/2:c==="near"||m!==0?P=N/2:c==="center"?P=F.highest.height/2-O*N:P=F.highest.height-k*N,h&&(P*=-1),m!==0&&!H.showLabelBackdrop&&(T+=N/2*Math.sin(m))):(D=S,P=(1-k)*N/2);let te;if(H.showLabelBackdrop){const I=ji(H.backdropPadding),U=F.heights[y],K=F.widths[y];let Q=P-I.top,ee=0-I.left;switch(j){case"middle":Q-=U/2;break;case"bottom":Q-=U;break}switch(R){case"center":ee-=K/2;break;case"right":ee-=K;break;case"inner":y===x-1?ee-=K:y>0&&(ee-=K/2);break}te={left:ee,top:Q,width:K+I.width,height:U+I.height,color:H.backdropColor}}v.push({label:E,font:C,textOffset:P,options:{rotation:m,color:$,strokeColor:z,strokeWidth:B,textAlign:X,textBaseline:j,translation:[T,D],backdrop:te}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-to(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=ml(e,this.left,o)-o/2,u=ml(e,this.right,a)+a/2,h=f=l):(h=ml(e,this.top,o)-o/2,f=ml(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Wm(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Ql(i,c,0,u,l,a)}r&&qm(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=ri(i.font),o=ji(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Dt(n)?(l+=o.bottom,wn(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=f9(this,l,n,a);Ql(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:f,textAlign:h9(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=kt(e.grid&&e.grid.z,-1),r=kt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==zu.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ri(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class r0{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;g9(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,d9(e,o,i),this.override&&On.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in On[r]&&(delete On[r][i],this.override&&delete Jl[i])}}function d9(t,e,n){const i=Jf(Object.create(null),[n?On.get(n):{},On.get(e),t.defaults]);On.set(e,i),t.defaultRoutes&&p9(e,t.defaultRoutes),t.descriptors&&On.describe(e,t.descriptors)}function p9(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");On.route(s,r,l,a)})}function g9(t){return"id"in t&&"defaults"in t}class m9{constructor(){this.controllers=new r0(Ga,"datasets",!0),this.elements=new r0(Rs,"elements"),this.plugins=new r0(Object,"plugins"),this.scales=new r0(zu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Jt(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=o5(e);fn(i["before"+r],[],i),n[e](i),fn(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Ws=new m9;class y9{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(fn(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){$t(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=kt(i.options&&i.options.plugins,{}),s=v9(i);return r===!1&&!n?[]:b9(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function v9(t){const e={},n=[],i=Object.keys(Ws.plugins.items);for(let s=0;s<i.length;s++)n.push(Ws.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function x9(t,e){return!e&&t===!1?null:t===!0?{}:t}function b9(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=x9(i[l],r);c!==null&&s.push({plugin:a,options:w9(t.config,{plugin:a,local:n[l]},c,o)})}return s}function w9(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function z2(t,e){const n=On.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function S9(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function _9(t,e){return t===e?"_index_":"_value_"}function zE(t){if(t==="x"||t==="y"||t==="r")return t}function E9(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function H2(t,...e){if(zE(t))return t;for(const n of e){const i=n.axis||E9(n.position)||t.length>1&&zE(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function HE(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function A9(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return HE(t,"x",n[0])||HE(t,"y",n[0])}return{}}function T9(t,e){const n=Jl[t.type]||{scales:{}},i=e.scales||{},r=z2(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Dt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=H2(o,a,A9(o,t),On.scales[a.type]),c=_9(l,r),u=n.scales||{};s[o]=pf(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||z2(a,e),u=(Jl[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=S9(h,l),d=o[f+"AxisID"]||f;s[d]=s[d]||Object.create(null),pf(s[d],[{axis:f},i[d],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];pf(a,[On.scales[a.type],On.scale])}),s}function JC(t){const e=t.options||(t.options={});e.plugins=kt(e.plugins,{}),e.scales=T9(t,e)}function QC(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function L9(t){return t=t||{},t.data=QC(t.data),JC(t),t}const VE=new Map,ZC=new Set;function s0(t,e){let n=VE.get(t);return n||(n=e(),VE.set(t,n),ZC.add(n)),n}const Dh=(t,e,n)=>{const i=Ya(e,n);i!==void 0&&t.add(i)};class k9{constructor(e){this._config=L9(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=QC(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),JC(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return s0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return s0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return s0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return s0(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Dh(l,e,h))),u.forEach(h=>Dh(l,r,h)),u.forEach(h=>Dh(l,Jl[s]||{},h)),u.forEach(h=>Dh(l,On,h)),u.forEach(h=>Dh(l,j2,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),ZC.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Jl[n]||{},On.datasets[n]||{},{type:n},On,j2]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=GE(this._resolverCache,e,r);let l=o;if(R9(o,n)){s.$shared=!1,i=Xa(i)?i():i;const c=this.createResolver(e,i,a);l=Pu(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=GE(this._resolverCache,e,i);return Dt(n)?Pu(s,n,void 0,r):s}}function GE(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:p5(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const C9=t=>Dt(t)&&Object.getOwnPropertyNames(t).some(e=>Xa(t[e]));function R9(t,e){const{isScriptable:n,isIndexable:i}=IC(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Xa(a)||C9(a))||o&&wn(a))return!0}return!1}var P9="4.4.8";const N9=["top","bottom","left","right","chartArea"];function WE(t,e){return t==="top"||t==="bottom"||N9.indexOf(t)===-1&&e==="x"}function qE(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function KE(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),fn(n&&n.onComplete,[t],e)}function I9(t){const e=t.chart,n=e.options.animation;fn(n&&n.onProgress,[t],e)}function e4(t){return y5()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const J0={},YE=t=>{const e=e4(t);return Object.values(J0).filter(n=>n.canvas===e).pop()};function D9(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function M9(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function o0(t,e,n){return t.options.clip?t[n]:e[n]}function F9(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:o0(n,e,"left"),right:o0(n,e,"right"),top:o0(i,e,"top"),bottom:o0(i,e,"bottom")}:e}var xa;let Ym=(xa=class{static register(...e){Ws.add(...e),XE()}static unregister(...e){Ws.remove(...e),XE()}constructor(e,n){const i=this.config=new k9(n),r=e4(e),s=YE(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Zj(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=D7(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new y9,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Q7(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],J0[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ro.listen(this,"complete",KE),Ro.listen(this,"progress",I9),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return $t(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ws}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gE(this.canvas,this.ctx),this}stop(){return Ro.stop(this),this}resize(e,n){Ro.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,vE(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),fn(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Jt(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=H2(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Jt(s,o=>{const a=o.options,l=a.id,c=H2(l,a),u=kt(a.type,o.dtype);(a.position===void 0||WE(a.position,c)!==WE(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const f=Ws.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),Jt(r,(o,a)=>{o||delete i[a]}),Jt(i,o=>{Zr.configure(this,o,o.options),Zr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(qE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||z2(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Ws.getController(a),{datasetElementType:c,dataElementType:u}=On.datasets[a];Object.assign(l,{dataElementType:Ws.getElement(u),datasetElementType:c&&Ws.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Jt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Jt(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(qE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Jt(this.scales,e=>{Zr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!oE(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;D9(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!oE(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Zr.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Jt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Xa(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ro.has(this)?this.attached&&!Ro.running(this)&&Ro.start(this):(this.draw(),KE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=F9(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Wm(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&qm(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Ho(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=Nj.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=nl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Qf(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ro.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),gE(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete J0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Jt(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Jt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Jt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Vg(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=U7(e),c=M9(e,this._lastEvent,i,l);i&&(this._lastEvent=null,fn(s.onHover,[e,a,this],this),l&&fn(s.onClick,[e,a,this],this));const u=!Vg(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},qe(xa,"defaults",On),qe(xa,"instances",J0),qe(xa,"overrides",Jl),qe(xa,"registry",Ws),qe(xa,"version",P9),qe(xa,"getChart",YE),xa);function XE(){return Jt(Ym.instances,t=>t._plugins.invalidate())}function O9(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+Gn,i-Gn),t.closePath(),t.clip()}function B9(t){return d5(t,["outerStart","outerEnd","innerStart","innerEnd"])}function j9(t,e,n,i){const r=B9(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return Fi(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Fi(r.innerStart,0,o),innerEnd:Fi(r.innerEnd,0,o)}}function Hc(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Xg(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),f=u>0?u+i+n+c:0;let d=0;const p=r-l;if(i){const H=u>0?u-i:0,O=h>0?h-i:0,$=(H+O)/2,z=$!==0?p*$/($+i):p;d=(p-z)/2}const m=Math.max(.001,p*h-n/Sn)/h,v=(p-m)/2,y=l+v+d,x=r-v-d,{outerStart:b,outerEnd:E,innerStart:T,innerEnd:D}=j9(e,f,h,x-y),R=h-b,S=h-E,C=y+b/R,N=x-E/S,k=f+T,P=f+D,j=y+T/k,F=x-D/P;if(t.beginPath(),s){const H=(C+N)/2;if(t.arc(o,a,h,C,H),t.arc(o,a,h,H,N),E>0){const B=Hc(S,N,o,a);t.arc(B.x,B.y,E,N,x+Gn)}const O=Hc(P,x,o,a);if(t.lineTo(O.x,O.y),D>0){const B=Hc(P,F,o,a);t.arc(B.x,B.y,D,x+Gn,F+Math.PI)}const $=(x-D/f+(y+T/f))/2;if(t.arc(o,a,f,x-D/f,$,!0),t.arc(o,a,f,$,y+T/f,!0),T>0){const B=Hc(k,j,o,a);t.arc(B.x,B.y,T,j+Math.PI,y-Gn)}const z=Hc(R,y,o,a);if(t.lineTo(z.x,z.y),b>0){const B=Hc(R,C,o,a);t.arc(B.x,B.y,b,y-Gn,C)}}else{t.moveTo(o,a);const H=Math.cos(C)*h+o,O=Math.sin(C)*h+a;t.lineTo(H,O);const $=Math.cos(N)*h+o,z=Math.sin(N)*h+a;t.lineTo($,z)}t.closePath()}function U9(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Xg(t,e,n,i,l,r);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%vn||vn))}return Xg(t,e,n,i,l,r),t.fill(),l}function $9(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:f}=l,d=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=f,d?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){Xg(t,e,n,i,p,r);for(let m=0;m<s;++m)t.stroke();isNaN(a)||(p=o+(a%vn||vn))}d&&O9(t,e,p),s||(Xg(t,e,n,i,p,r),t.stroke())}class Wh extends Rs{constructor(n){super();qe(this,"circumference");qe(this,"endAngle");qe(this,"fullCircles");qe(this,"innerRadius");qe(this,"outerRadius");qe(this,"pixelMargin");qe(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=AC(s,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),d=(this.options.spacing+this.options.borderWidth)/2,p=kt(f,c-l),m=ed(o,l,c)&&l!==c,v=p>=vn||m,y=zo(a,u+d,h+d);return v&&y}getCenterPoint(n){const{x:i,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(s+o)/2,f=(a+l+u+c)/2;return{x:i+Math.cos(h)*f,y:r+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:r}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>vn?Math.floor(r/vn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Sn,r||0)),u=s*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,U9(n,this,u,o,a),$9(n,this,u,o,a),n.restore()}}qe(Wh,"id","arc"),qe(Wh,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),qe(Wh,"defaultRoutes",{backgroundColor:"backgroundColor"}),qe(Wh,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function t4(t,e,n=e){t.lineCap=kt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(kt(n.borderDash,e.borderDash)),t.lineDashOffset=kt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=kt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=kt(n.borderWidth,e.borderWidth),t.strokeStyle=kt(n.borderColor,e.borderColor)}function z9(t,e,n){t.lineTo(n.x,n.y)}function H9(t){return t.stepped?fB:t.tension||t.cubicInterpolationMode==="monotone"?dB:z9}function n4(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function V9(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=n4(r,n,i),u=H9(s);let{move:h=!0,reverse:f}=i||{},d,p,m;for(d=0;d<=c;++d)p=r[(a+(f?c-d:d))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,m,p,f,s.stepped),m=p);return l&&(p=r[(a+(f?c:0))%o],u(t,m,p,f,s.stepped)),!!l}function G9(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=n4(r,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,f,d,p,m,v,y;const x=E=>(o+(c?a-E:E))%s,b=()=>{m!==v&&(t.lineTo(u,v),t.lineTo(u,m),t.lineTo(u,y))};for(l&&(d=r[x(0)],t.moveTo(d.x,d.y)),f=0;f<=a;++f){if(d=r[x(f)],d.skip)continue;const E=d.x,T=d.y,D=E|0;D===p?(T<m?m=T:T>v&&(v=T),u=(h*u+E)/++h):(b(),t.lineTo(E,T),p=D,h=0,m=v=T),y=T}b()}function V2(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?G9:V9}function W9(t){return t.stepped?WB:t.tension||t.cubicInterpolationMode==="monotone"?qB:Tl}function q9(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),t4(t,e.options),t.stroke(r)}function K9(t,e,n,i){const{segments:r,options:s}=e,o=V2(e);for(const a of r)t4(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const Y9=typeof Path2D=="function";function X9(t,e,n,i){Y9&&!e.options.segment?q9(t,e,n,i):K9(t,e,n,i)}class Na extends Rs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;BB(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ZB(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=zC(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=W9(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:f}=o[c],d=s[h],p=s[f];if(d===p){a.push(d);continue}const m=Math.abs((r-d[n])/(p[n]-d[n])),v=l(d,p,m,i.stepped);v[n]=e[n],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,n,i){return V2(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=V2(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),X9(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}qe(Na,"id","line"),qe(Na,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),qe(Na,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),qe(Na,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function JE(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Q0 extends Rs{constructor(n){super();qe(this,"parsed");qe(this,"skip");qe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return JE(this,n,"x",i)}inYRange(n,i){return JE(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!Ho(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,U2(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}qe(Q0,"id","point"),qe(Q0,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),qe(Q0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function i4(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,a=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function Ia(t,e,n,i){return t?0:Fi(e,n,i)}function J9(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=NC(i);return{t:Ia(r.top,s.top,0,n),r:Ia(r.right,s.right,0,e),b:Ia(r.bottom,s.bottom,0,n),l:Ia(r.left,s.left,0,e)}}function Q9(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=jl(r),o=Math.min(e,n),a=t.borderSkipped,l=i||Dt(r);return{topLeft:Ia(!l||a.top||a.left,s.topLeft,0,o),topRight:Ia(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Ia(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ia(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Z9(t){const e=i4(t),n=e.right-e.left,i=e.bottom-e.top,r=J9(t,n/2,i/2),s=Q9(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function ev(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&i4(t,i);return a&&(r||zo(e,a.left,a.right))&&(s||zo(n,a.top,a.bottom))}function eU(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function tU(t,e){t.rect(e.x,e.y,e.w,e.h)}function tv(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class Z0 extends Rs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=Z9(this),a=eU(o.radius)?td:tU;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,tv(o,n,s)),e.clip(),a(e,tv(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,tv(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return ev(this,e,n,i)}inXRange(e,n){return ev(this,e,null,n)}inYRange(e,n){return ev(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}qe(Z0,"id","bar"),qe(Z0,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),qe(Z0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function nU(t,e,n){const i=t.segments,r=t.points,s=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=b5(l,c,r);const u=G2(n,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}const h=zC(e,u);for(const f of h){const d=G2(n,s[f.start],s[f.end],f.loop),p=$C(a,r,d);for(const m of p)o.push({source:m,target:f,start:{[n]:QE(u,d,"start",Math.max)},end:{[n]:QE(u,d,"end",Math.min)}})}}return o}function G2(t,e,n,i){if(i)return;let r=e[t],s=n[t];return t==="angle"&&(r=Lr(r),s=Lr(s)),{property:t,start:r,end:s}}function iU(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=b5(o,a,r);const l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function b5(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function QE(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function r4(t,e){let n=[],i=!1;return wn(t)?(i=!0,n=t):n=iU(t,e),n.length?new Na({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function ZE(t){return t&&t.fill!==!1}function rU(t,e,n){let r=t[e].fill;const s=[e];let o;if(!n)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!di(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function sU(t,e,n){const i=cU(t);if(Dt(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return di(r)&&Math.floor(r)===r?oU(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function oU(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function aU(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Dt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function lU(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:Dt(t)?i=t.value:i=e.getBaseValue(),i}function cU(t){const e=t.options,n=e.fill;let i=kt(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function uU(t){const{scale:e,index:n,line:i}=t,r=[],s=i.segments,o=i.points,a=hU(e,n);a.push(r4({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)fU(r,o[u],a)}return new Na({points:r,options:{}})}function hU(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function fU(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=dU(s,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function dU(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=o[u.start][n],f=o[u.end][n];if(zo(r,h,f)){a=r===h,l=r===f;break}}return{first:a,last:l,point:i}}class s4{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:r,y:s,radius:o}=this;return n=n||{start:0,end:vn},e.arc(r,s,o,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:r}=this,s=e.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function pU(t){const{chart:e,fill:n,line:i}=t;if(di(n))return gU(e,n);if(n==="stack")return uU(t);if(n==="shape")return!0;const r=mU(t);return r instanceof s4?r:r4(r,i)}function gU(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function mU(t){return(t.scale||{}).getPointPositionForValue?vU(t):yU(t)}function yU(t){const{scale:e={},fill:n}=t,i=aU(n,e);if(di(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function vU(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=lU(n,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new s4({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function nv(t,e,n){const i=pU(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&r.points.length&&(Wm(t,n),xU(t,{line:r,target:i,above:u,below:h,area:n,scale:s,axis:o}),qm(t))}function xU(t,e){const{line:n,target:i,above:r,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==r&&(eA(t,i,o.top),tA(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore(),t.save(),eA(t,i,o.bottom)),tA(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore()}function eA(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,u=r[l],h=r[b5(l,c,r)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function tA(t,e){const{line:n,target:i,property:r,color:s,scale:o}=e,a=nU(n,i,r);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:f=s}={}}=l,d=i!==!0;t.save(),t.fillStyle=f,bU(t,o,d&&G2(r,u,h)),t.beginPath();const p=!!n.pathSegment(t,l);let m;if(d){p?t.closePath():nA(t,i,h,r);const v=!!i.pathSegment(t,c,{move:p,reverse:!0});m=p&&v,m||nA(t,i,u,r)}t.closePath(),t.fill(m?"evenodd":"nonzero"),t.restore()}}function bU(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,i,a-o,r-i),t.clip())}function nA(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var wU={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Na&&(l={visible:t.isDatasetVisible(o),index:o,fill:sU(a,o,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=rU(r,o,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&nv(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;ZE(s)&&nv(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!ZE(i)||n.drawTime!=="beforeDatasetDraw"||nv(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const iA=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},SU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class rA extends Rs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=fn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=ri(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=iA(i,s);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;s.textAlign="left",s.textBaseline="middle";let f=-1,d=-u;return this.legendItems.forEach((p,m)=>{const v=i+n/2+s.measureText(p.text).width;(m===0||c[c.length-1]+v+2*a>o)&&(h+=u,c[c.length-(m>0?0:1)]=0,d+=u,f++),l[m]={left:0,top:d,row:f,width:v,height:r},c[c.length-1]+=v+a}),h}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,f=0,d=0,p=0,m=0;return this.legendItems.forEach((v,y)=>{const{itemWidth:x,itemHeight:b}=_U(i,n,s,v,r);y>0&&d+b+2*a>u&&(h+=f+a,c.push({width:f,height:d}),p+=f+a,m++,f=d=0),l[y]={left:p,top:d,col:m,width:x,height:b},f=Math.max(f,x),d+=b+a}),h+=f,c.push({width:f,height:d}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=vu(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ii(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ii(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Ii(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ii(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Wm(e,this),this._draw(),qm(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=On.color,l=vu(e.rtl,this.left,this.width),c=ri(o.font),{padding:u}=o,h=c.size,f=h/2;let d;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:p,boxHeight:m,itemHeight:v}=iA(o,h),y=function(D,R,S){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;r.save();const C=kt(S.lineWidth,1);if(r.fillStyle=kt(S.fillStyle,a),r.lineCap=kt(S.lineCap,"butt"),r.lineDashOffset=kt(S.lineDashOffset,0),r.lineJoin=kt(S.lineJoin,"miter"),r.lineWidth=C,r.strokeStyle=kt(S.strokeStyle,a),r.setLineDash(kt(S.lineDash,[])),o.usePointStyle){const N={radius:m*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:C},k=l.xPlus(D,p/2),P=R+f;PC(r,N,k,P,o.pointStyleWidth&&p)}else{const N=R+Math.max((h-m)/2,0),k=l.leftForLtr(D,p),P=jl(S.borderRadius);r.beginPath(),Object.values(P).some(j=>j!==0)?td(r,{x:k,y:N,w:p,h:m,radius:P}):r.rect(k,N,p,m),r.fill(),C!==0&&r.stroke()}r.restore()},x=function(D,R,S){Ql(r,S.text,D,R+v/2,c,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},b=this.isHorizontal(),E=this._computeTitleHeight();b?d={x:Ii(s,this.left+u,this.right-i[0]),y:this.top+u+E,line:0}:d={x:this.left+u,y:Ii(s,this.top+E+u,this.bottom-n[0].height),line:0},BC(this.ctx,e.textDirection);const T=v+u;this.legendItems.forEach((D,R)=>{r.strokeStyle=D.fontColor,r.fillStyle=D.fontColor;const S=r.measureText(D.text).width,C=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),N=p+f+S;let k=d.x,P=d.y;l.setWidth(this.width),b?R>0&&k+N+u>this.right&&(P=d.y+=T,d.line++,k=d.x=Ii(s,this.left+u,this.right-i[d.line])):R>0&&P+T>this.bottom&&(k=d.x=k+n[d.line].width+u,d.line++,P=d.y=Ii(s,this.top+E+u,this.bottom-n[d.line].height));const j=l.x(k);if(y(j,P,D),k=Z7(C,k+p+f,b?k+N:this.right,e.rtl),x(l.x(k),P,D),b)d.x+=N+u;else if(typeof D.text!="string"){const F=c.lineHeight;d.y+=o4(D,F)+u}else d.y+=T}),jC(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=ri(n.font),r=ji(n.padding);if(!n.display)return;const s=vu(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=Ii(e.align,h,this.right-f);else{const p=this.columnSizes.reduce((m,v)=>Math.max(m,v.height),0);u=c+Ii(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const d=Ii(a,h,h+f);o.textAlign=s.textAlign(c5(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Ql(o,n.text,d,u,i)}_computeTitleHeight(){const e=this.options.title,n=ri(e.font),i=ji(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(zo(e,this.left,this.right)&&zo(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],zo(e,r.left,r.left+r.width)&&zo(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!TU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=SU(r,i);r&&!s&&fn(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&fn(n.onHover,[e,i,this],this)}else i&&fn(n.onClick,[e,i,this],this)}}function _U(t,e,n,i,r){const s=EU(i,t,e,n),o=AU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function EU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function AU(t,e,n){let i=t;return typeof e.text!="string"&&(i=o4(e,n)),i}function o4(t,e){const n=t.text?t.text.length:0;return e*n}function TU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var LU={id:"legend",_element:rA,start(t,e,n){const i=t.legend=new rA({ctx:t.ctx,options:n,chart:t});Zr.configure(t,i,n),Zr.addBox(t,i)},stop(t){Zr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Zr.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=ji(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class a4 extends Rs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=wn(i.text)?i.text.length:1;this._padding=ji(i.padding);const s=r*ri(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Ii(a,i,s),h=n+e,c=s-i):(o.position==="left"?(u=i+e,h=Ii(a,r,n),l=Sn*-.5):(u=s-e,h=Ii(a,n,r),l=Sn*.5),c=r-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=ri(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Ql(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:c5(n.align),textBaseline:"middle",translation:[o,a]})}}function kU(t,e){const n=new a4({ctx:t.ctx,options:e,chart:t});Zr.configure(t,n,e),Zr.addBox(t,n),t.titleBlock=n}var CU={id:"title",_element:a4,start(t,e,n){kU(t,n)},stop(t){const e=t.titleBlock;Zr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Zr.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qh={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=B2(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Hs(t,e){return e&&(wn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Po(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function RU(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function sA(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=ri(e.bodyFont),c=ri(e.titleFont),u=ri(e.footerFont),h=s.length,f=r.length,d=i.length,p=ji(e.padding);let m=p.height,v=0,y=i.reduce((E,T)=>E+T.before.length+T.lines.length+T.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const E=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=d*E+(y-d)*l.lineHeight+(y-1)*e.bodySpacing}f&&(m+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let x=0;const b=function(E){v=Math.max(v,n.measureText(E).width+x)};return n.save(),n.font=c.string,Jt(t.title,b),n.font=l.string,Jt(t.beforeBody.concat(t.afterBody),b),x=e.displayColors?o+2+e.boxPadding:0,Jt(i,E=>{Jt(E.before,b),Jt(E.lines,b),Jt(E.after,b)}),x=0,n.font=u.string,Jt(t.footer,b),n.restore(),v+=p.width,{width:v,height:m}}function PU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function NU(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function IU(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),NU(c,t,e,n)&&(c="center"),c}function oA(t,e,n){const i=n.yAlign||e.yAlign||PU(t,n);return{xAlign:n.xAlign||e.xAlign||IU(t,e,n,i),yAlign:i}}function DU(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function MU(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function aA(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:d}=jl(o);let p=DU(e,a);const m=MU(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,f)+r:a==="right"&&(p+=Math.max(h,d)+r),{x:Fi(p,0,i.width-e.width),y:Fi(m,0,i.height-e.height)}}function a0(t,e,n){const i=ji(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function lA(t){return Hs([],Po(t))}function FU(t,e,n){return nl(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function cA(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const l4={beforeTitle:ko,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:ko,beforeBody:ko,beforeLabel:ko,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return $t(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ko,afterBody:ko,beforeFooter:ko,footer:ko,afterFooter:ko};function or(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?l4[e].call(n,i):r}class W2 extends Rs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new HC(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=FU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=or(i,"beforeTitle",this,e),s=or(i,"title",this,e),o=or(i,"afterTitle",this,e);let a=[];return a=Hs(a,Po(r)),a=Hs(a,Po(s)),a=Hs(a,Po(o)),a}getBeforeBody(e,n){return lA(or(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Jt(e,s=>{const o={before:[],lines:[],after:[]},a=cA(i,s);Hs(o.before,Po(or(a,"beforeLabel",this,s))),Hs(o.lines,or(a,"label",this,s)),Hs(o.after,Po(or(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return lA(or(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=or(i,"beforeFooter",this,e),s=or(i,"footer",this,e),o=or(i,"afterFooter",this,e);let a=[];return a=Hs(a,Po(r)),a=Hs(a,Po(s)),a=Hs(a,Po(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(RU(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),Jt(a,u=>{const h=cA(e.callbacks,u);r.push(or(h,"labelColor",this,u)),s.push(or(h,"labelPointStyle",this,u)),o.push(or(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=qh[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=sA(this,i),c=Object.assign({},a,l),u=oA(this.chart,i,c),h=aA(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=jl(a),{x:f,y:d}=e,{width:p,height:m}=n;let v,y,x,b,E,T;return s==="center"?(E=d+m/2,r==="left"?(v=f,y=v-o,b=E+o,T=E-o):(v=f+p,y=v+o,b=E-o,T=E+o),x=v):(r==="left"?y=f+Math.max(l,u)+o:r==="right"?y=f+p-Math.max(c,h)-o:y=this.caretX,s==="top"?(b=d,E=b-o,v=y-o,x=y+o):(b=d+m,E=b+o,v=y+o,x=y-o),T=b),{x1:v,x2:y,x3:x,y1:b,y2:E,y3:T}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=vu(i.rtl,this.x,this.width);for(e.x=a0(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=ri(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=ri(s.bodyFont),h=a0(this,"left",s),f=r.x(h),d=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+d;if(s.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=r.leftForLtr(f,c)+c/2,y=p+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,U2(e,m,v,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,U2(e,m,v,y)}else{e.lineWidth=Dt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=r.leftForLtr(f,c),v=r.leftForLtr(r.xPlus(f,1),c-2),y=jl(o.borderRadius);Object.values(y).some(x=>x!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,td(e,{x:m,y:p,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),td(e,{x:v,y:p+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(m,p,c,l),e.strokeRect(m,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(v,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=ri(i.bodyFont);let f=h.lineHeight,d=0;const p=vu(i.rtl,this.x,this.width),m=function(S){n.fillText(S,p.x(e.x+d),e.y+f/2),e.y+=f+s},v=p.textAlign(o);let y,x,b,E,T,D,R;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=a0(this,v,i),n.fillStyle=i.bodyColor,Jt(this.beforeBody,m),d=a&&v!=="right"?o==="center"?c/2+u:c+2+u:0,E=0,D=r.length;E<D;++E){for(y=r[E],x=this.labelTextColors[E],n.fillStyle=x,Jt(y.before,m),b=y.lines,a&&b.length&&(this._drawColorBox(n,e,E,p,i),f=Math.max(h.lineHeight,l)),T=0,R=b.length;T<R;++T)m(b[T]),f=h.lineHeight;Jt(y.after,m)}d=0,f=h.lineHeight,Jt(this.afterBody,m),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=vu(i.rtl,this.x,this.width);for(e.x=a0(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=ri(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:f,bottomLeft:d,bottomRight:p}=jl(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+d,l+u),n.quadraticCurveTo(a,l+u,a,l+u-d),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=qh[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=sA(this,e),l=Object.assign({},o,this._size),c=oA(n,e,l),u=aA(e,l,c,n);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=ji(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),BC(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),jC(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Vg(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Vg(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=qh[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}qe(W2,"positioners",qh);var OU={id:"tooltip",_element:W2,positioners:qh,afterInit(t,e,n){n&&(t.tooltip=new W2({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:l4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const BU=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function jU(t,e,n,i){const r=t.indexOf(e);if(r===-1)return BU(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const UU=(t,e)=>t===null?null:Fi(Math.round(t),0,e);function uA(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class q2 extends zu{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if($t(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:jU(i,e,kt(n,e),this._addedLabels),UU(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return uA.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}qe(q2,"id","category"),qe(q2,"defaults",{ticks:{callback:uA}});function $U(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=t,d=s||1,p=u-1,{min:m,max:v}=e,y=!$t(o),x=!$t(a),b=!$t(c),E=(v-m)/(h+1);let T=lE((v-m)/p/d)*d,D,R,S,C;if(T<1e-14&&!y&&!x)return[{value:m},{value:v}];C=Math.ceil(v/T)-Math.floor(m/T),C>p&&(T=lE(C*T/p/d)*d),$t(l)||(D=Math.pow(10,l),T=Math.ceil(T*D)/D),r==="ticks"?(R=Math.floor(m/T)*T,S=Math.ceil(v/T)*T):(R=m,S=v),y&&x&&s&&G7((a-o)/s,T/1e3)?(C=Math.round(Math.min((a-o)/T,u)),T=(a-o)/C,R=o,S=a):b?(R=y?o:R,S=x?a:S,C=c-1,T=(S-R)/C):(C=(S-R)/T,gf(C,Math.round(C),T/1e3)?C=Math.round(C):C=Math.ceil(C));const N=Math.max(cE(T),cE(R));D=Math.pow(10,$t(l)?N:l),R=Math.round(R*D)/D,S=Math.round(S*D)/D;let k=0;for(y&&(f&&R!==o?(n.push({value:o}),R<o&&k++,gf(Math.round((R+k*T)*D)/D,o,hA(o,E,t))&&k++):R<o&&k++);k<C;++k){const P=Math.round((R+k*T)*D)/D;if(x&&P>a)break;n.push({value:P})}return x&&f&&S!==a?n.length&&gf(n[n.length-1].value,a,hA(a,E,t))?n[n.length-1].value=a:n.push({value:a}):(!x||S===a)&&n.push({value:S}),n}function hA(t,e,{horizontal:n,minRotation:i}){const r=to(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class K2 extends zu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return $t(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=oo(r),c=oo(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=$U(r,s);return e.bounds==="ticks"&&W7(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return h5(e,this.chart.options.locale,this.options.ticks.format)}}class Y2 extends K2{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=di(e)?e:0,this.max=di(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=to(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}qe(Y2,"id","linear"),qe(Y2,"defaults",{ticks:{callback:f5.formatters.numeric}});function X2(t){const e=t.ticks;if(e.display&&t.display){const n=ji(e.backdropPadding);return kt(e.font&&e.font.size,On.font.size)+n.height}return 0}function zU(t,e,n){return n=wn(n)?n:[n],{w:hB(t,e.string,n),h:n.length*e.lineHeight}}function fA(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function HU(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Sn/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+r[l],a),h=ri(c.font),f=zU(t.ctx,h,t._pointLabels[l]);i[l]=f;const d=Lr(t.getIndexAngle(l)+a),p=Math.round(a5(d)),m=fA(p,u.x,f.w,0,180),v=fA(p,u.y,f.h,90,270);VU(n,e,d,m,v)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=qU(t,i,r)}function VU(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function GU(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(a5(Lr(l.angle+Gn))),u=XU(l.y,a.h,c),h=KU(c),f=YU(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function WU(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(Ho({x:n,y:i},e)||Ho({x:n,y:s},e)||Ho({x:r,y:i},e)||Ho({x:r,y:s},e))}function qU(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:X2(s)/2,additionalAngle:o?Sn/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const h=GU(t,u,l);i.push(h),a==="auto"&&(h.visible=WU(h,c),h.visible&&(c=h))}return i}function KU(t){return t===0||t===180?"center":t<180?"left":"right"}function YU(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function XU(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function JU(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!$t(a)){const l=jl(e.borderRadius),c=ji(e.backdropPadding);t.fillStyle=a;const u=i-c.left,h=r-c.top,f=s-i+c.width,d=o-r+c.height;Object.values(l).some(p=>p!==0)?(t.beginPath(),td(t,{x:u,y:h,w:f,h:d,radius:l}),t.fill()):t.fillRect(u,h,f,d)}}function QU(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=t._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(t.getPointLabelContext(r));JU(n,o,s);const a=ri(o.font),{x:l,y:c,textAlign:u}=s;Ql(n,t._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function c4(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,vn);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function ZU(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),c4(t,n,o,i),s.closePath(),s.stroke(),s.restore())}function e$(t,e,n){return nl(t,{label:n,index:e,type:"pointLabel"})}class Kh extends K2{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ji(X2(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=di(e)&&!isNaN(e)?e:0,this.max=di(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/X2(this.options))}generateTickLabels(e){K2.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=fn(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?HU(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=vn/(this._pointLabels.length||1),i=this.options.startAngle||0;return Lr(e*n+to(i))}getDistanceFromCenterForValue(e){if($t(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if($t(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return e$(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-Gn+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),c4(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&QU(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),d=r.setContext(f),p=s.setContext(f);ZU(this,d,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=ri(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=ji(c.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}Ql(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}qe(Kh,"id","radialLinear"),qe(Kh,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:f5.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),qe(Kh,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),qe(Kh,"descriptors",{angleLines:{_fallback:"grid"}});const Xm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hr=Object.keys(Xm);function dA(t,e){return t-e}function pA(t,e){if($t(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),di(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Zf(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function gA(t,e,n,i){const r=hr.length;for(let s=hr.indexOf(t);s<r-1;++s){const o=Xm[hr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return hr[s]}return hr[r-1]}function t$(t,e,n,i,r){for(let s=hr.length-1;s>=hr.indexOf(n);s--){const o=hr[s];if(Xm[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return hr[n?hr.indexOf(n):0]}function n$(t){for(let e=hr.indexOf(t)+1,n=hr.length;e<n;++e)if(Xm[hr[e]].common)return hr[e]}function mA(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=l5(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function i$(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function yA(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:i$(t,i,r,n)}class Jg extends zu{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new Lj._date(e.adapters.date);r.init(n),pf(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:pA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=di(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=di(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=X7(r,s,o);return this._unit=n.unit||(i.autoSkip?gA(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):t$(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:n$(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),yA(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Fi(n,0,o),i=Fi(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||gA(s.minUnit,n,i,this._getLabelCapacity(n)),a=kt(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Zf(l)||l===!0,u={};let h=n,f,d;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,d=0;f<i;f=+e.add(f,a,o),d++)mA(u,f,p);return(f===i||r.bounds==="ticks"||d===1)&&mA(u,f,p),Object.keys(u).sort(dA).map(m=>+m)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return fn(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=i[n],d=c&&h&&f&&f.major;return this._adapter.format(e,r||(d?h:u))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=to(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,yA(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(pA(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return LC(e.sort(dA))}}qe(Jg,"id","time"),qe(Jg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function l0(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Il(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Il(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class vA extends Jg{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=l0(n,this.min),this._tableRange=l0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(l0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return l0(this._table,i*this._tableRange+this._minPos,!0)}}qe(vA,"id","timeseries"),qe(vA,"defaults",Jg.defaults);const u4="label";function xA(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function r$(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function h4(t,e){t.labels=e}function f4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u4;const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function s$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u4;const n={labels:[],datasets:[]};return h4(n,t.labels),f4(n,t.datasets,e),n}function o$(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...f}=t,d=fe.useRef(null),p=fe.useRef(null),m=()=>{d.current&&(p.current=new Ym(d.current,{type:o,data:s$(a,s),options:l&&{...l},plugins:c}),xA(e,p.current))},v=()=>{xA(e,null),p.current&&(p.current.destroy(),p.current=null)};return fe.useEffect(()=>{!r&&p.current&&l&&r$(p.current,l)},[r,l]),fe.useEffect(()=>{!r&&p.current&&h4(p.current.config.data,a.labels)},[r,a.labels]),fe.useEffect(()=>{!r&&p.current&&a.datasets&&f4(p.current.config.data,a.datasets,s)},[r,a.datasets]),fe.useEffect(()=>{p.current&&(r?(v(),setTimeout(m)):p.current.update(h))},[r,l,a.labels,a.datasets,h]),fe.useEffect(()=>{p.current&&(v(),setTimeout(m))},[o]),fe.useEffect(()=>(m(),()=>v()),[]),Ln.createElement("canvas",{ref:d,role:"img",height:n,width:i,...f},u)}const a$=fe.forwardRef(o$);function Jm(t,e){return Ym.register(e),fe.forwardRef((n,i)=>Ln.createElement(a$,{...n,ref:i,type:t}))}const iv=Jm("line",K0),c0=Jm("bar",q0),l$=Jm("radar",Y0),rv=Jm("pie",$2);var d4={exports:{}},c$="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",u$=c$,h$=u$;function p4(){}function g4(){}g4.resetWarningCache=p4;var f$=function(){function t(i,r,s,o,a,l){if(l!==h$){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:g4,resetWarningCache:p4};return n.PropTypes=n,n};d4.exports=f$();var d$=d4.exports;const je=zx(d$);class Oi{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(n[i++]=a),e=o}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=e[--n];n>0&&(i=o,r=e[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}function*p$(t){for(const e of t)yield*e}function m4(t){return Array.from(p$(t))}function lu(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}var ot=1e-6,id=1e-12,Lt=Math.PI,Fn=Lt/2,Qg=Lt/4,Ki=Lt*2,on=180/Lt,lt=Lt/180,Ft=Math.abs,Hu=Math.atan,Yi=Math.atan2,tt=Math.cos,u0=Math.ceil,y4=Math.exp,J2=Math.hypot,Zg=Math.log,sv=Math.pow,Ke=Math.sin,es=Math.sign||function(t){return t>0?1:t<0?-1:0},pi=Math.sqrt,w5=Math.tan;function v4(t){return t>1?0:t<-1?Lt:Math.acos(t)}function Xi(t){return t>1?Fn:t<-1?-Fn:Math.asin(t)}function bA(t){return(t=Ke(t/2))*t}function kn(){}function em(t,e){t&&SA.hasOwnProperty(t.type)&&SA[t.type](t,e)}var wA={Feature:function(t,e){em(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)em(n[i].geometry,e)}},SA={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Q2(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Q2(n[i],e,0)},Polygon:function(t,e){_A(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)_A(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)em(n[i],e)}};function Q2(t,e,n){var i=-1,r=t.length-n,s;for(e.lineStart();++i<r;)s=t[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function _A(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Q2(t[n],e,1);e.polygonEnd()}function As(t,e){t&&wA.hasOwnProperty(t.type)?wA[t.type](t,e):em(t,e)}var tm=new Oi,nm=new Oi,x4,b4,Z2,ex,tx,uo={point:kn,lineStart:kn,lineEnd:kn,polygonStart:function(){tm=new Oi,uo.lineStart=g$,uo.lineEnd=m$},polygonEnd:function(){var t=+tm;nm.add(t<0?Ki+t:t),this.lineStart=this.lineEnd=this.point=kn},sphere:function(){nm.add(Ki)}};function g$(){uo.point=y$}function m$(){w4(x4,b4)}function y$(t,e){uo.point=w4,x4=t,b4=e,t*=lt,e*=lt,Z2=t,ex=tt(e=e/2+Qg),tx=Ke(e)}function w4(t,e){t*=lt,e*=lt,e=e/2+Qg;var n=t-Z2,i=n>=0?1:-1,r=i*n,s=tt(e),o=Ke(e),a=tx*o,l=ex*s+a*tt(r),c=a*i*Ke(r);tm.add(Yi(c,l)),Z2=t,ex=s,tx=o}function v$(t){return nm=new Oi,As(t,uo),nm*2}function im(t){return[Yi(t[1],t[0]),Xi(t[2])]}function Zl(t){var e=t[0],n=t[1],i=tt(n);return[i*tt(e),i*Ke(e),Ke(n)]}function h0(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Iu(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ov(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function f0(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function rm(t){var e=pi(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var An,ur,In,kr,Ll,S4,_4,xu,vf,_a,Xo,Oo={point:nx,lineStart:EA,lineEnd:AA,polygonStart:function(){Oo.point=A4,Oo.lineStart=x$,Oo.lineEnd=b$,vf=new Oi,uo.polygonStart()},polygonEnd:function(){uo.polygonEnd(),Oo.point=nx,Oo.lineStart=EA,Oo.lineEnd=AA,tm<0?(An=-(In=180),ur=-(kr=90)):vf>ot?kr=90:vf<-ot&&(ur=-90),Xo[0]=An,Xo[1]=In},sphere:function(){An=-(In=180),ur=-(kr=90)}};function nx(t,e){_a.push(Xo=[An=t,In=t]),e<ur&&(ur=e),e>kr&&(kr=e)}function E4(t,e){var n=Zl([t*lt,e*lt]);if(xu){var i=Iu(xu,n),r=[i[1],-i[0],0],s=Iu(r,i);rm(s),s=im(s);var o=t-Ll,a=o>0?1:-1,l=s[0]*on*a,c,u=Ft(o)>180;u^(a*Ll<l&&l<a*t)?(c=s[1]*on,c>kr&&(kr=c)):(l=(l+360)%360-180,u^(a*Ll<l&&l<a*t)?(c=-s[1]*on,c<ur&&(ur=c)):(e<ur&&(ur=e),e>kr&&(kr=e))),u?t<Ll?Tr(An,t)>Tr(An,In)&&(In=t):Tr(t,In)>Tr(An,In)&&(An=t):In>=An?(t<An&&(An=t),t>In&&(In=t)):t>Ll?Tr(An,t)>Tr(An,In)&&(In=t):Tr(t,In)>Tr(An,In)&&(An=t)}else _a.push(Xo=[An=t,In=t]);e<ur&&(ur=e),e>kr&&(kr=e),xu=n,Ll=t}function EA(){Oo.point=E4}function AA(){Xo[0]=An,Xo[1]=In,Oo.point=nx,xu=null}function A4(t,e){if(xu){var n=t-Ll;vf.add(Ft(n)>180?n+(n>0?360:-360):n)}else S4=t,_4=e;uo.point(t,e),E4(t,e)}function x$(){uo.lineStart()}function b$(){A4(S4,_4),uo.lineEnd(),Ft(vf)>ot&&(An=-(In=180)),Xo[0]=An,Xo[1]=In,xu=null}function Tr(t,e){return(e-=t)<0?e+360:e}function w$(t,e){return t[0]-e[0]}function TA(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function S$(t){var e,n,i,r,s,o,a;if(kr=In=-(An=ur=1/0),_a=[],As(t,Oo),n=_a.length){for(_a.sort(w$),e=1,i=_a[0],s=[i];e<n;++e)r=_a[e],TA(i,r[0])||TA(i,r[1])?(Tr(i[0],r[1])>Tr(i[0],i[1])&&(i[1]=r[1]),Tr(r[0],i[1])>Tr(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(o=-1/0,n=s.length-1,e=0,i=s[n];e<=n;i=r,++e)r=s[e],(a=Tr(i[1],r[0]))>o&&(o=a,An=r[0],In=i[1])}return _a=Xo=null,An===1/0||ur===1/0?[[NaN,NaN],[NaN,NaN]]:[[An,ur],[In,kr]]}var Yh,sm,om,am,lm,cm,um,hm,ix,rx,sx,T4,L4,Vi,Gi,Wi,Ts={sphere:kn,point:S5,lineStart:LA,lineEnd:kA,polygonStart:function(){Ts.lineStart=A$,Ts.lineEnd=T$},polygonEnd:function(){Ts.lineStart=LA,Ts.lineEnd=kA}};function S5(t,e){t*=lt,e*=lt;var n=tt(e);_d(n*tt(t),n*Ke(t),Ke(e))}function _d(t,e,n){++Yh,om+=(t-om)/Yh,am+=(e-am)/Yh,lm+=(n-lm)/Yh}function LA(){Ts.point=_$}function _$(t,e){t*=lt,e*=lt;var n=tt(e);Vi=n*tt(t),Gi=n*Ke(t),Wi=Ke(e),Ts.point=E$,_d(Vi,Gi,Wi)}function E$(t,e){t*=lt,e*=lt;var n=tt(e),i=n*tt(t),r=n*Ke(t),s=Ke(e),o=Yi(pi((o=Gi*s-Wi*r)*o+(o=Wi*i-Vi*s)*o+(o=Vi*r-Gi*i)*o),Vi*i+Gi*r+Wi*s);sm+=o,cm+=o*(Vi+(Vi=i)),um+=o*(Gi+(Gi=r)),hm+=o*(Wi+(Wi=s)),_d(Vi,Gi,Wi)}function kA(){Ts.point=S5}function A$(){Ts.point=L$}function T$(){k4(T4,L4),Ts.point=S5}function L$(t,e){T4=t,L4=e,t*=lt,e*=lt,Ts.point=k4;var n=tt(e);Vi=n*tt(t),Gi=n*Ke(t),Wi=Ke(e),_d(Vi,Gi,Wi)}function k4(t,e){t*=lt,e*=lt;var n=tt(e),i=n*tt(t),r=n*Ke(t),s=Ke(e),o=Gi*s-Wi*r,a=Wi*i-Vi*s,l=Vi*r-Gi*i,c=J2(o,a,l),u=Xi(c),h=c&&-u/c;ix.add(h*o),rx.add(h*a),sx.add(h*l),sm+=u,cm+=u*(Vi+(Vi=i)),um+=u*(Gi+(Gi=r)),hm+=u*(Wi+(Wi=s)),_d(Vi,Gi,Wi)}function k$(t){Yh=sm=om=am=lm=cm=um=hm=0,ix=new Oi,rx=new Oi,sx=new Oi,As(t,Ts);var e=+ix,n=+rx,i=+sx,r=J2(e,n,i);return r<id&&(e=cm,n=um,i=hm,sm<ot&&(e=om,n=am,i=lm),r=J2(e,n,i),r<id)?[NaN,NaN]:[Yi(n,e)*on,Xi(i/r)*on]}function Vc(t){return function(){return t}}function ox(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function ax(t,e){return[Ft(t)>Lt?t+Math.round(-t/Ki)*Ki:t,e]}ax.invert=ax;function _5(t,e,n){return(t%=Ki)?e||n?ox(RA(t),PA(e,n)):RA(t):e||n?PA(e,n):ax}function CA(t){return function(e,n){return e+=t,[e>Lt?e-Ki:e<-Lt?e+Ki:e,n]}}function RA(t){var e=CA(t);return e.invert=CA(-t),e}function PA(t,e){var n=tt(t),i=Ke(t),r=tt(e),s=Ke(e);function o(a,l){var c=tt(l),u=tt(a)*c,h=Ke(a)*c,f=Ke(l),d=f*n+u*i;return[Yi(h*r-d*s,u*n-f*i),Xi(d*r+h*s)]}return o.invert=function(a,l){var c=tt(l),u=tt(a)*c,h=Ke(a)*c,f=Ke(l),d=f*r-h*s;return[Yi(h*r+f*s,u*n+d*i),Xi(d*n-u*i)]},o}function C4(t){t=_5(t[0]*lt,t[1]*lt,t.length>2?t[2]*lt:0);function e(n){return n=t(n[0]*lt,n[1]*lt),n[0]*=on,n[1]*=on,n}return e.invert=function(n){return n=t.invert(n[0]*lt,n[1]*lt),n[0]*=on,n[1]*=on,n},e}function R4(t,e,n,i,r,s){if(n){var o=tt(e),a=Ke(e),l=i*n;r==null?(r=e+i*Ki,s=e-l/2):(r=NA(o,r),s=NA(o,s),(i>0?r<s:r>s)&&(r+=i*Ki));for(var c,u=r;i>0?u>s:u<s;u-=l)c=im([o,-a*tt(u),-a*Ke(u)]),t.point(c[0],c[1])}}function NA(t,e){e=Zl(e),e[0]-=t,rm(e);var n=v4(-e[1]);return((-e[2]<0?-n:n)+Ki-ot)%Ki}function C$(){var t=Vc([0,0]),e=Vc(90),n=Vc(6),i,r,s={point:o};function o(l,c){i.push(l=r(l,c)),l[0]*=on,l[1]*=on}function a(){var l=t.apply(this,arguments),c=e.apply(this,arguments)*lt,u=n.apply(this,arguments)*lt;return i=[],r=_5(-l[0]*lt,-l[1]*lt,0).invert,R4(s,c,u,1),l={type:"Polygon",coordinates:[i]},i=r=null,l}return a.center=function(l){return arguments.length?(t=typeof l=="function"?l:Vc([+l[0],+l[1]]),a):t},a.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Vc(+l),a):e},a.precision=function(l){return arguments.length?(n=typeof l=="function"?l:Vc(+l),a):n},a}function P4(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:kn,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function eg(t,e){return Ft(t[0]-e[0])<ot&&Ft(t[1]-e[1])<ot}function d0(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function N4(t,e,n,i,r){var s=[],o=[],a,l;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,v=p[0],y=p[m],x;if(eg(v,y)){if(!v[2]&&!y[2]){for(r.lineStart(),a=0;a<m;++a)r.point((v=p[a])[0],v[1]);r.lineEnd();return}y[0]+=2*ot}s.push(x=new d0(v,p,null,!0)),o.push(x.o=new d0(v,null,x,!1)),s.push(x=new d0(y,p,null,!1)),o.push(x.o=new d0(y,null,x,!0))}}),!!s.length){for(o.sort(e),IA(s),IA(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var c=s[0],u,h;;){for(var f=c,d=!0;f.v;)if((f=f.n)===c)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,l=u.length;a<l;++a)r.point((h=u[a])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(u=f.p.z,a=u.length-1;a>=0;--a)r.point((h=u[a])[0],h[1]);else i(f.x,f.p.x,-1,r);f=f.p}f=f.o,u=f.z,d=!d}while(!f.v);r.lineEnd()}}}function IA(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function av(t){return Ft(t[0])<=Lt?t[0]:es(t[0])*((Ft(t[0])+Lt)%Ki-Lt)}function I4(t,e){var n=av(e),i=e[1],r=Ke(i),s=[Ke(n),-tt(n),0],o=0,a=0,l=new Oi;r===1?i=Fn+ot:r===-1&&(i=-Fn-ot);for(var c=0,u=t.length;c<u;++c)if(f=(h=t[c]).length)for(var h,f,d=h[f-1],p=av(d),m=d[1]/2+Qg,v=Ke(m),y=tt(m),x=0;x<f;++x,p=E,v=D,y=R,d=b){var b=h[x],E=av(b),T=b[1]/2+Qg,D=Ke(T),R=tt(T),S=E-p,C=S>=0?1:-1,N=C*S,k=N>Lt,P=v*D;if(l.add(Yi(P*C*Ke(N),y*R+P*tt(N))),o+=k?S+C*Ki:S,k^p>=n^E>=n){var j=Iu(Zl(d),Zl(b));rm(j);var F=Iu(s,j);rm(F);var H=(k^S>=0?-1:1)*Xi(F[2]);(i>H||i===H&&(j[0]||j[1]))&&(a+=k^S>=0?1:-1)}}return(o<-ot||o<ot&&l<-id)^a&1}function D4(t,e,n,i){return function(r){var s=e(r),o=P4(),a=e(o),l=!1,c,u,h,f={point:d,lineStart:m,lineEnd:v,polygonStart:function(){f.point=y,f.lineStart=x,f.lineEnd=b,u=[],c=[]},polygonEnd:function(){f.point=d,f.lineStart=m,f.lineEnd=v,u=m4(u);var E=I4(c,i);u.length?(l||(r.polygonStart(),l=!0),N4(u,P$,E,n,r)):E&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(E,T){t(E,T)&&r.point(E,T)}function p(E,T){s.point(E,T)}function m(){f.point=p,s.lineStart()}function v(){f.point=d,s.lineEnd()}function y(E,T){h.push([E,T]),a.point(E,T)}function x(){a.lineStart(),h=[]}function b(){y(h[0][0],h[0][1]),a.lineEnd();var E=a.clean(),T=o.result(),D,R=T.length,S,C,N;if(h.pop(),c.push(h),h=null,!!R){if(E&1){if(C=T[0],(S=C.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),D=0;D<S;++D)r.point((N=C[D])[0],N[1]);r.lineEnd()}return}R>1&&E&2&&T.push(T.pop().concat(T.shift())),u.push(T.filter(R$))}}return f}}function R$(t){return t.length>1}function P$(t,e){return((t=t.x)[0]<0?t[1]-Fn-ot:Fn-t[1])-((e=e.x)[0]<0?e[1]-Fn-ot:Fn-e[1])}const lx=D4(function(){return!0},N$,D$,[-Lt,-Fn]);function N$(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(s,o){var a=s>0?Lt:-Lt,l=Ft(s-e);Ft(l-Lt)<ot?(t.point(e,n=(n+o)/2>0?Fn:-Fn),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(s,n),r=0):i!==a&&l>=Lt&&(Ft(e-i)<ot&&(e-=i*ot),Ft(s-a)<ot&&(s-=a*ot),n=I$(e,n,s,o),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),r=0),t.point(e=s,n=o),i=a},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function I$(t,e,n,i){var r,s,o=Ke(t-n);return Ft(o)>ot?Hu((Ke(e)*(s=tt(i))*Ke(n)-Ke(i)*(r=tt(e))*Ke(t))/(r*s*o)):(e+i)/2}function D$(t,e,n,i){var r;if(t==null)r=n*Fn,i.point(-Lt,r),i.point(0,r),i.point(Lt,r),i.point(Lt,0),i.point(Lt,-r),i.point(0,-r),i.point(-Lt,-r),i.point(-Lt,0),i.point(-Lt,r);else if(Ft(t[0]-e[0])>ot){var s=t[0]<e[0]?Lt:-Lt;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}function M4(t){var e=tt(t),n=6*lt,i=e>0,r=Ft(e)>ot;function s(u,h,f,d){R4(d,t,n,f,u,h)}function o(u,h){return tt(u)*tt(h)>e}function a(u){var h,f,d,p,m;return{lineStart:function(){p=d=!1,m=1},point:function(v,y){var x=[v,y],b,E=o(v,y),T=i?E?0:c(v,y):E?c(v+(v<0?Lt:-Lt),y):0;if(!h&&(p=d=E)&&u.lineStart(),E!==d&&(b=l(h,x),(!b||eg(h,b)||eg(x,b))&&(x[2]=1)),E!==d)m=0,E?(u.lineStart(),b=l(x,h),u.point(b[0],b[1])):(b=l(h,x),u.point(b[0],b[1],2),u.lineEnd()),h=b;else if(r&&h&&i^E){var D;!(T&f)&&(D=l(x,h,!0))&&(m=0,i?(u.lineStart(),u.point(D[0][0],D[0][1]),u.point(D[1][0],D[1][1]),u.lineEnd()):(u.point(D[1][0],D[1][1]),u.lineEnd(),u.lineStart(),u.point(D[0][0],D[0][1],3)))}E&&(!h||!eg(h,x))&&u.point(x[0],x[1]),h=x,d=E,f=T},lineEnd:function(){d&&u.lineEnd(),h=null},clean:function(){return m|(p&&d)<<1}}}function l(u,h,f){var d=Zl(u),p=Zl(h),m=[1,0,0],v=Iu(d,p),y=h0(v,v),x=v[0],b=y-x*x;if(!b)return!f&&u;var E=e*y/b,T=-e*x/b,D=Iu(m,v),R=f0(m,E),S=f0(v,T);ov(R,S);var C=D,N=h0(R,C),k=h0(C,C),P=N*N-k*(h0(R,R)-1);if(!(P<0)){var j=pi(P),F=f0(C,(-N-j)/k);if(ov(F,R),F=im(F),!f)return F;var H=u[0],O=h[0],$=u[1],z=h[1],B;O<H&&(B=H,H=O,O=B);var X=O-H,te=Ft(X-Lt)<ot,I=te||X<ot;if(!te&&z<$&&(B=$,$=z,z=B),I?te?$+z>0^F[1]<(Ft(F[0]-H)<ot?$:z):$<=F[1]&&F[1]<=z:X>Lt^(H<=F[0]&&F[0]<=O)){var U=f0(C,(-N+j)/k);return ov(U,R),[F,im(U)]}}}function c(u,h){var f=i?t:Lt-t,d=0;return u<-f?d|=1:u>f&&(d|=2),h<-f?d|=4:h>f&&(d|=8),d}return D4(o,a,s,i?[0,-t]:[-Lt,t-Lt])}function M$(t,e,n,i,r,s){var o=t[0],a=t[1],l=e[0],c=e[1],u=0,h=1,f=l-o,d=c-a,p;if(p=n-o,!(!f&&p>0)){if(p/=f,f<0){if(p<u)return;p<h&&(h=p)}else if(f>0){if(p>h)return;p>u&&(u=p)}if(p=r-o,!(!f&&p<0)){if(p/=f,f<0){if(p>h)return;p>u&&(u=p)}else if(f>0){if(p<u)return;p<h&&(h=p)}if(p=i-a,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>u&&(u=p)}if(p=s-a,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<h&&(h=p)}return u>0&&(t[0]=o+u*f,t[1]=a+u*d),h<1&&(e[0]=o+h*f,e[1]=a+h*d),!0}}}}}var Xh=1e9,p0=-Xh;function Qm(t,e,n,i){function r(c,u){return t<=c&&c<=n&&e<=u&&u<=i}function s(c,u,h,f){var d=0,p=0;if(c==null||(d=o(c,h))!==(p=o(u,h))||l(c,u)<0^h>0)do f.point(d===0||d===3?t:n,d>1?i:e);while((d=(d+h+4)%4)!==p);else f.point(u[0],u[1])}function o(c,u){return Ft(c[0]-t)<ot?u>0?0:3:Ft(c[0]-n)<ot?u>0?2:1:Ft(c[1]-e)<ot?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var h=o(c,1),f=o(u,1);return h!==f?h-f:h===0?u[1]-c[1]:h===1?c[0]-u[0]:h===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,h=P4(),f,d,p,m,v,y,x,b,E,T,D,R={point:S,lineStart:P,lineEnd:j,polygonStart:N,polygonEnd:k};function S(H,O){r(H,O)&&u.point(H,O)}function C(){for(var H=0,O=0,$=d.length;O<$;++O)for(var z=d[O],B=1,X=z.length,te=z[0],I,U,K=te[0],Q=te[1];B<X;++B)I=K,U=Q,te=z[B],K=te[0],Q=te[1],U<=i?Q>i&&(K-I)*(i-U)>(Q-U)*(t-I)&&++H:Q<=i&&(K-I)*(i-U)<(Q-U)*(t-I)&&--H;return H}function N(){u=h,f=[],d=[],D=!0}function k(){var H=C(),O=D&&H,$=(f=m4(f)).length;(O||$)&&(c.polygonStart(),O&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),$&&N4(f,a,H,s,c),c.polygonEnd()),u=c,f=d=p=null}function P(){R.point=F,d&&d.push(p=[]),T=!0,E=!1,x=b=NaN}function j(){f&&(F(m,v),y&&E&&h.rejoin(),f.push(h.result())),R.point=S,E&&u.lineEnd()}function F(H,O){var $=r(H,O);if(d&&p.push([H,O]),T)m=H,v=O,y=$,T=!1,$&&(u.lineStart(),u.point(H,O));else if($&&E)u.point(H,O);else{var z=[x=Math.max(p0,Math.min(Xh,x)),b=Math.max(p0,Math.min(Xh,b))],B=[H=Math.max(p0,Math.min(Xh,H)),O=Math.max(p0,Math.min(Xh,O))];M$(z,B,t,e,n,i)?(E||(u.lineStart(),u.point(z[0],z[1])),u.point(B[0],B[1]),$||u.lineEnd(),D=!1):$&&(u.lineStart(),u.point(H,O),D=!1)}x=H,b=O,E=$}return R}}function F$(){var t=0,e=0,n=960,i=500,r,s,o;return o={stream:function(a){return r&&s===a?r:r=Qm(t,e,n,i)(s=a)},extent:function(a){return arguments.length?(t=+a[0][0],e=+a[0][1],n=+a[1][0],i=+a[1][1],r=s=null,o):[[t,e],[n,i]]}}}var cx,ux,tg,ng,Du={sphere:kn,point:kn,lineStart:O$,lineEnd:kn,polygonStart:kn,polygonEnd:kn};function O$(){Du.point=j$,Du.lineEnd=B$}function B$(){Du.point=Du.lineEnd=kn}function j$(t,e){t*=lt,e*=lt,ux=t,tg=Ke(e),ng=tt(e),Du.point=U$}function U$(t,e){t*=lt,e*=lt;var n=Ke(e),i=tt(e),r=Ft(t-ux),s=tt(r),o=Ke(r),a=i*o,l=ng*n-tg*i*s,c=tg*n+ng*i*s;cx.add(Yi(pi(a*a+l*l),c)),ux=t,tg=n,ng=i}function F4(t){return cx=new Oi,As(t,Du),+cx}var hx=[null,null],$$={type:"LineString",coordinates:hx};function fm(t,e){return hx[0]=t,hx[1]=e,F4($$)}var DA={Feature:function(t,e){return dm(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(dm(n[i].geometry,e))return!0;return!1}},MA={Sphere:function(){return!0},Point:function(t,e){return FA(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(FA(n[i],e))return!0;return!1},LineString:function(t,e){return OA(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(OA(n[i],e))return!0;return!1},Polygon:function(t,e){return BA(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(BA(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(dm(n[i],e))return!0;return!1}};function dm(t,e){return t&&MA.hasOwnProperty(t.type)?MA[t.type](t,e):!1}function FA(t,e){return fm(t,e)===0}function OA(t,e){for(var n,i,r,s=0,o=t.length;s<o;s++){if(i=fm(t[s],e),i===0||s>0&&(r=fm(t[s],t[s-1]),r>0&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<id*r))return!0;n=i}return!1}function BA(t,e){return!!I4(t.map(z$),O4(e))}function z$(t){return t=t.map(O4),t.pop(),t}function O4(t){return[t[0]*lt,t[1]*lt]}function H$(t,e){return(t&&DA.hasOwnProperty(t.type)?DA[t.type]:dm)(t,e)}function jA(t,e,n){var i=lu(t,e-ot,n).concat(e);return function(r){return i.map(function(s){return[r,s]})}}function UA(t,e,n){var i=lu(t,e-ot,n).concat(e);return function(r){return i.map(function(s){return[s,r]})}}function E5(){var t,e,n,i,r,s,o,a,l=10,c=l,u=90,h=360,f,d,p,m,v=2.5;function y(){return{type:"MultiLineString",coordinates:x()}}function x(){return lu(u0(i/u)*u,n,u).map(p).concat(lu(u0(a/h)*h,o,h).map(m)).concat(lu(u0(e/l)*l,t,l).filter(function(b){return Ft(b%u)>ot}).map(f)).concat(lu(u0(s/c)*c,r,c).filter(function(b){return Ft(b%h)>ot}).map(d))}return y.lines=function(){return x().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(i=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],i>n&&(b=i,i=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(v)):[[i,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(e=+b[0][0],t=+b[1][0],s=+b[0][1],r=+b[1][1],e>t&&(b=e,e=t,t=b),s>r&&(b=s,s=r,r=b),y.precision(v)):[[e,s],[t,r]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(u=+b[0],h=+b[1],y):[u,h]},y.stepMinor=function(b){return arguments.length?(l=+b[0],c=+b[1],y):[l,c]},y.precision=function(b){return arguments.length?(v=+b,f=jA(s,r,90),d=UA(e,t,v),p=jA(a,o,90),m=UA(i,n,v),y):v},y.extentMajor([[-180,-90+ot],[180,90-ot]]).extentMinor([[-180,-80-ot],[180,80+ot]])}function V$(){return E5()()}function G$(t,e){var n=t[0]*lt,i=t[1]*lt,r=e[0]*lt,s=e[1]*lt,o=tt(i),a=Ke(i),l=tt(s),c=Ke(s),u=o*tt(n),h=o*Ke(n),f=l*tt(r),d=l*Ke(r),p=2*Xi(pi(bA(s-i)+o*l*bA(r-n))),m=Ke(p),v=p?function(y){var x=Ke(y*=p)/m,b=Ke(p-y)/m,E=b*u+x*f,T=b*h+x*d,D=b*a+x*c;return[Yi(T,E)*on,Yi(D,pi(E*E+T*T))*on]}:function(){return[n*on,i*on]};return v.distance=p,v}const rd=t=>t;var lv=new Oi,fx=new Oi,B4,j4,dx,px,Bo={point:kn,lineStart:kn,lineEnd:kn,polygonStart:function(){Bo.lineStart=W$,Bo.lineEnd=K$},polygonEnd:function(){Bo.lineStart=Bo.lineEnd=Bo.point=kn,lv.add(Ft(fx)),fx=new Oi},result:function(){var t=lv/2;return lv=new Oi,t}};function W$(){Bo.point=q$}function q$(t,e){Bo.point=U4,B4=dx=t,j4=px=e}function U4(t,e){fx.add(px*t-dx*e),dx=t,px=e}function K$(){U4(B4,j4)}var Mu=1/0,pm=Mu,sd=-Mu,gm=sd,mm={point:Y$,lineStart:kn,lineEnd:kn,polygonStart:kn,polygonEnd:kn,result:function(){var t=[[Mu,pm],[sd,gm]];return sd=gm=-(pm=Mu=1/0),t}};function Y$(t,e){t<Mu&&(Mu=t),t>sd&&(sd=t),e<pm&&(pm=e),e>gm&&(gm=e)}var gx=0,mx=0,Jh=0,ym=0,vm=0,cu=0,yx=0,vx=0,Qh=0,$4,z4,Xs,Js,Jr={point:ec,lineStart:$A,lineEnd:zA,polygonStart:function(){Jr.lineStart=Q$,Jr.lineEnd=Z$},polygonEnd:function(){Jr.point=ec,Jr.lineStart=$A,Jr.lineEnd=zA},result:function(){var t=Qh?[yx/Qh,vx/Qh]:cu?[ym/cu,vm/cu]:Jh?[gx/Jh,mx/Jh]:[NaN,NaN];return gx=mx=Jh=ym=vm=cu=yx=vx=Qh=0,t}};function ec(t,e){gx+=t,mx+=e,++Jh}function $A(){Jr.point=X$}function X$(t,e){Jr.point=J$,ec(Xs=t,Js=e)}function J$(t,e){var n=t-Xs,i=e-Js,r=pi(n*n+i*i);ym+=r*(Xs+t)/2,vm+=r*(Js+e)/2,cu+=r,ec(Xs=t,Js=e)}function zA(){Jr.point=ec}function Q$(){Jr.point=ez}function Z$(){H4($4,z4)}function ez(t,e){Jr.point=H4,ec($4=Xs=t,z4=Js=e)}function H4(t,e){var n=t-Xs,i=e-Js,r=pi(n*n+i*i);ym+=r*(Xs+t)/2,vm+=r*(Js+e)/2,cu+=r,r=Js*t-Xs*e,yx+=r*(Xs+t),vx+=r*(Js+e),Qh+=r*3,ec(Xs=t,Js=e)}function V4(t){this._context=t}V4.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ki);break}}},result:kn};var xx=new Oi,cv,G4,W4,Zh,ef,od={point:kn,lineStart:function(){od.point=tz},lineEnd:function(){cv&&q4(G4,W4),od.point=kn},polygonStart:function(){cv=!0},polygonEnd:function(){cv=null},result:function(){var t=+xx;return xx=new Oi,t}};function tz(t,e){od.point=q4,G4=Zh=t,W4=ef=e}function q4(t,e){Zh-=t,ef-=e,xx.add(pi(Zh*Zh+ef*ef)),Zh=t,ef=e}function K4(){this._string=[]}K4.prototype={_radius:4.5,_circle:HA(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._string.push("M",t,",",e),this._point=1;break}case 1:{this._string.push("L",t,",",e);break}default:{this._circle==null&&(this._circle=HA(this._radius)),this._string.push("M",t,",",e,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function HA(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Y4(t,e){var n=4.5,i,r;function s(o){return o&&(typeof n=="function"&&r.pointRadius(+n.apply(this,arguments)),As(o,i(r))),r.result()}return s.area=function(o){return As(o,i(Bo)),Bo.result()},s.measure=function(o){return As(o,i(od)),od.result()},s.bounds=function(o){return As(o,i(mm)),mm.result()},s.centroid=function(o){return As(o,i(Jr)),Jr.result()},s.projection=function(o){return arguments.length?(i=o==null?(t=null,rd):(t=o).stream,s):t},s.context=function(o){return arguments.length?(r=o==null?(e=null,new K4):new V4(e=o),typeof n!="function"&&r.pointRadius(n),s):e},s.pointRadius=function(o){return arguments.length?(n=typeof o=="function"?o:(r.pointRadius(+o),+o),s):n},s.projection(t).context(e)}function nz(t){return{stream:Ed(t)}}function Ed(t){return function(e){var n=new bx;for(var i in t)n[i]=t[i];return n.stream=e,n}}function bx(){}bx.prototype={constructor:bx,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function A5(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),As(n,t.stream(mm)),e(mm.result()),i!=null&&t.clipExtent(i),t}function Zm(t,e,n){return A5(t,function(i){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+e[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(s-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,l])},n)}function T5(t,e,n){return Zm(t,[[0,0],e],n)}function L5(t,e,n){return A5(t,function(i){var r=+e,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];t.scale(150*s).translate([o,a])},n)}function k5(t,e,n){return A5(t,function(i){var r=+e,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;t.scale(150*s).translate([o,a])},n)}var VA=16,iz=tt(30*lt);function GA(t,e){return+e?sz(t,e):rz(t)}function rz(t){return Ed({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function sz(t,e){function n(i,r,s,o,a,l,c,u,h,f,d,p,m,v){var y=c-i,x=u-r,b=y*y+x*x;if(b>4*e&&m--){var E=o+f,T=a+d,D=l+p,R=pi(E*E+T*T+D*D),S=Xi(D/=R),C=Ft(Ft(D)-1)<ot||Ft(s-h)<ot?(s+h)/2:Yi(T,E),N=t(C,S),k=N[0],P=N[1],j=k-i,F=P-r,H=x*j-y*F;(H*H/b>e||Ft((y*j+x*F)/b-.5)>.3||o*f+a*d+l*p<iz)&&(n(i,r,s,o,a,l,k,P,C,E/=R,T/=R,D,m,v),v.point(k,P),n(k,P,C,E,T,D,c,u,h,f,d,p,m,v))}}return function(i){var r,s,o,a,l,c,u,h,f,d,p,m,v={point:y,lineStart:x,lineEnd:E,polygonStart:function(){i.polygonStart(),v.lineStart=T},polygonEnd:function(){i.polygonEnd(),v.lineStart=x}};function y(S,C){S=t(S,C),i.point(S[0],S[1])}function x(){h=NaN,v.point=b,i.lineStart()}function b(S,C){var N=Zl([S,C]),k=t(S,C);n(h,f,u,d,p,m,h=k[0],f=k[1],u=S,d=N[0],p=N[1],m=N[2],VA,i),i.point(h,f)}function E(){v.point=y,i.lineEnd()}function T(){x(),v.point=D,v.lineEnd=R}function D(S,C){b(r=S,C),s=h,o=f,a=d,l=p,c=m,v.point=b}function R(){n(h,f,u,d,p,m,s,o,r,a,l,c,VA,i),v.lineEnd=E,E()}return v}}var oz=Ed({point:function(t,e){this.stream.point(t*lt,e*lt)}});function az(t){return Ed({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function lz(t,e,n,i,r){function s(o,a){return o*=i,a*=r,[e+t*o,n-t*a]}return s.invert=function(o,a){return[(o-e)/t*i,(n-a)/t*r]},s}function WA(t,e,n,i,r,s){if(!s)return lz(t,e,n,i,r);var o=tt(s),a=Ke(s),l=o*t,c=a*t,u=o/t,h=a/t,f=(a*n-o*e)/t,d=(a*e+o*n)/t;function p(m,v){return m*=i,v*=r,[l*m-c*v+e,n-c*m-l*v]}return p.invert=function(m,v){return[i*(u*m-h*v+f),r*(d-h*m-u*v)]},p}function ho(t){return C5(function(){return t})()}function C5(t){var e,n=150,i=480,r=250,s=0,o=0,a=0,l=0,c=0,u,h=0,f=1,d=1,p=null,m=lx,v=null,y,x,b,E=rd,T=.5,D,R,S,C,N;function k(H){return S(H[0]*lt,H[1]*lt)}function P(H){return H=S.invert(H[0],H[1]),H&&[H[0]*on,H[1]*on]}k.stream=function(H){return C&&N===H?C:C=oz(az(u)(m(D(E(N=H)))))},k.preclip=function(H){return arguments.length?(m=H,p=void 0,F()):m},k.postclip=function(H){return arguments.length?(E=H,v=y=x=b=null,F()):E},k.clipAngle=function(H){return arguments.length?(m=+H?M4(p=H*lt):(p=null,lx),F()):p*on},k.clipExtent=function(H){return arguments.length?(E=H==null?(v=y=x=b=null,rd):Qm(v=+H[0][0],y=+H[0][1],x=+H[1][0],b=+H[1][1]),F()):v==null?null:[[v,y],[x,b]]},k.scale=function(H){return arguments.length?(n=+H,j()):n},k.translate=function(H){return arguments.length?(i=+H[0],r=+H[1],j()):[i,r]},k.center=function(H){return arguments.length?(s=H[0]%360*lt,o=H[1]%360*lt,j()):[s*on,o*on]},k.rotate=function(H){return arguments.length?(a=H[0]%360*lt,l=H[1]%360*lt,c=H.length>2?H[2]%360*lt:0,j()):[a*on,l*on,c*on]},k.angle=function(H){return arguments.length?(h=H%360*lt,j()):h*on},k.reflectX=function(H){return arguments.length?(f=H?-1:1,j()):f<0},k.reflectY=function(H){return arguments.length?(d=H?-1:1,j()):d<0},k.precision=function(H){return arguments.length?(D=GA(R,T=H*H),F()):pi(T)},k.fitExtent=function(H,O){return Zm(k,H,O)},k.fitSize=function(H,O){return T5(k,H,O)},k.fitWidth=function(H,O){return L5(k,H,O)},k.fitHeight=function(H,O){return k5(k,H,O)};function j(){var H=WA(n,0,0,f,d,h).apply(null,e(s,o)),O=WA(n,i-H[0],r-H[1],f,d,h);return u=_5(a,l,c),R=ox(e,O),S=ox(u,R),D=GA(R,T),F()}function F(){return C=N=null,k}return function(){return e=t.apply(this,arguments),k.invert=e.invert&&P,j()}}function R5(t){var e=0,n=Lt/3,i=C5(t),r=i(e,n);return r.parallels=function(s){return arguments.length?i(e=s[0]*lt,n=s[1]*lt):[e*on,n*on]},r}function cz(t){var e=tt(t);function n(i,r){return[i*e,Ke(r)/e]}return n.invert=function(i,r){return[i/e,Xi(r*e)]},n}function X4(t,e){var n=Ke(t),i=(n+Ke(e))/2;if(Ft(i)<ot)return cz(t);var r=1+n*(2*i-n),s=pi(r)/i;function o(a,l){var c=pi(r-2*i*Ke(l))/i;return[c*Ke(a*=i),s-c*tt(a)]}return o.invert=function(a,l){var c=s-l,u=Yi(a,Ft(c))*es(c);return c*i<0&&(u-=Lt*es(a)*es(c)),[u/i,Xi((r-(a*a+c*c)*i*i)/(2*i))]},o}function xm(){return R5(X4).scale(155.424).center([0,33.6442])}function J4(){return xm().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function uz(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function hz(){var t,e,n=J4(),i,r=xm().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=xm().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(f,d){l=[f,d]}};function u(f){var d=f[0],p=f[1];return l=null,i.point(d,p),l||(s.point(d,p),l)||(a.point(d,p),l)}u.invert=function(f){var d=n.scale(),p=n.translate(),m=(f[0]-p[0])/d,v=(f[1]-p[1])/d;return(v>=.12&&v<.234&&m>=-.425&&m<-.214?r:v>=.166&&v<.234&&m>=-.214&&m<-.115?o:n).invert(f)},u.stream=function(f){return t&&e===f?t:t=uz([n.stream(e=f),r.stream(f),o.stream(f)])},u.precision=function(f){return arguments.length?(n.precision(f),r.precision(f),o.precision(f),h()):n.precision()},u.scale=function(f){return arguments.length?(n.scale(f),r.scale(f*.35),o.scale(f),u.translate(n.translate())):n.scale()},u.translate=function(f){if(!arguments.length)return n.translate();var d=n.scale(),p=+f[0],m=+f[1];return i=n.translate(f).clipExtent([[p-.455*d,m-.238*d],[p+.455*d,m+.238*d]]).stream(c),s=r.translate([p-.307*d,m+.201*d]).clipExtent([[p-.425*d+ot,m+.12*d+ot],[p-.214*d-ot,m+.234*d-ot]]).stream(c),a=o.translate([p-.205*d,m+.212*d]).clipExtent([[p-.214*d+ot,m+.166*d+ot],[p-.115*d-ot,m+.234*d-ot]]).stream(c),h()},u.fitExtent=function(f,d){return Zm(u,f,d)},u.fitSize=function(f,d){return T5(u,f,d)},u.fitWidth=function(f,d){return L5(u,f,d)},u.fitHeight=function(f,d){return k5(u,f,d)};function h(){return t=e=null,u}return u.scale(1070)}function Q4(t){return function(e,n){var i=tt(e),r=tt(n),s=t(i*r);return s===1/0?[2,0]:[s*r*Ke(e),s*Ke(n)]}}function Ad(t){return function(e,n){var i=pi(e*e+n*n),r=t(i),s=Ke(r),o=tt(r);return[Yi(e*s,i*o),Xi(i&&n*s/i)]}}var P5=Q4(function(t){return pi(2/(1+t))});P5.invert=Ad(function(t){return 2*Xi(t/2)});function fz(){return ho(P5).scale(124.75).clipAngle(180-.001)}var N5=Q4(function(t){return(t=v4(t))&&t/Ke(t)});N5.invert=Ad(function(t){return t});function dz(){return ho(N5).scale(79.4188).clipAngle(180-.001)}function Td(t,e){return[t,Zg(w5((Fn+e)/2))]}Td.invert=function(t,e){return[t,2*Hu(y4(e))-Fn]};function pz(){return Z4(Td).scale(961/Ki)}function Z4(t){var e=ho(t),n=e.center,i=e.scale,r=e.translate,s=e.clipExtent,o=null,a,l,c;e.scale=function(h){return arguments.length?(i(h),u()):i()},e.translate=function(h){return arguments.length?(r(h),u()):r()},e.center=function(h){return arguments.length?(n(h),u()):n()},e.clipExtent=function(h){return arguments.length?(h==null?o=a=l=c=null:(o=+h[0][0],a=+h[0][1],l=+h[1][0],c=+h[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var h=Lt*i(),f=e(C4(e.rotate()).invert([0,0]));return s(o==null?[[f[0]-h,f[1]-h],[f[0]+h,f[1]+h]]:t===Td?[[Math.max(f[0]-h,o),a],[Math.min(f[0]+h,l),c]]:[[o,Math.max(f[1]-h,a)],[l,Math.min(f[1]+h,c)]])}return u()}function g0(t){return w5((Fn+t)/2)}function eR(t,e){var n=tt(t),i=t===e?Ke(t):Zg(n/tt(e))/Zg(g0(e)/g0(t)),r=n*sv(g0(t),i)/i;if(!i)return Td;function s(o,a){r>0?a<-Fn+ot&&(a=-Fn+ot):a>Fn-ot&&(a=Fn-ot);var l=r/sv(g0(a),i);return[l*Ke(i*o),r-l*tt(i*o)]}return s.invert=function(o,a){var l=r-a,c=es(i)*pi(o*o+l*l),u=Yi(o,Ft(l))*es(l);return l*i<0&&(u-=Lt*es(o)*es(l)),[u/i,2*Hu(sv(r/c,1/i))-Fn]},s}function gz(){return R5(eR).scale(109.5).parallels([30,30])}function ad(t,e){return[t,e]}ad.invert=ad;function mz(){return ho(ad).scale(152.63)}function tR(t,e){var n=tt(t),i=t===e?Ke(t):(n-tt(e))/(e-t),r=n/i+t;if(Ft(i)<ot)return ad;function s(o,a){var l=r-a,c=i*o;return[l*Ke(c),r-l*tt(c)]}return s.invert=function(o,a){var l=r-a,c=Yi(o,Ft(l))*es(l);return l*i<0&&(c-=Lt*es(o)*es(l)),[c/i,r-es(i)*pi(o*o+l*l)]},s}function yz(){return R5(tR).scale(131.154).center([0,13.9389])}var xf=1.340264,bf=-.081106,wf=893e-6,Sf=.003796,bm=pi(3)/2,vz=12;function I5(t,e){var n=Xi(bm*Ke(e)),i=n*n,r=i*i*i;return[t*tt(n)/(bm*(xf+3*bf*i+r*(7*wf+9*Sf*i))),n*(xf+bf*i+r*(wf+Sf*i))]}I5.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,s=0,o,a,l;s<vz&&(a=n*(xf+bf*i+r*(wf+Sf*i))-e,l=xf+3*bf*i+r*(7*wf+9*Sf*i),n-=o=a/l,i=n*n,r=i*i*i,!(Ft(o)<id));++s);return[bm*t*(xf+3*bf*i+r*(7*wf+9*Sf*i))/tt(n),Xi(Ke(n)/bm)]};function xz(){return ho(I5).scale(177.158)}function D5(t,e){var n=tt(e),i=tt(t)*n;return[n*Ke(t)/i,Ke(e)/i]}D5.invert=Ad(Hu);function bz(){return ho(D5).scale(144.049).clipAngle(60)}function wz(){var t=1,e=0,n=0,i=1,r=1,s=0,o,a,l=null,c,u,h,f=1,d=1,p=Ed({point:function(E,T){var D=b([E,T]);this.stream.point(D[0],D[1])}}),m=rd,v,y;function x(){return f=t*i,d=t*r,v=y=null,b}function b(E){var T=E[0]*f,D=E[1]*d;if(s){var R=D*o-T*a;T=T*o+D*a,D=R}return[T+e,D+n]}return b.invert=function(E){var T=E[0]-e,D=E[1]-n;if(s){var R=D*o+T*a;T=T*o-D*a,D=R}return[T/f,D/d]},b.stream=function(E){return v&&y===E?v:v=p(m(y=E))},b.postclip=function(E){return arguments.length?(m=E,l=c=u=h=null,x()):m},b.clipExtent=function(E){return arguments.length?(m=E==null?(l=c=u=h=null,rd):Qm(l=+E[0][0],c=+E[0][1],u=+E[1][0],h=+E[1][1]),x()):l==null?null:[[l,c],[u,h]]},b.scale=function(E){return arguments.length?(t=+E,x()):t},b.translate=function(E){return arguments.length?(e=+E[0],n=+E[1],x()):[e,n]},b.angle=function(E){return arguments.length?(s=E%360*lt,a=Ke(s),o=tt(s),x()):s*on},b.reflectX=function(E){return arguments.length?(i=E?-1:1,x()):i<0},b.reflectY=function(E){return arguments.length?(r=E?-1:1,x()):r<0},b.fitExtent=function(E,T){return Zm(b,E,T)},b.fitSize=function(E,T){return T5(b,E,T)},b.fitWidth=function(E,T){return L5(b,E,T)},b.fitHeight=function(E,T){return k5(b,E,T)},b}function M5(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),e*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}M5.invert=function(t,e){var n=e,i=25,r;do{var s=n*n,o=s*s;n-=r=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-e)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Ft(r)>ot&&--i>0);return[t/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Sz(){return ho(M5).scale(175.295)}function F5(t,e){return[tt(e)*Ke(t),Ke(e)]}F5.invert=Ad(Xi);function _z(){return ho(F5).scale(249.5).clipAngle(90+ot)}function O5(t,e){var n=tt(e),i=1+tt(t)*n;return[n*Ke(t)/i,Ke(e)/i]}O5.invert=Ad(function(t){return 2*Hu(t)});function Ez(){return ho(O5).scale(250).clipAngle(142)}function B5(t,e){return[Zg(w5((Fn+e)/2)),-t]}B5.invert=function(t,e){return[-e,2*Hu(y4(t))-Fn]};function Az(){var t=Z4(B5),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}const Tz=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:J4,geoAlbersUsa:hz,geoArea:v$,geoAzimuthalEqualArea:fz,geoAzimuthalEqualAreaRaw:P5,geoAzimuthalEquidistant:dz,geoAzimuthalEquidistantRaw:N5,geoBounds:S$,geoCentroid:k$,geoCircle:C$,geoClipAntimeridian:lx,geoClipCircle:M4,geoClipExtent:F$,geoClipRectangle:Qm,geoConicConformal:gz,geoConicConformalRaw:eR,geoConicEqualArea:xm,geoConicEqualAreaRaw:X4,geoConicEquidistant:yz,geoConicEquidistantRaw:tR,geoContains:H$,geoDistance:fm,geoEqualEarth:xz,geoEqualEarthRaw:I5,geoEquirectangular:mz,geoEquirectangularRaw:ad,geoGnomonic:bz,geoGnomonicRaw:D5,geoGraticule:E5,geoGraticule10:V$,geoIdentity:wz,geoInterpolate:G$,geoLength:F4,geoMercator:pz,geoMercatorRaw:Td,geoNaturalEarth1:Sz,geoNaturalEarth1Raw:M5,geoOrthographic:_z,geoOrthographicRaw:F5,geoPath:Y4,geoProjection:ho,geoProjectionMutator:C5,geoRotation:C4,geoStereographic:Ez,geoStereographicRaw:O5,geoStream:As,geoTransform:nz,geoTransverseMercator:Az,geoTransverseMercatorRaw:B5},Symbol.toStringTag,{value:"Module"}));function Lz(t){return t}function kz(t){if(t==null)return Lz;var e,n,i=t.scale[0],r=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,l){l||(e=n=0);var c=2,u=a.length,h=new Array(u);for(h[0]=(e+=a[0])*i+s,h[1]=(n+=a[1])*r+o;c<u;)h[c]=a[c],++c;return h}}function Cz(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}function Rz(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return qA(t,n)})}:qA(t,e)}function qA(t,e){var n=e.id,i=e.bbox,r=e.properties==null?{}:e.properties,s=nR(t,e);return n==null&&i==null?{type:"Feature",properties:r,geometry:s}:i==null?{type:"Feature",id:n,properties:r,geometry:s}:{type:"Feature",id:n,bbox:i,properties:r,geometry:s}}function nR(t,e){var n=kz(t.transform),i=t.arcs;function r(u,h){h.length&&h.pop();for(var f=i[u<0?~u:u],d=0,p=f.length;d<p;++d)h.push(n(f[d],d));u<0&&Cz(h,p)}function s(u){return n(u)}function o(u){for(var h=[],f=0,d=u.length;f<d;++f)r(u[f],h);return h.length<2&&h.push(h[0]),h}function a(u){for(var h=o(u);h.length<4;)h.push(h[0]);return h}function l(u){return u.map(a)}function c(u){var h=u.type,f;switch(h){case"GeometryCollection":return{type:h,geometries:u.geometries.map(c)};case"Point":f=s(u.coordinates);break;case"MultiPoint":f=u.coordinates.map(s);break;case"LineString":f=o(u.arcs);break;case"MultiLineString":f=u.arcs.map(o);break;case"Polygon":f=l(u.arcs);break;case"MultiPolygon":f=u.arcs.map(l);break;default:return null}return{type:h,coordinates:f}}return c(e)}function Pz(t,e){var n={},i={},r={},s=[],o=-1;e.forEach(function(c,u){var h=t.arcs[c<0?~c:c],f;h.length<3&&!h[1][0]&&!h[1][1]&&(f=e[++o],e[o]=c,e[u]=f)}),e.forEach(function(c){var u=a(c),h=u[0],f=u[1],d,p;if(d=r[h])if(delete r[d.end],d.push(c),d.end=f,p=i[f]){delete i[p.start];var m=p===d?d:d.concat(p);i[m.start=d.start]=r[m.end=p.end]=m}else i[d.start]=r[d.end]=d;else if(d=i[f])if(delete i[d.start],d.unshift(c),d.start=h,p=r[h]){delete r[p.end];var v=p===d?d:p.concat(d);i[v.start=p.start]=r[v.end=d.end]=v}else i[d.start]=r[d.end]=d;else d=[c],i[d.start=h]=r[d.end=f]=d});function a(c){var u=t.arcs[c<0?~c:c],h=u[0],f;return t.transform?(f=[0,0],u.forEach(function(d){f[0]+=d[0],f[1]+=d[1]})):f=u[u.length-1],c<0?[f,h]:[h,f]}function l(c,u){for(var h in c){var f=c[h];delete u[f.start],delete f.start,delete f.end,f.forEach(function(d){n[d<0?~d:d]=1}),s.push(f)}}return l(r,i),l(i,r),e.forEach(function(c){n[c<0?~c:c]||s.push([c])}),s}function KA(t){return nR(t,Nz.apply(this,arguments))}function Nz(t,e,n){var i,r,s;if(arguments.length>1)i=Iz(t,e,n);else for(r=0,i=new Array(s=t.arcs.length);r<s;++r)i[r]=r;return{type:"MultiLineString",arcs:Pz(t,i)}}function Iz(t,e,n){var i=[],r=[],s;function o(h){var f=h<0?~h:h;(r[f]||(r[f]=[])).push({i:h,g:s})}function a(h){h.forEach(o)}function l(h){h.forEach(a)}function c(h){h.forEach(l)}function u(h){switch(s=h,h.type){case"GeometryCollection":h.geometries.forEach(u);break;case"LineString":a(h.arcs);break;case"MultiLineString":case"Polygon":l(h.arcs);break;case"MultiPolygon":c(h.arcs);break}}return u(e),r.forEach(n==null?function(h){i.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}var Dz={value:()=>{}};function j5(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ig(n)}function ig(t){this._=t}function Mz(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ig.prototype=j5.prototype={constructor:ig,on:function(t,e){var n=this._,i=Mz(t+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(t=i[s]).type)&&(r=Fz(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(t=i[s]).type)n[r]=YA(n[r],t.name,e);else if(e==null)for(r in n)n[r]=YA(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ig(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function Fz(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function YA(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Dz,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var wx="http://www.w3.org/1999/xhtml";const XA={svg:"http://www.w3.org/2000/svg",xhtml:wx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function e1(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),XA.hasOwnProperty(e)?{space:XA[e],local:t}:t}function Oz(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===wx&&e.documentElement.namespaceURI===wx?e.createElement(t):e.createElementNS(n,t)}}function Bz(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function iR(t){var e=e1(t);return(e.local?Bz:Oz)(e)}function jz(){}function U5(t){return t==null?jz:function(){return this.querySelector(t)}}function Uz(t){typeof t!="function"&&(t=U5(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new mr(i,this._parents)}function rR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $z(){return[]}function sR(t){return t==null?$z:function(){return this.querySelectorAll(t)}}function zz(t){return function(){var e=t.apply(this,arguments);return e==null?[]:rR(e)}}function Hz(t){typeof t=="function"?t=zz(t):t=sR(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(t.call(l,l.__data__,c,o)),r.push(l));return new mr(i,r)}function oR(t){return function(){return this.matches(t)}}function aR(t){return function(e){return e.matches(t)}}var Vz=Array.prototype.find;function Gz(t){return function(){return Vz.call(this.children,t)}}function Wz(){return this.firstElementChild}function qz(t){return this.select(t==null?Wz:Gz(typeof t=="function"?t:aR(t)))}var Kz=Array.prototype.filter;function Yz(){return this.children}function Xz(t){return function(){return Kz.call(this.children,t)}}function Jz(t){return this.selectAll(t==null?Yz:Xz(typeof t=="function"?t:aR(t)))}function Qz(t){typeof t!="function"&&(t=oR(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new mr(i,this._parents)}function lR(t){return new Array(t.length)}function Zz(){return new mr(this._enter||this._groups.map(lR),this._parents)}function wm(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}wm.prototype={constructor:wm,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function eH(t){return function(){return t}}function tH(t,e,n,i,r,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):n[o]=new wm(t,s[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function nH(t,e,n,i,r,s,o){var a,l,c=new Map,u=e.length,h=s.length,f=new Array(u),d;for(a=0;a<u;++a)(l=e[a])&&(f[a]=d=o.call(l,l.__data__,a,e)+"",c.has(d)?r[a]=l:c.set(d,l));for(a=0;a<h;++a)d=o.call(t,s[a],a,s)+"",(l=c.get(d))?(i[a]=l,l.__data__=s[a],c.delete(d)):n[a]=new wm(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(f[a])===l&&(r[a]=l)}function iH(t){return t.__data__}function rH(t,e){if(!arguments.length)return Array.from(this,iH);var n=e?nH:tH,i=this._parents,r=this._groups;typeof t!="function"&&(t=eH(t));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],h=r[c],f=h.length,d=rR(t.call(u,u&&u.__data__,c,i)),p=d.length,m=a[c]=new Array(p),v=o[c]=new Array(p),y=l[c]=new Array(f);n(u,h,m,v,y,d,e);for(var x=0,b=0,E,T;x<p;++x)if(E=m[x]){for(x>=b&&(b=x+1);!(T=v[b])&&++b<p;);E._next=T||null}}return o=new mr(o,i),o._enter=a,o._exit=l,o}function sH(){return new mr(this._exit||this._groups.map(lR),this._parents)}function oH(t,e,n){var i=this.enter(),r=this,s=this.exit();return i=typeof t=="function"?t(i):i.append(t+""),e!=null&&(r=e(r)),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function aH(t){if(!(t instanceof mr))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,h=o[a]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;a<i;++a)o[a]=e[a];return new mr(o,this._parents)}function lH(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function cH(t){t||(t=uH);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],a=o.length,l=r[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new mr(r,this._parents).order()}function uH(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function hH(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function fH(){return Array.from(this)}function dH(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function pH(){let t=0;for(const e of this)++t;return t}function gH(){return!this.node()}function mH(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,o=r.length,a;s<o;++s)(a=r[s])&&t.call(a,a.__data__,s,r);return this}function yH(t){return function(){this.removeAttribute(t)}}function vH(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xH(t,e){return function(){this.setAttribute(t,e)}}function bH(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function wH(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function SH(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function _H(t,e){var n=e1(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?vH:yH:typeof e=="function"?n.local?SH:wH:n.local?bH:xH)(n,e))}function cR(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function EH(t){return function(){this.style.removeProperty(t)}}function AH(t,e,n){return function(){this.style.setProperty(t,e,n)}}function TH(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function LH(t,e,n){return arguments.length>1?this.each((e==null?EH:typeof e=="function"?TH:AH)(t,e,n??"")):Fu(this.node(),t)}function Fu(t,e){return t.style.getPropertyValue(e)||cR(t).getComputedStyle(t,null).getPropertyValue(e)}function kH(t){return function(){delete this[t]}}function CH(t,e){return function(){this[t]=e}}function RH(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function PH(t,e){return arguments.length>1?this.each((e==null?kH:typeof e=="function"?RH:CH)(t,e)):this.node()[t]}function uR(t){return t.trim().split(/^|\s+/)}function $5(t){return t.classList||new hR(t)}function hR(t){this._node=t,this._names=uR(t.getAttribute("class")||"")}hR.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function fR(t,e){for(var n=$5(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function dR(t,e){for(var n=$5(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function NH(t){return function(){fR(this,t)}}function IH(t){return function(){dR(this,t)}}function DH(t,e){return function(){(e.apply(this,arguments)?fR:dR)(this,t)}}function MH(t,e){var n=uR(t+"");if(arguments.length<2){for(var i=$5(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?DH:e?NH:IH)(n,e))}function FH(){this.textContent=""}function OH(t){return function(){this.textContent=t}}function BH(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function jH(t){return arguments.length?this.each(t==null?FH:(typeof t=="function"?BH:OH)(t)):this.node().textContent}function UH(){this.innerHTML=""}function $H(t){return function(){this.innerHTML=t}}function zH(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function HH(t){return arguments.length?this.each(t==null?UH:(typeof t=="function"?zH:$H)(t)):this.node().innerHTML}function VH(){this.nextSibling&&this.parentNode.appendChild(this)}function GH(){return this.each(VH)}function WH(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qH(){return this.each(WH)}function KH(t){var e=typeof t=="function"?t:iR(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function YH(){return null}function XH(t,e){var n=typeof t=="function"?t:iR(t),i=e==null?YH:typeof e=="function"?e:U5(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function JH(){var t=this.parentNode;t&&t.removeChild(this)}function QH(){return this.each(JH)}function ZH(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function eV(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tV(t){return this.select(t?eV:ZH)}function nV(t){return arguments.length?this.property("__data__",t):this.node().__data__}function iV(t){return function(e){t.call(this,e,this.__data__)}}function rV(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function sV(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function oV(t,e,n){return function(){var i=this.__on,r,s=iV(e);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function aV(t,e,n){var i=rV(t+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<s;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?oV:sV,r=0;r<s;++r)this.each(a(i[r],e,n));return this}function pR(t,e,n){var i=cR(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function lV(t,e){return function(){return pR(this,t,e)}}function cV(t,e){return function(){return pR(this,t,e.apply(this,arguments))}}function uV(t,e){return this.each((typeof e=="function"?cV:lV)(t,e))}function*hV(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var gR=[null];function mr(t,e){this._groups=t,this._parents=e}function Ld(){return new mr([[document.documentElement]],gR)}function fV(){return this}mr.prototype=Ld.prototype={constructor:mr,select:Uz,selectAll:Hz,selectChild:qz,selectChildren:Jz,filter:Qz,data:rH,enter:Zz,exit:sH,join:oH,merge:aH,selection:fV,order:lH,sort:cH,call:hH,nodes:fH,node:dH,size:pH,empty:gH,each:mH,attr:_H,style:LH,property:PH,classed:MH,text:jH,html:HH,raise:GH,lower:qH,append:KH,insert:XH,remove:QH,clone:tV,datum:nV,on:aV,dispatch:uV,[Symbol.iterator]:hV};function jo(t){return typeof t=="string"?new mr([[document.querySelector(t)]],[document.documentElement]):new mr([[t]],gR)}function dV(t){let e;for(;e=t.sourceEvent;)t=e;return t}function vl(t,e){if(t=dV(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function Sx(t){t.preventDefault(),t.stopImmediatePropagation()}function pV(t){var e=t.document.documentElement,n=jo(t).on("dragstart.drag",Sx,!0);"onselectstart"in e?n.on("selectstart.drag",Sx,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function gV(t,e){var n=t.document.documentElement,i=jo(t).on("dragstart.drag",null);e&&(i.on("click.drag",Sx,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function z5(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mR(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function kd(){}var ld=.7,Sm=1/ld,bu="\\s*([+-]?\\d+)\\s*",cd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ao="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mV=/^#([0-9a-f]{3,8})$/,yV=new RegExp("^rgb\\("+[bu,bu,bu]+"\\)$"),vV=new RegExp("^rgb\\("+[ao,ao,ao]+"\\)$"),xV=new RegExp("^rgba\\("+[bu,bu,bu,cd]+"\\)$"),bV=new RegExp("^rgba\\("+[ao,ao,ao,cd]+"\\)$"),wV=new RegExp("^hsl\\("+[cd,ao,ao]+"\\)$"),SV=new RegExp("^hsla\\("+[cd,ao,ao,cd]+"\\)$"),JA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};z5(kd,ud,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:QA,formatHex:QA,formatHsl:_V,formatRgb:ZA,toString:ZA});function QA(){return this.rgb().formatHex()}function _V(){return yR(this).formatHsl()}function ZA(){return this.rgb().formatRgb()}function ud(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=mV.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?eT(e):n===3?new Rr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?m0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?m0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yV.exec(t))?new Rr(e[1],e[2],e[3],1):(e=vV.exec(t))?new Rr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xV.exec(t))?m0(e[1],e[2],e[3],e[4]):(e=bV.exec(t))?m0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wV.exec(t))?iT(e[1],e[2]/100,e[3]/100,1):(e=SV.exec(t))?iT(e[1],e[2]/100,e[3]/100,e[4]):JA.hasOwnProperty(t)?eT(JA[t]):t==="transparent"?new Rr(NaN,NaN,NaN,0):null}function eT(t){return new Rr(t>>16&255,t>>8&255,t&255,1)}function m0(t,e,n,i){return i<=0&&(t=e=n=NaN),new Rr(t,e,n,i)}function EV(t){return t instanceof kd||(t=ud(t)),t?(t=t.rgb(),new Rr(t.r,t.g,t.b,t.opacity)):new Rr}function _x(t,e,n,i){return arguments.length===1?EV(t):new Rr(t,e,n,i??1)}function Rr(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}z5(Rr,_x,mR(kd,{brighter:function(t){return t=t==null?Sm:Math.pow(Sm,t),new Rr(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?ld:Math.pow(ld,t),new Rr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tT,formatHex:tT,formatRgb:nT,toString:nT}));function tT(){return"#"+uv(this.r)+uv(this.g)+uv(this.b)}function nT(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function uv(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function iT(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qs(t,e,n,i)}function yR(t){if(t instanceof Qs)return new Qs(t.h,t.s,t.l,t.opacity);if(t instanceof kd||(t=ud(t)),!t)return new Qs;if(t instanceof Qs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new Qs(o,a,l,t.opacity)}function AV(t,e,n,i){return arguments.length===1?yR(t):new Qs(t,e,n,i??1)}function Qs(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}z5(Qs,AV,mR(kd,{brighter:function(t){return t=t==null?Sm:Math.pow(Sm,t),new Qs(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ld:Math.pow(ld,t),new Qs(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Rr(hv(t>=240?t-240:t+120,r,i),hv(t,r,i),hv(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function hv(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const vR=t=>()=>t;function TV(t,e){return function(n){return t+n*e}}function LV(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function kV(t){return(t=+t)==1?xR:function(e,n){return n-e?LV(e,n,t):vR(isNaN(e)?n:e)}}function xR(t,e){var n=e-t;return n?TV(t,n):vR(isNaN(t)?e:t)}const rT=function t(e){var n=kV(e);function i(r,s){var o=n((r=_x(r)).r,(s=_x(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),c=xR(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=t,i}(1);function Ea(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Ex=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fv=new RegExp(Ex.source,"g");function CV(t){return function(){return t}}function RV(t){return function(e){return t(e)+""}}function PV(t,e){var n=Ex.lastIndex=fv.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(i=Ex.exec(t))&&(r=fv.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:Ea(i,r)})),n=fv.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?RV(l[0].x):CV(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}var sT=180/Math.PI,Ax={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bR(t,e,n,i,r,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*sT,skewX:Math.atan(l)*sT,scaleX:o,scaleY:a}}var y0;function NV(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ax:bR(e.a,e.b,e.c,e.d,e.e,e.f)}function IV(t){return t==null||(y0||(y0=document.createElementNS("http://www.w3.org/2000/svg","g")),y0.setAttribute("transform",t),!(t=y0.transform.baseVal.consolidate()))?Ax:(t=t.matrix,bR(t.a,t.b,t.c,t.d,t.e,t.f))}function wR(t,e,n,i){function r(c){return c.length?c.pop()+" ":""}function s(c,u,h,f,d,p){if(c!==h||u!==f){var m=d.push("translate(",null,e,null,n);p.push({i:m-4,x:Ea(c,h)},{i:m-2,x:Ea(u,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function o(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Ea(c,u)})):u&&h.push(r(h)+"rotate("+u+i)}function a(c,u,h,f){c!==u?f.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Ea(c,u)}):u&&h.push(r(h)+"skewX("+u+i)}function l(c,u,h,f,d,p){if(c!==h||u!==f){var m=d.push(r(d)+"scale(",null,",",null,")");p.push({i:m-4,x:Ea(c,h)},{i:m-2,x:Ea(u,f)})}else(h!==1||f!==1)&&d.push(r(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,f),o(c.rotate,u.rotate,h,f),a(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var p=-1,m=f.length,v;++p<m;)h[(v=f[p]).i]=v.x(d);return h.join("")}}}var DV=wR(NV,"px, ","px)","deg)"),MV=wR(IV,", ",")",")"),FV=1e-12;function oT(t){return((t=Math.exp(t))+1/t)/2}function OV(t){return((t=Math.exp(t))-1/t)/2}function BV(t){return((t=Math.exp(2*t))-1)/(t+1)}const jV=function t(e,n,i){function r(s,o){var a=s[0],l=s[1],c=s[2],u=o[0],h=o[1],f=o[2],d=u-a,p=h-l,m=d*d+p*p,v,y;if(m<FV)y=Math.log(f/c)/e,v=function(R){return[a+R*d,l+R*p,c*Math.exp(e*R*y)]};else{var x=Math.sqrt(m),b=(f*f-c*c+i*m)/(2*c*n*x),E=(f*f-c*c-i*m)/(2*f*n*x),T=Math.log(Math.sqrt(b*b+1)-b),D=Math.log(Math.sqrt(E*E+1)-E);y=(D-T)/e,v=function(R){var S=R*y,C=oT(T),N=c/(n*x)*(C*BV(e*S+T)-OV(T));return[a+N*d,l+N*p,c*C/oT(e*S+T)]}}return v.duration=y*1e3*e/Math.SQRT2,v}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},r}(Math.SQRT2,2,4);var Ou=0,tf=0,Mh=0,SR=1e3,_m,nf,Em=0,tc=0,t1=0,hd=typeof performance=="object"&&performance.now?performance:Date,_R=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function H5(){return tc||(_R(UV),tc=hd.now()+t1)}function UV(){tc=0}function Am(){this._call=this._time=this._next=null}Am.prototype=ER.prototype={constructor:Am,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?H5():+n)+(e==null?0:+e),!this._next&&nf!==this&&(nf?nf._next=this:_m=this,nf=this),this._call=t,this._time=n,Tx()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tx())}};function ER(t,e,n){var i=new Am;return i.restart(t,e,n),i}function $V(){H5(),++Ou;for(var t=_m,e;t;)(e=tc-t._time)>=0&&t._call.call(null,e),t=t._next;--Ou}function aT(){tc=(Em=hd.now())+t1,Ou=tf=0;try{$V()}finally{Ou=0,HV(),tc=0}}function zV(){var t=hd.now(),e=t-Em;e>SR&&(t1-=e,Em=t)}function HV(){for(var t,e=_m,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:_m=n);nf=t,Tx(i)}function Tx(t){if(!Ou){tf&&(tf=clearTimeout(tf));var e=t-tc;e>24?(t<1/0&&(tf=setTimeout(aT,t-hd.now()-t1)),Mh&&(Mh=clearInterval(Mh))):(Mh||(Em=hd.now(),Mh=setInterval(zV,SR)),Ou=1,_R(aT))}}function lT(t,e,n){var i=new Am;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var VV=j5("start","end","cancel","interrupt"),GV=[],AR=0,cT=1,Lx=2,rg=3,uT=4,kx=5,sg=6;function n1(t,e,n,i,r,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;WV(t,n,{name:e,index:i,group:r,on:VV,tween:GV,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:AR})}function V5(t,e){var n=Ps(t,e);if(n.state>AR)throw new Error("too late; already scheduled");return n}function fo(t,e){var n=Ps(t,e);if(n.state>rg)throw new Error("too late; already running");return n}function Ps(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function WV(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=ER(s,0,n.time);function s(c){n.state=cT,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,h,f,d;if(n.state!==cT)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===rg)return lT(o);d.state===uT?(d.state=sg,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=sg,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[u])}if(lT(function(){n.state===rg&&(n.state=uT,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Lx,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Lx){for(n.state=rg,r=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=d);r.length=h+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=kx,1),h=-1,f=r.length;++h<f;)r[h].call(t,u);n.state===kx&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=sg,n.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function og(t,e){var n=t.__transition,i,r,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((i=n[o]).name!==e){s=!1;continue}r=i.state>Lx&&i.state<kx,i.state=sg,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[o]}s&&delete t.__transition}}function qV(t){return this.each(function(){og(this,t)})}function KV(t,e){var n,i;return function(){var r=fo(this,t),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function YV(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=fo(this,t),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}s.tween=r}}function XV(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Ps(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===t)return o.value;return null}return this.each((e==null?KV:YV)(n,t,e))}function G5(t,e,n){var i=t._id;return t.each(function(){var r=fo(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Ps(r,i).value[e]}}function TR(t,e){var n;return(typeof e=="number"?Ea:e instanceof ud?rT:(n=ud(e))?(e=n,rT):PV)(t,e)}function JV(t){return function(){this.removeAttribute(t)}}function QV(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ZV(t,e,n){var i,r=n+"",s;return function(){var o=this.getAttribute(t);return o===r?null:o===i?s:s=e(i=o,n)}}function eG(t,e,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===i?s:s=e(i=o,n)}}function tG(t,e,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function nG(t,e,n){var i,r,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a)))}}function iG(t,e){var n=e1(t),i=n==="transform"?MV:TR;return this.attrTween(t,typeof e=="function"?(n.local?nG:tG)(n,i,G5(this,"attr."+t,e)):e==null?(n.local?QV:JV)(n):(n.local?eG:ZV)(n,i,e))}function rG(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function sG(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function oG(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&sG(t,s)),n}return r._value=e,r}function aG(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&rG(t,s)),n}return r._value=e,r}function lG(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=e1(t);return this.tween(n,(i.local?oG:aG)(i,e))}function cG(t,e){return function(){V5(this,t).delay=+e.apply(this,arguments)}}function uG(t,e){return e=+e,function(){V5(this,t).delay=e}}function hG(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?cG:uG)(e,t)):Ps(this.node(),e).delay}function fG(t,e){return function(){fo(this,t).duration=+e.apply(this,arguments)}}function dG(t,e){return e=+e,function(){fo(this,t).duration=e}}function pG(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fG:dG)(e,t)):Ps(this.node(),e).duration}function gG(t,e){if(typeof e!="function")throw new Error;return function(){fo(this,t).ease=e}}function mG(t){var e=this._id;return arguments.length?this.each(gG(e,t)):Ps(this.node(),e).ease}function yG(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;fo(this,t).ease=n}}function vG(t){if(typeof t!="function")throw new Error;return this.each(yG(this._id,t))}function xG(t){typeof t!="function"&&(t=oR(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,a=i[r]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Jo(i,this._parents,this._name,this._id)}function bG(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l=e[a],c=n[a],u=l.length,h=o[a]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;a<i;++a)o[a]=e[a];return new Jo(o,this._parents,this._name,this._id)}function wG(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function SG(t,e,n){var i,r,s=wG(e)?V5:fo;return function(){var o=s(this,t),a=o.on;a!==i&&(r=(i=a).copy()).on(e,n),o.on=r}}function _G(t,e){var n=this._id;return arguments.length<2?Ps(this.node(),n).on.on(t):this.each(SG(n,t,e))}function EG(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function AG(){return this.on("end.remove",EG(this._id))}function TG(t){var e=this._name,n=this._id;typeof t!="function"&&(t=U5(t));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),u,h,f=0;f<l;++f)(u=a[f])&&(h=t.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,n1(c[f],e,n,f,c,Ps(u,n)));return new Jo(s,this._parents,e,n)}function LG(t){var e=this._name,n=this._id;typeof t!="function"&&(t=sR(t));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=t.call(u,u.__data__,h,l),d,p=Ps(u,n),m=0,v=f.length;m<v;++m)(d=f[m])&&n1(d,e,n,m,f,p);s.push(f),o.push(u)}return new Jo(s,o,e,n)}var kG=Ld.prototype.constructor;function CG(){return new kG(this._groups,this._parents)}function RG(t,e){var n,i,r;return function(){var s=Fu(this,t),o=(this.style.removeProperty(t),Fu(this,t));return s===o?null:s===n&&o===i?r:r=e(n=s,i=o)}}function LR(t){return function(){this.style.removeProperty(t)}}function PG(t,e,n){var i,r=n+"",s;return function(){var o=Fu(this,t);return o===r?null:o===i?s:s=e(i=o,n)}}function NG(t,e,n){var i,r,s;return function(){var o=Fu(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Fu(this,t))),o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,a))}}function IG(t,e){var n,i,r,s="style."+e,o="end."+s,a;return function(){var l=fo(this,t),c=l.on,u=l.value[s]==null?a||(a=LR(e)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(o,r=u),l.on=i}}function DG(t,e,n){var i=(t+="")=="transform"?DV:TR;return e==null?this.styleTween(t,RG(t,i)).on("end.style."+t,LR(t)):typeof e=="function"?this.styleTween(t,NG(t,i,G5(this,"style."+t,e))).each(IG(this._id,t)):this.styleTween(t,PG(t,i,e),n).on("end.style."+t,null)}function MG(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function FG(t,e,n){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&MG(t,o,n)),i}return s._value=e,s}function OG(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,FG(t,e,n??""))}function BG(t){return function(){this.textContent=t}}function jG(t){return function(){var e=t(this);this.textContent=e??""}}function UG(t){return this.tween("text",typeof t=="function"?jG(G5(this,"text",t)):BG(t==null?"":t+""))}function $G(t){return function(e){this.textContent=t.call(this,e)}}function zG(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&$G(r)),e}return i._value=t,i}function HG(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,zG(t))}function VG(){for(var t=this._name,e=this._id,n=kR(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Ps(l,e);n1(l,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Jo(i,this._parents,t,n)}function GG(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--r===0&&s()}};n.each(function(){var c=fo(this,i),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&s()})}var WG=0;function Jo(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function kR(){return++WG}var xl=Ld.prototype;Jo.prototype={constructor:Jo,select:TG,selectAll:LG,filter:xG,merge:bG,selection:CG,transition:VG,call:xl.call,nodes:xl.nodes,node:xl.node,size:xl.size,empty:xl.empty,each:xl.each,on:_G,attr:iG,attrTween:lG,style:DG,styleTween:OG,text:UG,textTween:HG,remove:AG,tween:XV,delay:hG,duration:pG,ease:mG,easeVarying:vG,end:GG,[Symbol.iterator]:xl[Symbol.iterator]};function qG(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var KG={time:null,delay:0,duration:250,ease:qG};function YG(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function XG(t){var e,n;t instanceof Jo?(e=t._id,t=t._name):(e=kR(),(n=KG).time=H5(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&n1(l,t,e,c,o,n||YG(l,e));return new Jo(i,this._parents,t,e)}Ld.prototype.interrupt=qV;Ld.prototype.transition=XG;const v0=t=>()=>t;function JG(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Vo(t,e,n){this.k=t,this.x=e,this.y=n}Vo.prototype={constructor:Vo,scale:function(t){return t===1?this:new Vo(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Vo(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var W5=new Vo(1,0,0);Vo.prototype;function dv(t){t.stopImmediatePropagation()}function Fh(t){t.preventDefault(),t.stopImmediatePropagation()}function QG(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ZG(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function hT(){return this.__zoom||W5}function eW(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function tW(){return navigator.maxTouchPoints||"ontouchstart"in this}function nW(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function iW(){var t=QG,e=ZG,n=nW,i=eW,r=tW,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=jV,c=j5("start","zoom","end"),u,h,f,d=500,p=150,m=0,v=10;function y(F){F.property("__zoom",hT).on("wheel.zoom",S).on("mousedown.zoom",C).on("dblclick.zoom",N).filter(r).on("touchstart.zoom",k).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(F,H,O,$){var z=F.selection?F.selection():F;z.property("__zoom",hT),F!==z?T(F,H,O,$):z.interrupt().each(function(){D(this,arguments).event($).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},y.scaleBy=function(F,H,O,$){y.scaleTo(F,function(){var z=this.__zoom.k,B=typeof H=="function"?H.apply(this,arguments):H;return z*B},O,$)},y.scaleTo=function(F,H,O,$){y.transform(F,function(){var z=e.apply(this,arguments),B=this.__zoom,X=O==null?E(z):typeof O=="function"?O.apply(this,arguments):O,te=B.invert(X),I=typeof H=="function"?H.apply(this,arguments):H;return n(b(x(B,I),X,te),z,o)},O,$)},y.translateBy=function(F,H,O,$){y.transform(F,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof O=="function"?O.apply(this,arguments):O),e.apply(this,arguments),o)},null,$)},y.translateTo=function(F,H,O,$,z){y.transform(F,function(){var B=e.apply(this,arguments),X=this.__zoom,te=$==null?E(B):typeof $=="function"?$.apply(this,arguments):$;return n(W5.translate(te[0],te[1]).scale(X.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof O=="function"?-O.apply(this,arguments):-O),B,o)},$,z)};function x(F,H){return H=Math.max(s[0],Math.min(s[1],H)),H===F.k?F:new Vo(H,F.x,F.y)}function b(F,H,O){var $=H[0]-O[0]*F.k,z=H[1]-O[1]*F.k;return $===F.x&&z===F.y?F:new Vo(F.k,$,z)}function E(F){return[(+F[0][0]+ +F[1][0])/2,(+F[0][1]+ +F[1][1])/2]}function T(F,H,O,$){F.on("start.zoom",function(){D(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event($).end()}).tween("zoom",function(){var z=this,B=arguments,X=D(z,B).event($),te=e.apply(z,B),I=O==null?E(te):typeof O=="function"?O.apply(z,B):O,U=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),K=z.__zoom,Q=typeof H=="function"?H.apply(z,B):H,ee=l(K.invert(I).concat(U/K.k),Q.invert(I).concat(U/Q.k));return function(oe){if(oe===1)oe=Q;else{var se=ee(oe),ae=U/se[2];oe=new Vo(ae,I[0]-se[0]*ae,I[1]-se[1]*ae)}X.zoom(null,oe)}})}function D(F,H,O){return!O&&F.__zooming||new R(F,H)}function R(F,H){this.that=F,this.args=H,this.active=0,this.sourceEvent=null,this.extent=e.apply(F,H),this.taps=0}R.prototype={event:function(F){return F&&(this.sourceEvent=F),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(F,H){return this.mouse&&F!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&F!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&F!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(F){var H=jo(this.that).datum();c.call(F,this.that,new JG(F,{sourceEvent:this.sourceEvent,target:y,type:F,transform:this.that.__zoom,dispatch:c}),H)}};function S(F,...H){if(!t.apply(this,arguments))return;var O=D(this,H).event(F),$=this.__zoom,z=Math.max(s[0],Math.min(s[1],$.k*Math.pow(2,i.apply(this,arguments)))),B=vl(F);if(O.wheel)(O.mouse[0][0]!==B[0]||O.mouse[0][1]!==B[1])&&(O.mouse[1]=$.invert(O.mouse[0]=B)),clearTimeout(O.wheel);else{if($.k===z)return;O.mouse=[B,$.invert(B)],og(this),O.start()}Fh(F),O.wheel=setTimeout(X,p),O.zoom("mouse",n(b(x($,z),O.mouse[0],O.mouse[1]),O.extent,o));function X(){O.wheel=null,O.end()}}function C(F,...H){if(f||!t.apply(this,arguments))return;var O=D(this,H,!0).event(F),$=jo(F.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",U,!0),z=vl(F,B),B=F.currentTarget,X=F.clientX,te=F.clientY;pV(F.view),dv(F),O.mouse=[z,this.__zoom.invert(z)],og(this),O.start();function I(K){if(Fh(K),!O.moved){var Q=K.clientX-X,ee=K.clientY-te;O.moved=Q*Q+ee*ee>m}O.event(K).zoom("mouse",n(b(O.that.__zoom,O.mouse[0]=vl(K,B),O.mouse[1]),O.extent,o))}function U(K){$.on("mousemove.zoom mouseup.zoom",null),gV(K.view,O.moved),Fh(K),O.event(K).end()}}function N(F,...H){if(t.apply(this,arguments)){var O=this.__zoom,$=vl(F.changedTouches?F.changedTouches[0]:F,this),z=O.invert($),B=O.k*(F.shiftKey?.5:2),X=n(b(x(O,B),$,z),e.apply(this,H),o);Fh(F),a>0?jo(this).transition().duration(a).call(T,X,$,F):jo(this).call(y.transform,X,$,F)}}function k(F,...H){if(t.apply(this,arguments)){var O=F.touches,$=O.length,z=D(this,H,F.changedTouches.length===$).event(F),B,X,te,I;for(dv(F),X=0;X<$;++X)te=O[X],I=vl(te,this),I=[I,this.__zoom.invert(I),te.identifier],z.touch0?!z.touch1&&z.touch0[2]!==I[2]&&(z.touch1=I,z.taps=0):(z.touch0=I,B=!0,z.taps=1+!!u);u&&(u=clearTimeout(u)),B&&(z.taps<2&&(h=I[0],u=setTimeout(function(){u=null},d)),og(this),z.start())}}function P(F,...H){if(this.__zooming){var O=D(this,H).event(F),$=F.changedTouches,z=$.length,B,X,te,I;for(Fh(F),B=0;B<z;++B)X=$[B],te=vl(X,this),O.touch0&&O.touch0[2]===X.identifier?O.touch0[0]=te:O.touch1&&O.touch1[2]===X.identifier&&(O.touch1[0]=te);if(X=O.that.__zoom,O.touch1){var U=O.touch0[0],K=O.touch0[1],Q=O.touch1[0],ee=O.touch1[1],oe=(oe=Q[0]-U[0])*oe+(oe=Q[1]-U[1])*oe,se=(se=ee[0]-K[0])*se+(se=ee[1]-K[1])*se;X=x(X,Math.sqrt(oe/se)),te=[(U[0]+Q[0])/2,(U[1]+Q[1])/2],I=[(K[0]+ee[0])/2,(K[1]+ee[1])/2]}else if(O.touch0)te=O.touch0[0],I=O.touch0[1];else return;O.zoom("touch",n(b(X,te,I),O.extent,o))}}function j(F,...H){if(this.__zooming){var O=D(this,H).event(F),$=F.changedTouches,z=$.length,B,X;for(dv(F),f&&clearTimeout(f),f=setTimeout(function(){f=null},d),B=0;B<z;++B)X=$[B],O.touch0&&O.touch0[2]===X.identifier?delete O.touch0:O.touch1&&O.touch1[2]===X.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(X=vl(X,this),Math.hypot(h[0]-X[0],h[1]-X[1])<v)){var te=jo(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return y.wheelDelta=function(F){return arguments.length?(i=typeof F=="function"?F:v0(+F),y):i},y.filter=function(F){return arguments.length?(t=typeof F=="function"?F:v0(!!F),y):t},y.touchable=function(F){return arguments.length?(r=typeof F=="function"?F:v0(!!F),y):r},y.extent=function(F){return arguments.length?(e=typeof F=="function"?F:v0([[+F[0][0],+F[0][1]],[+F[1][0],+F[1][1]]]),y):e},y.scaleExtent=function(F){return arguments.length?(s[0]=+F[0],s[1]=+F[1],y):[s[0],s[1]]},y.translateExtent=function(F){return arguments.length?(o[0][0]=+F[0][0],o[1][0]=+F[1][0],o[0][1]=+F[0][1],o[1][1]=+F[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(F){return arguments.length?(n=F,y):n},y.duration=function(F){return arguments.length?(a=+F,y):a},y.interpolate=function(F){return arguments.length?(l=F,y):l},y.on=function(){var F=c.on.apply(c,arguments);return F===c?y:F},y.clickDistance=function(F){return arguments.length?(m=(F=+F)*F,y):Math.sqrt(m)},y.tapDistance=function(F){return arguments.length?(v=+F,y):v},y}function fT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function uu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fT(Object(n),!0).forEach(function(i){rW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fT(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Cx(t){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cx(t)}function rW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yr(){return yr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yr.apply(this,arguments)}function sW(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function ss(t,e){if(t==null)return{};var n=sW(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function bi(t,e){return oW(t)||aW(t,e)||lW(t,e)||cW()}function oW(t){if(Array.isArray(t))return t}function aW(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],r=!0,s=!1,o,a;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw a}}return i}}function lW(t,e){if(t){if(typeof t=="string")return dT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dT(t,e)}}function dT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function cW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var uW=["width","height","projection","projectionConfig"],hW=Y4,fW=ss(Tz,["geoPath"]),po=fe.createContext(),dW=function(e){var n=e.projectionConfig,i=n===void 0?{}:n,r=e.projection,s=r===void 0?"geoEqualEarth":r,o=e.width,a=o===void 0?800:o,l=e.height,c=l===void 0?600:l,u=typeof s=="function";if(u)return s;var h=fW[s]().translate([a/2,c/2]),f=[h.center?"center":null,h.rotate?"rotate":null,h.scale?"scale":null,h.parallels?"parallels":null];return f.forEach(function(d){d&&(h=h[d](i[d]||h[d]()))}),h},CR=function(e){var n=e.width,i=e.height,r=e.projection,s=e.projectionConfig,o=ss(e,uW),a=s.center||[],l=bi(a,2),c=l[0],u=l[1],h=s.rotate||[],f=bi(h,3),d=f[0],p=f[1],m=f[2],v=s.parallels||[],y=bi(v,2),x=y[0],b=y[1],E=s.scale||null,T=fe.useMemo(function(){return dW({projectionConfig:{center:c||c===0||u||u===0?[c,u]:null,rotate:d||d===0||p||p===0?[d,p,m]:null,parallels:x||x===0||b||b===0?[x,b]:null,scale:E},projection:r,width:n,height:i})},[n,i,r,c,u,d,p,m,x,b,E]),D=fe.useCallback(T,[T]),R=fe.useMemo(function(){return{width:n,height:i,projection:D,path:hW().projection(D)}},[n,i,D]);return Ln.createElement(po.Provider,yr({value:R},o))};CR.propTypes={width:je.number,height:je.number,projection:je.oneOfType([je.string,je.func]),projectionConfig:je.object};var pW=["width","height","projection","projectionConfig","className"],q5=fe.forwardRef(function(t,e){var n=t.width,i=n===void 0?800:n,r=t.height,s=r===void 0?600:r,o=t.projection,a=o===void 0?"geoEqualEarth":o,l=t.projectionConfig,c=l===void 0?{}:l,u=t.className,h=u===void 0?"":u,f=ss(t,pW);return Ln.createElement(CR,{width:i,height:s,projection:a,projectionConfig:c},Ln.createElement("svg",yr({ref:e,viewBox:"0 0 ".concat(i," ").concat(s),className:"rsm-svg ".concat(h)},f)))});q5.displayName="ComposableMap";q5.propTypes={width:je.number,height:je.number,projection:je.oneOfType([je.string,je.func]),projectionConfig:je.object,className:je.string};function pT(t,e,n){var i=(t*n.k-t)/2,r=(e*n.k-e)/2;return[t/2-(i+n.x)/n.k,e/2-(r+n.y)/n.k]}function gW(t){return fetch(t).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).catch(function(e){console.log("There was a problem when fetching the data: ",e)})}function gT(t,e){var n=t.type==="Topology";if(!n)return e?e(t.features||t):t.features||t;var i=Rz(t,t.objects[Object.keys(t.objects)[0]]).features;return e?e(i):i}function mT(t){var e=t.type==="Topology";if(!e)return null;var n=KA(t,t.objects[Object.keys(t.objects)[0]],function(r,s){return r===s}),i=KA(t,t.objects[Object.keys(t.objects)[0]],function(r,s){return r!==s});return{outline:n,borders:i}}function mW(t,e,n){return t&&e?{outline:uu(uu({},t),{},{rsmKey:"outline",svgPath:n(t)}),borders:uu(uu({},e),{},{rsmKey:"borders",svgPath:n(e)})}:{}}function yW(t,e){return t?t.map(function(n,i){return uu(uu({},n),{},{rsmKey:"geo-".concat(i),svgPath:e(n)})}):[]}function vW(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.5,i=Array.isArray(n)?n:[n,n],r=t/2*i[0],s=e/2*i[1];return"M".concat(0,",",0," Q",-t/2-r,",").concat(-e/2+s," ").concat(-t,",").concat(-e)}function xW(t){return typeof t=="string"}function bW(t){var e=t.geography,n=t.parseGeographies,i=fe.useContext(po),r=i.path,s=fe.useState({}),o=bi(s,2),a=o[0],l=o[1];fe.useEffect(function(){(typeof window>"u"?"undefined":Cx(window))!=="undefined"&&e&&(xW(e)?gW(e).then(function(d){d&&l({geographies:gT(d,n),mesh:mT(d)})}):l({geographies:gT(e,n),mesh:mT(e)}))},[e,n]);var c=fe.useMemo(function(){var d=a.mesh||{},p=mW(d.outline,d.borders,r);return{geographies:yW(a.geographies,r),outline:p.outline,borders:p.borders}},[a,r]),u=c.geographies,h=c.outline,f=c.borders;return{geographies:u,outline:h,borders:f}}var wW=["geography","children","parseGeographies","className"],K5=fe.forwardRef(function(t,e){var n=t.geography,i=t.children,r=t.parseGeographies,s=t.className,o=s===void 0?"":s,a=ss(t,wW),l=fe.useContext(po),c=l.path,u=l.projection,h=bW({geography:n,parseGeographies:r}),f=h.geographies,d=h.outline,p=h.borders;return Ln.createElement("g",yr({ref:e,className:"rsm-geographies ".concat(o)},a),f&&f.length>0&&i({geographies:f,outline:d,borders:p,path:c,projection:u}))});K5.displayName="Geographies";K5.propTypes={geography:je.oneOfType([je.string,je.object,je.array]),children:je.func,parseGeographies:je.func,className:je.string};var SW=["geography","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"],Y5=fe.forwardRef(function(t,e){var n=t.geography,i=t.onMouseEnter,r=t.onMouseLeave,s=t.onMouseDown,o=t.onMouseUp,a=t.onFocus,l=t.onBlur,c=t.style,u=c===void 0?{}:c,h=t.className,f=h===void 0?"":h,d=ss(t,SW),p=fe.useState(!1),m=bi(p,2),v=m[0],y=m[1],x=fe.useState(!1),b=bi(x,2),E=b[0],T=b[1];function D(P){T(!0),i&&i(P)}function R(P){T(!1),v&&y(!1),r&&r(P)}function S(P){T(!0),a&&a(P)}function C(P){T(!1),v&&y(!1),l&&l(P)}function N(P){y(!0),s&&s(P)}function k(P){y(!1),o&&o(P)}return Ln.createElement("path",yr({ref:e,tabIndex:"0",className:"rsm-geography ".concat(f),d:n.svgPath,onMouseEnter:D,onMouseLeave:R,onFocus:S,onBlur:C,onMouseDown:N,onMouseUp:k,style:u[v||E?v?"pressed":"hover":"default"]},d))});Y5.displayName="Geography";Y5.propTypes={geography:je.object,onMouseEnter:je.func,onMouseLeave:je.func,onMouseDown:je.func,onMouseUp:je.func,onFocus:je.func,onBlur:je.func,style:je.object,className:je.string};var _W=fe.memo(Y5),EW=["fill","stroke","step","className"],X5=fe.forwardRef(function(t,e){var n=t.fill,i=n===void 0?"transparent":n,r=t.stroke,s=r===void 0?"currentcolor":r,o=t.step,a=o===void 0?[10,10]:o,l=t.className,c=l===void 0?"":l,u=ss(t,EW),h=fe.useContext(po),f=h.path;return Ln.createElement("path",yr({ref:e,d:f(E5().step(a)()),fill:i,stroke:s,className:"rsm-graticule ".concat(c)},u))});X5.displayName="Graticule";X5.propTypes={fill:je.string,stroke:je.string,step:je.array,className:je.string};fe.memo(X5);var AW=["value"],TW=fe.createContext(),LW={x:0,y:0,k:1,transformString:"translate(0 0) scale(1)"},RR=function(e){var n=e.value,i=n===void 0?LW:n,r=ss(e,AW);return Ln.createElement(TW.Provider,yr({value:i},r))};RR.propTypes={x:je.number,y:je.number,k:je.number,transformString:je.string};function kW(t){var e=t.center,n=t.filterZoomEvent,i=t.onMoveStart,r=t.onMoveEnd,s=t.onMove,o=t.translateExtent,a=o===void 0?[[-1/0,-1/0],[1/0,1/0]]:o,l=t.scaleExtent,c=l===void 0?[1,8]:l,u=t.zoom,h=u===void 0?1:u,f=fe.useContext(po),d=f.width,p=f.height,m=f.projection,v=bi(e,2),y=v[0],x=v[1],b=fe.useState({x:0,y:0,k:1}),E=bi(b,2),T=E[0],D=E[1],R=fe.useRef({x:0,y:0,k:1}),S=fe.useRef(),C=fe.useRef(),N=fe.useRef(!1),k=bi(a,2),P=k[0],j=k[1],F=bi(P,2),H=F[0],O=F[1],$=bi(j,2),z=$[0],B=$[1],X=bi(c,2),te=X[0],I=X[1];return fe.useEffect(function(){var U=jo(S.current);function K(ae){!i||N.current||i({coordinates:m.invert(pT(d,p,ae.transform)),zoom:ae.transform.k},ae)}function Q(ae){if(!N.current){var Ee=ae.transform,we=ae.sourceEvent;D({x:Ee.x,y:Ee.y,k:Ee.k,dragging:we}),s&&s({x:Ee.x,y:Ee.y,zoom:Ee.k,dragging:we},ae)}}function ee(ae){if(N.current){N.current=!1;return}var Ee=m.invert(pT(d,p,ae.transform)),we=bi(Ee,2),Pe=we[0],be=we[1];R.current={x:Pe,y:be,k:ae.transform.k},r&&r({coordinates:[Pe,be],zoom:ae.transform.k},ae)}function oe(ae){return n?n(ae):ae?!ae.ctrlKey&&!ae.button:!1}var se=iW().filter(oe).scaleExtent([te,I]).translateExtent([[H,O],[z,B]]).on("start",K).on("zoom",Q).on("end",ee);C.current=se,U.call(se)},[d,p,H,O,z,B,te,I,m,i,s,r,n]),fe.useEffect(function(){if(!(y===R.current.x&&x===R.current.y&&h===R.current.k)){var U=m([y,x]),K=U[0]*h,Q=U[1]*h,ee=jo(S.current);N.current=!0,ee.call(C.current.transform,W5.translate(d/2-K,p/2-Q).scale(h)),D({x:d/2-K,y:p/2-Q,k:h}),R.current={x:y,y:x,k:h}}},[y,x,h,d,p,m]),{mapRef:S,position:T,transformString:"translate(".concat(T.x," ").concat(T.y,") scale(").concat(T.k,")")}}var CW=["center","zoom","minZoom","maxZoom","translateExtent","filterZoomEvent","onMoveStart","onMove","onMoveEnd","className"],PR=fe.forwardRef(function(t,e){var n=t.center,i=n===void 0?[0,0]:n,r=t.zoom,s=r===void 0?1:r,o=t.minZoom,a=o===void 0?1:o,l=t.maxZoom,c=l===void 0?8:l,u=t.translateExtent,h=t.filterZoomEvent,f=t.onMoveStart,d=t.onMove,p=t.onMoveEnd,m=t.className,v=ss(t,CW),y=fe.useContext(po),x=y.width,b=y.height,E=kW({center:i,filterZoomEvent:h,onMoveStart:f,onMove:d,onMoveEnd:p,scaleExtent:[a,c],translateExtent:u,zoom:s}),T=E.mapRef,D=E.transformString,R=E.position;return Ln.createElement(RR,{value:{x:R.x,y:R.y,k:R.k,transformString:D}},Ln.createElement("g",{ref:T},Ln.createElement("rect",{width:x,height:b,fill:"transparent"}),Ln.createElement("g",yr({ref:e,transform:D,className:"rsm-zoomable-group ".concat(m)},v))))});PR.displayName="ZoomableGroup";PR.propTypes={center:je.array,zoom:je.number,minZoom:je.number,maxZoom:je.number,translateExtent:je.arrayOf(je.array),onMoveStart:je.func,onMove:je.func,onMoveEnd:je.func,className:je.string};var RW=["id","fill","stroke","strokeWidth","className"],J5=fe.forwardRef(function(t,e){var n=t.id,i=n===void 0?"rsm-sphere":n,r=t.fill,s=r===void 0?"transparent":r,o=t.stroke,a=o===void 0?"currentcolor":o,l=t.strokeWidth,c=l===void 0?.5:l,u=t.className,h=u===void 0?"":u,f=ss(t,RW),d=fe.useContext(po),p=d.path,m=fe.useMemo(function(){return p({type:"Sphere"})},[p]);return Ln.createElement(fe.Fragment,null,Ln.createElement("defs",null,Ln.createElement("clipPath",{id:i},Ln.createElement("path",{d:m}))),Ln.createElement("path",yr({ref:e,d:m,fill:s,stroke:a,strokeWidth:c,style:{pointerEvents:"none"},className:"rsm-sphere ".concat(h)},f)))});J5.displayName="Sphere";J5.propTypes={id:je.string,fill:je.string,stroke:je.string,strokeWidth:je.number,className:je.string};fe.memo(J5);var PW=["coordinates","children","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"],Q5=fe.forwardRef(function(t,e){var n=t.coordinates,i=t.children,r=t.onMouseEnter,s=t.onMouseLeave,o=t.onMouseDown,a=t.onMouseUp,l=t.onFocus,c=t.onBlur,u=t.style,h=u===void 0?{}:u,f=t.className,d=f===void 0?"":f,p=ss(t,PW),m=fe.useContext(po),v=m.projection,y=fe.useState(!1),x=bi(y,2),b=x[0],E=x[1],T=fe.useState(!1),D=bi(T,2),R=D[0],S=D[1],C=v(n),N=bi(C,2),k=N[0],P=N[1];function j(B){S(!0),r&&r(B)}function F(B){S(!1),b&&E(!1),s&&s(B)}function H(B){S(!0),l&&l(B)}function O(B){S(!1),b&&E(!1),c&&c(B)}function $(B){E(!0),o&&o(B)}function z(B){E(!1),a&&a(B)}return Ln.createElement("g",yr({ref:e,transform:"translate(".concat(k,", ").concat(P,")"),className:"rsm-marker ".concat(d),onMouseEnter:j,onMouseLeave:F,onFocus:H,onBlur:O,onMouseDown:$,onMouseUp:z,style:h[b||R?b?"pressed":"hover":"default"]},p),i)});Q5.displayName="Marker";Q5.propTypes={coordinates:je.array,children:je.oneOfType([je.node,je.arrayOf(je.node)]),onMouseEnter:je.func,onMouseLeave:je.func,onMouseDown:je.func,onMouseUp:je.func,onFocus:je.func,onBlur:je.func,style:je.object,className:je.string};var NW=["from","to","coordinates","stroke","strokeWidth","fill","className"],NR=fe.forwardRef(function(t,e){var n=t.from,i=n===void 0?[0,0]:n,r=t.to,s=r===void 0?[0,0]:r,o=t.coordinates,a=t.stroke,l=a===void 0?"currentcolor":a,c=t.strokeWidth,u=c===void 0?3:c,h=t.fill,f=h===void 0?"transparent":h,d=t.className,p=d===void 0?"":d,m=ss(t,NW),v=fe.useContext(po),y=v.path,x={type:"LineString",coordinates:o||[i,s]};return Ln.createElement("path",yr({ref:e,d:y(x),className:"rsm-line ".concat(p),stroke:l,strokeWidth:u,fill:f},m))});NR.displayName="Line";NR.propTypes={from:je.array,to:je.array,coordinates:je.array,stroke:je.string,strokeWidth:je.number,fill:je.string,className:je.string};var IW=["subject","children","connectorProps","dx","dy","curve","className"],IR=fe.forwardRef(function(t,e){var n=t.subject,i=t.children,r=t.connectorProps,s=t.dx,o=s===void 0?30:s,a=t.dy,l=a===void 0?30:a,c=t.curve,u=c===void 0?0:c,h=t.className,f=h===void 0?"":h,d=ss(t,IW),p=fe.useContext(po),m=p.projection,v=m(n),y=bi(v,2),x=y[0],b=y[1],E=vW(o,l,u);return Ln.createElement("g",yr({ref:e,transform:"translate(".concat(x+o,", ").concat(b+l,")"),className:"rsm-annotation ".concat(f)},d),Ln.createElement("path",yr({d:E,fill:"transparent",stroke:"#000"},r)),i)});IR.displayName="Annotation";IR.propTypes={subject:je.array,children:je.oneOfType([je.node,je.arrayOf(je.node)]),dx:je.number,dy:je.number,curve:je.number,connectorProps:je.object,className:je.string};const DW="modulepreload",MW=function(t){return"/"+t},yT={},Rx=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=MW(l),l in yT)return;yT[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":DW,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,d)=>{h.addEventListener("load",f),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Zt(t){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(t)}var Mi=Uint8Array,Pr=Uint16Array,Z5=Int32Array,i1=new Mi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r1=new Mi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Px=new Mi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DR=function(t,e){for(var n=new Pr(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new Z5(n[30]),i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return{b:n,r}},MR=DR(i1,2),FR=MR.b,Nx=MR.r;FR[28]=258,Nx[258]=28;var OR=DR(r1,0),FW=OR.b,vT=OR.r,Ix=new Pr(32768);for(var mn=0;mn<32768;++mn){var ma=(mn&43690)>>1|(mn&21845)<<1;ma=(ma&52428)>>2|(ma&13107)<<2,ma=(ma&61680)>>4|(ma&3855)<<4,Ix[mn]=((ma&65280)>>8|(ma&255)<<8)>>1}var lo=function(t,e,n){for(var i=t.length,r=0,s=new Pr(e);r<i;++r)t[r]&&++s[t[r]-1];var o=new Pr(e);for(r=1;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(n){a=new Pr(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],h=o[t[r]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)a[Ix[h]>>l]=c}else for(a=new Pr(i),r=0;r<i;++r)t[r]&&(a[r]=Ix[o[t[r]-1]++]>>15-t[r]);return a},Ja=new Mi(288);for(var mn=0;mn<144;++mn)Ja[mn]=8;for(var mn=144;mn<256;++mn)Ja[mn]=9;for(var mn=256;mn<280;++mn)Ja[mn]=7;for(var mn=280;mn<288;++mn)Ja[mn]=8;var fd=new Mi(32);for(var mn=0;mn<32;++mn)fd[mn]=5;var OW=lo(Ja,9,0),BW=lo(Ja,9,1),jW=lo(fd,5,0),UW=lo(fd,5,1),pv=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ms=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},gv=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},ew=function(t){return(t+7)/8|0},BR=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Mi(t.subarray(e,n))},$W=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ws=function(t,e,n){var i=new Error(e||$W[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,ws),!n)throw i;return i},zW=function(t,e,n,i){var r=t.length,s=0;if(!r||e.f&&!e.l)return n||new Mi(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Mi(r*3));var c=function(we){var Pe=n.length;if(we>Pe){var be=new Mi(Math.max(Pe*2,we));be.set(n),n=be}},u=e.f||0,h=e.p||0,f=e.b||0,d=e.l,p=e.d,m=e.m,v=e.n,y=r*8;do{if(!d){u=ms(t,h,1);var x=ms(t,h+1,3);if(h+=3,x)if(x==1)d=BW,p=UW,m=9,v=5;else if(x==2){var D=ms(t,h,31)+257,R=ms(t,h+10,15)+4,S=D+ms(t,h+5,31)+1;h+=14;for(var C=new Mi(S),N=new Mi(19),k=0;k<R;++k)N[Px[k]]=ms(t,h+k*3,7);h+=R*3;for(var P=pv(N),j=(1<<P)-1,F=lo(N,P,1),k=0;k<S;){var H=F[ms(t,h,j)];h+=H&15;var b=H>>4;if(b<16)C[k++]=b;else{var O=0,$=0;for(b==16?($=3+ms(t,h,3),h+=2,O=C[k-1]):b==17?($=3+ms(t,h,7),h+=3):b==18&&($=11+ms(t,h,127),h+=7);$--;)C[k++]=O}}var z=C.subarray(0,D),B=C.subarray(D);m=pv(z),v=pv(B),d=lo(z,m,1),p=lo(B,v,1)}else ws(1);else{var b=ew(h)+4,E=t[b-4]|t[b-3]<<8,T=b+E;if(T>r){l&&ws(0);break}a&&c(f+E),n.set(t.subarray(b,T),f),e.b=f+=E,e.p=h=T*8,e.f=u;continue}if(h>y){l&&ws(0);break}}a&&c(f+131072);for(var X=(1<<m)-1,te=(1<<v)-1,I=h;;I=h){var O=d[gv(t,h)&X],U=O>>4;if(h+=O&15,h>y){l&&ws(0);break}if(O||ws(2),U<256)n[f++]=U;else if(U==256){I=h,d=null;break}else{var K=U-254;if(U>264){var k=U-257,Q=i1[k];K=ms(t,h,(1<<Q)-1)+FR[k],h+=Q}var ee=p[gv(t,h)&te],oe=ee>>4;ee||ws(3),h+=ee&15;var B=FW[oe];if(oe>3){var Q=r1[oe];B+=gv(t,h)&(1<<Q)-1,h+=Q}if(h>y){l&&ws(0);break}a&&c(f+131072);var se=f+K;if(f<B){var ae=s-B,Ee=Math.min(B,se);for(ae+f<0&&ws(3);f<Ee;++f)n[f]=i[ae+f]}for(;f<se;++f)n[f]=n[f-B]}}e.l=d,e.p=I,e.b=f,e.f=u,d&&(u=1,e.m=m,e.d=p,e.n=v)}while(!u);return f!=n.length&&o?BR(n,0,f):n.subarray(0,f)},Co=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8},Oh=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},mv=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return{t:UR,l:0};if(r==1){var o=new Mi(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(T,D){return T.f-D.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var f=s[0].s,i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var d=new Pr(f+1),p=Dx(n[u-1],d,0);if(p>e){var i=0,m=0,v=p-e,y=1<<v;for(s.sort(function(D,R){return d[R.s]-d[D.s]||D.f-R.f});i<r;++i){var x=s[i].s;if(d[x]>e)m+=y-(1<<p-d[x]),d[x]=e;else break}for(m>>=v;m>0;){var b=s[i].s;d[b]<e?m-=1<<e-d[b]++-1:++i}for(;i>=0&&m;--i){var E=s[i].s;d[E]==e&&(--d[E],++m)}p=e}return{t:new Mi(d),l:p}},Dx=function(t,e,n){return t.s==-1?Math.max(Dx(t.l,e,n+1),Dx(t.r,e,n+1)):e[t.s]=n},xT=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Pr(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return{c:n.subarray(0,i),n:e}},Bh=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},jR=function(t,e,n){var i=n.length,r=ew(e+2);t[r]=i&255,t[r+1]=i>>8,t[r+2]=t[r]^255,t[r+3]=t[r+1]^255;for(var s=0;s<i;++s)t[r+s+4]=n[s];return(r+4+i)*8},bT=function(t,e,n,i,r,s,o,a,l,c,u){Co(e,u++,n),++r[256];for(var h=mv(r,15),f=h.t,d=h.l,p=mv(s,15),m=p.t,v=p.l,y=xT(f),x=y.c,b=y.n,E=xT(m),T=E.c,D=E.n,R=new Pr(19),S=0;S<x.length;++S)++R[x[S]&31];for(var S=0;S<T.length;++S)++R[T[S]&31];for(var C=mv(R,7),N=C.t,k=C.l,P=19;P>4&&!N[Px[P-1]];--P);var j=c+5<<3,F=Bh(r,Ja)+Bh(s,fd)+o,H=Bh(r,f)+Bh(s,m)+o+14+3*P+Bh(R,N)+2*R[16]+3*R[17]+7*R[18];if(l>=0&&j<=F&&j<=H)return jR(e,u,t.subarray(l,l+c));var O,$,z,B;if(Co(e,u,1+(H<F)),u+=2,H<F){O=lo(f,d,0),$=f,z=lo(m,v,0),B=m;var X=lo(N,k,0);Co(e,u,b-257),Co(e,u+5,D-1),Co(e,u+10,P-4),u+=14;for(var S=0;S<P;++S)Co(e,u+3*S,N[Px[S]]);u+=3*P;for(var te=[x,T],I=0;I<2;++I)for(var U=te[I],S=0;S<U.length;++S){var K=U[S]&31;Co(e,u,X[K]),u+=N[K],K>15&&(Co(e,u,U[S]>>5&127),u+=U[S]>>12)}}else O=OW,$=Ja,z=jW,B=fd;for(var S=0;S<a;++S){var Q=i[S];if(Q>255){var K=Q>>18&31;Oh(e,u,O[K+257]),u+=$[K+257],K>7&&(Co(e,u,Q>>23&31),u+=i1[K]);var ee=Q&31;Oh(e,u,z[ee]),u+=B[ee],ee>3&&(Oh(e,u,Q>>5&8191),u+=r1[ee])}else Oh(e,u,O[Q]),u+=$[Q]}return Oh(e,u,O[256]),u+$[256]},HW=new Z5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),UR=new Mi(0),VW=function(t,e,n,i,r,s){var o=s.z||t.length,a=new Mi(i+o+5*(1+Math.ceil(o/7e3))+r),l=a.subarray(i,a.length-r),c=s.l,u=(s.r||0)&7;if(e){u&&(l[0]=s.r>>3);for(var h=HW[e-1],f=h>>13,d=h&8191,p=(1<<n)-1,m=s.p||new Pr(32768),v=s.h||new Pr(p+1),y=Math.ceil(n/3),x=2*y,b=function(ke){return(t[ke]^t[ke+1]<<y^t[ke+2]<<x)&p},E=new Z5(25e3),T=new Pr(288),D=new Pr(32),R=0,S=0,C=s.i||0,N=0,k=s.w||0,P=0;C+2<o;++C){var j=b(C),F=C&32767,H=v[j];if(m[F]=H,v[j]=F,k<=C){var O=o-C;if((R>7e3||N>24576)&&(O>423||!c)){u=bT(t,l,0,E,T,D,S,N,P,C-P,u),N=R=S=0,P=C;for(var $=0;$<286;++$)T[$]=0;for(var $=0;$<30;++$)D[$]=0}var z=2,B=0,X=d,te=F-H&32767;if(O>2&&j==b(C-te))for(var I=Math.min(f,O)-1,U=Math.min(32767,C),K=Math.min(258,O);te<=U&&--X&&F!=H;){if(t[C+z]==t[C+z-te]){for(var Q=0;Q<K&&t[C+Q]==t[C+Q-te];++Q);if(Q>z){if(z=Q,B=te,Q>I)break;for(var ee=Math.min(te,Q-2),oe=0,$=0;$<ee;++$){var se=C-te+$&32767,ae=m[se],Ee=se-ae&32767;Ee>oe&&(oe=Ee,H=se)}}}F=H,H=m[F],te+=F-H&32767}if(B){E[N++]=268435456|Nx[z]<<18|vT[B];var we=Nx[z]&31,Pe=vT[B]&31;S+=i1[we]+r1[Pe],++T[257+we],++D[Pe],k=C+z,++R}else E[N++]=t[C],++T[t[C]]}}for(C=Math.max(C,k);C<o;++C)E[N++]=t[C],++T[t[C]];u=bT(t,l,c,E,T,D,S,N,P,C-P,u),c||(s.r=u&7|l[u/8|0]<<3,u-=7,s.h=v,s.p=m,s.i=C,s.w=k)}else{for(var C=s.w||0;C<o+c;C+=65535){var be=C+65535;be>=o&&(l[u/8|0]=c,be=o),u=jR(l,u+1,t.subarray(C,be))}s.i=o}return BR(a,0,i+ew(u)+r)},$R=function(){var t=1,e=0;return{p:function(n){for(var i=t,r=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)r+=i+=n[o];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}t=i,e=r},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},GW=function(t,e,n,i,r){if(!r&&(r={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Mi(s.length+t.length);o.set(s),o.set(t,s.length),t=o,r.w=s.length}return VW(t,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,i,r)},zR=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},WW=function(t,e){var n=e.level,i=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=i<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var r=$R();r.p(e.dictionary),zR(t,2,r.d())}},qW=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ws(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&ws(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Mx(t,e){e||(e={});var n=$R();n.p(t);var i=GW(t,e,e.dictionary?6:2,4);return WW(i,e),zR(i,i.length-4,n.d()),i}function KW(t,e){return zW(t.subarray(qW(t,e),-4),{i:2},e,e)}var YW=typeof TextDecoder<"u"&&new TextDecoder,XW=0;try{YW.decode(UR,{stream:!0}),XW=1}catch{}var pt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function yv(){pt.console&&typeof pt.console.log=="function"&&pt.console.log.apply(pt.console,arguments)}var sn={log:yv,warn:function(t){pt.console&&(typeof pt.console.warn=="function"?pt.console.warn.apply(pt.console,arguments):yv.call(null,arguments))},error:function(t){pt.console&&(typeof pt.console.error=="function"?pt.console.error.apply(pt.console,arguments):yv(t))}};function vv(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){kl(i.response,e,n)},i.onerror=function(){sn.error("could not download file")},i.send()}function wT(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function x0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var _f,Fx,kl=pt.saveAs||((typeof window>"u"?"undefined":Zt(window))!=="object"||window!==pt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=pt.URL||pt.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener",typeof t=="string"?(r.href=t,r.origin!==location.origin?wT(r.href)?vv(t,e,n):x0(r,r.target="_blank"):x0(r)):(r.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){x0(r)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(wT(t))vv(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){x0(i)})}else navigator.msSaveOrOpenBlob(function(r,s){return s===void 0?s={autoBom:!1}:Zt(s)!=="object"&&(sn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return vv(t,e,n);var r=t.type==="application/octet-stream",s=/constructor/i.test(pt.HTMLElement)||pt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&s)&&(typeof FileReader>"u"?"undefined":Zt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=u:location=u,i=null},a.readAsDataURL(t)}else{var l=pt.URL||pt.webkitURL,c=l.createObjectURL(t);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function HR(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,s=n[i].process,o=r.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xv(t,e){var n=t[0],i=t[1],r=t[2],s=t[3];n=ki(n,i,r,s,e[0],7,-680876936),s=ki(s,n,i,r,e[1],12,-389564586),r=ki(r,s,n,i,e[2],17,606105819),i=ki(i,r,s,n,e[3],22,-1044525330),n=ki(n,i,r,s,e[4],7,-176418897),s=ki(s,n,i,r,e[5],12,1200080426),r=ki(r,s,n,i,e[6],17,-1473231341),i=ki(i,r,s,n,e[7],22,-45705983),n=ki(n,i,r,s,e[8],7,1770035416),s=ki(s,n,i,r,e[9],12,-1958414417),r=ki(r,s,n,i,e[10],17,-42063),i=ki(i,r,s,n,e[11],22,-1990404162),n=ki(n,i,r,s,e[12],7,1804603682),s=ki(s,n,i,r,e[13],12,-40341101),r=ki(r,s,n,i,e[14],17,-1502002290),n=Ci(n,i=ki(i,r,s,n,e[15],22,1236535329),r,s,e[1],5,-165796510),s=Ci(s,n,i,r,e[6],9,-1069501632),r=Ci(r,s,n,i,e[11],14,643717713),i=Ci(i,r,s,n,e[0],20,-373897302),n=Ci(n,i,r,s,e[5],5,-701558691),s=Ci(s,n,i,r,e[10],9,38016083),r=Ci(r,s,n,i,e[15],14,-660478335),i=Ci(i,r,s,n,e[4],20,-405537848),n=Ci(n,i,r,s,e[9],5,568446438),s=Ci(s,n,i,r,e[14],9,-1019803690),r=Ci(r,s,n,i,e[3],14,-187363961),i=Ci(i,r,s,n,e[8],20,1163531501),n=Ci(n,i,r,s,e[13],5,-1444681467),s=Ci(s,n,i,r,e[2],9,-51403784),r=Ci(r,s,n,i,e[7],14,1735328473),n=Ri(n,i=Ci(i,r,s,n,e[12],20,-1926607734),r,s,e[5],4,-378558),s=Ri(s,n,i,r,e[8],11,-2022574463),r=Ri(r,s,n,i,e[11],16,1839030562),i=Ri(i,r,s,n,e[14],23,-35309556),n=Ri(n,i,r,s,e[1],4,-1530992060),s=Ri(s,n,i,r,e[4],11,1272893353),r=Ri(r,s,n,i,e[7],16,-155497632),i=Ri(i,r,s,n,e[10],23,-1094730640),n=Ri(n,i,r,s,e[13],4,681279174),s=Ri(s,n,i,r,e[0],11,-358537222),r=Ri(r,s,n,i,e[3],16,-722521979),i=Ri(i,r,s,n,e[6],23,76029189),n=Ri(n,i,r,s,e[9],4,-640364487),s=Ri(s,n,i,r,e[12],11,-421815835),r=Ri(r,s,n,i,e[15],16,530742520),n=Pi(n,i=Ri(i,r,s,n,e[2],23,-995338651),r,s,e[0],6,-198630844),s=Pi(s,n,i,r,e[7],10,1126891415),r=Pi(r,s,n,i,e[14],15,-1416354905),i=Pi(i,r,s,n,e[5],21,-57434055),n=Pi(n,i,r,s,e[12],6,1700485571),s=Pi(s,n,i,r,e[3],10,-1894986606),r=Pi(r,s,n,i,e[10],15,-1051523),i=Pi(i,r,s,n,e[1],21,-2054922799),n=Pi(n,i,r,s,e[8],6,1873313359),s=Pi(s,n,i,r,e[15],10,-30611744),r=Pi(r,s,n,i,e[6],15,-1560198380),i=Pi(i,r,s,n,e[13],21,1309151649),n=Pi(n,i,r,s,e[4],6,-145523070),s=Pi(s,n,i,r,e[11],10,-1120210379),r=Pi(r,s,n,i,e[2],15,718787259),i=Pi(i,r,s,n,e[9],21,-343485551),t[0]=Da(n,t[0]),t[1]=Da(i,t[1]),t[2]=Da(r,t[2]),t[3]=Da(s,t[3])}function s1(t,e,n,i,r,s){return e=Da(Da(e,t),Da(i,s)),Da(e<<r|e>>>32-r,n)}function ki(t,e,n,i,r,s,o){return s1(e&n|~e&i,t,e,r,s,o)}function Ci(t,e,n,i,r,s,o){return s1(e&i|n&~i,t,e,r,s,o)}function Ri(t,e,n,i,r,s,o){return s1(e^n^i,t,e,r,s,o)}function Pi(t,e,n,i,r,s,o){return s1(n^(e|~i),t,e,r,s,o)}function VR(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)xv(i,JW(t.substring(e-64,e)));t=t.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(xv(i,r),e=0;e<16;e++)r[e]=0;return r[14]=8*n,xv(i,r),i}function JW(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}_f=pt.atob.bind(pt),Fx=pt.btoa.bind(pt);var ST="0123456789abcdef".split("");function QW(t){for(var e="",n=0;n<4;n++)e+=ST[t>>8*n+4&15]+ST[t>>8*n&15];return e}function ZW(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Ox(t){return VR(t).map(ZW).join("")}var eq=function(t){for(var e=0;e<t.length;e++)t[e]=QW(t[e]);return t.join("")}(VR("hello"))!="5d41402abc4b2a76b9719d911017c592";function Da(t,e){if(eq){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Bx(t,e){var n,i,r,s;if(t!==n){for(var o=(r=t,s=1+(256/t.length>>0),new Array(s+1).join(r)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,i=a}else a=i;var h=e.length,f=0,d=0,p="";for(l=0;l<h;l++)d=(d+(u=a[f=(f+1)%256]))%256,a[f]=a[d],a[d]=u,o=a[(a[f]+a[d])%256],p+=String.fromCharCode(e.charCodeAt(l)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var _T={print:4,modify:8,copy:16,"annot-forms":32};function qc(t,e,n,i){this.v=1,this.r=2;var r=192;t.forEach(function(a){if(_T.perm!==void 0)throw new Error("Invalid permission: "+a);r+=_T[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^r)),this.encryptionKey=Ox(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Bx(this.encryptionKey,this.padding)}function Kc(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var r=t.charCodeAt(i);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=t[i]}return e}function ET(t){if(Zt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,i,r){if(r=r||!1,typeof n!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[i,!!r],s},this.unsubscribe=function(n){for(var i in e)if(e[i][n])return delete e[i][n],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,i)}catch(a){pt.console&&sn.error("jsPDF PubSub Error",a.message,a)}o[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function dd(t){if(!(this instanceof dd))return new dd(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function GR(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function La(t,e,n,i,r){if(!(this instanceof La))return new La(t,e,n,i,r);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,GR.call(this,i,r)}function Dl(t,e,n,i,r){if(!(this instanceof Dl))return new Dl(t,e,n,i,r);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,GR.call(this,i,r)}function ut(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",u=null;Zt(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,r=t.format||r,s=t.compress||t.compressPdf||s,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),i=i||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,f={},d={internal:{},__private__:{}};d.__private__.PubSub=ET;var p="1.3",m=d.__private__.getPdfVersion=function(){return p};d.__private__.setPdfVersion=function(_){p=_};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return v};var y=d.__private__.getPageFormat=function(_){return v[_]};r=r||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},b=x.COMPAT;function E(){this.saveGraphicsState(),ie(new at($e,0,0,-$e,0,na()*$e).toString()+" cm"),this.setFontSize(this.getFontSize()/$e),c="n",b=x.ADVANCED}function T(){this.restoreGraphicsState(),c="S",b=x.COMPAT}var D=d.__private__.combineFontStyleAndFontWeight=function(_,G){if(_=="bold"&&G=="normal"||_=="bold"&&G==400||_=="normal"&&G=="italic"||_=="bold"&&G=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return G&&(_=G==400||G==="normal"?_==="italic"?"italic":"normal":G!=700&&G!=="bold"||_!=="normal"?(G==700?"bold":G)+""+_:"bold"),_};d.advancedAPI=function(_){var G=b===x.COMPAT;return G&&E.call(this),typeof _!="function"||(_(this),G&&T.call(this)),this},d.compatAPI=function(_){var G=b===x.ADVANCED;return G&&T.call(this),typeof _!="function"||(_(this),G&&E.call(this)),this},d.isAdvancedAPI=function(){return b===x.ADVANCED};var R,S=function(_){if(b!==x.ADVANCED)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=d.roundToPrecision=d.__private__.roundToPrecision=function(_,G){var re=e||G;if(isNaN(_)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(re).replace(/0+$/,"")};R=d.hpf=d.__private__.hpf=typeof l=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return C(_,l)}:l==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return C(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return C(_,16)};var N=d.f2=d.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return C(_,2)},k=d.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return C(_,3)},P=d.scale=d.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return b===x.COMPAT?_*$e:b===x.ADVANCED?_:void 0},j=function(_){return b===x.COMPAT?na()-_:b===x.ADVANCED?_:void 0},F=function(_){return P(j(_))};d.__private__.setPrecision=d.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var H,O="00000000000000000000000000000000",$=d.__private__.getFileId=function(){return O},z=d.__private__.setFileId=function(_){return O=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():O.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Ei=new qc(u.userPermissions,u.userPassword,u.ownerPassword,O)),O};d.setFileId=function(_){return z(_),this},d.getFileId=function(){return $()};var B=d.__private__.convertDateToPDFDate=function(_){var G=_.getTimezoneOffset(),re=G<0?"+":"-",le=Math.floor(Math.abs(G/60)),ge=Math.abs(G%60),Ae=[re,K(le),"'",K(ge),"'"].join("");return["D:",_.getFullYear(),K(_.getMonth()+1),K(_.getDate()),K(_.getHours()),K(_.getMinutes()),K(_.getSeconds()),Ae].join("")},X=d.__private__.convertPDFDateToDate=function(_){var G=parseInt(_.substr(2,4),10),re=parseInt(_.substr(6,2),10)-1,le=parseInt(_.substr(8,2),10),ge=parseInt(_.substr(10,2),10),Ae=parseInt(_.substr(12,2),10),Me=parseInt(_.substr(14,2),10);return new Date(G,re,le,ge,Ae,Me,0)},te=d.__private__.setCreationDate=function(_){var G;if(_===void 0&&(_=new Date),_ instanceof Date)G=B(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");G=_}return H=G},I=d.__private__.getCreationDate=function(_){var G=H;return _==="jsDate"&&(G=X(H)),G};d.setCreationDate=function(_){return te(_),this},d.getCreationDate=function(_){return I(_)};var U,K=d.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},Q=d.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},ee=0,oe=[],se=[],ae=0,Ee=[],we=[],Pe=!1,be=se,ke=function(){ee=0,ae=0,se=[],oe=[],Ee=[],mo=ln(),as=ln()};d.__private__.setCustomOutputDestination=function(_){Pe=!0,be=_};var pe=function(_){Pe||(be=_)};d.__private__.resetCustomOutputDestination=function(){Pe=!1,be=se};var ie=d.__private__.out=function(_){return _=_.toString(),ae+=_.length+1,be.push(_),be},nt=d.__private__.write=function(_){return ie(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},De=d.__private__.getArrayBuffer=function(_){for(var G=_.length,re=new ArrayBuffer(G),le=new Uint8Array(re);G--;)le[G]=_.charCodeAt(G);return re},Te=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return Te};var Oe=t.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(_){return Oe=b===x.ADVANCED?_/$e:_,this};var Ue,Be=d.__private__.getFontSize=d.getFontSize=function(){return b===x.COMPAT?Oe:Oe*$e},et=t.R2L||!1;d.__private__.setR2L=d.setR2L=function(_){return et=_,this},d.__private__.getR2L=d.getR2L=function(){return et};var Je,it=d.__private__.setZoomMode=function(_){var G=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))Ue=_;else if(isNaN(_)){if(G.indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');Ue=_}else Ue=parseInt(_,10)};d.__private__.getZoomMode=function(){return Ue};var Ze,dt=d.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');Je=_};d.__private__.getPageMode=function(){return Je};var bt=d.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');Ze=_};d.__private__.getLayoutMode=function(){return Ze},d.__private__.setDisplayMode=d.setDisplayMode=function(_,G,re){return it(_),bt(G),dt(re),this};var st={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(_){if(Object.keys(st).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return st[_]},d.__private__.getDocumentProperties=function(){return st},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(_){for(var G in st)st.hasOwnProperty(G)&&_[G]&&(st[G]=_[G]);return this},d.__private__.setDocumentProperty=function(_,G){if(Object.keys(st).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return st[_]=G};var wt,$e,Wt,Tt,_i,qt={},nn={},os=[],Mt={},Zi={},xn={},xr={},Ct=null,Vt=0,Ve=[],Pt=new ET(d),Zo=t.hotfixes||[],Qn={},Fr={},br=[],at=function _(G,re,le,ge,Ae,Me){if(!(this instanceof _))return new _(G,re,le,ge,Ae,Me);isNaN(G)&&(G=1),isNaN(re)&&(re=0),isNaN(le)&&(le=0),isNaN(ge)&&(ge=1),isNaN(Ae)&&(Ae=0),isNaN(Me)&&(Me=0),this._matrix=[G,re,le,ge,Ae,Me]};Object.defineProperty(at.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(at.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(at.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(at.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(at.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(at.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(at.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(at.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(at.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(at.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(at.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(at.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(at.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(at.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(at.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(at.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),at.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(_)},at.prototype.multiply=function(_){var G=_.sx*this.sx+_.shy*this.shx,re=_.sx*this.shy+_.shy*this.sy,le=_.shx*this.sx+_.sy*this.shx,ge=_.shx*this.shy+_.sy*this.sy,Ae=_.tx*this.sx+_.ty*this.shx+this.tx,Me=_.tx*this.shy+_.ty*this.sy+this.ty;return new at(G,re,le,ge,Ae,Me)},at.prototype.decompose=function(){var _=this.sx,G=this.shy,re=this.shx,le=this.sy,ge=this.tx,Ae=this.ty,Me=Math.sqrt(_*_+G*G),Ge=(_/=Me)*re+(G/=Me)*le;re-=_*Ge,le-=G*Ge;var rt=Math.sqrt(re*re+le*le);return Ge/=rt,_*(le/=rt)<G*(re/=rt)&&(_=-_,G=-G,Ge=-Ge,Me=-Me),{scale:new at(Me,0,0,rt,0,0),translate:new at(1,0,0,1,ge,Ae),rotate:new at(_,G,-G,_,0,0),skew:new at(1,0,Ge,1,0,0)}},at.prototype.toString=function(_){return this.join(" ")},at.prototype.inversed=function(){var _=this.sx,G=this.shy,re=this.shx,le=this.sy,ge=this.tx,Ae=this.ty,Me=1/(_*le-G*re),Ge=le*Me,rt=-G*Me,_t=-re*Me,vt=_*Me;return new at(Ge,rt,_t,vt,-Ge*ge-_t*Ae,-rt*ge-vt*Ae)},at.prototype.applyToPoint=function(_){var G=_.x*this.sx+_.y*this.shx+this.tx,re=_.x*this.shy+_.y*this.sy+this.ty;return new bc(G,re)},at.prototype.applyToRectangle=function(_){var G=this.applyToPoint(_),re=this.applyToPoint(new bc(_.x+_.w,_.y+_.h));return new eh(G.x,G.y,re.x-G.x,re.y-G.y)},at.prototype.clone=function(){var _=this.sx,G=this.shy,re=this.shx,le=this.sy,ge=this.tx,Ae=this.ty;return new at(_,G,re,le,ge,Ae)},d.Matrix=at;var St=d.matrixMult=function(_,G){return G.multiply(_)},mt=new at(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=mt;var Kt=function(_,G){if(!Zi[_]){var re=(G instanceof La?"Sh":"P")+(Object.keys(Mt).length+1).toString(10);G.id=re,Zi[_]=re,Mt[re]=G,Pt.publish("addPattern",G)}};d.ShadingPattern=La,d.TilingPattern=Dl,d.addShadingPattern=function(_,G){return S("addShadingPattern()"),Kt(_,G),this},d.beginTilingPattern=function(_){S("beginTilingPattern()"),qd(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},d.endTilingPattern=function(_,G){S("endTilingPattern()"),G.stream=we[U].join(`
`),Kt(_,G),Pt.publish("endTilingPattern",G),br.pop().restore()};var an=d.__private__.newObject=function(){var _=ln();return er(_,!0),_},ln=d.__private__.newObjectDeferred=function(){return ee++,oe[ee]=function(){return ae},ee},er=function(_,G){return G=typeof G=="boolean"&&G,oe[_]=ae,G&&ie(_+" 0 obj"),_},ac=d.__private__.newAdditionalObject=function(){var _={objId:ln(),content:""};return Ee.push(_),_},mo=ln(),as=ln(),ls=d.__private__.decodeColorString=function(_){var G=_.split(" ");if(G.length!==2||G[1]!=="g"&&G[1]!=="G")G.length===5&&(G[4]==="k"||G[4]==="K")&&(G=[(1-G[0])*(1-G[3]),(1-G[1])*(1-G[3]),(1-G[2])*(1-G[3]),"r"]);else{var re=parseFloat(G[0]);G=[re,re,re,"r"]}for(var le="#",ge=0;ge<3;ge++)le+=("0"+Math.floor(255*parseFloat(G[ge])).toString(16)).slice(-2);return le},cs=d.__private__.encodeColorString=function(_){var G;typeof _=="string"&&(_={ch1:_});var re=_.ch1,le=_.ch2,ge=_.ch3,Ae=_.ch4,Me=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var Ge=new HR(re);if(Ge.ok)re=Ge.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var rt=parseInt(re.substr(1),16);re=rt>>16&255,le=rt>>8&255,ge=255&rt}if(le===void 0||Ae===void 0&&re===le&&le===ge)if(typeof re=="string")G=re+" "+Me[0];else switch(_.precision){case 2:G=N(re/255)+" "+Me[0];break;case 3:default:G=k(re/255)+" "+Me[0]}else if(Ae===void 0||Zt(Ae)==="object"){if(Ae&&!isNaN(Ae.a)&&Ae.a===0)return G=["1.","1.","1.",Me[1]].join(" ");if(typeof re=="string")G=[re,le,ge,Me[1]].join(" ");else switch(_.precision){case 2:G=[N(re/255),N(le/255),N(ge/255),Me[1]].join(" ");break;default:case 3:G=[k(re/255),k(le/255),k(ge/255),Me[1]].join(" ")}}else if(typeof re=="string")G=[re,le,ge,Ae,Me[2]].join(" ");else switch(_.precision){case 2:G=[N(re),N(le),N(ge),N(Ae),Me[2]].join(" ");break;case 3:default:G=[k(re),k(le),k(ge),k(Ae),Me[2]].join(" ")}return G},Ds=d.__private__.getFilters=function(){return o},Or=d.__private__.putStream=function(_){var G=(_=_||{}).data||"",re=_.filters||Ds(),le=_.alreadyAppliedFilters||[],ge=_.addLength1||!1,Ae=G.length,Me=_.objectId,Ge=function(Ai){return Ai};if(u!==null&&Me===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Ge=Ei.encryptor(Me,0));var rt={};re===!0&&(re=["FlateEncode"]);var _t=_.additionalKeyValues||[],vt=(rt=ut.API.processDataByFilters!==void 0?ut.API.processDataByFilters(G,re):{data:G,reverseChain:[]}).reverseChain+(Array.isArray(le)?le.join(" "):le.toString());if(rt.data.length!==0&&(_t.push({key:"Length",value:rt.data.length}),ge===!0&&_t.push({key:"Length1",value:Ae})),vt.length!=0)if(vt.split("/").length-1==1)_t.push({key:"Filter",value:vt});else{_t.push({key:"Filter",value:"["+vt+"]"});for(var Ot=0;Ot<_t.length;Ot+=1)if(_t[Ot].key==="DecodeParms"){for(var _n=[],Pn=0;Pn<rt.reverseChain.split("/").length-1;Pn+=1)_n.push("null");_n.push(_t[Ot].value),_t[Ot].value="["+_n.join(" ")+"]"}}ie("<<");for(var Wn=0;Wn<_t.length;Wn++)ie("/"+_t[Wn].key+" "+_t[Wn].value);ie(">>"),rt.data.length!==0&&(ie("stream"),ie(Ge(rt.data)),ie("endstream"))},Ms=d.__private__.putPage=function(_){var G=_.number,re=_.data,le=_.objId,ge=_.contentsObjId;er(le,!0),ie("<</Type /Page"),ie("/Parent "+_.rootDictionaryObjId+" 0 R"),ie("/Resources "+_.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(R(_.mediaBox.bottomLeftX))+" "+parseFloat(R(_.mediaBox.bottomLeftY))+" "+R(_.mediaBox.topRightX)+" "+R(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&ie("/CropBox ["+R(_.cropBox.bottomLeftX)+" "+R(_.cropBox.bottomLeftY)+" "+R(_.cropBox.topRightX)+" "+R(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&ie("/BleedBox ["+R(_.bleedBox.bottomLeftX)+" "+R(_.bleedBox.bottomLeftY)+" "+R(_.bleedBox.topRightX)+" "+R(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&ie("/TrimBox ["+R(_.trimBox.bottomLeftX)+" "+R(_.trimBox.bottomLeftY)+" "+R(_.trimBox.topRightX)+" "+R(_.trimBox.topRightY)+"]"),_.artBox!==null&&ie("/ArtBox ["+R(_.artBox.bottomLeftX)+" "+R(_.artBox.bottomLeftY)+" "+R(_.artBox.topRightX)+" "+R(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&ie("/UserUnit "+_.userUnit),Pt.publish("putPage",{objId:le,pageContext:Ve[G],pageNumber:G,page:re}),ie("/Contents "+ge+" 0 R"),ie(">>"),ie("endobj");var Ae=re.join(`
`);return b===x.ADVANCED&&(Ae+=`
Q`),er(ge,!0),Or({data:Ae,filters:Ds(),objectId:ge}),ie("endobj"),le},il=d.__private__.putPages=function(){var _,G,re=[];for(_=1;_<=Vt;_++)Ve[_].objId=ln(),Ve[_].contentsObjId=ln();for(_=1;_<=Vt;_++)re.push(Ms({number:_,data:we[_],objId:Ve[_].objId,contentsObjId:Ve[_].contentsObjId,mediaBox:Ve[_].mediaBox,cropBox:Ve[_].cropBox,bleedBox:Ve[_].bleedBox,trimBox:Ve[_].trimBox,artBox:Ve[_].artBox,userUnit:Ve[_].userUnit,rootDictionaryObjId:mo,resourceDictionaryObjId:as}));er(mo,!0),ie("<</Type /Pages");var le="/Kids [";for(G=0;G<Vt;G++)le+=re[G]+" 0 R ";ie(le+"]"),ie("/Count "+Vt),ie(">>"),ie("endobj"),Pt.publish("postPutPages")},lc=function(_){Pt.publish("putFont",{font:_,out:ie,newObject:an,putStream:Or}),_.isAlreadyPutted!==!0&&(_.objectNumber=an(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+Kc(_.postScriptName)),ie("/Subtype /Type1"),typeof _.encoding=="string"&&ie("/Encoding /"+_.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},cc=function(){for(var _ in qt)qt.hasOwnProperty(_)&&(h===!1||h===!0&&f.hasOwnProperty(_))&&lc(qt[_])},uc=function(_){_.objectNumber=an();var G=[];G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Form"}),G.push({key:"BBox",value:"["+[R(_.x),R(_.y),R(_.x+_.width),R(_.y+_.height)].join(" ")+"]"}),G.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var re=_.pages[1].join(`
`);Or({data:re,additionalKeyValues:G,objectId:_.objectNumber}),ie("endobj")},hc=function(){for(var _ in Qn)Qn.hasOwnProperty(_)&&uc(Qn[_])},Cd=function(_,G){var re,le=[],ge=1/(G-1);for(re=0;re<1;re+=ge)le.push(re);if(le.push(1),_[0].offset!=0){var Ae={offset:0,color:_[0].color};_.unshift(Ae)}if(_[_.length-1].offset!=1){var Me={offset:1,color:_[_.length-1].color};_.push(Me)}for(var Ge="",rt=0,_t=0;_t<le.length;_t++){for(re=le[_t];re>_[rt+1].offset;)rt++;var vt=_[rt].offset,Ot=(re-vt)/(_[rt+1].offset-vt),_n=_[rt].color,Pn=_[rt+1].color;Ge+=Q(Math.round((1-Ot)*_n[0]+Ot*Pn[0]).toString(16))+Q(Math.round((1-Ot)*_n[1]+Ot*Pn[1]).toString(16))+Q(Math.round((1-Ot)*_n[2]+Ot*Pn[2]).toString(16))}return Ge.trim()},o1=function(_,G){G||(G=21);var re=an(),le=Cd(_.colors,G),ge=[];ge.push({key:"FunctionType",value:"0"}),ge.push({key:"Domain",value:"[0.0 1.0]"}),ge.push({key:"Size",value:"["+G+"]"}),ge.push({key:"BitsPerSample",value:"8"}),ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Or({data:le,additionalKeyValues:ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),ie("endobj"),_.objectNumber=an(),ie("<< /ShadingType "+_.type),ie("/ColorSpace /DeviceRGB");var Ae="/Coords ["+R(parseFloat(_.coords[0]))+" "+R(parseFloat(_.coords[1]))+" ";_.type===2?Ae+=R(parseFloat(_.coords[2]))+" "+R(parseFloat(_.coords[3])):Ae+=R(parseFloat(_.coords[2]))+" "+R(parseFloat(_.coords[3]))+" "+R(parseFloat(_.coords[4]))+" "+R(parseFloat(_.coords[5])),ie(Ae+="]"),_.matrix&&ie("/Matrix ["+_.matrix.toString()+"]"),ie("/Function "+re+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},a1=function(_,G){var re=ln(),le=an();G.push({resourcesOid:re,objectOid:le}),_.objectNumber=le;var ge=[];ge.push({key:"Type",value:"/Pattern"}),ge.push({key:"PatternType",value:"1"}),ge.push({key:"PaintType",value:"1"}),ge.push({key:"TilingType",value:"1"}),ge.push({key:"BBox",value:"["+_.boundingBox.map(R).join(" ")+"]"}),ge.push({key:"XStep",value:R(_.xStep)}),ge.push({key:"YStep",value:R(_.yStep)}),ge.push({key:"Resources",value:re+" 0 R"}),_.matrix&&ge.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Or({data:_.stream,additionalKeyValues:ge,objectId:_.objectNumber}),ie("endobj")},fc=function(_){var G;for(G in Mt)Mt.hasOwnProperty(G)&&(Mt[G]instanceof La?o1(Mt[G]):Mt[G]instanceof Dl&&a1(Mt[G],_))},Rd=function(_){for(var G in _.objectNumber=an(),ie("<<"),_)switch(G){case"opacity":ie("/ca "+N(_[G]));break;case"stroke-opacity":ie("/CA "+N(_[G]))}ie(">>"),ie("endobj")},l1=function(){var _;for(_ in xn)xn.hasOwnProperty(_)&&Rd(xn[_])},Vu=function(){for(var _ in ie("/XObject <<"),Qn)Qn.hasOwnProperty(_)&&Qn[_].objectNumber>=0&&ie("/"+_+" "+Qn[_].objectNumber+" 0 R");Pt.publish("putXobjectDict"),ie(">>")},c1=function(){Ei.oid=an(),ie("<<"),ie("/Filter /Standard"),ie("/V "+Ei.v),ie("/R "+Ei.r),ie("/U <"+Ei.toHexString(Ei.U)+">"),ie("/O <"+Ei.toHexString(Ei.O)+">"),ie("/P "+Ei.P),ie(">>"),ie("endobj")},Pd=function(){for(var _ in ie("/Font <<"),qt)qt.hasOwnProperty(_)&&(h===!1||h===!0&&f.hasOwnProperty(_))&&ie("/"+_+" "+qt[_].objectNumber+" 0 R");ie(">>")},u1=function(){if(Object.keys(Mt).length>0){for(var _ in ie("/Shading <<"),Mt)Mt.hasOwnProperty(_)&&Mt[_]instanceof La&&Mt[_].objectNumber>=0&&ie("/"+_+" "+Mt[_].objectNumber+" 0 R");Pt.publish("putShadingPatternDict"),ie(">>")}},dc=function(_){if(Object.keys(Mt).length>0){for(var G in ie("/Pattern <<"),Mt)Mt.hasOwnProperty(G)&&Mt[G]instanceof d.TilingPattern&&Mt[G].objectNumber>=0&&Mt[G].objectNumber<_&&ie("/"+G+" "+Mt[G].objectNumber+" 0 R");Pt.publish("putTilingPatternDict"),ie(">>")}},h1=function(){if(Object.keys(xn).length>0){var _;for(_ in ie("/ExtGState <<"),xn)xn.hasOwnProperty(_)&&xn[_].objectNumber>=0&&ie("/"+_+" "+xn[_].objectNumber+" 0 R");Pt.publish("putGStateDict"),ie(">>")}},Bn=function(_){er(_.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Pd(),u1(),dc(_.objectOid),h1(),Vu(),ie(">>"),ie("endobj")},Nd=function(){var _=[];cc(),l1(),hc(),fc(_),Pt.publish("putResources"),_.forEach(Bn),Bn({resourcesOid:as,objectOid:Number.MAX_SAFE_INTEGER}),Pt.publish("postPutResources")},Id=function(){Pt.publish("putAdditionalObjects");for(var _=0;_<Ee.length;_++){var G=Ee[_];er(G.objId,!0),ie(G.content),ie("endobj")}Pt.publish("postPutAdditionalObjects")},Dd=function(_){nn[_.fontName]=nn[_.fontName]||{},nn[_.fontName][_.fontStyle]=_.id},Gu=function(_,G,re,le,ge){var Ae={id:"F"+(Object.keys(qt).length+1).toString(10),postScriptName:_,fontName:G,fontStyle:re,encoding:le,isStandardFont:ge||!1,metadata:{}};return Pt.publish("addFont",{font:Ae,instance:this}),qt[Ae.id]=Ae,Dd(Ae),Ae.id},f1=function(_){for(var G=0,re=Te.length;G<re;G++){var le=Gu.call(this,_[G][0],_[G][1],_[G][2],Te[G][3],!0);h===!1&&(f[le]=!0);var ge=_[G][0].split("-");Dd({id:le,fontName:ge[0],fontStyle:ge[1]||""})}Pt.publish("addFonts",{fonts:qt,dictionary:nn})},us=function(_){return _.foo=function(){try{return _.apply(this,arguments)}catch(le){var G=le.stack||"";~G.indexOf(" at ")&&(G=G.split(" at ")[1]);var re="Error in function "+G.split(`
`)[0].split("<")[0]+": "+le.message;if(!pt.console)throw new Error(re);pt.console.error(re,le),pt.alert&&alert(re)}},_.foo.bar=_,_.foo},pc=function(_,G){var re,le,ge,Ae,Me,Ge,rt,_t,vt;if(ge=(G=G||{}).sourceEncoding||"Unicode",Me=G.outputEncoding,(G.autoencode||Me)&&qt[wt].metadata&&qt[wt].metadata[ge]&&qt[wt].metadata[ge].encoding&&(Ae=qt[wt].metadata[ge].encoding,!Me&&qt[wt].encoding&&(Me=qt[wt].encoding),!Me&&Ae.codePages&&(Me=Ae.codePages[0]),typeof Me=="string"&&(Me=Ae[Me]),Me)){for(rt=!1,Ge=[],re=0,le=_.length;re<le;re++)(_t=Me[_.charCodeAt(re)])?Ge.push(String.fromCharCode(_t)):Ge.push(_[re]),Ge[re].charCodeAt(0)>>8&&(rt=!0);_=Ge.join("")}for(re=_.length;rt===void 0&&re!==0;)_.charCodeAt(re-1)>>8&&(rt=!0),re--;if(!rt)return _;for(Ge=G.noBOM?[]:[254,255],re=0,le=_.length;re<le;re++){if((vt=(_t=_.charCodeAt(re))>>8)>>8)throw new Error("Character at position "+re+" of string '"+_+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ge.push(vt),Ge.push(_t-(vt<<8))}return String.fromCharCode.apply(void 0,Ge)},tr=d.__private__.pdfEscape=d.pdfEscape=function(_,G){return pc(_,G).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wu=d.__private__.beginPage=function(_){we[++Vt]=[],Ve[Vt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},Fd(Vt),pe(we[U])},Md=function(_,G){var re,le,ge;switch(n=G||n,typeof _=="string"&&(re=y(_.toLowerCase()),Array.isArray(re)&&(le=re[0],ge=re[1])),Array.isArray(_)&&(le=_[0]*$e,ge=_[1]*$e),isNaN(le)&&(le=r[0],ge=r[1]),(le>14400||ge>14400)&&(sn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),le=Math.min(14400,le),ge=Math.min(14400,ge)),r=[le,ge],n.substr(0,1)){case"l":ge>le&&(r=[ge,le]);break;case"p":le>ge&&(r=[ge,le])}Wu(r),zd(Xu),ie(hs),Qu!==0&&ie(Qu+" J"),Zu!==0&&ie(Zu+" j"),Pt.publish("addPage",{pageNumber:Vt})},d1=function(_){_>0&&_<=Vt&&(we.splice(_,1),Ve.splice(_,1),Vt--,U>Vt&&(U=Vt),this.setPage(U))},Fd=function(_){_>0&&_<=Vt&&(U=_)},p1=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return we.length-1},Od=function(_,G,re){var le,ge=void 0;return re=re||{},_=_!==void 0?_:qt[wt].fontName,G=G!==void 0?G:qt[wt].fontStyle,le=_.toLowerCase(),nn[le]!==void 0&&nn[le][G]!==void 0?ge=nn[le][G]:nn[_]!==void 0&&nn[_][G]!==void 0?ge=nn[_][G]:re.disableWarning===!1&&sn.warn("Unable to look up font label for font '"+_+"', '"+G+"'. Refer to getFontList() for available fonts."),ge||re.noFallback||(ge=nn.times[G])==null&&(ge=nn.times.normal),ge},g1=d.__private__.putInfo=function(){var _=an(),G=function(le){return le};for(var re in u!==null&&(G=Ei.encryptor(_,0)),ie("<<"),ie("/Producer ("+tr(G("jsPDF "+ut.version))+")"),st)st.hasOwnProperty(re)&&st[re]&&ie("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+tr(G(st[re]))+")");ie("/CreationDate ("+tr(G(H))+")"),ie(">>"),ie("endobj")},qu=d.__private__.putCatalog=function(_){var G=(_=_||{}).rootDictionaryObjId||mo;switch(an(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+G+" 0 R"),Ue||(Ue="fullwidth"),Ue){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+Ue;re.substr(re.length-1)==="%"&&(Ue=parseInt(Ue)/100),typeof Ue=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+N(Ue)+"]")}switch(Ze||(Ze="continuous"),Ze){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}Je&&ie("/PageMode /"+Je),Pt.publish("putCatalog"),ie(">>"),ie("endobj")},m1=d.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(ee+1)),ie("/Root "+ee+" 0 R"),ie("/Info "+(ee-1)+" 0 R"),u!==null&&ie("/Encrypt "+Ei.oid+" 0 R"),ie("/ID [ <"+O+"> <"+O+"> ]"),ie(">>")},y1=d.__private__.putHeader=function(){ie("%PDF-"+p),ie("%ºß¬à")},v1=d.__private__.putXRef=function(){var _="0000000000";ie("xref"),ie("0 "+(ee+1)),ie("0000000000 65535 f ");for(var G=1;G<=ee;G++)typeof oe[G]=="function"?ie((_+oe[G]()).slice(-10)+" 00000 n "):oe[G]!==void 0?ie((_+oe[G]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},yo=d.__private__.buildDocument=function(){ke(),pe(se),Pt.publish("buildDocument"),y1(),il(),Id(),Nd(),u!==null&&c1(),g1(),qu();var _=ae;return v1(),m1(),ie("startxref"),ie(""+_),ie("%%EOF"),pe(we[U]),se.join(`
`)},gc=d.__private__.getBlob=function(_){return new Blob([De(_)],{type:"application/pdf"})},mc=d.output=d.__private__.output=us(function(_,G){switch(typeof(G=G||{})=="string"?G={filename:G}:G.filename=G.filename||"generated.pdf",_){case void 0:return yo();case"save":d.save(G.filename);break;case"arraybuffer":return De(yo());case"blob":return gc(yo());case"bloburi":case"bloburl":if(pt.URL!==void 0&&typeof pt.URL.createObjectURL=="function")return pt.URL&&pt.URL.createObjectURL(gc(yo()))||void 0;sn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",le=yo();try{re=Fx(le)}catch{re=Fx(unescape(encodeURIComponent(le)))}return"data:application/pdf;filename="+G.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ae=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';G.pdfObjectUrl&&(ge=G.pdfObjectUrl,Ae="");var Me='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ge+'"'+Ae+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(G)+");<\/script></body></html>",Ge=pt.open();return Ge!==null&&Ge.document.write(Me),Ge}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(G.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+G.filename+'" width="500px" height="400px" /></body></html>',_t=pt.open();if(_t!==null){_t.document.write(rt);var vt=this;_t.document.documentElement.querySelector("#pdfViewer").onload=function(){_t.document.title=G.filename,_t.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vt.output("bloburl"))}}return _t}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(pt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",G)+'"></iframe></body></html>',_n=pt.open();if(_n!==null&&(_n.document.write(Ot),_n.document.title=G.filename),_n||typeof safari>"u")return _n;break;case"datauri":case"dataurl":return pt.document.location.href=this.output("datauristring",G);default:return null}}),Bd=function(_){return Array.isArray(Zo)===!0&&Zo.indexOf(_)>-1};switch(i){case"pt":$e=1;break;case"mm":$e=72/25.4;break;case"cm":$e=72/2.54;break;case"in":$e=72;break;case"px":$e=Bd("px_scaling")==1?.75:96/72;break;case"pc":case"em":$e=12;break;case"ex":$e=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);$e=i}var Ei=null;te(),z();var x1=function(_){return u!==null?Ei.encryptor(_,0):function(G){return G}},jd=d.__private__.getPageInfo=d.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ve[_].objId,pageNumber:_,pageContext:Ve[_]}},yt=d.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var G in Ve)if(Ve[G].objId===_)break;return jd(G)},b1=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:Ve[U].objId,pageNumber:U,pageContext:Ve[U]}};d.addPage=function(){return Md.apply(this,arguments),this},d.setPage=function(){return Fd.apply(this,arguments),pe.call(this,we[U]),this},d.insertPage=function(_){return this.addPage(),this.movePage(U,_),this},d.movePage=function(_,G){var re,le;if(_>G){re=we[_],le=Ve[_];for(var ge=_;ge>G;ge--)we[ge]=we[ge-1],Ve[ge]=Ve[ge-1];we[G]=re,Ve[G]=le,this.setPage(G)}else if(_<G){re=we[_],le=Ve[_];for(var Ae=_;Ae<G;Ae++)we[Ae]=we[Ae+1],Ve[Ae]=Ve[Ae+1];we[G]=re,Ve[G]=le,this.setPage(G)}return this},d.deletePage=function(){return d1.apply(this,arguments),this},d.__private__.text=d.text=function(_,G,re,le,ge){var Ae,Me,Ge,rt,_t,vt,Ot,_n,Pn,Wn=(le=le||{}).scope||this;if(typeof _=="number"&&typeof G=="number"&&(typeof re=="string"||Array.isArray(re))){var Ai=re;re=G,G=_,_=Ai}if(arguments[3]instanceof at?(S("The transform parameter of text() with a Matrix value"),Pn=ge):(Ge=arguments[4],rt=arguments[5],Zt(Ot=arguments[3])==="object"&&Ot!==null||(typeof Ge=="string"&&(rt=Ge,Ge=null),typeof Ot=="string"&&(rt=Ot,Ot=null),typeof Ot=="number"&&(Ge=Ot,Ot=null),le={flags:Ot,angle:Ge,align:rt})),isNaN(G)||isNaN(re)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return Wn;var si="",fs=!1,wr=typeof le.lineHeightFactor=="number"?le.lineHeightFactor:sl,Bs=Wn.internal.scaleFactor;function Kd(cn){return cn=cn.split("	").join(Array(le.TabLen||9).join(" ")),tr(cn,Ot)}function rh(cn){for(var un,Un=cn.concat(),Zn=[],So=Un.length;So--;)typeof(un=Un.shift())=="string"?Zn.push(un):Array.isArray(cn)&&(un.length===1||un[1]===void 0&&un[2]===void 0)?Zn.push(un[0]):Zn.push([un[0],un[1],un[2]]);return Zn}function sh(cn,un){var Un;if(typeof cn=="string")Un=un(cn)[0];else if(Array.isArray(cn)){for(var Zn,So,dh=cn.concat(),Pc=[],Zd=dh.length;Zd--;)typeof(Zn=dh.shift())=="string"?Pc.push(un(Zn)[0]):Array.isArray(Zn)&&typeof Zn[0]=="string"&&(So=un(Zn[0],Zn[1],Zn[2]),Pc.push([So[0],So[1],So[2]]));Un=Pc}return Un}var Sc=!1,oh=!0;if(typeof _=="string")Sc=!0;else if(Array.isArray(_)){var ah=_.concat();Me=[];for(var _c,gi=ah.length;gi--;)(typeof(_c=ah.shift())!="string"||Array.isArray(_c)&&typeof _c[0]!="string")&&(oh=!1);Sc=oh}if(Sc===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var Ec=Oe/Wn.internal.scaleFactor,Ac=Ec*(wr-1);switch(le.baseline){case"bottom":re-=Ac;break;case"top":re+=Ec-Ac;break;case"hanging":re+=Ec-2*Ac;break;case"middle":re+=Ec/2-Ac}if((vt=le.maxWidth||0)>0&&(typeof _=="string"?_=Wn.splitTextToSize(_,vt):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(cn,un){return cn.concat(Wn.splitTextToSize(un,vt))},[]))),Ae={text:_,x:G,y:re,options:le,mutex:{pdfEscape:tr,activeFontKey:wt,fonts:qt,activeFontSize:Oe}},Pt.publish("preProcessText",Ae),_=Ae.text,Ge=(le=Ae.options).angle,!(Pn instanceof at)&&Ge&&typeof Ge=="number"){Ge*=Math.PI/180,le.rotationDirection===0&&(Ge=-Ge),b===x.ADVANCED&&(Ge=-Ge);var Tc=Math.cos(Ge),lh=Math.sin(Ge);Pn=new at(Tc,lh,-lh,Tc,0,0)}else Ge&&Ge instanceof at&&(Pn=Ge);b!==x.ADVANCED||Pn||(Pn=mt),(_t=le.charSpace||xc)!==void 0&&(si+=R(P(_t))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_n=le.horizontalScale)!==void 0&&(si+=R(100*_n)+` Tz
`),le.lang;var nr=-1,R1=le.renderingMode!==void 0?le.renderingMode:le.stroke,ch=Wn.internal.getCurrentPageInfo().pageContext;switch(R1){case 0:case!1:case"fill":nr=0;break;case 1:case!0:case"stroke":nr=1;break;case 2:case"fillThenStroke":nr=2;break;case 3:case"invisible":nr=3;break;case 4:case"fillAndAddForClipping":nr=4;break;case 5:case"strokeAndAddPathForClipping":nr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":nr=6;break;case 7:case"addToPathForClipping":nr=7}var Yd=ch.usedRenderingMode!==void 0?ch.usedRenderingMode:-1;nr!==-1?si+=nr+` Tr
`:Yd!==-1&&(si+=`0 Tr
`),nr!==-1&&(ch.usedRenderingMode=nr),rt=le.align||"left";var Br,Lc=Oe*wr,Xd=Wn.internal.pageSize.getWidth(),Jd=qt[wt];_t=le.charSpace||xc,vt=le.maxWidth||0,Ot=Object.assign({autoencode:!0,noBOM:!0},le.flags);var ia=[],ll=function(cn){return Wn.getStringUnitWidth(cn,{font:Jd,charSpace:_t,fontSize:Oe,doKerning:!1})*Oe/Bs};if(Object.prototype.toString.call(_)==="[object Array]"){var ir;Me=rh(_),rt!=="left"&&(Br=Me.map(ll));var Ui,ra=0;if(rt==="right"){G-=Br[0],_=[],gi=Me.length;for(var xo=0;xo<gi;xo++)xo===0?(Ui=Os(G),ir=vo(re)):(Ui=P(ra-Br[xo]),ir=-Lc),_.push([Me[xo],Ui,ir]),ra=Br[xo]}else if(rt==="center"){G-=Br[0]/2,_=[],gi=Me.length;for(var bo=0;bo<gi;bo++)bo===0?(Ui=Os(G),ir=vo(re)):(Ui=P((ra-Br[bo])/2),ir=-Lc),_.push([Me[bo],Ui,ir]),ra=Br[bo]}else if(rt==="left"){_=[],gi=Me.length;for(var kc=0;kc<gi;kc++)_.push(Me[kc])}else if(rt==="justify"&&Jd.encoding==="Identity-H"){_=[],gi=Me.length,vt=vt!==0?vt:Xd;for(var wo=0,jn=0;jn<gi;jn++)if(ir=jn===0?vo(re):-Lc,Ui=jn===0?Os(G):wo,jn<gi-1){var uh=P((vt-Br[jn])/(Me[jn].split(" ").length-1)),$i=Me[jn].split(" ");_.push([$i[0]+" ",Ui,ir]),wo=0;for(var jr=1;jr<$i.length;jr++){var Cc=(ll($i[jr-1]+" "+$i[jr])-ll($i[jr]))*Bs+uh;jr==$i.length-1?_.push([$i[jr],Cc,0]):_.push([$i[jr]+" ",Cc,0]),wo-=Cc}}else _.push([Me[jn],Ui,ir]);_.push(["",wo,0])}else{if(rt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],gi=Me.length,vt=vt!==0?vt:Xd,jn=0;jn<gi;jn++)ir=jn===0?vo(re):-Lc,Ui=jn===0?Os(G):0,jn<gi-1?ia.push(R(P((vt-Br[jn])/(Me[jn].split(" ").length-1)))):ia.push(0),_.push([Me[jn],Ui,ir])}}var Qd=typeof le.R2L=="boolean"?le.R2L:et;Qd===!0&&(_=sh(_,function(cn,un,Un){return[cn.split("").reverse().join(""),un,Un]})),Ae={text:_,x:G,y:re,options:le,mutex:{pdfEscape:tr,activeFontKey:wt,fonts:qt,activeFontSize:Oe}},Pt.publish("postProcessText",Ae),_=Ae.text,fs=Ae.mutex.isHex||!1;var hh=qt[wt].encoding;hh!=="WinAnsiEncoding"&&hh!=="StandardEncoding"||(_=sh(_,function(cn,un,Un){return[Kd(cn),un,Un]})),Me=rh(_),_=[];for(var cl,ul,sa,hl=0,Rc=1,fl=Array.isArray(Me[0])?Rc:hl,oa="",fh=function(cn,un,Un){var Zn="";return Un instanceof at?(Un=typeof le.angle=="number"?St(Un,new at(1,0,0,1,cn,un)):St(new at(1,0,0,1,cn,un),Un),b===x.ADVANCED&&(Un=St(new at(1,0,0,-1,0,0),Un)),Zn=Un.join(" ")+` Tm
`):Zn=R(cn)+" "+R(un)+` Td
`,Zn},Ur=0;Ur<Me.length;Ur++){switch(oa="",fl){case Rc:sa=(fs?"<":"(")+Me[Ur][0]+(fs?">":")"),cl=parseFloat(Me[Ur][1]),ul=parseFloat(Me[Ur][2]);break;case hl:sa=(fs?"<":"(")+Me[Ur]+(fs?">":")"),cl=Os(G),ul=vo(re)}ia!==void 0&&ia[Ur]!==void 0&&(oa=ia[Ur]+` Tw
`),Ur===0?_.push(oa+fh(cl,ul,Pn)+sa):fl===hl?_.push(oa+sa):fl===Rc&&_.push(oa+fh(cl,ul,Pn)+sa)}_=fl===hl?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var $r=`BT
/`;return $r+=wt+" "+Oe+` Tf
`,$r+=R(Oe*wr)+` TL
`,$r+=ol+`
`,$r+=si,$r+=_,ie($r+="ET"),f[wt]=!0,Wn};var w1=d.__private__.clip=d.clip=function(_){return ie(_==="evenodd"?"W*":"W"),this};d.clipEvenOdd=function(){return w1("evenodd")},d.__private__.discardPath=d.discardPath=function(){return ie("n"),this};var Fs=d.__private__.isValidStyle=function(_){var G=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(G=!0),G};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(_){return Fs(_)&&(c=_),this};var Ud=d.__private__.getStyle=d.getStyle=function(_){var G=c;switch(_){case"D":case"S":G="S";break;case"F":G="f";break;case"FD":case"DF":G="B";break;case"f":case"f*":case"B":case"B*":G=_}return G},$d=d.close=function(){return ie("h"),this};d.stroke=function(){return ie("S"),this},d.fill=function(_){return yc("f",_),this},d.fillEvenOdd=function(_){return yc("f*",_),this},d.fillStroke=function(_){return yc("B",_),this},d.fillStrokeEvenOdd=function(_){return yc("B*",_),this};var yc=function(_,G){Zt(G)==="object"?_1(G,_):ie(_)},Ku=function(_){_===null||b===x.ADVANCED&&_===void 0||(_=Ud(_),ie(_))};function S1(_,G,re,le,ge){var Ae=new Dl(G||this.boundingBox,re||this.xStep,le||this.yStep,this.gState,ge||this.matrix);Ae.stream=this.stream;var Me=_+"$$"+this.cloneIndex+++"$$";return Kt(Me,Ae),Ae}var _1=function(_,G){var re=Zi[_.key],le=Mt[re];if(le instanceof La)ie("q"),ie(E1(G)),le.gState&&d.setGState(le.gState),ie(_.matrix.toString()+" cm"),ie("/"+re+" sh"),ie("Q");else if(le instanceof Dl){var ge=new at(1,0,0,-1,0,na());_.matrix&&(ge=ge.multiply(_.matrix||mt),re=S1.call(le,_.key,_.boundingBox,_.xStep,_.yStep,ge).id),ie("q"),ie("/Pattern cs"),ie("/"+re+" scn"),le.gState&&d.setGState(le.gState),ie(G),ie("Q")}},E1=function(_){switch(_){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Yu=d.moveTo=function(_,G){return ie(R(P(_))+" "+R(F(G))+" m"),this},rl=d.lineTo=function(_,G){return ie(R(P(_))+" "+R(F(G))+" l"),this},ea=d.curveTo=function(_,G,re,le,ge,Ae){return ie([R(P(_)),R(F(G)),R(P(re)),R(F(le)),R(P(ge)),R(F(Ae)),"c"].join(" ")),this};d.__private__.line=d.line=function(_,G,re,le,ge){if(isNaN(_)||isNaN(G)||isNaN(re)||isNaN(le)||!Fs(ge))throw new Error("Invalid arguments passed to jsPDF.line");return b===x.COMPAT?this.lines([[re-_,le-G]],_,G,[1,1],ge||"S"):this.lines([[re-_,le-G]],_,G,[1,1]).stroke()},d.__private__.lines=d.lines=function(_,G,re,le,ge,Ae){var Me,Ge,rt,_t,vt,Ot,_n,Pn,Wn,Ai,si,fs;if(typeof _=="number"&&(fs=re,re=G,G=_,_=fs),le=le||[1,1],Ae=Ae||!1,isNaN(G)||isNaN(re)||!Array.isArray(_)||!Array.isArray(le)||!Fs(ge)||typeof Ae!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Yu(G,re),Me=le[0],Ge=le[1],_t=_.length,Ai=G,si=re,rt=0;rt<_t;rt++)(vt=_[rt]).length===2?(Ai=vt[0]*Me+Ai,si=vt[1]*Ge+si,rl(Ai,si)):(Ot=vt[0]*Me+Ai,_n=vt[1]*Ge+si,Pn=vt[2]*Me+Ai,Wn=vt[3]*Ge+si,Ai=vt[4]*Me+Ai,si=vt[5]*Ge+si,ea(Ot,_n,Pn,Wn,Ai,si));return Ae&&$d(),Ku(ge),this},d.path=function(_){for(var G=0;G<_.length;G++){var re=_[G],le=re.c;switch(re.op){case"m":Yu(le[0],le[1]);break;case"l":rl(le[0],le[1]);break;case"c":ea.apply(this,le);break;case"h":$d()}}return this},d.__private__.rect=d.rect=function(_,G,re,le,ge){if(isNaN(_)||isNaN(G)||isNaN(re)||isNaN(le)||!Fs(ge))throw new Error("Invalid arguments passed to jsPDF.rect");return b===x.COMPAT&&(le=-le),ie([R(P(_)),R(F(G)),R(P(re)),R(P(le)),"re"].join(" ")),Ku(ge),this},d.__private__.triangle=d.triangle=function(_,G,re,le,ge,Ae,Me){if(isNaN(_)||isNaN(G)||isNaN(re)||isNaN(le)||isNaN(ge)||isNaN(Ae)||!Fs(Me))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-_,le-G],[ge-re,Ae-le],[_-ge,G-Ae]],_,G,[1,1],Me,!0),this},d.__private__.roundedRect=d.roundedRect=function(_,G,re,le,ge,Ae,Me){if(isNaN(_)||isNaN(G)||isNaN(re)||isNaN(le)||isNaN(ge)||isNaN(Ae)||!Fs(Me))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ge=4/3*(Math.SQRT2-1);return ge=Math.min(ge,.5*re),Ae=Math.min(Ae,.5*le),this.lines([[re-2*ge,0],[ge*Ge,0,ge,Ae-Ae*Ge,ge,Ae],[0,le-2*Ae],[0,Ae*Ge,-ge*Ge,Ae,-ge,Ae],[2*ge-re,0],[-ge*Ge,0,-ge,-Ae*Ge,-ge,-Ae],[0,2*Ae-le],[0,-Ae*Ge,ge*Ge,-Ae,ge,-Ae]],_+ge,G,[1,1],Me,!0),this},d.__private__.ellipse=d.ellipse=function(_,G,re,le,ge){if(isNaN(_)||isNaN(G)||isNaN(re)||isNaN(le)||!Fs(ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ae=4/3*(Math.SQRT2-1)*re,Me=4/3*(Math.SQRT2-1)*le;return Yu(_+re,G),ea(_+re,G-Me,_+Ae,G-le,_,G-le),ea(_-Ae,G-le,_-re,G-Me,_-re,G),ea(_-re,G+Me,_-Ae,G+le,_,G+le),ea(_+Ae,G+le,_+re,G+Me,_+re,G),Ku(ge),this},d.__private__.circle=d.circle=function(_,G,re,le){if(isNaN(_)||isNaN(G)||isNaN(re)||!Fs(le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,G,re,re,le)},d.setFont=function(_,G,re){return re&&(G=D(G,re)),wt=Od(_,G,{disableWarning:!1}),this};var A1=d.__private__.getFont=d.getFont=function(){return qt[Od.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var _,G,re={};for(_ in nn)if(nn.hasOwnProperty(_))for(G in re[_]=[],nn[_])nn[_].hasOwnProperty(G)&&re[_].push(G);return re},d.addFont=function(_,G,re,le,ge){var Ae=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ae.indexOf(arguments[3])!==-1?ge=arguments[3]:arguments[3]&&Ae.indexOf(arguments[3])==-1&&(re=D(re,le)),ge=ge||"Identity-H",Gu.call(this,_,G,re,ge)};var sl,Xu=t.lineWidth||.200025,vc=d.__private__.getLineWidth=d.getLineWidth=function(){return Xu},zd=d.__private__.setLineWidth=d.setLineWidth=function(_){return Xu=_,ie(R(P(_))+" w"),this};d.__private__.setLineDash=ut.API.setLineDash=ut.API.setLineDashPattern=function(_,G){if(_=_||[],G=G||0,isNaN(G)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(re){return R(P(re))}).join(" "),G=R(P(G)),ie("["+_+"] "+G+" d"),this};var Hd=d.__private__.getLineHeight=d.getLineHeight=function(){return Oe*sl};d.__private__.getLineHeight=d.getLineHeight=function(){return Oe*sl};var Vd=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(sl=_),this},Gd=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return sl};Vd(t.lineHeight);var Os=d.__private__.getHorizontalCoordinate=function(_){return P(_)},vo=d.__private__.getVerticalCoordinate=function(_){return b===x.ADVANCED?_:Ve[U].mediaBox.topRightY-Ve[U].mediaBox.bottomLeftY-P(_)},T1=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(_){return R(Os(_))},ta=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(_){return R(vo(_))},hs=t.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return ls(hs)},d.__private__.setStrokeColor=d.setDrawColor=function(_,G,re,le){return hs=cs({ch1:_,ch2:G,ch3:re,ch4:le,pdfColorType:"draw",precision:2}),ie(hs),this};var Ju=t.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return ls(Ju)},d.__private__.setFillColor=d.setFillColor=function(_,G,re,le){return Ju=cs({ch1:_,ch2:G,ch3:re,ch4:le,pdfColorType:"fill",precision:2}),ie(Ju),this};var ol=t.textColor||"0 g",L1=d.__private__.getTextColor=d.getTextColor=function(){return ls(ol)};d.__private__.setTextColor=d.setTextColor=function(_,G,re,le){return ol=cs({ch1:_,ch2:G,ch3:re,ch4:le,pdfColorType:"text",precision:3}),this};var xc=t.charSpace,k1=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(xc||0)};d.__private__.setCharSpace=d.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xc=_,this};var Qu=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(_){var G=d.CapJoinStyles[_];if(G===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qu=G,ie(G+" J"),this};var Zu=0;d.__private__.setLineJoin=d.setLineJoin=function(_){var G=d.CapJoinStyles[_];if(G===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zu=G,ie(G+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(R(P(_))+" M"),this},d.GState=dd,d.setGState=function(_){(_=typeof _=="string"?xn[xr[_]]:Wd(null,_)).equals(Ct)||(ie("/"+_.id+" gs"),Ct=_)};var Wd=function(_,G){if(!_||!xr[_]){var re=!1;for(var le in xn)if(xn.hasOwnProperty(le)&&xn[le].equals(G)){re=!0;break}if(re)G=xn[le];else{var ge="GS"+(Object.keys(xn).length+1).toString(10);xn[ge]=G,G.id=ge}return _&&(xr[_]=G.id),Pt.publish("addGState",G),G}};d.addGState=function(_,G){return Wd(_,G),this},d.saveGraphicsState=function(){return ie("q"),os.push({key:wt,size:Oe,color:ol}),this},d.restoreGraphicsState=function(){ie("Q");var _=os.pop();return wt=_.key,Oe=_.size,ol=_.color,Ct=null,this},d.setCurrentTransformationMatrix=function(_){return ie(_.toString()+" cm"),this},d.comment=function(_){return ie("#"+_),this};var bc=function(_,G){var re=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(Ae){isNaN(Ae)||(re=parseFloat(Ae))}});var le=G||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return le},set:function(Ae){isNaN(Ae)||(le=parseFloat(Ae))}});var ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ge},set:function(Ae){ge=Ae.toString()}}),this},eh=function(_,G,re,le){bc.call(this,_,G),this.type="rect";var ge=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ge},set:function(Me){isNaN(Me)||(ge=parseFloat(Me))}});var Ae=le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ae},set:function(Me){isNaN(Me)||(Ae=parseFloat(Me))}}),this},th=function(){this.page=Vt,this.currentPage=U,this.pages=we.slice(0),this.pagesContext=Ve.slice(0),this.x=Wt,this.y=Tt,this.matrix=_i,this.width=al(U),this.height=na(U),this.outputDestination=be,this.id="",this.objectNumber=-1};th.prototype.restore=function(){Vt=this.page,U=this.currentPage,Ve=this.pagesContext,we=this.pages,Wt=this.x,Tt=this.y,_i=this.matrix,nh(U,this.width),ih(U,this.height),be=this.outputDestination};var qd=function(_,G,re,le,ge){br.push(new th),Vt=U=0,we=[],Wt=_,Tt=G,_i=ge,Wu([re,le])},C1=function(_){if(Fr[_])br.pop().restore();else{var G=new th,re="Xo"+(Object.keys(Qn).length+1).toString(10);G.id=re,Fr[_]=re,Qn[re]=G,Pt.publish("addFormObject",G),br.pop().restore()}};for(var wc in d.beginFormObject=function(_,G,re,le,ge){return qd(_,G,re,le,ge),this},d.endFormObject=function(_){return C1(_),this},d.doFormObject=function(_,G){var re=Qn[Fr[_]];return ie("q"),ie(G.toString()+" cm"),ie("/"+re.id+" Do"),ie("Q"),this},d.getFormObject=function(_){var G=Qn[Fr[_]];return{x:G.x,y:G.y,width:G.width,height:G.height,matrix:G.matrix}},d.save=function(_,G){return _=_||"generated.pdf",(G=G||{}).returnPromise=G.returnPromise||!1,G.returnPromise===!1?(kl(gc(yo()),_),typeof kl.unload=="function"&&pt.setTimeout&&setTimeout(kl.unload,911),this):new Promise(function(re,le){try{var ge=kl(gc(yo()),_);typeof kl.unload=="function"&&pt.setTimeout&&setTimeout(kl.unload,911),re(ge)}catch(Ae){le(Ae.message)}})},ut.API)ut.API.hasOwnProperty(wc)&&(wc==="events"&&ut.API.events.length?function(_,G){var re,le,ge;for(ge=G.length-1;ge!==-1;ge--)re=G[ge][0],le=G[ge][1],_.subscribe.apply(_,[re].concat(typeof le=="function"?[le]:le))}(Pt,ut.API.events):d[wc]=ut.API[wc]);var al=d.getPageWidth=function(_){return(Ve[_=_||U].mediaBox.topRightX-Ve[_].mediaBox.bottomLeftX)/$e},nh=d.setPageWidth=function(_,G){Ve[_].mediaBox.topRightX=G*$e+Ve[_].mediaBox.bottomLeftX},na=d.getPageHeight=function(_){return(Ve[_=_||U].mediaBox.topRightY-Ve[_].mediaBox.bottomLeftY)/$e},ih=d.setPageHeight=function(_,G){Ve[_].mediaBox.topRightY=G*$e+Ve[_].mediaBox.bottomLeftY};return d.internal={pdfEscape:tr,getStyle:Ud,getFont:A1,getFontSize:Be,getCharSpace:k1,getTextColor:L1,getLineHeight:Hd,getLineHeightFactor:Gd,getLineWidth:vc,write:nt,getHorizontalCoordinate:Os,getVerticalCoordinate:vo,getCoordinateString:T1,getVerticalCoordinateString:ta,collections:{},newObject:an,newAdditionalObject:ac,newObjectDeferred:ln,newObjectDeferredBegin:er,getFilters:Ds,putStream:Or,events:Pt,scaleFactor:$e,pageSize:{getWidth:function(){return al(U)},setWidth:function(_){nh(U,_)},getHeight:function(){return na(U)},setHeight:function(_){ih(U,_)}},encryptionOptions:u,encryption:Ei,getEncryptor:x1,output:mc,getNumberOfPages:p1,pages:we,out:ie,f2:N,f3:k,getPageInfo:jd,getPageInfoByObjId:yt,getCurrentPageInfo:b1,getPDFVersion:m,Point:bc,Rectangle:eh,Matrix:at,hasHotfix:Bd},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return al(U)},set:function(_){nh(U,_)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return na(U)},set:function(_){ih(U,_)},enumerable:!0,configurable:!0}),f1.call(d,Te),wt="F1",Md(r,n),Pt.publish("initialized"),d}qc.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},qc.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},qc.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},qc.prototype.processOwnerPassword=function(t,e){return Bx(Ox(e).substr(0,5),t)},qc.prototype.encryptor=function(t,e){var n=Ox(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return Bx(n,i)}},dd.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Zt(t)!==Zt(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return i===0},ut.API={events:[]},ut.version="2.5.2";var Dn=ut.API,tw=1,oc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},xt=function(t){return t.toFixed(2)},ya=function(t){return t.toFixed(5)};Dn.__acroform__={};var vr=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},AT=function(t){return t*tw},Vs=function(t){var e=new qR,n=Qe.internal.getHeight(t)||0,i=Qe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(xt(i)),Number(xt(n))],e},tq=Dn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},nq=Dn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},iq=Dn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},zn=Dn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return iq(t,e-1)},Hn=Dn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return tq(t,e-1)},Vn=Dn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return nq(t,e-1)},rq=Dn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,r=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(r)||0,l.lowerLeft_Y=i(s+a)||0,l.upperRight_X=n(r+o)||0,l.upperRight_Y=i(s)||0,[Number(xt(l.lowerLeft_X)),Number(xt(l.lowerLeft_Y)),Number(xt(l.upperRight_X)),Number(xt(l.upperRight_Y))]},sq=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=jx(t,n),r=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+r+" "+xt(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Vs(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},jx=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=t.multiline?r.map(function(k){return k.split(`
`)}):r.map(function(k){return[k]});var s=n,o=Qe.internal.getHeight(t)||0;o=o<0?-o:o;var a=Qe.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(k,P,j){if(k+1<r.length){var F=P+" "+r[k+1][0];return b0(F,t,j).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,u,h=b0("3",t,s).height,f=t.multiline?o-s:(o-h)/2,d=f+=2,p=0,m=0,v=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+b0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var y="",x=0,b=0;b<r.length;b++)if(r.hasOwnProperty(b)){var E=!1;if(r[b].length!==1&&v!==r[b].length-1){if((h+2)*(x+2)+2>o)continue e;y+=r[b][v],E=!0,m=b,b--}else{y=(y+=r[b][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var T=parseInt(b),D=l(T,y,s),R=b>=r.length-1;if(D&&!R){y+=" ",v=0;continue}if(D||R){if(R)m=T;else if(t.multiline&&(h+2)*(x+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(x+2)+2>o)continue e;m=T}}for(var S="",C=p;C<=m;C++){var N=r[C];if(t.multiline){if(C===m){S+=N[v]+" ",v=(v+1)%N.length;continue}if(C===p){S+=N[N.length-1]+" ";continue}}S+=N[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,u=b0(S,t,s).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}e+=xt(c)+" "+xt(d)+` Td
`,e+="("+oc(S)+`) Tj
`,e+=-xt(c)+` 0 Td
`,d=-(s+2),u=0,p=E?m:m+1,x++,y=""}break}return i.text=e,i.fontSize=s,i},b0=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},oq={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},aq=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},lq=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=n,r=t[n];e.internal.newObjectDeferredBegin(r.objId,!0),Zt(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete t[i]}},cq=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ns.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(oq)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");tw=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new KR,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];s.objId=void 0,s.hasAnnotation&&aq(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(i,r){var s=!i;for(var o in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(o)){var a=i[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=rq(a.Rect,r)),r.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Qe.createDefaultAppearanceStream(a),Zt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=sq(a);l.push({key:"AP",value:"<</N "+u+">>"}),r.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var h="";for(var f in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(f)){var d=a.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var o in d)if(d.hasOwnProperty(o)){var p=d[o];typeof p=="function"&&(p=p.call(r,a)),h+="/"+o+" "+p+" ",r.internal.acroformPlugin.xForms.indexOf(p)>=0||r.internal.acroformPlugin.xForms.push(p)}}else typeof(p=d)=="function"&&(p=p.call(r,a)),h+="/"+o+" "+p,r.internal.acroformPlugin.xForms.indexOf(p)>=0||r.internal.acroformPlugin.xForms.push(p);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:a.objId}),r.internal.out("endobj")}s&&lq(r.internal.acroformPlugin.xForms,r)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},WR=Dn.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(o){return o};if(Array.isArray(t)){for(var r="[",s=0;s<t.length;s++)switch(s!==0&&(r+=" "),Zt(t[s])){case"boolean":case"number":case"object":r+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(i=n.internal.getEncryptor(e)),r+="("+oc(i(t[s].toString()))+")"):r+=t[s].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},bv=function(t,e,n){var i=function(r){return r};return e!==void 0&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+oc(i(t))+")"},no=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};no.prototype.toString=function(){return this.objId+" 0 R"},no.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},no.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var i=e[n],r=this[i];r&&(Array.isArray(r)?t.push({key:i,value:WR(r,this.objId,this.scope)}):r instanceof no?(r.scope=this.scope,t.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&t.push({key:i,value:r}))}return t};var qR=function(){no.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};vr(qR,no);var KR=function(){no.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+oc(n(t))+")"}},set:function(n){t=n}})};vr(KR,no);var Ns=function t(){no.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zn(e,3)},set:function(y){y?this.F=Hn(e,3):this.F=Vn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(y){i=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(y){i[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(y){i[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(y){i[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(y){i[3]=y}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Tm)return;s="FieldObject"+t.FieldNum++}var y=function(x){return x};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+oc(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/tw:c},set:function(y){c=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Tm||this instanceof Wa))return bv(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof ni?f:bv(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof ni?y:y.substr(0,1)==="("?Gc(y.substr(1,y.length-2)):Gc(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ni?Gc(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof ni?"/"+y:y}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof ni?d:bv(d,this.objId,this.scope)},set:function(y){y=y.toString(),d=this instanceof ni?y:y.substr(0,1)==="("?Gc(y.substr(1,y.length-2)):Gc(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ni?Gc(d.substr(1,d.length-1)):d},set:function(y){y=y.toString(),d=this instanceof ni?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(y){y=!!y,m=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(y){p=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,1)},set:function(y){y?this.Ff=Hn(this.Ff,1):this.Ff=Vn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,2)},set:function(y){y?this.Ff=Hn(this.Ff,2):this.Ff=Vn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,3)},set:function(y){y?this.Ff=Hn(this.Ff,3):this.Ff=Vn(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};vr(Ns,no);var $l=function(){Ns.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return WR(e,this.objId,this.scope)},set:function(n){var i,r;r=[],typeof(i=n)=="string"&&(r=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(i,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,18)},set:function(n){n?this.Ff=Hn(this.Ff,18):this.Ff=Vn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Hn(this.Ff,19):this.Ff=Vn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,20)},set:function(n){n?(this.Ff=Hn(this.Ff,20),e.sort()):this.Ff=Vn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,22)},set:function(n){n?this.Ff=Hn(this.Ff,22):this.Ff=Vn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,23)},set:function(n){n?this.Ff=Hn(this.Ff,23):this.Ff=Vn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,27)},set:function(n){n?this.Ff=Hn(this.Ff,27):this.Ff=Vn(this.Ff,27)}}),this.hasAppearanceStream=!1};vr($l,Ns);var zl=function(){$l.call(this),this.fontName="helvetica",this.combo=!1};vr(zl,$l);var Hl=function(){zl.call(this),this.combo=!0};vr(Hl,zl);var Ef=function(){Hl.call(this),this.edit=!0};vr(Ef,Hl);var ni=function(){Ns.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,15)},set:function(n){n?this.Ff=Hn(this.Ff,15):this.Ff=Vn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,16)},set:function(n){n?this.Ff=Hn(this.Ff,16):this.Ff=Vn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,17)},set:function(n){n?this.Ff=Hn(this.Ff,17):this.Ff=Vn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,26)},set:function(n){n?this.Ff=Hn(this.Ff,26):this.Ff=Vn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,r=[];for(i in r.push("<<"),e)r.push("/"+i+" ("+oc(n(e[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(n){Zt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};vr(ni,Ns);var Af=function(){ni.call(this),this.pushButton=!0};vr(Af,ni);var Vl=function(){ni.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};vr(Vl,ni);var Tm=function(){var t,e;Ns.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),i)o.push("/"+s+" ("+oc(r(i[s]))+")");return o.push(">>"),o.join(`
`)},set:function(r){Zt(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(r){n="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};vr(Tm,Ns),Vl.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Vl.prototype.createOption=function(t){var e=new Tm;return e.Parent=this,e.optionName=t,this.Kids.push(e),uq.call(this.scope,e),e};var Tf=function(){ni.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qe.CheckBox.createAppearanceStream()};vr(Tf,ni);var Wa=function(){Ns.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,13)},set:function(e){e?this.Ff=Hn(this.Ff,13):this.Ff=Vn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,21)},set:function(e){e?this.Ff=Hn(this.Ff,21):this.Ff=Vn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,23)},set:function(e){e?this.Ff=Hn(this.Ff,23):this.Ff=Vn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,24)},set:function(e){e?this.Ff=Hn(this.Ff,24):this.Ff=Vn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,25)},set:function(e){e?this.Ff=Hn(this.Ff,25):this.Ff=Vn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,26)},set:function(e){e?this.Ff=Hn(this.Ff,26):this.Ff=Vn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};vr(Wa,Ns);var Lf=function(){Wa.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zn(this.Ff,14)},set:function(t){t?this.Ff=Hn(this.Ff,14):this.Ff=Vn(this.Ff,14)}}),this.password=!0};vr(Lf,Wa);var Qe={CheckBox:{createAppearanceStream:function(){return{N:{On:Qe.CheckBox.YesNormal},D:{On:Qe.CheckBox.YesPushDown,Off:Qe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Vs(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=jx(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+xt(Qe.internal.getWidth(t))+" "+xt(Qe.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+xt(s.fontSize)+" Tf "+r),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Vs(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),r=[],s=Qe.internal.getHeight(t),o=Qe.internal.getWidth(t),a=jx(t,t.caption);return r.push("1 g"),r.push("0 0 "+xt(o)+" "+xt(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+xt(o-1)+" "+xt(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+xt(a.fontSize)+" Tf "+i),r.push(a.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Vs(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+xt(Qe.internal.getWidth(t))+" "+xt(Qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Qe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Qe.RadioButton.Circle.YesNormal,e.D[t]=Qe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Vs(t);e.scope=t.scope;var n=[],i=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Qe.internal.Bezier_C,s=Number((i*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ya(Qe.internal.getWidth(t)/2)+" "+ya(Qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Vs(t);e.scope=t.scope;var n=[],i=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*Qe.internal.Bezier_C).toFixed(5)),o=Number((i*Qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ya(Qe.internal.getWidth(t)/2)+" "+ya(Qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ya(Qe.internal.getWidth(t)/2)+" "+ya(Qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Vs(t);e.scope=t.scope;var n=[],i=Qe.internal.getWidth(t)<=Qe.internal.getHeight(t)?Qe.internal.getWidth(t)/4:Qe.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*Qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ya(Qe.internal.getWidth(t)/2)+" "+ya(Qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Qe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Qe.RadioButton.Cross.YesNormal,e.D[t]=Qe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Vs(t);e.scope=t.scope;var n=[],i=Qe.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+xt(Qe.internal.getWidth(t)-2)+" "+xt(Qe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(xt(i.x1.x)+" "+xt(i.x1.y)+" m"),n.push(xt(i.x2.x)+" "+xt(i.x2.y)+" l"),n.push(xt(i.x4.x)+" "+xt(i.x4.y)+" m"),n.push(xt(i.x3.x)+" "+xt(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Vs(t);e.scope=t.scope;var n=Qe.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+xt(Qe.internal.getWidth(t))+" "+xt(Qe.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+xt(Qe.internal.getWidth(t)-2)+" "+xt(Qe.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(xt(n.x1.x)+" "+xt(n.x1.y)+" m"),i.push(xt(n.x2.x)+" "+xt(n.x2.y)+" l"),i.push(xt(n.x4.x)+" "+xt(n.x4.y)+" m"),i.push(xt(n.x3.x)+" "+xt(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Vs(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+xt(Qe.internal.getWidth(t))+" "+xt(Qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Qe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Qe.internal.getWidth(t),n=Qe.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},Qe.internal.getWidth=function(t){var e=0;return Zt(t)==="object"&&(e=AT(t.Rect[2])),e},Qe.internal.getHeight=function(t){var e=0;return Zt(t)==="object"&&(e=AT(t.Rect[3])),e};var uq=Dn.addField=function(t){if(cq(this,t),!(t instanceof Ns))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Dn.AcroFormChoiceField=$l,Dn.AcroFormListBox=zl,Dn.AcroFormComboBox=Hl,Dn.AcroFormEditBox=Ef,Dn.AcroFormButton=ni,Dn.AcroFormPushButton=Af,Dn.AcroFormRadioButton=Vl,Dn.AcroFormCheckBox=Tf,Dn.AcroFormTextField=Wa,Dn.AcroFormPasswordField=Lf,Dn.AcroFormAppearance=Qe,Dn.AcroForm={ChoiceField:$l,ListBox:zl,ComboBox:Hl,EditBox:Ef,Button:ni,PushButton:Af,RadioButton:Vl,CheckBox:Tf,TextField:Wa,PasswordField:Lf,Appearance:Qe},ut.AcroForm={ChoiceField:$l,ListBox:zl,ComboBox:Hl,EditBox:Ef,Button:ni,PushButton:Af,RadioButton:Vl,CheckBox:Tf,TextField:Wa,PasswordField:Lf,Appearance:Qe};var hq=ut.AcroForm;function YR(t){return t.reduce(function(e,n,i){return e[n]=i,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(k,P){var j,F,H,O,$,z=e;if((P=P||e)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(D(k))for($ in n)for(H=n[$],j=0;j<H.length;j+=1){for(O=!0,F=0;F<H[j].length;F+=1)if(H[j][F]!==void 0&&H[j][F]!==k[F]){O=!1;break}if(O===!0){z=$;break}}else for($ in n)for(H=n[$],j=0;j<H.length;j+=1){for(O=!0,F=0;F<H[j].length;F+=1)if(H[j][F]!==void 0&&H[j][F]!==k.charCodeAt(F)){O=!1;break}if(O===!0){z=$;break}}return z===e&&P!==e&&(z=P),z},r=function k(P){for(var j=this.internal.write,F=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var O=[];if(O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Image"}),O.push({key:"Width",value:P.width}),O.push({key:"Height",value:P.height}),P.colorSpace===v.INDEXED?O.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(O.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===v.DEVICE_CMYK&&O.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),O.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&O.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)){for(var $="",z=0,B=P.transparency.length;z<B;z++)$+=P.transparency[z]+" "+P.transparency[z]+" ";O.push({key:"Mask",value:"["+$+"]"})}P.sMask!==void 0&&O.push({key:"SMask",value:P.objectId+1+" 0 R"});var X=P.filter!==void 0?["/"+P.filter]:void 0;if(F({data:P.data,additionalKeyValues:O,alreadyAppliedFilters:X,objectId:P.objectId}),j("endobj"),"sMask"in P&&P.sMask!==void 0){var te="/Predictor "+P.predictor+" /Colors 1 /BitsPerComponent "+P.bitsPerComponent+" /Columns "+P.width,I={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:P.bitsPerComponent,decodeParameters:te,data:P.sMask};"filter"in P&&(I.filter=P.filter),k.call(this,I)}if(P.colorSpace===v.INDEXED){var U=this.internal.newObject();F({data:S(new Uint8Array(P.palette)),objectId:U}),j("endobj")}},s=function(){var k=this.internal.collections.addImage_images;for(var P in k)r.call(this,k[P])},o=function(){var k,P=this.internal.collections.addImage_images,j=this.internal.write;for(var F in P)j("/I"+(k=P[F]).index,k.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var k=this.internal.collections.addImage_images;return a.call(this),k},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(k){return typeof t["process"+k.toUpperCase()]=="function"},h=function(k){return Zt(k)==="object"&&k.nodeType===1},f=function(k,P){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var j=""+k.getAttribute("src");if(j.indexOf("data:image/")===0)return _f(unescape(j).split("base64,").pop());var F=t.loadFile(j,!0);if(F!==void 0)return F}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var H;switch(P){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;case"JPEG":case"JPG":default:H="image/jpeg"}return _f(k.toDataURL(H,1).split("base64,").pop())}},d=function(k){var P=this.internal.collections.addImage_images;if(P){for(var j in P)if(k===P[j].alias)return P[j]}},p=function(k,P,j){return k||P||(k=-96,P=-96),k<0&&(k=-1*j.width*72/k/this.internal.scaleFactor),P<0&&(P=-1*j.height*72/P/this.internal.scaleFactor),k===0&&(k=P*j.width/j.height),P===0&&(P=k*j.height/j.width),[k,P]},m=function(k,P,j,F,H,O){var $=p.call(this,j,F,H),z=this.internal.getCoordinateString,B=this.internal.getVerticalCoordinateString,X=l.call(this);if(j=$[0],F=$[1],X[H.index]=H,O){O*=Math.PI/180;var te=Math.cos(O),I=Math.sin(O),U=function(Q){return Q.toFixed(4)},K=[U(te),U(I),U(-1*I),U(te),0,0,"cm"]}this.internal.write("q"),O?(this.internal.write([1,"0","0",1,z(k),B(P+F),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([z(j),"0","0",z(F),"0","0","cm"].join(" "))):this.internal.write([z(j),"0","0",z(F),z(k),B(P+F),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=t.__addimage__.sHashCode=function(k){var P,j,F=0;if(typeof k=="string")for(j=k.length,P=0;P<j;P++)F=(F<<5)-F+k.charCodeAt(P),F|=0;else if(D(k))for(j=k.byteLength/2,P=0;P<j;P++)F=(F<<5)-F+k[P],F|=0;return F},b=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var P=!0;return k.length===0&&(P=!1),k.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(P=!1),P},E=t.__addimage__.extractImageFromDataUrl=function(k){var P=(k=k||"").split("base64,"),j=null;if(P.length===2){var F=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(P[0]);Array.isArray(F)&&(j={mimeType:F[1],charset:F[2],data:P[1]})}return j},T=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(k){return T()&&k instanceof ArrayBuffer};var D=t.__addimage__.isArrayBufferView=function(k){return T()&&typeof Uint32Array<"u"&&(k instanceof Int8Array||k instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)},R=t.__addimage__.binaryStringToUint8Array=function(k){for(var P=k.length,j=new Uint8Array(P),F=0;F<P;F++)j[F]=k.charCodeAt(F);return j},S=t.__addimage__.arrayBufferToBinaryString=function(k){for(var P="",j=D(k)?k:new Uint8Array(k),F=0;F<j.length;F+=8192)P+=String.fromCharCode.apply(null,j.subarray(F,F+8192));return P};t.addImage=function(){var k,P,j,F,H,O,$,z,B;if(typeof arguments[1]=="number"?(P=e,j=arguments[1],F=arguments[2],H=arguments[3],O=arguments[4],$=arguments[5],z=arguments[6],B=arguments[7]):(P=arguments[1],j=arguments[2],F=arguments[3],H=arguments[4],O=arguments[5],$=arguments[6],z=arguments[7],B=arguments[8]),Zt(k=arguments[0])==="object"&&!h(k)&&"imageData"in k){var X=k;k=X.imageData,P=X.format||P||e,j=X.x||j||0,F=X.y||F||0,H=X.w||X.width||H,O=X.h||X.height||O,$=X.alias||$,z=X.compression||z,B=X.rotation||X.angle||B}var te=this.internal.getFilters();if(z===void 0&&te.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(j)||isNaN(F))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var I=C.call(this,k,P,$,z);return m.call(this,j,F,H,O,I,B),this};var C=function(k,P,j,F){var H,O,$;if(typeof k=="string"&&i(k)===e){k=unescape(k);var z=N(k,!1);(z!==""||(z=t.loadFile(k,!0))!==void 0)&&(k=z)}if(h(k)&&(k=f(k,P)),P=i(k,P),!u(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if((($=j)==null||$.length===0)&&(j=function(B){return typeof B=="string"||D(B)?x(B):D(B.data)?x(B.data):null}(k)),(H=d.call(this,j))||(T()&&(k instanceof Uint8Array||P==="RGBA"||(O=k,k=R(k))),H=this["process"+P.toUpperCase()](k,c.call(this),j,function(B){return B&&typeof B=="string"&&(B=B.toUpperCase()),B in t.image_compression?B:y.NONE}(F),O)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},N=t.__addimage__.convertBase64ToBinaryString=function(k,P){var j;P=typeof P!="boolean"||P;var F,H="";if(typeof k=="string"){F=(j=E(k))!==null?j.data:k;try{H=_f(F)}catch(O){if(P)throw b(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+O.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};t.getImageProperties=function(k){var P,j,F="";if(h(k)&&(k=f(k)),typeof k=="string"&&i(k)===e&&((F=N(k,!1))===""&&(F=t.loadFile(k)||""),k=F),j=i(k),!u(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(!T()||k instanceof Uint8Array||(k=R(k)),!(P=this["process"+j.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=j,P}})(ut.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};ut.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,r,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,h=0;h<c.length&&!u;h++)switch((i=c[h]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<c.length;f++){i=c[f];var d=this.internal.pdfEscape,p=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(m.objId),x=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y)+"] ")+"/Contents ("+d(y(i.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+d(y(x))+") >>",m.content=s;var b=m.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+o(i.bounds.x+30)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w+30)+" "+a(i.bounds.y)+"] ")+" /Parent "+b,i.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(m.objId,"0 R",v.objId,"0 R");break;case"freetext":r="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y+i.bounds.h)+"] ";var E=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+d(p(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var T=this.annotations._nameMap[i.options.name];i.options.pageNumber=T.page,i.options.top=T.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+d(p(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var D=a(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+D+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,r,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(i),w:l(n+r),h:c(i+s)},options:o,type:"link"})},t.textWithLink=function(n,i,r,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,i,r,s),r+=.2*c,s.align==="center"&&(i-=l/2),s.align==="right"&&(i-=l),this.link(i,r-c,a,o,s),l},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(ut.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(m){return e[m.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},a=t.__arabicParser__.isArabicEndLetter=function(m){return o(m)&&s(m)&&e[m.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(m){return o(m)&&r.indexOf(m.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return o(m)&&s(m)&&e[m.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(m){return o(m)&&s(m)&&e[m.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(m){return o(m)&&s(m)&&e[m.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(m){return o(m)&&s(m)&&e[m.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(m){var v=0,y=n,x="",b=0;for(v=0;v<m.length;v+=1)y[m.charCodeAt(v)]!==void 0?(b++,typeof(y=y[m.charCodeAt(v)])=="number"&&(x+=String.fromCharCode(y),y=n,b=0),v===m.length-1&&(y=n,x+=m.charAt(v-(b-1)),v-=b-1,b=0)):(y=n,x+=m.charAt(v-b),v-=b,b=0);return x};t.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&i[m.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(m,v,y){return o(m)?s(m)===!1?-1:!c(m)||!o(v)&&!o(y)||!o(y)&&a(v)||a(m)&&!o(v)||a(m)&&l(v)||a(m)&&a(v)?0:u(m)&&o(v)&&!a(v)&&o(y)&&c(y)?3:a(m)||!o(y)?1:2:-1},d=function(m){var v=0,y=0,x=0,b="",E="",T="",D=(m=m||"").split("\\s+"),R=[];for(v=0;v<D.length;v+=1){for(R.push(""),y=0;y<D[v].length;y+=1)b=D[v][y],E=D[v][y-1],T=D[v][y+1],o(b)?(x=f(b,E,T),R[v]+=x!==-1?String.fromCharCode(e[b.charCodeAt(0)][x]):b):R[v]+=b;R[v]=h(R[v])}return R.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var m,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var x=0;for(y=[],x=0;x<v.length;x+=1)Array.isArray(v[x])?y.push([d(v[x][0]),v[x][1],v[x][2]]):y.push([d(v[x])]);m=y}else m=d(v);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};t.events.push(["preProcessText",p])}(ut.API),ut.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,i){var r;if((n=n||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ut.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(m){l=m}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var d=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(m){p=m}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){i.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),f=c.scaleFactor||this.internal.scaleFactor,d=0,p=0,m=0,v=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(b,E){return b.concat(v.splitTextToSize(E,y))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)d<(m=this.getStringUnitWidth(l[x],{font:h})*u)&&(d=m);return d!==0&&(p=l.length),{w:d/=f,h:Math.max((p*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,d=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,d&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,h,f){if(i.call(this),!u)throw new Error("No data for PDF table.");var d,p,m,v,y=[],x=[],b=[],E={},T={},D=[],R=[],S=(f=f||{}).autoSize||!1,C=f.printHeaders!==!1,N=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,k=f.margins||Object.assign({width:this.getPageWidth()},e),P=typeof f.padding=="number"?f.padding:3,j=f.headerBackgroundColor||"#c8c8c8",F=f.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=N,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=F,this.setFontSize(N),h==null)x=y=Object.keys(u[0]),b=y.map(function(){return"left"});else if(Array.isArray(h)&&Zt(h[0])==="object")for(y=h.map(function(X){return X.name}),x=h.map(function(X){return X.prompt||X.name||""}),b=h.map(function(X){return X.align||"left"}),d=0;d<h.length;d+=1)T[h[d].name]=h[d].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(x=y=h,b=y.map(function(){return"left"}));if(S||Array.isArray(h)&&typeof h[0]=="string")for(d=0;d<y.length;d+=1){for(E[v=y[d]]=u.map(function(X){return X[v]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(x[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=E[v],this.setFont(void 0,"normal"),m=0;m<p.length;m+=1)D.push(this.getTextDimensions(p[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);T[v]=Math.max.apply(null,D)+P+P,D=[]}if(C){var H={};for(d=0;d<y.length;d+=1)H[y[d]]={},H[y[d]].text=x[d],H[y[d]].align=b[d];var O=a.call(this,H,T);R=y.map(function(X){return new s(l,c,T[X],O,H[X].text,void 0,H[X].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var $=h.reduce(function(X,te){return X[te.name]=te.align,X},{});for(d=0;d<u.length;d+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:d,data:u[d]},this);var z=a.call(this,u[d],T);for(m=0;m<y.length;m+=1){var B=u[d][y[m]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:d,col:m,data:B},this),o.call(this,new s(l,c,T[y[m]],z,B,d+2,$[y[m]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(d){var p=l[d];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,c[d]-u-u)},this).map(function(d){return this.getLineHeightFactor()*d.length*h/f+u+u},this).reduce(function(d,p){return Math.max(d,p)},0)};t.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],d=0;d<this.internal.__cell__.tableHeaderRow.length;d+=1){u=this.internal.__cell__.tableHeaderRow[d].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=l;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(p)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),n=!1}}(ut.API);var XR={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},JR=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ux=YR(JR),QR=[100,200,300,400,500,600,700,800,900],fq=YR(QR);function $x(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return XR[s=s||"normal"]?s:"normal"}(t.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),r=function(s){return typeof Ux[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:i,stretch:r,src:t.src||[],ref:t.ref||{name:e,style:[r,n,i].join(" ")}}}function TT(t,e,n,i){var r;for(r=n;r>=0&&r<e.length;r+=i)if(t[e[r]])return t[e[r]];for(r=n;r>=0&&r<e.length;r-=i)if(t[e[r]])return t[e[r]]}var dq={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},LT={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function kT(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function pq(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",r=Object.assign({},dq,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(r[(s=$x(e[a])).family]&&(s.family=r[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[i]))throw new Error("Could not find a font-family for the rule '"+kT(s)+"' and default family '"+i+"'.");if(o=function(l,c){if(c[l])return c[l];var u=Ux[l],h=u<=Ux.normal?-1:1,f=TT(c,JR,u,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var u=XR[l],h=0;h<u.length;++h)if(c[u[h]])return c[u[h]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=fq[l],h=TT(c,QR,u,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+kT(s)+"'.");return o}function CT(t){return t.trimLeft()}function gq(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function mq(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var w0,RT,PT,wv=["times"];(function(t){var e,n,i,r,s,o,a,l,c,u=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new l,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new o,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new o,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var h=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=I;Object.defineProperty(this,"pdf",{get:function(){return U}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(pe){K=!!pe}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(pe){Q=!!pe}});var ee=0;Object.defineProperty(this,"posX",{get:function(){return ee},set:function(pe){isNaN(pe)||(ee=pe)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(pe){isNaN(pe)||(oe=pe)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(pe){var ie;typeof pe=="number"?ie=[pe,pe,pe,pe]:((ie=new Array(4))[0]=pe[0],ie[1]=pe.length>=2?pe[1]:ie[0],ie[2]=pe.length>=3?pe[2]:ie[0],ie[3]=pe.length>=4?pe[3]:ie[1]),c.margin=ie}});var se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return se},set:function(pe){se=pe}});var ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return ae},set:function(pe){ae=pe}});var Ee=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ee},set:function(pe){Ee=pe}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(pe){pe instanceof u&&(c=pe)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(pe){c.path=pe}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(pe){we=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var ie;ie=f(pe),this.ctx.fillStyle=ie.style,this.ctx.isFillTransparent=ie.a===0,this.ctx.fillOpacity=ie.a,this.pdf.setFillColor(ie.r,ie.g,ie.b,{a:ie.a}),this.pdf.setTextColor(ie.r,ie.g,ie.b,{a:ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var ie=f(pe);this.ctx.strokeStyle=ie.style,this.ctx.isStrokeTransparent=ie.a===0,this.ctx.strokeOpacity=ie.a,ie.a===0?this.pdf.setDrawColor(255,255,255):(ie.a,this.pdf.setDrawColor(ie.r,ie.g,ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){["butt","round","square"].indexOf(pe)!==-1&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){["bevel","round","miter"].indexOf(pe)!==-1&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){["right","end","center","left","start"].indexOf(pe)!==-1&&(this.ctx.textAlign=pe)}});var Pe=null;function be(pe,ie){if(Pe===null){var nt=function(De){var Te=[];return Object.keys(De).forEach(function(Oe){De[Oe].forEach(function(Ue){var Be=null;switch(Ue){case"bold":Be={family:Oe,weight:"bold"};break;case"italic":Be={family:Oe,style:"italic"};break;case"bolditalic":Be={family:Oe,weight:"bold",style:"italic"};break;case"":case"normal":Be={family:Oe}}Be!==null&&(Be.ref={name:Oe,style:Ue},Te.push(Be))})}),Te}(pe.getFontList());Pe=function(De){for(var Te={},Oe=0;Oe<De.length;++Oe){var Ue=$x(De[Oe]),Be=Ue.family,et=Ue.stretch,Je=Ue.style,it=Ue.weight;Te[Be]=Te[Be]||{},Te[Be][et]=Te[Be][et]||{},Te[Be][et][Je]=Te[Be][et][Je]||{},Te[Be][et][Je][it]=Ue}return Te}(nt.concat(ie))}return Pe}var ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return ke},set:function(pe){Pe=null,ke=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var ie;if(this.ctx.font=pe,(ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(pe))!==null){var nt=ie[1],De=(ie[2],ie[3]),Te=ie[4],Oe=(ie[5],ie[6]),Ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Te)[2];Te=Math.floor(Ue==="px"?parseFloat(Te)*this.pdf.internal.scaleFactor:Ue==="em"?parseFloat(Te)*this.pdf.getFontSize():parseFloat(Te)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Te);var Be=function(st){var wt,$e,Wt=[],Tt=st.trim();if(Tt==="")return wv;if(Tt in LT)return[LT[Tt]];for(;Tt!=="";){switch($e=null,wt=(Tt=CT(Tt)).charAt(0)){case'"':case"'":$e=gq(Tt.substring(1),wt);break;default:$e=mq(Tt)}if($e===null||(Wt.push($e[0]),(Tt=CT($e[1]))!==""&&Tt.charAt(0)!==","))return wv;Tt=Tt.replace(/^,/,"")}return Wt}(Oe);if(this.fontFaces){var et=pq(be(this.pdf,this.fontFaces),Be.map(function(st){return{family:st,stretch:"normal",weight:De,style:nt}}));this.pdf.setFont(et.ref.name,et.ref.style)}else{var Je="";(De==="bold"||parseInt(De,10)>=700||nt==="bold")&&(Je="bold"),nt==="italic"&&(Je+="italic"),Je.length===0&&(Je="normal");for(var it="",Ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<Be.length;dt++){if(this.pdf.internal.getFont(Be[dt],Je,{noFallback:!0,disableWarning:!0})!==void 0){it=Be[dt];break}if(Je==="bolditalic"&&this.pdf.internal.getFont(Be[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)it=Be[dt],Je="bold";else if(this.pdf.internal.getFont(Be[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){it=Be[dt],Je="normal";break}}if(it===""){for(var bt=0;bt<Be.length;bt++)if(Ze[Be[bt]]){it=Ze[Be[bt]];break}}it=it===""?"Times":it,this.pdf.setFont(it,Je)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=!!pe}})};h.prototype.setLineDash=function(I){this.lineDash=I},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){E.call(this,"fill",!1)},h.prototype.stroke=function(){E.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(I,U){if(isNaN(I)||isNaN(U))throw sn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new o(I,U));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(I,U)},h.prototype.closePath=function(){var I=new o(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&Zt(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){I=new o(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(I.x,I.y)},h.prototype.lineTo=function(I,U){if(isNaN(I)||isNaN(U))throw sn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new o(I,U));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},h.prototype.quadraticCurveTo=function(I,U,K,Q){if(isNaN(K)||isNaN(Q)||isNaN(I)||isNaN(U))throw sn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ee=this.ctx.transform.applyToPoint(new o(K,Q)),oe=this.ctx.transform.applyToPoint(new o(I,U));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(ee.x,ee.y)},h.prototype.bezierCurveTo=function(I,U,K,Q,ee,oe){if(isNaN(ee)||isNaN(oe)||isNaN(I)||isNaN(U)||isNaN(K)||isNaN(Q))throw sn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var se=this.ctx.transform.applyToPoint(new o(ee,oe)),ae=this.ctx.transform.applyToPoint(new o(I,U)),Ee=this.ctx.transform.applyToPoint(new o(K,Q));this.path.push({type:"bct",x1:ae.x,y1:ae.y,x2:Ee.x,y2:Ee.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},h.prototype.arc=function(I,U,K,Q,ee,oe){if(isNaN(I)||isNaN(U)||isNaN(K)||isNaN(Q)||isNaN(ee))throw sn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var se=this.ctx.transform.applyToPoint(new o(I,U));I=se.x,U=se.y;var ae=this.ctx.transform.applyToPoint(new o(0,K)),Ee=this.ctx.transform.applyToPoint(new o(0,0));K=Math.sqrt(Math.pow(ae.x-Ee.x,2)+Math.pow(ae.y-Ee.y,2))}Math.abs(ee-Q)>=2*Math.PI&&(Q=0,ee=2*Math.PI),this.path.push({type:"arc",x:I,y:U,radius:K,startAngle:Q,endAngle:ee,counterclockwise:oe})},h.prototype.arcTo=function(I,U,K,Q,ee){throw new Error("arcTo not implemented.")},h.prototype.rect=function(I,U,K,Q){if(isNaN(I)||isNaN(U)||isNaN(K)||isNaN(Q))throw sn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,U),this.lineTo(I+K,U),this.lineTo(I+K,U+Q),this.lineTo(I,U+Q),this.lineTo(I,U),this.lineTo(I+K,U),this.lineTo(I,U)},h.prototype.fillRect=function(I,U,K,Q){if(isNaN(I)||isNaN(U)||isNaN(K)||isNaN(Q))throw sn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var ee={};this.lineCap!=="butt"&&(ee.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ee.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,U,K,Q),this.fill(),ee.hasOwnProperty("lineCap")&&(this.lineCap=ee.lineCap),ee.hasOwnProperty("lineJoin")&&(this.lineJoin=ee.lineJoin)}},h.prototype.strokeRect=function(I,U,K,Q){if(isNaN(I)||isNaN(U)||isNaN(K)||isNaN(Q))throw sn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(I,U,K,Q),this.stroke())},h.prototype.clearRect=function(I,U,K,Q){if(isNaN(I)||isNaN(U)||isNaN(K)||isNaN(Q))throw sn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,U,K,Q))},h.prototype.save=function(I){I=typeof I!="boolean"||I;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},h.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(U),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(I){var U,K,Q,ee;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))U=0,K=0,Q=0,ee=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(oe!==null)U=parseInt(oe[1]),K=parseInt(oe[2]),Q=parseInt(oe[3]),ee=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)U=parseInt(oe[1]),K=parseInt(oe[2]),Q=parseInt(oe[3]),ee=parseFloat(oe[4]);else{if(ee=1,typeof I=="string"&&I.charAt(0)!=="#"){var se=new HR(I);I=se.ok?se.toHex():"#000000"}I.length===4?(U=I.substring(1,2),U+=U,K=I.substring(2,3),K+=K,Q=I.substring(3,4),Q+=Q):(U=I.substring(1,3),K=I.substring(3,5),Q=I.substring(5,7)),U=parseInt(U,16),K=parseInt(K,16),Q=parseInt(Q,16)}}return{r:U,g:K,b:Q,a:ee,style:I}},d=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(I,U,K,Q){if(isNaN(U)||isNaN(K)||typeof I!="string")throw sn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!d.call(this)){var ee=z(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;P.call(this,{text:I,x:U,y:K,scale:oe,angle:ee,align:this.textAlign,maxWidth:Q})}},h.prototype.strokeText=function(I,U,K,Q){if(isNaN(U)||isNaN(K)||typeof I!="string")throw sn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){Q=isNaN(Q)?void 0:Q;var ee=z(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;P.call(this,{text:I,x:U,y:K,scale:oe,renderingMode:"stroke",angle:ee,align:this.textAlign,maxWidth:Q})}},h.prototype.measureText=function(I){if(typeof I!="string")throw sn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,K=this.pdf.internal.scaleFactor,Q=U.internal.getFontSize(),ee=U.getStringUnitWidth(I)*Q/U.internal.scaleFactor,oe=function(se){var ae=(se=se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this};return new oe({width:ee*=Math.round(96*K/72*1e4)/1e4})},h.prototype.scale=function(I,U){if(isNaN(I)||isNaN(U))throw sn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(I,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.rotate=function(I){if(isNaN(I))throw sn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new l(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},h.prototype.translate=function(I,U){if(isNaN(I)||isNaN(U))throw sn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,I,U);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.transform=function(I,U,K,Q,ee,oe){if(isNaN(I)||isNaN(U)||isNaN(K)||isNaN(Q)||isNaN(ee)||isNaN(oe))throw sn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var se=new l(I,U,K,Q,ee,oe);this.ctx.transform=this.ctx.transform.multiply(se)},h.prototype.setTransform=function(I,U,K,Q,ee,oe){I=isNaN(I)?1:I,U=isNaN(U)?0:U,K=isNaN(K)?0:K,Q=isNaN(Q)?1:Q,ee=isNaN(ee)?0:ee,oe=isNaN(oe)?0:oe,this.ctx.transform=new l(I,U,K,Q,ee,oe)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(I,U,K,Q,ee,oe,se,ae,Ee){var we=this.pdf.getImageProperties(I),Pe=1,be=1,ke=1,pe=1;Q!==void 0&&ae!==void 0&&(ke=ae/Q,pe=Ee/ee,Pe=we.width/Q*ae/Q,be=we.height/ee*Ee/ee),oe===void 0&&(oe=U,se=K,U=0,K=0),Q!==void 0&&ae===void 0&&(ae=Q,Ee=ee),Q===void 0&&ae===void 0&&(ae=we.width,Ee=we.height);for(var ie,nt=this.ctx.transform.decompose(),De=z(nt.rotate.shx),Te=new l,Oe=(Te=(Te=(Te=Te.multiply(nt.translate)).multiply(nt.skew)).multiply(nt.scale)).applyToRectangle(new a(oe-U*ke,se-K*pe,Q*Pe,ee*be)),Ue=v.call(this,Oe),Be=[],et=0;et<Ue.length;et+=1)Be.indexOf(Ue[et])===-1&&Be.push(Ue[et]);if(b(Be),this.autoPaging)for(var Je=Be[0],it=Be[Be.length-1],Ze=Je;Ze<it+1;Ze++){this.pdf.setPage(Ze);var dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=Ze===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$e=Ze===1?0:st+(Ze-2)*wt;if(this.ctx.clip_path.length!==0){var Wt=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(ie,this.posX+this.margin[3],-$e+bt+this.ctx.prevPageLastElemOffset),T.call(this,"fill",!0),this.path=Wt}var Tt=JSON.parse(JSON.stringify(Oe));Tt=x([Tt],this.posX+this.margin[3],-$e+bt+this.ctx.prevPageLastElemOffset)[0];var _i=(Ze>Je||Ze<it)&&m.call(this);_i&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,wt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",Tt.x,Tt.y,Tt.w,Tt.h,null,null,De),_i&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",Oe.x,Oe.y,Oe.w,Oe.h,null,null,De)};var v=function(I,U,K){var Q=[];U=U||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ee=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":Q.push(Math.floor((I.y+ee)/K)+1);break;case"arc":Q.push(Math.floor((I.y+ee-I.radius)/K)+1),Q.push(Math.floor((I.y+ee+I.radius)/K)+1);break;case"qct":var oe=B(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);Q.push(Math.floor((oe.y+ee)/K)+1),Q.push(Math.floor((oe.y+oe.h+ee)/K)+1);break;case"bct":var se=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);Q.push(Math.floor((se.y+ee)/K)+1),Q.push(Math.floor((se.y+se.h+ee)/K)+1);break;case"rect":Q.push(Math.floor((I.y+ee)/K)+1),Q.push(Math.floor((I.y+I.h+ee)/K)+1)}for(var ae=0;ae<Q.length;ae+=1)for(;this.pdf.internal.getNumberOfPages()<Q[ae];)y.call(this);return Q},y=function(){var I=this.fillStyle,U=this.strokeStyle,K=this.font,Q=this.lineCap,ee=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=U,this.font=K,this.lineCap=Q,this.lineWidth=ee,this.lineJoin=oe},x=function(I,U,K){for(var Q=0;Q<I.length;Q++)switch(I[Q].type){case"bct":I[Q].x2+=U,I[Q].y2+=K;case"qct":I[Q].x1+=U,I[Q].y1+=K;case"mt":case"lt":case"arc":default:I[Q].x+=U,I[Q].y+=K}return I},b=function(I){return I.sort(function(U,K){return U-K})},E=function(I,U){for(var K,Q,ee=this.fillStyle,oe=this.strokeStyle,se=this.lineCap,ae=this.lineWidth,Ee=Math.abs(ae*this.ctx.transform.scaleX),we=this.lineJoin,Pe=JSON.parse(JSON.stringify(this.path)),be=JSON.parse(JSON.stringify(this.path)),ke=[],pe=0;pe<be.length;pe++)if(be[pe].x!==void 0)for(var ie=v.call(this,be[pe]),nt=0;nt<ie.length;nt+=1)ke.indexOf(ie[nt])===-1&&ke.push(ie[nt]);for(var De=0;De<ke.length;De++)for(;this.pdf.internal.getNumberOfPages()<ke[De];)y.call(this);if(b(ke),this.autoPaging)for(var Te=ke[0],Oe=ke[ke.length-1],Ue=Te;Ue<Oe+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=ee,this.strokeStyle=oe,this.lineCap=se,this.lineWidth=Ee,this.lineJoin=we;var Be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],et=Ue===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=Ue===1?0:Je+(Ue-2)*it;if(this.ctx.clip_path.length!==0){var dt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(K,this.posX+this.margin[3],-Ze+et+this.ctx.prevPageLastElemOffset),T.call(this,I,!0),this.path=dt}if(Q=JSON.parse(JSON.stringify(Pe)),this.path=x(Q,this.posX+this.margin[3],-Ze+et+this.ctx.prevPageLastElemOffset),U===!1||Ue===0){var bt=(Ue>Te||Ue<Oe)&&m.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,it,null).clip().discardPath()),T.call(this,I,U),bt&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}else this.lineWidth=Ee,T.call(this,I,U),this.lineWidth=ae;this.path=Pe},T=function(I,U){if((I!=="stroke"||U||!p.call(this))&&(I==="stroke"||U||!d.call(this))){for(var K,Q,ee=[],oe=this.path,se=0;se<oe.length;se++){var ae=oe[se];switch(ae.type){case"begin":ee.push({begin:!0});break;case"close":ee.push({close:!0});break;case"mt":ee.push({start:ae,deltas:[],abs:[]});break;case"lt":var Ee=ee.length;if(oe[se-1]&&!isNaN(oe[se-1].x)&&(K=[ae.x-oe[se-1].x,ae.y-oe[se-1].y],Ee>0)){for(;Ee>=0;Ee--)if(ee[Ee-1].close!==!0&&ee[Ee-1].begin!==!0){ee[Ee-1].deltas.push(K),ee[Ee-1].abs.push(ae);break}}break;case"bct":K=[ae.x1-oe[se-1].x,ae.y1-oe[se-1].y,ae.x2-oe[se-1].x,ae.y2-oe[se-1].y,ae.x-oe[se-1].x,ae.y-oe[se-1].y],ee[ee.length-1].deltas.push(K);break;case"qct":var we=oe[se-1].x+2/3*(ae.x1-oe[se-1].x),Pe=oe[se-1].y+2/3*(ae.y1-oe[se-1].y),be=ae.x+2/3*(ae.x1-ae.x),ke=ae.y+2/3*(ae.y1-ae.y),pe=ae.x,ie=ae.y;K=[we-oe[se-1].x,Pe-oe[se-1].y,be-oe[se-1].x,ke-oe[se-1].y,pe-oe[se-1].x,ie-oe[se-1].y],ee[ee.length-1].deltas.push(K);break;case"arc":ee.push({deltas:[],abs:[],arc:!0}),Array.isArray(ee[ee.length-1].abs)&&ee[ee.length-1].abs.push(ae)}}Q=U?null:I==="stroke"?"stroke":"fill";for(var nt=!1,De=0;De<ee.length;De++)if(ee[De].arc)for(var Te=ee[De].abs,Oe=0;Oe<Te.length;Oe++){var Ue=Te[Oe];Ue.type==="arc"?S.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,U,!nt):j.call(this,Ue.x,Ue.y),nt=!0}else if(ee[De].close===!0)this.pdf.internal.out("h"),nt=!1;else if(ee[De].begin!==!0){var Be=ee[De].start.x,et=ee[De].start.y;F.call(this,ee[De].deltas,Be,et),nt=!0}Q&&C.call(this,Q),U&&N.call(this)}},D=function(I){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-K;case"top":return I+U-K;case"hanging":return I+U-2*K;case"middle":return I+U/2-K;case"ideographic":return I;case"alphabetic":default:return I}},R=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(U,K){this.colorStops.push([U,K])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(I,U,K,Q,ee,oe,se,ae,Ee){for(var we=O.call(this,K,Q,ee,oe),Pe=0;Pe<we.length;Pe++){var be=we[Pe];Pe===0&&(Ee?k.call(this,be.x1+I,be.y1+U):j.call(this,be.x1+I,be.y1+U)),H.call(this,I,U,be.x2,be.y2,be.x3,be.y3,be.x4,be.y4)}ae?N.call(this):C.call(this,se)},C=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},N=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(I,U){this.pdf.internal.out(n(I)+" "+i(U)+" m")},P=function(I){var U;switch(I.align){case"right":case"end":U="right";break;case"center":U="center";break;case"left":case"start":default:U="left"}var K=this.pdf.getTextDimensions(I.text),Q=D.call(this,I.y),ee=R.call(this,Q)-K.h,oe=this.ctx.transform.applyToPoint(new o(I.x,Q)),se=this.ctx.transform.decompose(),ae=new l;ae=(ae=(ae=ae.multiply(se.translate)).multiply(se.skew)).multiply(se.scale);for(var Ee,we,Pe,be=this.ctx.transform.applyToRectangle(new a(I.x,Q,K.w,K.h)),ke=ae.applyToRectangle(new a(I.x,ee,K.w,K.h)),pe=v.call(this,ke),ie=[],nt=0;nt<pe.length;nt+=1)ie.indexOf(pe[nt])===-1&&ie.push(pe[nt]);if(b(ie),this.autoPaging)for(var De=ie[0],Te=ie[ie.length-1],Oe=De;Oe<Te+1;Oe++){this.pdf.setPage(Oe);var Ue=Oe===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[2],Je=et-this.margin[0],it=this.pdf.internal.pageSize.width-this.margin[1],Ze=it-this.margin[3],dt=Oe===1?0:Be+(Oe-2)*Je;if(this.ctx.clip_path.length!==0){var bt=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Ee,this.posX+this.margin[3],-1*dt+Ue),T.call(this,"fill",!0),this.path=bt}var st=x([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-dt+Ue+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*I.scale),Pe=this.lineWidth,this.lineWidth=Pe*I.scale);var wt=this.autoPaging!=="text";if(wt||st.y+st.h<=et){if(wt||st.y>=Ue&&st.x<=it){var $e=wt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||it-st.x)[0],Wt=x([JSON.parse(JSON.stringify(be))],this.posX+this.margin[3],-dt+Ue+this.ctx.prevPageLastElemOffset)[0],Tt=wt&&(Oe>De||Oe<Te)&&m.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,Je,null).clip().discardPath()),this.pdf.text($e,Wt.x,Wt.y,{angle:I.angle,align:U,renderingMode:I.renderingMode}),Tt&&this.pdf.restoreGraphicsState()}}else st.y<et&&(this.ctx.prevPageLastElemOffset+=et-st.y);I.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Pe)}else I.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*I.scale),Pe=this.lineWidth,this.lineWidth=Pe*I.scale),this.pdf.text(I.text,oe.x+this.posX,oe.y+this.posY,{angle:I.angle,align:U,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Pe)},j=function(I,U,K,Q){K=K||0,Q=Q||0,this.pdf.internal.out(n(I+K)+" "+i(U+Q)+" l")},F=function(I,U,K){return this.pdf.lines(I,U,K,null,null)},H=function(I,U,K,Q,ee,oe,se,ae){this.pdf.internal.out([e(r(K+I)),e(s(Q+U)),e(r(ee+I)),e(s(oe+U)),e(r(se+I)),e(s(ae+U)),"c"].join(" "))},O=function(I,U,K,Q){for(var ee=2*Math.PI,oe=Math.PI/2;U>K;)U-=ee;var se=Math.abs(K-U);se<ee&&Q&&(se=ee-se);for(var ae=[],Ee=Q?-1:1,we=U;se>1e-5;){var Pe=we+Ee*Math.min(se,oe);ae.push($.call(this,I,we,Pe)),se-=Math.abs(Pe-we),we=Pe}return ae},$=function(I,U,K){var Q=(K-U)/2,ee=I*Math.cos(Q),oe=I*Math.sin(Q),se=ee,ae=-oe,Ee=se*se+ae*ae,we=Ee+se*ee+ae*oe,Pe=4/3*(Math.sqrt(2*Ee*we)-we)/(se*oe-ae*ee),be=se-Pe*ae,ke=ae+Pe*se,pe=be,ie=-ke,nt=Q+U,De=Math.cos(nt),Te=Math.sin(nt);return{x1:I*Math.cos(U),y1:I*Math.sin(U),x2:be*De-ke*Te,y2:be*Te+ke*De,x3:pe*De-ie*Te,y3:pe*Te+ie*De,x4:I*Math.cos(K),y4:I*Math.sin(K)}},z=function(I){return 180*I/Math.PI},B=function(I,U,K,Q,ee,oe){var se=I+.5*(K-I),ae=U+.5*(Q-U),Ee=ee+.5*(K-ee),we=oe+.5*(Q-oe),Pe=Math.min(I,ee,se,Ee),be=Math.max(I,ee,se,Ee),ke=Math.min(U,oe,ae,we),pe=Math.max(U,oe,ae,we);return new a(Pe,ke,be-Pe,pe-ke)},X=function(I,U,K,Q,ee,oe,se,ae){var Ee,we,Pe,be,ke,pe,ie,nt,De,Te,Oe,Ue,Be,et,Je=K-I,it=Q-U,Ze=ee-K,dt=oe-Q,bt=se-ee,st=ae-oe;for(we=0;we<41;we++)De=(ie=(Pe=I+(Ee=we/40)*Je)+Ee*((ke=K+Ee*Ze)-Pe))+Ee*(ke+Ee*(ee+Ee*bt-ke)-ie),Te=(nt=(be=U+Ee*it)+Ee*((pe=Q+Ee*dt)-be))+Ee*(pe+Ee*(oe+Ee*st-pe)-nt),we==0?(Oe=De,Ue=Te,Be=De,et=Te):(Oe=Math.min(Oe,De),Ue=Math.min(Ue,Te),Be=Math.max(Be,De),et=Math.max(et,Te));return new a(Math.round(Oe),Math.round(Ue),Math.round(Be-Oe),Math.round(et-Ue))},te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,U,K=(I=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:U}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(ut.API),function(t){var e=function(s){var o,a,l,c,u,h,f,d,p,m;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(u=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(h=(u=((u=((u=((u=(u-(m=u%85))/85)-(p=u%85))/85)-(d=u%85))/85)-(f=u%85))/85)%85,a.push(h+33,f+33,d+33,p+33,m+33)):a.push(122);return function(v,y){for(var x=y;x>0;x--)v.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,u,h=String,f="length",d=255,p="charCodeAt",m="slice",v="replace";for(s[m](-2),s=s[m](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),l=[],c=0,u=(s+=o="uuuuu"[m](s[f]%5||5))[f];u>c;c+=5)a=52200625*(s[p](c)-33)+614125*(s[p](c+1)-33)+7225*(s[p](c+2)-33)+85*(s[p](c+3)-33)+(s[p](c+4)-33),l.push(d&a>>24,d&a>>16,d&a>>8,d&a);return function(y,x){for(var b=x;b>0;b--)y.pop()}(l,o[f]),h.fromCharCode.apply(h,l)},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},r=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Mx(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=r(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(ut.API),function(t){t.loadFile=function(e,n,i){return function(r,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var h=new XMLHttpRequest,f=0,d=function(p){var m=p.length,v=[],y=String.fromCharCode;for(f=0;f<m;f+=1)v.push(y(255&p.charCodeAt(f)));return v.join("")};if(h.open("GET",l,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?u(d(this.responseText)):u(void 0)}),h.send(null),c&&h.status===200)return d(h.responseText)}(r,s,o)}catch{}return a}(e,n,i)},t.loadImageFile=t.loadFile}(ut.API),function(t){function e(){return(pt.html2canvas?Promise.resolve(pt.html2canvas):Rx(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(pt.DOMPurify?Promise.resolve(pt.DOMPurify):Rx(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var i=function(o){var a=Zt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},r=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:r("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,u){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var f=0;f<c.length;++f){var d=c[f],p=d.src.find(function(m){return m.format==="truetype"});p&&l.addFont(p.url,d.ref.name,d.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(i(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(i(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,u).then(function(h){return l.updateProgress(1),h})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),u=l.call(c,o,a);return s.convert(u,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ut.getPageSize=function(o,a,l){if(Zt(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var d,p=0,m=0;if(f.hasOwnProperty(h))p=f[h][1]/u,m=f[h][0]/u;else try{p=l[1],m=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",m>p&&(d=m,m=p,p=d);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",p>m&&(d=m,m=p,p=d)}return{width:m,height:p,unit:a,k:u,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map($x):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(ut.API),ut.API.addJS=function(t){return PT=t,this.internal.events.subscribe("postPutResources",function(){w0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(w0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),RT=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+PT+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){w0!==void 0&&RT!==void 0&&this.internal.out("/Names <</JavaScript "+w0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=n.outline.render().split(/\r\n/),s=0;s<r.length;s++){var o=r[s],a=i.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var h=n.internal.newObject();u.push(h);var f=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var d=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<u.length;s++)n.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+d+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,r,s){var o={title:r,options:s,children:[]};return i==null&&(i=this.root),i.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var o=i.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,r){for(var s=0;s<r.children.length;s++)i.count++,this.count_r(i,r.children[s]);return i.count}}])}(ut.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,r,s,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var f,d=256*h.charCodeAt(4)+h.charCodeAt(5),p=h.length,m={width:0,height:0,numcomponents:1},v=4;v<p;v+=2){if(v+=d,e.indexOf(h.charCodeAt(v+1))!==-1){f=256*h.charCodeAt(v+5)+h.charCodeAt(v+6),m={width:256*h.charCodeAt(v+7)+h.charCodeAt(v+8),height:f,numcomponents:h.charCodeAt(v+9)};break}d=256*h.charCodeAt(v+2)+h.charCodeAt(v+3)}return m}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:i,alias:r}}return u}}(ut.API);var Wc,S0,NT,IT,DT,yq=function(){var t,e,n;function i(s){var o,a,l,c,u,h,f,d,p,m,v,y,x,b;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),p=(function(){var E,T;for(T=[],E=0;E<4;++E)T.push(String.fromCharCode(this.data[this.pos++]));return T}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,h.delay=1e3*u/c,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(p==="fdAT"&&(this.pos+=4,o-=4),s=(h!=null?h.data:void 0)||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((m=l-this.transparency.indexed.length)>0)for(x=0;0<=m?x<m:x>m;0<=m?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(v=this.read(o)).indexOf(0),d=String.fromCharCode.apply(String,v.slice(0,f)),this.text[d]=String.fromCharCode.apply(String,v.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(b=this.colorType)===4||b===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function u(h,f,d,p){var m,v,y,x,b,E,T,D,R,S,C,N,k,P,j,F,H,O,$,z,B,X=Math.ceil((c.width-h)/d),te=Math.ceil((c.height-f)/p),I=c.width==X&&c.height==te;for(P=o*X,N=I?a:new Uint8Array(P*te),E=s.length,k=0,v=0;k<te&&l<E;){switch(s[l++]){case 0:for(x=H=0;H<P;x=H+=1)N[v++]=s[l++];break;case 1:for(x=O=0;O<P;x=O+=1)m=s[l++],b=x<o?0:N[v-o],N[v++]=(m+b)%256;break;case 2:for(x=$=0;$<P;x=$+=1)m=s[l++],y=(x-x%o)/o,j=k&&N[(k-1)*P+y*o+x%o],N[v++]=(j+m)%256;break;case 3:for(x=z=0;z<P;x=z+=1)m=s[l++],y=(x-x%o)/o,b=x<o?0:N[v-o],j=k&&N[(k-1)*P+y*o+x%o],N[v++]=(m+Math.floor((b+j)/2))%256;break;case 4:for(x=B=0;B<P;x=B+=1)m=s[l++],y=(x-x%o)/o,b=x<o?0:N[v-o],k===0?j=F=0:(j=N[(k-1)*P+y*o+x%o],F=y&&N[(k-1)*P+(y-1)*o+x%o]),T=b+j-F,D=Math.abs(T-b),S=Math.abs(T-j),C=Math.abs(T-F),R=D<=S&&D<=C?b:S<=C?j:F,N[v++]=(m+R)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!I){var U=((f+k*p)*c.width+h)*o,K=k*P;for(x=0;x<X;x+=1){for(var Q=0;Q<o;Q+=1)a[U++]=N[K++];U+=(d-1)*o}}k++}}return s=KW(s),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},i.prototype.decodePalette=function(){var s,o,a,l,c,u,h,f,d;for(a=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+a.length),l=0,s=0,o=h=0,f=a.length;h<f;o=h+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(d=u[s++])!=null?d:255;return c},i.prototype.copyToImageData=function(s,o){var a,l,c,u,h,f,d,p,m,v,y;if(l=this.colors,m=null,a=this.hasAlphaChannel,this.palette.length&&(m=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,a=!0),p=(c=s.data||s).length,h=m||o,u=f=0,l===1)for(;u<p;)d=m?4*o[u/4]:f,v=h[d++],c[u++]=v,c[u++]=v,c[u++]=v,c[u++]=a?h[d++]:255,f=d;else for(;u<p;)d=m?4*o[u/4]:f,c[u++]=h[d++],c[u++]=h[d++],c[u++]=h[d++],c[u++]=a?h[d++]:255,f=d},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var r=function(){if(Object.prototype.toString.call(pt)==="[object Window]"){try{e=pt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),t=function(s){var o;if(r()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var o,a,l,c,u,h,f,d;if(this.animation){for(d=[],a=u=0,h=(f=this.animation.frames).length;u<h;a=++u)o=f[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,d.push(o.image=t(l));return d}},i.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},i.prototype.animate=function(s){var o,a,l,c,u,h,f=this;return a=0,h=this.animation,c=h.numFrames,l=h.frames,u=h.numPlays,(o=function(){var d,p;if(d=a++%c,p=l[d],f.renderFrame(s,d),c>1&&a/c<u)return f.animation._timeout=setTimeout(o,p.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function vq(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,r=t[e++],s=r>>7,o=1<<(7&r)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,u=[],h=0,f=null,d=0,p=null;for(this.width=n,this.height=i;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var m=t[e++];h=t[e++]|t[e++]<<8,f=t[e++],!(1&m)&&(f=null),d=m>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,E=t[e++],T=E>>6&1,D=1<<(7&E)+1,R=a,S=l,C=!1;E>>7&&(C=!0,R=e,S=D,e+=3*D);var N=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}u.push({x:v,y,width:x,height:b,has_local_palette:C,palette_offset:R,palette_size:S,data_offset:N,data_length:e-N,transparent_index:f,interlaced:!!T,delay:h,disposal:d});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(P){if(P<0||P>=u.length)throw new Error("Frame index out of range.");return u[P]},this.decodeAndBlitFrameBGRA=function(P,j){var F=this.frameInfo(P),H=F.width*F.height,O=new Uint8Array(H);MT(t,F.data_offset,O,H);var $=F.palette_offset,z=F.transparent_index;z===null&&(z=256);var B=F.width,X=n-B,te=B,I=4*(F.y*n+F.x),U=4*((F.y+F.height)*n+F.x),K=I,Q=4*X;F.interlaced===!0&&(Q+=4*n*7);for(var ee=8,oe=0,se=O.length;oe<se;++oe){var ae=O[oe];if(te===0&&(te=B,(K+=Q)>=U&&(Q=4*X+4*n*(ee-1),K=I+(B+X)*(ee<<1),ee>>=1)),ae===z)K+=4;else{var Ee=t[$+3*ae],we=t[$+3*ae+1],Pe=t[$+3*ae+2];j[K++]=Pe,j[K++]=we,j[K++]=Ee,j[K++]=255}--te}},this.decodeAndBlitFrameRGBA=function(P,j){var F=this.frameInfo(P),H=F.width*F.height,O=new Uint8Array(H);MT(t,F.data_offset,O,H);var $=F.palette_offset,z=F.transparent_index;z===null&&(z=256);var B=F.width,X=n-B,te=B,I=4*(F.y*n+F.x),U=4*((F.y+F.height)*n+F.x),K=I,Q=4*X;F.interlaced===!0&&(Q+=4*n*7);for(var ee=8,oe=0,se=O.length;oe<se;++oe){var ae=O[oe];if(te===0&&(te=B,(K+=Q)>=U&&(Q=4*X+4*n*(ee-1),K=I+(B+X)*(ee<<1),ee>>=1)),ae===z)K+=4;else{var Ee=t[$+3*ae],we=t[$+3*ae+1],Pe=t[$+3*ae+2];j[K++]=Ee,j[K++]=we,j[K++]=Pe,j[K++]=255}--te}}}function MT(t,e,n,i){for(var r=t[e++],s=1<<r,o=s+1,a=o+1,l=r+1,c=(1<<l)-1,u=0,h=0,f=0,d=t[e++],p=new Int32Array(4096),m=null;;){for(;u<16&&d!==0;)h|=t[e++]<<u,u+=8,d===1?d=t[e++]:--d;if(u<l)break;var v=h&c;if(h>>=l,u-=l,v!==s){if(v===o)break;for(var y=v<a?v:m,x=0,b=y;b>s;)b=p[b]>>8,++x;var E=b;if(f+x+(y!==v?1:0)>i)return void sn.log("Warning, gif stream longer than expected.");n[f++]=E;var T=f+=x;for(y!==v&&(n[f++]=E),b=y;x--;)b=p[b],n[--T]=255&b,b>>=8;m!==null&&a<4096&&(p[a++]=m<<8|E,a>=c+1&&l<12&&(++l,c=c<<1|1)),m=v}else a=o+1,c=(1<<(l=r+1))-1,m=null}return f!==i&&sn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Sv(t){var e,n,i,r,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),f=new Array(65535),d=new Array(64),p=new Array(64),m=[],v=0,y=7,x=new Array(64),b=new Array(64),E=new Array(64),T=new Array(256),D=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function O(I,U){for(var K=0,Q=0,ee=new Array,oe=1;oe<=16;oe++){for(var se=1;se<=I[oe];se++)ee[U[Q]]=[],ee[U[Q]][0]=K,ee[U[Q]][1]=oe,Q++,K++;K*=2}return ee}function $(I){for(var U=I[0],K=I[1]-1;K>=0;)U&1<<K&&(v|=1<<y),K--,--y<0&&(v==255?(z(255),z(0)):z(v),y=7,v=0)}function z(I){m.push(I)}function B(I){z(I>>8&255),z(255&I)}function X(I,U,K,Q,ee){for(var oe,se=ee[0],ae=ee[240],Ee=function(Te,Oe){var Ue,Be,et,Je,it,Ze,dt,bt,st,wt,$e=0;for(st=0;st<8;++st){Ue=Te[$e],Be=Te[$e+1],et=Te[$e+2],Je=Te[$e+3],it=Te[$e+4],Ze=Te[$e+5],dt=Te[$e+6];var Wt=Ue+(bt=Te[$e+7]),Tt=Ue-bt,_i=Be+dt,qt=Be-dt,nn=et+Ze,os=et-Ze,Mt=Je+it,Zi=Je-it,xn=Wt+Mt,xr=Wt-Mt,Ct=_i+nn,Vt=_i-nn;Te[$e]=xn+Ct,Te[$e+4]=xn-Ct;var Ve=.707106781*(Vt+xr);Te[$e+2]=xr+Ve,Te[$e+6]=xr-Ve;var Pt=.382683433*((xn=Zi+os)-(Vt=qt+Tt)),Zo=.5411961*xn+Pt,Qn=1.306562965*Vt+Pt,Fr=.707106781*(Ct=os+qt),br=Tt+Fr,at=Tt-Fr;Te[$e+5]=at+Zo,Te[$e+3]=at-Zo,Te[$e+1]=br+Qn,Te[$e+7]=br-Qn,$e+=8}for($e=0,st=0;st<8;++st){Ue=Te[$e],Be=Te[$e+8],et=Te[$e+16],Je=Te[$e+24],it=Te[$e+32],Ze=Te[$e+40],dt=Te[$e+48];var St=Ue+(bt=Te[$e+56]),mt=Ue-bt,Kt=Be+dt,an=Be-dt,ln=et+Ze,er=et-Ze,ac=Je+it,mo=Je-it,as=St+ac,ls=St-ac,cs=Kt+ln,Ds=Kt-ln;Te[$e]=as+cs,Te[$e+32]=as-cs;var Or=.707106781*(Ds+ls);Te[$e+16]=ls+Or,Te[$e+48]=ls-Or;var Ms=.382683433*((as=mo+er)-(Ds=an+mt)),il=.5411961*as+Ms,lc=1.306562965*Ds+Ms,cc=.707106781*(cs=er+an),uc=mt+cc,hc=mt-cc;Te[$e+40]=hc+il,Te[$e+24]=hc-il,Te[$e+8]=uc+lc,Te[$e+56]=uc-lc,$e++}for(st=0;st<64;++st)wt=Te[st]*Oe[st],d[st]=wt>0?wt+.5|0:wt-.5|0;return d}(I,U),we=0;we<64;++we)p[R[we]]=Ee[we];var Pe=p[0]-K;K=p[0],Pe==0?$(Q[0]):($(Q[f[oe=32767+Pe]]),$(h[oe]));for(var be=63;be>0&&p[be]==0;)be--;if(be==0)return $(se),K;for(var ke,pe=1;pe<=be;){for(var ie=pe;p[pe]==0&&pe<=be;)++pe;var nt=pe-ie;if(nt>=16){ke=nt>>4;for(var De=1;De<=ke;++De)$(ae);nt&=15}oe=32767+p[pe],$(ee[(nt<<4)+f[oe]]),$(h[oe]),pe++}return be!=63&&$(se),K}function te(I){I=Math.min(Math.max(I,1),100),s!=I&&(function(U){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var ee=o((K[Q]*U+50)/100);ee=Math.min(Math.max(ee,1),255),a[R[Q]]=ee}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],se=0;se<64;se++){var ae=o((oe[se]*U+50)/100);ae=Math.min(Math.max(ae,1),255),l[R[se]]=ae}for(var Ee=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,Pe=0;Pe<8;Pe++)for(var be=0;be<8;be++)c[we]=1/(a[R[we]]*Ee[Pe]*Ee[be]*8),u[we]=1/(l[R[we]]*Ee[Pe]*Ee[be]*8),we++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),s=I)}this.encode=function(I,U){U&&te(U),m=new Array,v=0,y=7,B(65496),B(65504),B(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),B(1),B(1),z(0),z(0),function(){B(65499),B(132),z(0);for(var Be=0;Be<64;Be++)z(a[Be]);z(1);for(var et=0;et<64;et++)z(l[et])}(),function(Be,et){B(65472),B(17),z(8),B(et),B(Be),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(I.width,I.height),function(){B(65476),B(418),z(0);for(var Be=0;Be<16;Be++)z(S[Be+1]);for(var et=0;et<=11;et++)z(C[et]);z(16);for(var Je=0;Je<16;Je++)z(N[Je+1]);for(var it=0;it<=161;it++)z(k[it]);z(1);for(var Ze=0;Ze<16;Ze++)z(P[Ze+1]);for(var dt=0;dt<=11;dt++)z(j[dt]);z(17);for(var bt=0;bt<16;bt++)z(F[bt+1]);for(var st=0;st<=161;st++)z(H[st])}(),B(65498),B(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var K=0,Q=0,ee=0;v=0,y=7,this.encode.displayName="_encode_";for(var oe,se,ae,Ee,we,Pe,be,ke,pe,ie=I.data,nt=I.width,De=I.height,Te=4*nt,Oe=0;Oe<De;){for(oe=0;oe<Te;){for(we=Te*Oe+oe,be=-1,ke=0,pe=0;pe<64;pe++)Pe=we+(ke=pe>>3)*Te+(be=4*(7&pe)),Oe+ke>=De&&(Pe-=Te*(Oe+1+ke-De)),oe+be>=Te&&(Pe-=oe+be-Te+4),se=ie[Pe++],ae=ie[Pe++],Ee=ie[Pe++],x[pe]=(D[se]+D[ae+256>>0]+D[Ee+512>>0]>>16)-128,b[pe]=(D[se+768>>0]+D[ae+1024>>0]+D[Ee+1280>>0]>>16)-128,E[pe]=(D[se+1280>>0]+D[ae+1536>>0]+D[Ee+1792>>0]>>16)-128;K=X(x,c,K,e,i),Q=X(b,u,Q,n,r),ee=X(E,u,ee,n,r),oe+=32}Oe+=8}if(y>=0){var Ue=[];Ue[1]=y+1,Ue[0]=(1<<y+1)-1,$(Ue)}return B(65497),new Uint8Array(m)},t=t||50,function(){for(var I=String.fromCharCode,U=0;U<256;U++)T[U]=I(U)}(),e=O(S,C),n=O(P,j),i=O(N,k),r=O(F,H),function(){for(var I=1,U=2,K=1;K<=15;K++){for(var Q=I;Q<U;Q++)f[32767+Q]=K,h[32767+Q]=[],h[32767+Q][1]=K,h[32767+Q][0]=Q;for(var ee=-(U-1);ee<=-I;ee++)f[32767+ee]=K,h[32767+ee]=[],h[32767+ee][1]=K,h[32767+ee][0]=U-1+ee;I<<=1,U<<=1}}(),function(){for(var I=0;I<256;I++)D[I]=19595*I,D[I+256>>0]=38470*I,D[I+512>>0]=7471*I+32768,D[I+768>>0]=-11059*I,D[I+1024>>0]=-21709*I,D[I+1280>>0]=32768*I+8421375,D[I+1536>>0]=-27439*I,D[I+1792>>0]=-5329*I}(),te(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ys(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function FT(t){function e(S){if(!S)throw Error("assert :P")}function n(S,C,N){for(var k=0;4>k;k++)if(S[C+k]!=N.charCodeAt(k))return!0;return!1}function i(S,C,N,k,P){for(var j=0;j<P;j++)S[C+j]=N[k+j]}function r(S,C,N,k){for(var P=0;P<k;P++)S[C+P]=N}function s(S){return new Int32Array(S)}function o(S,C){for(var N=[],k=0;k<S;k++)N.push(new C);return N}function a(S,C){var N=[];return function k(P,j,F){for(var H=F[j],O=0;O<H&&(P.push(F.length>j+1?[]:new C),!(F.length<j+1));O++)k(P[O],j+1,F)}(N,0,S),N}var l=function(){var S=this;function C(g,w){for(var L=1<<w-1>>>0;g&L;)L>>>=1;return L?(g&L-1)+L:g}function N(g,w,L,M,V){e(!(M%L));do g[w+(M-=L)]=V;while(0<M)}function k(g,w,L,M,V){if(e(2328>=V),512>=V)var q=s(512);else if((q=s(V))==null)return 0;return function(Y,J,Z,ne,ce,ye){var ve,de,Re=J,_e=1<<Z,ue=s(16),he=s(16);for(e(ce!=0),e(ne!=null),e(Y!=null),e(0<Z),de=0;de<ce;++de){if(15<ne[de])return 0;++ue[ne[de]]}if(ue[0]==ce)return 0;for(he[1]=0,ve=1;15>ve;++ve){if(ue[ve]>1<<ve)return 0;he[ve+1]=he[ve]+ue[ve]}for(de=0;de<ce;++de)ve=ne[de],0<ne[de]&&(ye[he[ve]++]=de);if(he[15]==1)return(ne=new P).g=0,ne.value=ye[0],N(Y,Re,1,_e,ne),_e;var Le,Ie=-1,Ce=_e-1,We=0,ze=1,ct=1,He=1<<Z;for(de=0,ve=1,ce=2;ve<=Z;++ve,ce<<=1){if(ze+=ct<<=1,0>(ct-=ue[ve]))return 0;for(;0<ue[ve];--ue[ve])(ne=new P).g=ve,ne.value=ye[de++],N(Y,Re+We,ce,He,ne),We=C(We,ve)}for(ve=Z+1,ce=2;15>=ve;++ve,ce<<=1){if(ze+=ct<<=1,0>(ct-=ue[ve]))return 0;for(;0<ue[ve];--ue[ve]){if(ne=new P,(We&Ce)!=Ie){for(Re+=He,Le=1<<(Ie=ve)-Z;15>Ie&&!(0>=(Le-=ue[Ie]));)++Ie,Le<<=1;_e+=He=1<<(Le=Ie-Z),Y[J+(Ie=We&Ce)].g=Le+Z,Y[J+Ie].value=Re-J-Ie}ne.g=ve-Z,ne.value=ye[de++],N(Y,Re+(We>>Z),ce,He,ne),We=C(We,ve)}}return ze!=2*he[15]-1?0:_e}(g,w,L,M,V,q)}function P(){this.value=this.g=0}function j(){this.value=this.g=0}function F(){this.G=o(5,P),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(gi,j)}function H(g,w,L,M){e(g!=null),e(w!=null),e(2147483648>M),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=w,g.pa=L,g.Jd=w,g.Yc=L+M,g.Zc=4<=M?L+M-4+1:L,oe(g)}function O(g,w){for(var L=0;0<w--;)L|=ae(g,128)<<w;return L}function $(g,w){var L=O(g,w);return se(g)?-L:L}function z(g,w,L,M){var V,q=0;for(e(g!=null),e(w!=null),e(4294967288>M),g.Sb=M,g.Ra=0,g.u=0,g.h=0,4<M&&(M=4),V=0;V<M;++V)q+=w[L+V]<<8*V;g.Ra=q,g.bb=M,g.oa=w,g.pa=L}function B(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<Tc-8>>>0,++g.bb,g.u-=8;K(g)&&(g.h=1,g.u=0)}function X(g,w){if(e(0<=w),!g.h&&w<=Ac){var L=U(g)&Ec[w];return g.u+=w,B(g),L}return g.h=1,g.u=0}function te(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(g){return g.Ra>>>(g.u&Tc-1)>>>0}function K(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>Tc}function Q(g,w){g.u=w,g.h=K(g)}function ee(g){g.u>=lh&&(e(g.u>=lh),B(g))}function oe(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function se(g){return O(g,1)}function ae(g,w){var L=g.Ca;0>g.b&&oe(g);var M=g.b,V=L*w>>>8,q=(g.I>>>M>V)+0;for(q?(L-=V,g.I-=V+1<<M>>>0):L=V+1,M=L,V=0;256<=M;)V+=8,M>>=8;return M=7^V+nr[M],g.b-=M,g.Ca=(L<<M)-1,q}function Ee(g,w,L){g[w+0]=L>>24&255,g[w+1]=L>>16&255,g[w+2]=L>>8&255,g[w+3]=L>>0&255}function we(g,w){return g[w+0]<<0|g[w+1]<<8}function Pe(g,w){return we(g,w)|g[w+2]<<16}function be(g,w){return we(g,w)|we(g,w+2)<<16}function ke(g,w){var L=1<<w;return e(g!=null),e(0<w),g.X=s(L),g.X==null?0:(g.Mb=32-w,g.Xa=w,1)}function pe(g,w){e(g!=null),e(w!=null),e(g.Xa==w.Xa),i(w.X,0,g.X,0,1<<w.Xa)}function ie(){this.X=[],this.Xa=this.Mb=0}function nt(g,w,L,M){e(L!=null),e(M!=null);var V=L[0],q=M[0];return V==0&&(V=(g*q+w/2)/w),q==0&&(q=(w*V+g/2)/g),0>=V||0>=q?0:(L[0]=V,M[0]=q,1)}function De(g,w){return g+(1<<w)-1>>>w}function Te(g,w){return((4278255360&g)+(4278255360&w)>>>0&4278255360)+((16711935&g)+(16711935&w)>>>0&16711935)>>>0}function Oe(g,w){S[w]=function(L,M,V,q,Y,J,Z){var ne;for(ne=0;ne<Y;++ne){var ce=S[g](J[Z+ne-1],V,q+ne);J[Z+ne]=Te(L[M+ne],ce)}}}function Ue(){this.ud=this.hd=this.jd=0}function Be(g,w){return((4278124286&(g^w))>>>1)+(g&w)>>>0}function et(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Je(g,w){return et(g+(g-w+.5>>1))}function it(g,w,L){return Math.abs(w-L)-Math.abs(g-L)}function Ze(g,w,L,M,V,q,Y){for(M=q[Y-1],L=0;L<V;++L)q[Y+L]=M=Te(g[w+L],M)}function dt(g,w,L,M,V){var q;for(q=0;q<L;++q){var Y=g[w+q],J=Y>>8&255,Z=16711935&(Z=(Z=16711935&Y)+((J<<16)+J));M[V+q]=(4278255360&Y)+Z>>>0}}function bt(g,w){w.jd=g>>0&255,w.hd=g>>8&255,w.ud=g>>16&255}function st(g,w,L,M,V,q){var Y;for(Y=0;Y<M;++Y){var J=w[L+Y],Z=J>>>8,ne=J,ce=255&(ce=(ce=J>>>16)+((g.jd<<24>>24)*(Z<<24>>24)>>>5));ne=255&(ne=(ne=ne+((g.hd<<24>>24)*(Z<<24>>24)>>>5))+((g.ud<<24>>24)*(ce<<24>>24)>>>5)),V[q+Y]=(4278255360&J)+(ce<<16)+ne}}function wt(g,w,L,M,V){S[w]=function(q,Y,J,Z,ne,ce,ye,ve,de){for(Z=ye;Z<ve;++Z)for(ye=0;ye<de;++ye)ne[ce++]=V(J[M(q[Y++])])},S[g]=function(q,Y,J,Z,ne,ce,ye){var ve=8>>q.b,de=q.Ea,Re=q.K[0],_e=q.w;if(8>ve)for(q=(1<<q.b)-1,_e=(1<<ve)-1;Y<J;++Y){var ue,he=0;for(ue=0;ue<de;++ue)ue&q||(he=M(Z[ne++])),ce[ye++]=V(Re[he&_e]),he>>=ve}else S["VP8LMapColor"+L](Z,ne,Re,_e,ce,ye,Y,J,de)}}function $e(g,w,L,M,V){for(L=w+L;w<L;){var q=g[w++];M[V++]=q>>16&255,M[V++]=q>>8&255,M[V++]=q>>0&255}}function Wt(g,w,L,M,V){for(L=w+L;w<L;){var q=g[w++];M[V++]=q>>16&255,M[V++]=q>>8&255,M[V++]=q>>0&255,M[V++]=q>>24&255}}function Tt(g,w,L,M,V){for(L=w+L;w<L;){var q=(Y=g[w++])>>16&240|Y>>12&15,Y=Y>>0&240|Y>>28&15;M[V++]=q,M[V++]=Y}}function _i(g,w,L,M,V){for(L=w+L;w<L;){var q=(Y=g[w++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;M[V++]=q,M[V++]=Y}}function qt(g,w,L,M,V){for(L=w+L;w<L;){var q=g[w++];M[V++]=q>>0&255,M[V++]=q>>8&255,M[V++]=q>>16&255}}function nn(g,w,L,M,V,q){if(q==0)for(L=w+L;w<L;)Ee(M,((q=g[w++])[0]>>24|q[1]>>8&65280|q[2]<<8&16711680|q[3]<<24)>>>0),V+=32;else i(M,V,g,w,L)}function os(g,w){S[w][0]=S[g+"0"],S[w][1]=S[g+"1"],S[w][2]=S[g+"2"],S[w][3]=S[g+"3"],S[w][4]=S[g+"4"],S[w][5]=S[g+"5"],S[w][6]=S[g+"6"],S[w][7]=S[g+"7"],S[w][8]=S[g+"8"],S[w][9]=S[g+"9"],S[w][10]=S[g+"10"],S[w][11]=S[g+"11"],S[w][12]=S[g+"12"],S[w][13]=S[g+"13"],S[w][14]=S[g+"0"],S[w][15]=S[g+"0"]}function Mt(g){return g==I1||g==D1||g==sp||g==M1}function Zi(){this.eb=[],this.size=this.A=this.fb=0}function xn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function xr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zi,this.f.kb=new xn,this.sd=null}function Ct(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Vt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ve(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Pt(g,w){var L=g.T,M=w.ba.f.RGBA,V=M.eb,q=M.fb+g.ka*M.A,Y=Hr[w.ba.S],J=g.y,Z=g.O,ne=g.f,ce=g.N,ye=g.ea,ve=g.W,de=w.cc,Re=w.dc,_e=w.Mc,ue=w.Nc,he=g.ka,Le=g.ka+g.T,Ie=g.U,Ce=Ie+1>>1;for(he==0?Y(J,Z,null,null,ne,ce,ye,ve,ne,ce,ye,ve,V,q,null,null,Ie):(Y(w.ec,w.fc,J,Z,de,Re,_e,ue,ne,ce,ye,ve,V,q-M.A,V,q,Ie),++L);he+2<Le;he+=2)de=ne,Re=ce,_e=ye,ue=ve,ce+=g.Rc,ve+=g.Rc,q+=2*M.A,Y(J,(Z+=2*g.fa)-g.fa,J,Z,de,Re,_e,ue,ne,ce,ye,ve,V,q-M.A,V,q,Ie);return Z+=g.fa,g.j+Le<g.o?(i(w.ec,w.fc,J,Z,Ie),i(w.cc,w.dc,ne,ce,Ce),i(w.Mc,w.Nc,ye,ve,Ce),L--):1&Le||Y(J,Z,null,null,ne,ce,ye,ve,ne,ce,ye,ve,V,q+M.A,null,null,Ie),L}function Zo(g,w,L){var M=g.F,V=[g.J];if(M!=null){var q=g.U,Y=w.ba.S,J=Y==rp||Y==sp;w=w.ba.f.RGBA;var Z=[0],ne=g.ka;Z[0]=g.T,g.Kb&&(ne==0?--Z[0]:(--ne,V[0]-=g.width),g.j+g.ka+g.T==g.o&&(Z[0]=g.o-g.j-ne));var ce=w.eb;ne=w.fb+ne*w.A,g=un(M,V[0],g.width,q,Z,ce,ne+(J?0:3),w.A),e(L==Z),g&&Mt(Y)&&$r(ce,ne,J,q,Z,w.A)}return 0}function Qn(g){var w=g.ma,L=w.ba.S,M=11>L,V=L==np||L==ip||L==rp||L==N1||L==12||Mt(L);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!oh(w.Oa,g,V?11:12))return 0;if(V&&Mt(L)&&Me(),g.da)alert("todo:use_scaling");else{if(M){if(w.Ib=Ve,g.Kb){if(L=g.U+1>>1,w.memory=s(g.U+2*L),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+g.U,w.Mc=w.cc,w.Nc=w.dc+L,w.Ib=Pt,Me()}}else alert("todo:EmitYUV");V&&(w.Jb=Zo,M&&ge())}if(M&&!fw){for(g=0;256>g;++g)bP[g]=89858*(g-128)+ap>>op,_P[g]=-22014*(g-128)+ap,SP[g]=-45773*(g-128),wP[g]=113618*(g-128)+ap>>op;for(g=gh;g<B1;++g)w=76283*(g-16)+ap>>op,EP[g-gh]=wr(w,255),AP[g-gh]=wr(w+8>>4,15);fw=1}return 1}function Fr(g){var w=g.ma,L=g.U,M=g.T;return e(!(1&g.ka)),0>=L||0>=M?0:(L=w.Ib(g,w),w.Jb!=null&&w.Jb(g,w,L),w.Dc+=L,1)}function br(g){g.ma.memory=null}function at(g,w,L,M){return X(g,8)!=47?0:(w[0]=X(g,14)+1,L[0]=X(g,14)+1,M[0]=X(g,1),X(g,3)!=0?0:!g.h)}function St(g,w){if(4>g)return g+1;var L=g-2>>1;return(2+(1&g)<<L)+X(w,L)+1}function mt(g,w){return 120<w?w-120:1<=(L=((L=oP[w-1])>>4)*g+(8-(15&L)))?L:1;var L}function Kt(g,w,L){var M=U(L),V=g[w+=255&M].g-8;return 0<V&&(Q(L,L.u+8),M=U(L),w+=g[w].value,w+=M&(1<<V)-1),Q(L,L.u+g[w].g),g[w].value}function an(g,w,L){return L.g+=g.g,L.value+=g.value<<w>>>0,e(8>=L.g),g.g}function ln(g,w,L){var M=g.xc;return e((w=M==0?0:g.vc[g.md*(L>>M)+(w>>M)])<g.Wb),g.Ya[w]}function er(g,w,L,M){var V=g.ab,q=g.c*w,Y=g.C;w=Y+w;var J=L,Z=M;for(M=g.Ta,L=g.Ua;0<V--;){var ne=g.gc[V],ce=Y,ye=w,ve=J,de=Z,Re=(Z=M,J=L,ne.Ea);switch(e(ce<ye),e(ye<=ne.nc),ne.hc){case 2:Yd(ve,de,(ye-ce)*Re,Z,J);break;case 0:var _e=ce,ue=ye,he=Z,Le=J,Ie=(He=ne).Ea;_e==0&&(R1(ve,de,null,null,1,he,Le),Ze(ve,de+1,0,0,Ie-1,he,Le+1),de+=Ie,Le+=Ie,++_e);for(var Ce=1<<He.b,We=Ce-1,ze=De(Ie,He.b),ct=He.K,He=He.w+(_e>>He.b)*ze;_e<ue;){var zt=ct,Yt=He,jt=1;for(ch(ve,de,he,Le-Ie,1,he,Le);jt<Ie;){var It=(jt&~We)+Ce;It>Ie&&(It=Ie),(0,ia[zt[Yt++]>>8&15])(ve,de+ +jt,he,Le+jt-Ie,It-jt,he,Le+jt),jt=It}de+=Ie,Le+=Ie,++_e&We||(He+=ze)}ye!=ne.nc&&i(Z,J-Re,Z,J+(ye-ce-1)*Re,Re);break;case 1:for(Re=ve,ue=de,Ie=(ve=ne.Ea)-(Le=ve&~(he=(de=1<<ne.b)-1)),_e=De(ve,ne.b),Ce=ne.K,ne=ne.w+(ce>>ne.b)*_e;ce<ye;){for(We=Ce,ze=ne,ct=new Ue,He=ue+Le,zt=ue+ve;ue<He;)bt(We[ze++],ct),ll(ct,Re,ue,de,Z,J),ue+=de,J+=de;ue<zt&&(bt(We[ze++],ct),ll(ct,Re,ue,Ie,Z,J),ue+=Ie,J+=Ie),++ce&he||(ne+=_e)}break;case 3:if(ve==Z&&de==J&&0<ne.b){for(ue=Z,ve=Re=J+(ye-ce)*Re-(Le=(ye-ce)*De(ne.Ea,ne.b)),de=Z,he=J,_e=[],Le=(Ie=Le)-1;0<=Le;--Le)_e[Le]=de[he+Le];for(Le=Ie-1;0<=Le;--Le)ue[ve+Le]=_e[Le];Br(ne,ce,ye,Z,Re,Z,J)}else Br(ne,ce,ye,ve,de,Z,J)}J=M,Z=L}Z!=L&&i(M,L,J,Z,q)}function ac(g,w){var L=g.V,M=g.Ba+g.c*g.C,V=w-g.C;if(e(w<=g.l.o),e(16>=V),0<V){var q=g.l,Y=g.Ta,J=g.Ua,Z=q.width;if(er(g,V,L,M),V=J=[J],e((L=g.C)<(M=w)),e(q.v<q.va),M>q.o&&(M=q.o),L<q.j){var ne=q.j-L;L=q.j,V[0]+=ne*Z}if(L>=M?L=0:(V[0]+=4*q.v,q.ka=L-q.j,q.U=q.va-q.v,q.T=M-L,L=1),L){if(J=J[0],11>(L=g.ca).S){var ce=L.f.RGBA,ye=(M=L.S,V=q.U,q=q.T,ne=ce.eb,ce.A),ve=q;for(ce=ce.fb+g.Ma*ce.A;0<ve--;){var de=Y,Re=J,_e=V,ue=ne,he=ce;switch(M){case tp:ir(de,Re,_e,ue,he);break;case np:Ui(de,Re,_e,ue,he);break;case I1:Ui(de,Re,_e,ue,he),$r(ue,he,0,_e,1,0);break;case nw:bo(de,Re,_e,ue,he);break;case ip:nn(de,Re,_e,ue,he,1);break;case D1:nn(de,Re,_e,ue,he,1),$r(ue,he,0,_e,1,0);break;case rp:nn(de,Re,_e,ue,he,0);break;case sp:nn(de,Re,_e,ue,he,0),$r(ue,he,1,_e,1,0);break;case N1:ra(de,Re,_e,ue,he);break;case M1:ra(de,Re,_e,ue,he),cn(ue,he,_e,1,0);break;case iw:xo(de,Re,_e,ue,he);break;default:e(0)}J+=Z,ce+=ye}g.Ma+=q}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=L.height)}}g.C=w,e(g.C<=g.i)}function mo(g){var w;if(0<g.ua)return 0;for(w=0;w<g.Wb;++w){var L=g.Ya[w].G,M=g.Ya[w].H;if(0<L[1][M[1]+0].g||0<L[2][M[2]+0].g||0<L[3][M[3]+0].g)return 0}return 1}function as(g,w,L,M,V,q){if(g.Z!=0){var Y=g.qd,J=g.rd;for(e(la[g.Z]!=null);w<L;++w)la[g.Z](Y,J,M,V,M,V,q),Y=M,J=V,V+=q;g.qd=Y,g.rd=J}}function ls(g,w){var L=g.l.ma,M=L.Z==0||L.Z==1?g.l.j:g.C;if(M=g.C<M?M:g.C,e(w<=g.l.o),w>M){var V=g.l.width,q=L.ca,Y=L.tb+V*M,J=g.V,Z=g.Ba+g.c*M,ne=g.gc;e(g.ab==1),e(ne[0].hc==3),Xd(ne[0],M,w,J,Z,q,Y),as(L,M,w,q,Y,V)}g.C=g.Ma=w}function cs(g,w,L,M,V,q,Y){var J=g.$/M,Z=g.$%M,ne=g.m,ce=g.s,ye=L+g.$,ve=ye;V=L+M*V;var de=L+M*q,Re=280+ce.ua,_e=g.Pb?J:16777216,ue=0<ce.ua?ce.Wa:null,he=ce.wc,Le=ye<de?ln(ce,Z,J):null;e(g.C<q),e(de<=V);var Ie=!1;e:for(;;){for(;Ie||ye<de;){var Ce=0;if(J>=_e){var We=ye-L;e((_e=g).Pb),_e.wd=_e.m,_e.xd=We,0<_e.s.ua&&pe(_e.s.Wa,_e.s.vb),_e=J+lP}if(Z&he||(Le=ln(ce,Z,J)),e(Le!=null),Le.Qb&&(w[ye]=Le.qb,Ie=!0),!Ie)if(ee(ne),Le.jc){Ce=ne,We=w;var ze=ye,ct=Le.pd[U(Ce)&gi-1];e(Le.jc),256>ct.g?(Q(Ce,Ce.u+ct.g),We[ze]=ct.value,Ce=0):(Q(Ce,Ce.u+ct.g-256),e(256<=ct.value),Ce=ct.value),Ce==0&&(Ie=!0)}else Ce=Kt(Le.G[0],Le.H[0],ne);if(ne.h)break;if(Ie||256>Ce){if(!Ie)if(Le.nd)w[ye]=(Le.qb|Ce<<8)>>>0;else{if(ee(ne),Ie=Kt(Le.G[1],Le.H[1],ne),ee(ne),We=Kt(Le.G[2],Le.H[2],ne),ze=Kt(Le.G[3],Le.H[3],ne),ne.h)break;w[ye]=(ze<<24|Ie<<16|Ce<<8|We)>>>0}if(Ie=!1,++ye,++Z>=M&&(Z=0,++J,Y!=null&&J<=q&&!(J%16)&&Y(g,J),ue!=null))for(;ve<ye;)Ce=w[ve++],ue.X[(506832829*Ce&4294967295)>>>ue.Mb]=Ce}else if(280>Ce){if(Ce=St(Ce-256,ne),We=Kt(Le.G[4],Le.H[4],ne),ee(ne),We=mt(M,We=St(We,ne)),ne.h)break;if(ye-L<We||V-ye<Ce)break e;for(ze=0;ze<Ce;++ze)w[ye+ze]=w[ye+ze-We];for(ye+=Ce,Z+=Ce;Z>=M;)Z-=M,++J,Y!=null&&J<=q&&!(J%16)&&Y(g,J);if(e(ye<=V),Z&he&&(Le=ln(ce,Z,J)),ue!=null)for(;ve<ye;)Ce=w[ve++],ue.X[(506832829*Ce&4294967295)>>>ue.Mb]=Ce}else{if(!(Ce<Re))break e;for(Ie=Ce-280,e(ue!=null);ve<ye;)Ce=w[ve++],ue.X[(506832829*Ce&4294967295)>>>ue.Mb]=Ce;Ce=ye,e(!(Ie>>>(We=ue).Xa)),w[Ce]=We.X[Ie],Ie=!0}Ie||e(ne.h==K(ne))}if(g.Pb&&ne.h&&ye<V)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&pe(g.s.vb,g.s.Wa);else{if(ne.h)break e;Y!=null&&Y(g,J>q?q:J),g.a=0,g.$=ye-L}return 1}return g.a=3,0}function Ds(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var w=g.Wa;w!=null&&(w.X=null),g.vb=null,e(g!=null)}function Or(){var g=new C1;return g==null?null:(g.a=0,g.xb=ow,os("Predictor","VP8LPredictors"),os("Predictor","VP8LPredictors_C"),os("PredictorAdd","VP8LPredictorsAdd"),os("PredictorAdd","VP8LPredictorsAdd_C"),Yd=dt,ll=st,ir=$e,Ui=Wt,ra=Tt,xo=_i,bo=qt,S.VP8LMapColor32b=Lc,S.VP8LMapColor8b=Jd,g)}function Ms(g,w,L,M,V){var q=1,Y=[g],J=[w],Z=M.m,ne=M.s,ce=null,ye=0;e:for(;;){if(L)for(;q&&X(Z,1);){var ve=Y,de=J,Re=M,_e=1,ue=Re.m,he=Re.gc[Re.ab],Le=X(ue,2);if(Re.Oc&1<<Le)q=0;else{switch(Re.Oc|=1<<Le,he.hc=Le,he.Ea=ve[0],he.nc=de[0],he.K=[null],++Re.ab,e(4>=Re.ab),Le){case 0:case 1:he.b=X(ue,3)+2,_e=Ms(De(he.Ea,he.b),De(he.nc,he.b),0,Re,he.K),he.K=he.K[0];break;case 3:var Ie,Ce=X(ue,8)+1,We=16<Ce?0:4<Ce?1:2<Ce?2:3;if(ve[0]=De(he.Ea,We),he.b=We,Ie=_e=Ms(Ce,1,0,Re,he.K)){var ze,ct=Ce,He=he,zt=1<<(8>>He.b),Yt=s(zt);if(Yt==null)Ie=0;else{var jt=He.K[0],It=He.w;for(Yt[0]=He.K[0][0],ze=1;ze<1*ct;++ze)Yt[ze]=Te(jt[It+ze],Yt[ze-1]);for(;ze<4*zt;++ze)Yt[ze]=0;He.K[0]=null,He.K[0]=Yt,Ie=1}}_e=Ie;break;case 2:break;default:e(0)}q=_e}}if(Y=Y[0],J=J[0],q&&X(Z,1)&&!(q=1<=(ye=X(Z,4))&&11>=ye)){M.a=3;break e}var rn;if(rn=q)t:{var tn,At,qn,rr=M,Kn=Y,sr=J,Xt=ye,_r=L,Er=rr.m,oi=rr.s,mi=[null],zi=1,Vr=0,js=aP[Xt];n:for(;;){if(_r&&X(Er,1)){var ai=X(Er,3)+2,Eo=De(Kn,ai),dl=De(sr,ai),Nc=Eo*dl;if(!Ms(Eo,dl,0,rr,mi))break n;for(mi=mi[0],oi.xc=ai,tn=0;tn<Nc;++tn){var ca=mi[tn]>>8&65535;mi[tn]=ca,ca>=zi&&(zi=ca+1)}}if(Er.h)break n;for(At=0;5>At;++At){var Nn=rw[At];!At&&0<Xt&&(Nn+=1<<Xt),Vr<Nn&&(Vr=Nn)}var j1=o(zi*js,P),gw=zi,mw=o(gw,F);if(mw==null)var cp=null;else e(65536>=gw),cp=mw;var mh=s(Vr);if(cp==null||mh==null||j1==null){rr.a=1;break n}var up=j1;for(tn=qn=0;tn<zi;++tn){var ps=cp[tn],Ic=ps.G,Dc=ps.H,yw=0,hp=1,vw=0;for(At=0;5>At;++At){Nn=rw[At],Ic[At]=up,Dc[At]=qn,!At&&0<Xt&&(Nn+=1<<Xt);r:{var fp,U1=Nn,dp=rr,yh=mh,kP=up,CP=qn,$1=0,ua=dp.m,RP=X(ua,1);if(r(yh,0,0,U1),RP){var PP=X(ua,1)+1,NP=X(ua,1),xw=X(ua,NP==0?1:8);yh[xw]=1,PP==2&&(yh[xw=X(ua,8)]=1);var pp=1}else{var bw=s(19),ww=X(ua,4)+4;if(19<ww){dp.a=3;var gp=0;break r}for(fp=0;fp<ww;++fp)bw[sP[fp]]=X(ua,3);var z1=void 0,vh=void 0,Sw=dp,IP=bw,mp=U1,_w=yh,H1=0,ha=Sw.m,Ew=8,Aw=o(128,P);i:for(;k(Aw,0,7,IP,19);){if(X(ha,1)){var DP=2+2*X(ha,3);if((z1=2+X(ha,DP))>mp)break i}else z1=mp;for(vh=0;vh<mp&&z1--;){ee(ha);var Tw=Aw[0+(127&U(ha))];Q(ha,ha.u+Tw.g);var Mc=Tw.value;if(16>Mc)_w[vh++]=Mc,Mc!=0&&(Ew=Mc);else{var MP=Mc==16,Lw=Mc-16,FP=iP[Lw],kw=X(ha,nP[Lw])+FP;if(vh+kw>mp)break i;for(var OP=MP?Ew:0;0<kw--;)_w[vh++]=OP}}H1=1;break i}H1||(Sw.a=3),pp=H1}(pp=pp&&!ua.h)&&($1=k(kP,CP,8,yh,U1)),pp&&$1!=0?gp=$1:(dp.a=3,gp=0)}if(gp==0)break n;if(hp&&rP[At]==1&&(hp=up[qn].g==0),yw+=up[qn].g,qn+=gp,3>=At){var xh,V1=mh[0];for(xh=1;xh<Nn;++xh)mh[xh]>V1&&(V1=mh[xh]);vw+=V1}}if(ps.nd=hp,ps.Qb=0,hp&&(ps.qb=(Ic[3][Dc[3]+0].value<<24|Ic[1][Dc[1]+0].value<<16|Ic[2][Dc[2]+0].value)>>>0,yw==0&&256>Ic[0][Dc[0]+0].value&&(ps.Qb=1,ps.qb+=Ic[0][Dc[0]+0].value<<8)),ps.jc=!ps.Qb&&6>vw,ps.jc){var yp,Ao=ps;for(yp=0;yp<gi;++yp){var fa=yp,da=Ao.pd[fa],vp=Ao.G[0][Ao.H[0]+fa];256<=vp.value?(da.g=vp.g+256,da.value=vp.value):(da.g=0,da.value=0,fa>>=an(vp,8,da),fa>>=an(Ao.G[1][Ao.H[1]+fa],16,da),fa>>=an(Ao.G[2][Ao.H[2]+fa],0,da),an(Ao.G[3][Ao.H[3]+fa],24,da))}}}oi.vc=mi,oi.Wb=zi,oi.Ya=cp,oi.yc=j1,rn=1;break t}rn=0}if(!(q=rn)){M.a=3;break e}if(0<ye){if(ne.ua=1<<ye,!ke(ne.Wa,ye)){M.a=1,q=0;break e}}else ne.ua=0;var G1=M,Cw=Y,BP=J,W1=G1.s,q1=W1.xc;if(G1.c=Cw,G1.i=BP,W1.md=De(Cw,q1),W1.wc=q1==0?-1:(1<<q1)-1,L){M.xb=gP;break e}if((ce=s(Y*J))==null){M.a=1,q=0;break e}q=(q=cs(M,ce,0,Y,J,J,null))&&!Z.h;break e}return q?(V!=null?V[0]=ce:(e(ce==null),e(L)),M.$=0,L||Ds(ne)):Ds(ne),q}function il(g,w){var L=g.c*g.i,M=L+w+16*w;return e(g.c<=w),g.V=s(M),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+L+w,1)}function lc(g,w){var L=g.C,M=w-L,V=g.V,q=g.Ba+g.c*L;for(e(w<=g.l.o);0<M;){var Y=16<M?16:M,J=g.l.ma,Z=g.l.width,ne=Z*Y,ce=J.ca,ye=J.tb+Z*L,ve=g.Ta,de=g.Ua;er(g,Y,V,q),Un(ve,de,ce,ye,ne),as(J,L,L+Y,ce,ye,Z),M-=Y,V+=Y*g.c,L+=Y}e(L==w),g.C=g.Ma=w}function cc(){this.ub=this.yd=this.td=this.Rb=0}function uc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function hc(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Cd(){this.Yb=function(){var g=[];return function w(L,M,V){for(var q=V[M],Y=0;Y<q&&(L.push(V.length>M+1?[]:0),!(V.length<M+1));Y++)w(L[Y],M+1,V)}(g,0,[3,11]),g}()}function o1(){this.jb=s(3),this.Wc=a([4,8],Cd),this.Xc=a([4,17],Cd)}function a1(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function fc(){this.ld=this.La=this.dd=this.tc=0}function Rd(){this.Na=this.la=0}function l1(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Vu(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function c1(){this.uc=this.M=this.Nb=0,this.wa=Array(new fc),this.Y=0,this.ya=Array(new Vu),this.aa=0,this.l=new dc}function Pd(){this.y=s(16),this.f=s(8),this.ea=s(8)}function u1(){this.cb=this.a=0,this.sc="",this.m=new te,this.Od=new cc,this.Kc=new uc,this.ed=new a1,this.Qa=new hc,this.Ic=this.$c=this.Aa=0,this.D=new c1,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,te),this.ia=0,this.pb=o(4,l1),this.Pa=new o1,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Pd),this.Hd=0,this.rb=Array(new Rd),this.sb=0,this.wa=Array(new fc),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Vu),this.L=this.aa=0,this.gd=a([4,2],fc),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function dc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function h1(){var g=new u1;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,ph||(ph=Dd)),g}function Bn(g,w,L){return g.a==0&&(g.a=w,g.sc=L,g.cb=0),0}function Nd(g,w,L){return 3<=L&&g[w+0]==157&&g[w+1]==1&&g[w+2]==42}function Id(g,w){if(g==null)return 0;if(g.a=0,g.sc="OK",w==null)return Bn(g,2,"null VP8Io passed to VP8GetHeaders()");var L=w.data,M=w.w,V=w.ha;if(4>V)return Bn(g,7,"Truncated header.");var q=L[M+0]|L[M+1]<<8|L[M+2]<<16,Y=g.Od;if(Y.Rb=!(1&q),Y.td=q>>1&7,Y.yd=q>>4&1,Y.ub=q>>5,3<Y.td)return Bn(g,3,"Incorrect keyframe parameters.");if(!Y.yd)return Bn(g,4,"Frame not displayable.");M+=3,V-=3;var J=g.Kc;if(Y.Rb){if(7>V)return Bn(g,7,"cannot parse picture header");if(!Nd(L,M,V))return Bn(g,3,"Bad code word");J.c=16383&(L[M+4]<<8|L[M+3]),J.Td=L[M+4]>>6,J.i=16383&(L[M+6]<<8|L[M+5]),J.Ud=L[M+6]>>6,M+=7,V-=7,g.za=J.c+15>>4,g.Ub=J.i+15>>4,w.width=J.c,w.height=J.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,r((q=g.Pa).jb,0,255,q.jb.length),e((q=g.Qa)!=null),q.Cb=0,q.Bb=0,q.Fb=1,r(q.Zb,0,0,q.Zb.length),r(q.Lb,0,0,q.Lb)}if(Y.ub>V)return Bn(g,7,"bad partition length");H(q=g.m,L,M,Y.ub),M+=Y.ub,V-=Y.ub,Y.Rb&&(J.Ld=se(q),J.Kd=se(q)),J=g.Qa;var Z,ne=g.Pa;if(e(q!=null),e(J!=null),J.Cb=se(q),J.Cb){if(J.Bb=se(q),se(q)){for(J.Fb=se(q),Z=0;4>Z;++Z)J.Zb[Z]=se(q)?$(q,7):0;for(Z=0;4>Z;++Z)J.Lb[Z]=se(q)?$(q,6):0}if(J.Bb)for(Z=0;3>Z;++Z)ne.jb[Z]=se(q)?O(q,8):255}else J.Bb=0;if(q.Ka)return Bn(g,3,"cannot parse segment header");if((J=g.ed).zd=se(q),J.Tb=O(q,6),J.wb=O(q,3),J.Pc=se(q),J.Pc&&se(q)){for(ne=0;4>ne;++ne)se(q)&&(J.vd[ne]=$(q,6));for(ne=0;4>ne;++ne)se(q)&&(J.od[ne]=$(q,6))}if(g.L=J.Tb==0?0:J.zd?1:2,q.Ka)return Bn(g,3,"cannot parse filter header");var ce=V;if(V=Z=M,M=Z+ce,J=ce,g.Xb=(1<<O(g.m,2))-1,ce<3*(ne=g.Xb))L=7;else{for(Z+=3*ne,J-=3*ne,ce=0;ce<ne;++ce){var ye=L[V+0]|L[V+1]<<8|L[V+2]<<16;ye>J&&(ye=J),H(g.Jc[+ce],L,Z,ye),Z+=ye,J-=ye,V+=3}H(g.Jc[+ne],L,Z,J),L=Z<M?0:5}if(L!=0)return Bn(g,L,"cannot parse partitions");for(L=O(Z=g.m,7),V=se(Z)?$(Z,4):0,M=se(Z)?$(Z,4):0,J=se(Z)?$(Z,4):0,ne=se(Z)?$(Z,4):0,Z=se(Z)?$(Z,4):0,ce=g.Qa,ye=0;4>ye;++ye){if(ce.Cb){var ve=ce.Zb[ye];ce.Fb||(ve+=L)}else{if(0<ye){g.pb[ye]=g.pb[0];continue}ve=L}var de=g.pb[ye];de.Sc[0]=F1[wr(ve+V,127)],de.Sc[1]=O1[wr(ve+0,127)],de.Eb[0]=2*F1[wr(ve+M,127)],de.Eb[1]=101581*O1[wr(ve+J,127)]>>16,8>de.Eb[1]&&(de.Eb[1]=8),de.Qc[0]=F1[wr(ve+ne,117)],de.Qc[1]=O1[wr(ve+Z,127)],de.lc=ve+Z}if(!Y.Rb)return Bn(g,4,"Not a key frame.");for(se(q),Y=g.Pa,L=0;4>L;++L){for(V=0;8>V;++V)for(M=0;3>M;++M)for(J=0;11>J;++J)ne=ae(q,dP[L][V][M][J])?O(q,8):hP[L][V][M][J],Y.Wc[L][V].Yb[M][J]=ne;for(V=0;17>V;++V)Y.Xc[L][V]=Y.Wc[L][pP[V]]}return g.kc=se(q),g.kc&&(g.Bd=O(q,8)),g.cb=1}function Dd(g,w,L,M,V,q,Y){var J=w[V].Yb[L];for(L=0;16>V;++V){if(!ae(g,J[L+0]))return V;for(;!ae(g,J[L+1]);)if(J=w[++V].Yb[0],L=0,V==16)return 16;var Z=w[V+1].Yb;if(ae(g,J[L+2])){var ne=g,ce=0;if(ae(ne,(ve=J)[(ye=L)+3]))if(ae(ne,ve[ye+6])){for(J=0,ye=2*(ce=ae(ne,ve[ye+8]))+(ve=ae(ne,ve[ye+9+ce])),ce=0,ve=cP[ye];ve[J];++J)ce+=ce+ae(ne,ve[J]);ce+=3+(8<<ye)}else ae(ne,ve[ye+7])?(ce=7+2*ae(ne,165),ce+=ae(ne,145)):ce=5+ae(ne,159);else ce=ae(ne,ve[ye+4])?3+ae(ne,ve[ye+5]):2;J=Z[2]}else ce=1,J=Z[1];Z=Y+uP[V],0>(ne=g).b&&oe(ne);var ye,ve=ne.b,de=(ye=ne.Ca>>1)-(ne.I>>ve)>>31;--ne.b,ne.Ca+=de,ne.Ca|=1,ne.I-=(ye+1&de)<<ve,q[Z]=((ce^de)-de)*M[(0<V)+0]}return 16}function Gu(g){var w=g.rb[g.sb-1];w.la=0,w.Na=0,r(g.zc,0,0,g.zc.length),g.ja=0}function f1(g,w){if(g==null)return 0;if(w==null)return Bn(g,2,"NULL VP8Io parameter in VP8Decode().");if(!g.cb&&!Id(g,w))return 0;if(e(g.cb),w.ac==null||w.ac(w)){w.ob&&(g.L=0);var L=lp[g.L];if(g.L==2?(g.yb=0,g.zb=0):(g.yb=w.v-L>>4,g.zb=w.j-L>>4,0>g.yb&&(g.yb=0),0>g.zb&&(g.zb=0)),g.Va=w.o+15+L>>4,g.Hb=w.va+15+L>>4,g.Hb>g.za&&(g.Hb=g.za),g.Va>g.Ub&&(g.Va=g.Ub),0<g.L){var M=g.ed;for(L=0;4>L;++L){var V;if(g.Qa.Cb){var q=g.Qa.Lb[L];g.Qa.Fb||(q+=M.Tb)}else q=M.Tb;for(V=0;1>=V;++V){var Y=g.gd[L][V],J=q;if(M.Pc&&(J+=M.vd[0],V&&(J+=M.od[0])),0<(J=0>J?0:63<J?63:J)){var Z=J;0<M.wb&&(Z=4<M.wb?Z>>2:Z>>1)>9-M.wb&&(Z=9-M.wb),1>Z&&(Z=1),Y.dd=Z,Y.tc=2*J+Z,Y.ld=40<=J?2:15<=J?1:0}else Y.tc=0;Y.La=V}}}L=0}else Bn(g,6,"Frame setup failed"),L=g.a;if(L=L==0){if(L){g.$c=0,0<g.Aa||(g.Ic=LP);e:{L=g.Ic,M=4*(Z=g.za);var ne=32*Z,ce=Z+1,ye=0<g.L?Z*(0<g.Aa?2:1):0,ve=(g.Aa==2?2:1)*Z;if((Y=M+832+(V=3*(16*L+lp[g.L])/2*ne)+(q=g.Fa!=null&&0<g.Fa.length?g.Kc.c*g.Kc.i:0))!=Y)L=0;else{if(Y>g.Vb){if(g.Vb=0,g.Ec=s(Y),g.Fc=0,g.Ec==null){L=Bn(g,1,"no memory during frame initialization.");break e}g.Vb=Y}Y=g.Ec,J=g.Fc,g.Ac=Y,g.Bc=J,J+=M,g.Gd=o(ne,Pd),g.Hd=0,g.rb=o(ce+1,Rd),g.sb=1,g.wa=ye?o(ye,fc):null,g.Y=0,g.D.Nb=0,g.D.wa=g.wa,g.D.Y=g.Y,0<g.Aa&&(g.D.Y+=Z),e(!0),g.oc=Y,g.pc=J,J+=832,g.ya=o(ve,Vu),g.aa=0,g.D.ya=g.ya,g.D.aa=g.aa,g.Aa==2&&(g.D.aa+=Z),g.R=16*Z,g.B=8*Z,Z=(ne=lp[g.L])*g.R,ne=ne/2*g.B,g.sa=Y,g.ta=J+Z,g.qa=g.sa,g.ra=g.ta+16*L*g.R+ne,g.Ha=g.qa,g.Ia=g.ra+8*L*g.B+ne,g.$c=0,J+=V,g.mb=q?Y:null,g.nb=q?J:null,e(J+q<=g.Fc+g.Vb),Gu(g),r(g.Ac,g.Bc,0,M),L=1}}if(L){if(w.ka=0,w.y=g.sa,w.O=g.ta,w.f=g.qa,w.N=g.ra,w.ea=g.Ha,w.Vd=g.Ia,w.fa=g.R,w.Rc=g.B,w.F=null,w.J=0,!Zd){for(L=-255;255>=L;++L)Zn[255+L]=0>L?-L:L;for(L=-1020;1020>=L;++L)So[1020+L]=-128>L?-128:127<L?127:L;for(L=-112;112>=L;++L)dh[112+L]=-16>L?-16:15<L?15:L;for(L=-255;510>=L;++L)Pc[255+L]=0>L?0:255<L?255:L;Zd=1}kc=g1,wo=d1,uh=Fd,$i=p1,jr=Od,jn=Md,Cc=Ju,Qd=ol,hh=k1,cl=Qu,ul=L1,sa=xc,hl=Zu,Rc=Wd,fl=Gd,oa=Os,fh=vo,Ur=T1,ds[0]=Fs,ds[1]=m1,ds[2]=b1,ds[3]=w1,ds[4]=Ud,ds[5]=yc,ds[6]=$d,ds[7]=Ku,ds[8]=_1,ds[9]=S1,aa[0]=Bd,aa[1]=v1,aa[2]=yo,aa[3]=gc,aa[4]=Ei,aa[5]=x1,aa[6]=jd,_o[0]=ea,_o[1]=y1,_o[2]=E1,_o[3]=Yu,_o[4]=sl,_o[5]=A1,_o[6]=Xu,L=1}else L=0}L&&(L=function(de,Re){for(de.M=0;de.M<de.Va;++de.M){var _e,ue=de.Jc[de.M&de.Xb],he=de.m,Le=de;for(_e=0;_e<Le.za;++_e){var Ie=he,Ce=Le,We=Ce.Ac,ze=Ce.Bc+4*_e,ct=Ce.zc,He=Ce.ya[Ce.aa+_e];if(Ce.Qa.Bb?He.$b=ae(Ie,Ce.Pa.jb[0])?2+ae(Ie,Ce.Pa.jb[2]):ae(Ie,Ce.Pa.jb[1]):He.$b=0,Ce.kc&&(He.Ad=ae(Ie,Ce.Bd)),He.Za=!ae(Ie,145)+0,He.Za){var zt=He.Ob,Yt=0;for(Ce=0;4>Ce;++Ce){var jt,It=ct[0+Ce];for(jt=0;4>jt;++jt){It=fP[We[ze+jt]][It];for(var rn=sw[ae(Ie,It[0])];0<rn;)rn=sw[2*rn+ae(Ie,It[rn])];It=-rn,We[ze+jt]=It}i(zt,Yt,We,ze,4),Yt+=4,ct[0+Ce]=It}}else It=ae(Ie,156)?ae(Ie,128)?1:3:ae(Ie,163)?2:0,He.Ob[0]=It,r(We,ze,It,4),r(ct,0,It,4);He.Dd=ae(Ie,142)?ae(Ie,114)?ae(Ie,183)?1:3:2:0}if(Le.m.Ka)return Bn(de,7,"Premature end-of-partition0 encountered.");for(;de.ja<de.za;++de.ja){if(Le=ue,Ie=(he=de).rb[he.sb-1],We=he.rb[he.sb+he.ja],_e=he.ya[he.aa+he.ja],ze=he.kc?_e.Ad:0)Ie.la=We.la=0,_e.Za||(Ie.Na=We.Na=0),_e.Hc=0,_e.Gc=0,_e.ia=0;else{var tn,At;if(Ie=We,We=Le,ze=he.Pa.Xc,ct=he.ya[he.aa+he.ja],He=he.pb[ct.$b],Ce=ct.ad,zt=0,Yt=he.rb[he.sb-1],It=jt=0,r(Ce,zt,0,384),ct.Za)var qn=0,rr=ze[3];else{rn=s(16);var Kn=Ie.Na+Yt.Na;if(Kn=ph(We,ze[1],Kn,He.Eb,0,rn,0),Ie.Na=Yt.Na=(0<Kn)+0,1<Kn)kc(rn,0,Ce,zt);else{var sr=rn[0]+3>>3;for(rn=0;256>rn;rn+=16)Ce[zt+rn]=sr}qn=1,rr=ze[0]}var Xt=15&Ie.la,_r=15&Yt.la;for(rn=0;4>rn;++rn){var Er=1&_r;for(sr=At=0;4>sr;++sr)Xt=Xt>>1|(Er=(Kn=ph(We,rr,Kn=Er+(1&Xt),He.Sc,qn,Ce,zt))>qn)<<7,At=At<<2|(3<Kn?3:1<Kn?2:Ce[zt+0]!=0),zt+=16;Xt>>=4,_r=_r>>1|Er<<7,jt=(jt<<8|At)>>>0}for(rr=Xt,qn=_r>>4,tn=0;4>tn;tn+=2){for(At=0,Xt=Ie.la>>4+tn,_r=Yt.la>>4+tn,rn=0;2>rn;++rn){for(Er=1&_r,sr=0;2>sr;++sr)Kn=Er+(1&Xt),Xt=Xt>>1|(Er=0<(Kn=ph(We,ze[2],Kn,He.Qc,0,Ce,zt)))<<3,At=At<<2|(3<Kn?3:1<Kn?2:Ce[zt+0]!=0),zt+=16;Xt>>=2,_r=_r>>1|Er<<5}It|=At<<4*tn,rr|=Xt<<4<<tn,qn|=(240&_r)<<tn}Ie.la=rr,Yt.la=qn,ct.Hc=jt,ct.Gc=It,ct.ia=43690&It?0:He.ia,ze=!(jt|It)}if(0<he.L&&(he.wa[he.Y+he.ja]=he.gd[_e.$b][_e.Za],he.wa[he.Y+he.ja].La|=!ze),Le.Ka)return Bn(de,7,"Premature end-of-file encountered.")}if(Gu(de),he=Re,Le=1,_e=(ue=de).D,Ie=0<ue.L&&ue.M>=ue.zb&&ue.M<=ue.Va,ue.Aa==0)e:{if(_e.M=ue.M,_e.uc=Ie,sh(ue,_e),Le=1,_e=(At=ue.D).Nb,Ie=(It=lp[ue.L])*ue.R,We=It/2*ue.B,rn=16*_e*ue.R,sr=8*_e*ue.B,ze=ue.sa,ct=ue.ta-Ie+rn,He=ue.qa,Ce=ue.ra-We+sr,zt=ue.Ha,Yt=ue.Ia-We+sr,_r=(Xt=At.M)==0,jt=Xt>=ue.Va-1,ue.Aa==2&&sh(ue,At),At.uc)for(Er=(Kn=ue).D.M,e(Kn.D.uc),At=Kn.yb;At<Kn.Hb;++At){qn=At,rr=Er;var oi=(mi=(Nn=Kn).D).Nb;tn=Nn.R;var mi=mi.wa[mi.Y+qn],zi=Nn.sa,Vr=Nn.ta+16*oi*tn+16*qn,js=mi.dd,ai=mi.tc;if(ai!=0)if(e(3<=ai),Nn.L==1)0<qn&&oa(zi,Vr,tn,ai+4),mi.La&&Ur(zi,Vr,tn,ai),0<rr&&fl(zi,Vr,tn,ai+4),mi.La&&fh(zi,Vr,tn,ai);else{var Eo=Nn.B,dl=Nn.qa,Nc=Nn.ra+8*oi*Eo+8*qn,ca=Nn.Ha,Nn=Nn.Ia+8*oi*Eo+8*qn;oi=mi.ld,0<qn&&(Qd(zi,Vr,tn,ai+4,js,oi),cl(dl,Nc,ca,Nn,Eo,ai+4,js,oi)),mi.La&&(sa(zi,Vr,tn,ai,js,oi),Rc(dl,Nc,ca,Nn,Eo,ai,js,oi)),0<rr&&(Cc(zi,Vr,tn,ai+4,js,oi),hh(dl,Nc,ca,Nn,Eo,ai+4,js,oi)),mi.La&&(ul(zi,Vr,tn,ai,js,oi),hl(dl,Nc,ca,Nn,Eo,ai,js,oi))}}if(ue.ia&&alert("todo:DitherRow"),he.put!=null){if(At=16*Xt,Xt=16*(Xt+1),_r?(he.y=ue.sa,he.O=ue.ta+rn,he.f=ue.qa,he.N=ue.ra+sr,he.ea=ue.Ha,he.W=ue.Ia+sr):(At-=It,he.y=ze,he.O=ct,he.f=He,he.N=Ce,he.ea=zt,he.W=Yt),jt||(Xt-=It),Xt>he.o&&(Xt=he.o),he.F=null,he.J=null,ue.Fa!=null&&0<ue.Fa.length&&At<Xt&&(he.J=ih(ue,he,At,Xt-At),he.F=ue.mb,he.F==null&&he.F.length==0)){Le=Bn(ue,3,"Could not decode alpha data.");break e}At<he.j&&(It=he.j-At,At=he.j,e(!(1&It)),he.O+=ue.R*It,he.N+=ue.B*(It>>1),he.W+=ue.B*(It>>1),he.F!=null&&(he.J+=he.width*It)),At<Xt&&(he.O+=he.v,he.N+=he.v>>1,he.W+=he.v>>1,he.F!=null&&(he.J+=he.v),he.ka=At-he.j,he.U=he.va-he.v,he.T=Xt-At,Le=he.put(he))}_e+1!=ue.Ic||jt||(i(ue.sa,ue.ta-Ie,ze,ct+16*ue.R,Ie),i(ue.qa,ue.ra-We,He,Ce+8*ue.B,We),i(ue.Ha,ue.Ia-We,zt,Yt+8*ue.B,We))}if(!Le)return Bn(de,6,"Output aborted.")}return 1}(g,w)),w.bc!=null&&w.bc(w),L&=1}return L?(g.cb=0,L):0}function us(g,w,L,M,V){V=g[w+L+32*M]+(V>>3),g[w+L+32*M]=-256&V?0>V?0:255:V}function pc(g,w,L,M,V,q){us(g,w,0,L,M+V),us(g,w,1,L,M+q),us(g,w,2,L,M-q),us(g,w,3,L,M-V)}function tr(g){return(20091*g>>16)+g}function Wu(g,w,L,M){var V,q=0,Y=s(16);for(V=0;4>V;++V){var J=g[w+0]+g[w+8],Z=g[w+0]-g[w+8],ne=(35468*g[w+4]>>16)-tr(g[w+12]),ce=tr(g[w+4])+(35468*g[w+12]>>16);Y[q+0]=J+ce,Y[q+1]=Z+ne,Y[q+2]=Z-ne,Y[q+3]=J-ce,q+=4,w++}for(V=q=0;4>V;++V)J=(g=Y[q+0]+4)+Y[q+8],Z=g-Y[q+8],ne=(35468*Y[q+4]>>16)-tr(Y[q+12]),us(L,M,0,0,J+(ce=tr(Y[q+4])+(35468*Y[q+12]>>16))),us(L,M,1,0,Z+ne),us(L,M,2,0,Z-ne),us(L,M,3,0,J-ce),q++,M+=32}function Md(g,w,L,M){var V=g[w+0]+4,q=35468*g[w+4]>>16,Y=tr(g[w+4]),J=35468*g[w+1]>>16;pc(L,M,0,V+Y,g=tr(g[w+1]),J),pc(L,M,1,V+q,g,J),pc(L,M,2,V-q,g,J),pc(L,M,3,V-Y,g,J)}function d1(g,w,L,M,V){Wu(g,w,L,M),V&&Wu(g,w+16,L,M+4)}function Fd(g,w,L,M){wo(g,w+0,L,M,1),wo(g,w+32,L,M+128,1)}function p1(g,w,L,M){var V;for(g=g[w+0]+4,V=0;4>V;++V)for(w=0;4>w;++w)us(L,M,w,V,g)}function Od(g,w,L,M){g[w+0]&&$i(g,w+0,L,M),g[w+16]&&$i(g,w+16,L,M+4),g[w+32]&&$i(g,w+32,L,M+128),g[w+48]&&$i(g,w+48,L,M+128+4)}function g1(g,w,L,M){var V,q=s(16);for(V=0;4>V;++V){var Y=g[w+0+V]+g[w+12+V],J=g[w+4+V]+g[w+8+V],Z=g[w+4+V]-g[w+8+V],ne=g[w+0+V]-g[w+12+V];q[0+V]=Y+J,q[8+V]=Y-J,q[4+V]=ne+Z,q[12+V]=ne-Z}for(V=0;4>V;++V)Y=(g=q[0+4*V]+3)+q[3+4*V],J=q[1+4*V]+q[2+4*V],Z=q[1+4*V]-q[2+4*V],ne=g-q[3+4*V],L[M+0]=Y+J>>3,L[M+16]=ne+Z>>3,L[M+32]=Y-J>>3,L[M+48]=ne-Z>>3,M+=64}function qu(g,w,L){var M,V=w-32,q=Sr,Y=255-g[V-1];for(M=0;M<L;++M){var J,Z=q,ne=Y+g[w-1];for(J=0;J<L;++J)g[w+J]=Z[ne+g[V+J]];w+=32}}function m1(g,w){qu(g,w,4)}function y1(g,w){qu(g,w,8)}function v1(g,w){qu(g,w,16)}function yo(g,w){var L;for(L=0;16>L;++L)i(g,w+32*L,g,w-32,16)}function gc(g,w){var L;for(L=16;0<L;--L)r(g,w,g[w-1],16),w+=32}function mc(g,w,L){var M;for(M=0;16>M;++M)r(w,L+32*M,g,16)}function Bd(g,w){var L,M=16;for(L=0;16>L;++L)M+=g[w-1+32*L]+g[w+L-32];mc(M>>5,g,w)}function Ei(g,w){var L,M=8;for(L=0;16>L;++L)M+=g[w-1+32*L];mc(M>>4,g,w)}function x1(g,w){var L,M=8;for(L=0;16>L;++L)M+=g[w+L-32];mc(M>>4,g,w)}function jd(g,w){mc(128,g,w)}function yt(g,w,L){return g+2*w+L+2>>2}function b1(g,w){var L,M=w-32;for(M=new Uint8Array([yt(g[M-1],g[M+0],g[M+1]),yt(g[M+0],g[M+1],g[M+2]),yt(g[M+1],g[M+2],g[M+3]),yt(g[M+2],g[M+3],g[M+4])]),L=0;4>L;++L)i(g,w+32*L,M,0,M.length)}function w1(g,w){var L=g[w-1],M=g[w-1+32],V=g[w-1+64],q=g[w-1+96];Ee(g,w+0,16843009*yt(g[w-1-32],L,M)),Ee(g,w+32,16843009*yt(L,M,V)),Ee(g,w+64,16843009*yt(M,V,q)),Ee(g,w+96,16843009*yt(V,q,q))}function Fs(g,w){var L,M=4;for(L=0;4>L;++L)M+=g[w+L-32]+g[w-1+32*L];for(M>>=3,L=0;4>L;++L)r(g,w+32*L,M,4)}function Ud(g,w){var L=g[w-1+0],M=g[w-1+32],V=g[w-1+64],q=g[w-1-32],Y=g[w+0-32],J=g[w+1-32],Z=g[w+2-32],ne=g[w+3-32];g[w+0+96]=yt(M,V,g[w-1+96]),g[w+1+96]=g[w+0+64]=yt(L,M,V),g[w+2+96]=g[w+1+64]=g[w+0+32]=yt(q,L,M),g[w+3+96]=g[w+2+64]=g[w+1+32]=g[w+0+0]=yt(Y,q,L),g[w+3+64]=g[w+2+32]=g[w+1+0]=yt(J,Y,q),g[w+3+32]=g[w+2+0]=yt(Z,J,Y),g[w+3+0]=yt(ne,Z,J)}function $d(g,w){var L=g[w+1-32],M=g[w+2-32],V=g[w+3-32],q=g[w+4-32],Y=g[w+5-32],J=g[w+6-32],Z=g[w+7-32];g[w+0+0]=yt(g[w+0-32],L,M),g[w+1+0]=g[w+0+32]=yt(L,M,V),g[w+2+0]=g[w+1+32]=g[w+0+64]=yt(M,V,q),g[w+3+0]=g[w+2+32]=g[w+1+64]=g[w+0+96]=yt(V,q,Y),g[w+3+32]=g[w+2+64]=g[w+1+96]=yt(q,Y,J),g[w+3+64]=g[w+2+96]=yt(Y,J,Z),g[w+3+96]=yt(J,Z,Z)}function yc(g,w){var L=g[w-1+0],M=g[w-1+32],V=g[w-1+64],q=g[w-1-32],Y=g[w+0-32],J=g[w+1-32],Z=g[w+2-32],ne=g[w+3-32];g[w+0+0]=g[w+1+64]=q+Y+1>>1,g[w+1+0]=g[w+2+64]=Y+J+1>>1,g[w+2+0]=g[w+3+64]=J+Z+1>>1,g[w+3+0]=Z+ne+1>>1,g[w+0+96]=yt(V,M,L),g[w+0+64]=yt(M,L,q),g[w+0+32]=g[w+1+96]=yt(L,q,Y),g[w+1+32]=g[w+2+96]=yt(q,Y,J),g[w+2+32]=g[w+3+96]=yt(Y,J,Z),g[w+3+32]=yt(J,Z,ne)}function Ku(g,w){var L=g[w+0-32],M=g[w+1-32],V=g[w+2-32],q=g[w+3-32],Y=g[w+4-32],J=g[w+5-32],Z=g[w+6-32],ne=g[w+7-32];g[w+0+0]=L+M+1>>1,g[w+1+0]=g[w+0+64]=M+V+1>>1,g[w+2+0]=g[w+1+64]=V+q+1>>1,g[w+3+0]=g[w+2+64]=q+Y+1>>1,g[w+0+32]=yt(L,M,V),g[w+1+32]=g[w+0+96]=yt(M,V,q),g[w+2+32]=g[w+1+96]=yt(V,q,Y),g[w+3+32]=g[w+2+96]=yt(q,Y,J),g[w+3+64]=yt(Y,J,Z),g[w+3+96]=yt(J,Z,ne)}function S1(g,w){var L=g[w-1+0],M=g[w-1+32],V=g[w-1+64],q=g[w-1+96];g[w+0+0]=L+M+1>>1,g[w+2+0]=g[w+0+32]=M+V+1>>1,g[w+2+32]=g[w+0+64]=V+q+1>>1,g[w+1+0]=yt(L,M,V),g[w+3+0]=g[w+1+32]=yt(M,V,q),g[w+3+32]=g[w+1+64]=yt(V,q,q),g[w+3+64]=g[w+2+64]=g[w+0+96]=g[w+1+96]=g[w+2+96]=g[w+3+96]=q}function _1(g,w){var L=g[w-1+0],M=g[w-1+32],V=g[w-1+64],q=g[w-1+96],Y=g[w-1-32],J=g[w+0-32],Z=g[w+1-32],ne=g[w+2-32];g[w+0+0]=g[w+2+32]=L+Y+1>>1,g[w+0+32]=g[w+2+64]=M+L+1>>1,g[w+0+64]=g[w+2+96]=V+M+1>>1,g[w+0+96]=q+V+1>>1,g[w+3+0]=yt(J,Z,ne),g[w+2+0]=yt(Y,J,Z),g[w+1+0]=g[w+3+32]=yt(L,Y,J),g[w+1+32]=g[w+3+64]=yt(M,L,Y),g[w+1+64]=g[w+3+96]=yt(V,M,L),g[w+1+96]=yt(q,V,M)}function E1(g,w){var L;for(L=0;8>L;++L)i(g,w+32*L,g,w-32,8)}function Yu(g,w){var L;for(L=0;8>L;++L)r(g,w,g[w-1],8),w+=32}function rl(g,w,L){var M;for(M=0;8>M;++M)r(w,L+32*M,g,8)}function ea(g,w){var L,M=8;for(L=0;8>L;++L)M+=g[w+L-32]+g[w-1+32*L];rl(M>>4,g,w)}function A1(g,w){var L,M=4;for(L=0;8>L;++L)M+=g[w+L-32];rl(M>>3,g,w)}function sl(g,w){var L,M=4;for(L=0;8>L;++L)M+=g[w-1+32*L];rl(M>>3,g,w)}function Xu(g,w){rl(128,g,w)}function vc(g,w,L){var M=g[w-L],V=g[w+0],q=3*(V-M)+P1[1020+g[w-2*L]-g[w+L]],Y=ep[112+(q+4>>3)];g[w-L]=Sr[255+M+ep[112+(q+3>>3)]],g[w+0]=Sr[255+V-Y]}function zd(g,w,L,M){var V=g[w+0],q=g[w+L];return zr[255+g[w-2*L]-g[w-L]]>M||zr[255+q-V]>M}function Hd(g,w,L,M){return 4*zr[255+g[w-L]-g[w+0]]+zr[255+g[w-2*L]-g[w+L]]<=M}function Vd(g,w,L,M,V){var q=g[w-3*L],Y=g[w-2*L],J=g[w-L],Z=g[w+0],ne=g[w+L],ce=g[w+2*L],ye=g[w+3*L];return 4*zr[255+J-Z]+zr[255+Y-ne]>M?0:zr[255+g[w-4*L]-q]<=V&&zr[255+q-Y]<=V&&zr[255+Y-J]<=V&&zr[255+ye-ce]<=V&&zr[255+ce-ne]<=V&&zr[255+ne-Z]<=V}function Gd(g,w,L,M){var V=2*M+1;for(M=0;16>M;++M)Hd(g,w+M,L,V)&&vc(g,w+M,L)}function Os(g,w,L,M){var V=2*M+1;for(M=0;16>M;++M)Hd(g,w+M*L,1,V)&&vc(g,w+M*L,1)}function vo(g,w,L,M){var V;for(V=3;0<V;--V)Gd(g,w+=4*L,L,M)}function T1(g,w,L,M){var V;for(V=3;0<V;--V)Os(g,w+=4,L,M)}function ta(g,w,L,M,V,q,Y,J){for(q=2*q+1;0<V--;){if(Vd(g,w,L,q,Y))if(zd(g,w,L,J))vc(g,w,L);else{var Z=g,ne=w,ce=L,ye=Z[ne-2*ce],ve=Z[ne-ce],de=Z[ne+0],Re=Z[ne+ce],_e=Z[ne+2*ce],ue=27*(Le=P1[1020+3*(de-ve)+P1[1020+ye-Re]])+63>>7,he=18*Le+63>>7,Le=9*Le+63>>7;Z[ne-3*ce]=Sr[255+Z[ne-3*ce]+Le],Z[ne-2*ce]=Sr[255+ye+he],Z[ne-ce]=Sr[255+ve+ue],Z[ne+0]=Sr[255+de-ue],Z[ne+ce]=Sr[255+Re-he],Z[ne+2*ce]=Sr[255+_e-Le]}w+=M}}function hs(g,w,L,M,V,q,Y,J){for(q=2*q+1;0<V--;){if(Vd(g,w,L,q,Y))if(zd(g,w,L,J))vc(g,w,L);else{var Z=g,ne=w,ce=L,ye=Z[ne-ce],ve=Z[ne+0],de=Z[ne+ce],Re=ep[112+((_e=3*(ve-ye))+4>>3)],_e=ep[112+(_e+3>>3)],ue=Re+1>>1;Z[ne-2*ce]=Sr[255+Z[ne-2*ce]+ue],Z[ne-ce]=Sr[255+ye+_e],Z[ne+0]=Sr[255+ve-Re],Z[ne+ce]=Sr[255+de-ue]}w+=M}}function Ju(g,w,L,M,V,q){ta(g,w,L,1,16,M,V,q)}function ol(g,w,L,M,V,q){ta(g,w,1,L,16,M,V,q)}function L1(g,w,L,M,V,q){var Y;for(Y=3;0<Y;--Y)hs(g,w+=4*L,L,1,16,M,V,q)}function xc(g,w,L,M,V,q){var Y;for(Y=3;0<Y;--Y)hs(g,w+=4,1,L,16,M,V,q)}function k1(g,w,L,M,V,q,Y,J){ta(g,w,V,1,8,q,Y,J),ta(L,M,V,1,8,q,Y,J)}function Qu(g,w,L,M,V,q,Y,J){ta(g,w,1,V,8,q,Y,J),ta(L,M,1,V,8,q,Y,J)}function Zu(g,w,L,M,V,q,Y,J){hs(g,w+4*V,V,1,8,q,Y,J),hs(L,M+4*V,V,1,8,q,Y,J)}function Wd(g,w,L,M,V,q,Y,J){hs(g,w+4,1,V,8,q,Y,J),hs(L,M+4,1,V,8,q,Y,J)}function bc(){this.ba=new xr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Vt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function eh(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function th(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function qd(){this.ua=0,this.Wa=new ie,this.vb=new ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new F,this.yc=new P}function C1(){this.xb=this.a=0,this.l=new dc,this.ca=new xr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new qd,this.ab=0,this.gc=o(4,th),this.Oc=0}function wc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new dc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function al(g,w,L,M,V,q,Y){for(g=g==null?0:g[w+0],w=0;w<Y;++w)V[q+w]=g+L[M+w]&255,g=V[q+w]}function nh(g,w,L,M,V,q,Y){var J;if(g==null)al(null,null,L,M,V,q,Y);else for(J=0;J<Y;++J)V[q+J]=g[w+J]+L[M+J]&255}function na(g,w,L,M,V,q,Y){if(g==null)al(null,null,L,M,V,q,Y);else{var J,Z=g[w+0],ne=Z,ce=Z;for(J=0;J<Y;++J)ne=ce+(Z=g[w+J])-ne,ce=L[M+J]+(-256&ne?0>ne?0:255:ne)&255,ne=Z,V[q+J]=ce}}function ih(g,w,L,M){var V=w.width,q=w.o;if(e(g!=null&&w!=null),0>L||0>=M||L+M>q)return null;if(!g.Cc){if(g.ga==null){var Y;if(g.ga=new wc,(Y=g.ga==null)||(Y=w.width*w.o,e(g.Gb.length==0),g.Gb=s(Y),g.Uc=0,g.Gb==null?Y=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,Y=1),Y=!Y),!Y){Y=g.ga;var J=g.Fa,Z=g.P,ne=g.qc,ce=g.mb,ye=g.nb,ve=Z+1,de=ne-1,Re=Y.l;if(e(J!=null&&ce!=null&&w!=null),la[0]=null,la[1]=al,la[2]=nh,la[3]=na,Y.ca=ce,Y.tb=ye,Y.c=w.width,Y.i=w.height,e(0<Y.c&&0<Y.i),1>=ne)w=0;else if(Y.$a=J[Z+0]>>0&3,Y.Z=J[Z+0]>>2&3,Y.Lc=J[Z+0]>>4&3,Z=J[Z+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||Z)w=0;else if(Re.put=Fr,Re.ac=Qn,Re.bc=br,Re.ma=Y,Re.width=w.width,Re.height=w.height,Re.Da=w.Da,Re.v=w.v,Re.va=w.va,Re.j=w.j,Re.o=w.o,Y.$a)e:{e(Y.$a==1),w=Or();t:for(;;){if(w==null){w=0;break e}if(e(Y!=null),Y.mc=w,w.c=Y.c,w.i=Y.i,w.l=Y.l,w.l.ma=Y,w.l.width=Y.c,w.l.height=Y.i,w.a=0,z(w.m,J,ve,de),!Ms(Y.c,Y.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&mo(w.s)?(Y.ic=1,J=w.c*w.i,w.Ta=null,w.Ua=0,w.V=s(J),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(Y.ic=0,w=il(w,Y.c)),!w))break t;w=1;break e}Y.mc=null,w=0}else w=de>=Y.c*Y.i;Y=!w}if(Y)return null;g.ga.Lc!=1?g.Ga=0:M=q-L}e(g.ga!=null),e(L+M<=q);e:{if(w=(J=g.ga).c,q=J.l.o,J.$a==0){if(ve=g.rc,de=g.Vc,Re=g.Fa,Z=g.P+1+L*w,ne=g.mb,ce=g.nb+L*w,e(Z<=g.P+g.qc),J.Z!=0)for(e(la[J.Z]!=null),Y=0;Y<M;++Y)la[J.Z](ve,de,Re,Z,ne,ce,w),ve=ne,de=ce,ce+=w,Z+=w;else for(Y=0;Y<M;++Y)i(ne,ce,Re,Z,w),ve=ne,de=ce,ce+=w,Z+=w;g.rc=ve,g.Vc=de}else{if(e(J.mc!=null),w=L+M,e((Y=J.mc)!=null),e(w<=Y.i),Y.C>=w)w=1;else if(J.ic||ge(),J.ic){J=Y.V,ve=Y.Ba,de=Y.c;var _e=Y.i,ue=(Re=1,Z=Y.$/de,ne=Y.$%de,ce=Y.m,ye=Y.s,Y.$),he=de*_e,Le=de*w,Ie=ye.wc,Ce=ue<Le?ln(ye,ne,Z):null;e(ue<=he),e(w<=_e),e(mo(ye));t:for(;;){for(;!ce.h&&ue<Le;){if(ne&Ie||(Ce=ln(ye,ne,Z)),e(Ce!=null),ee(ce),256>(_e=Kt(Ce.G[0],Ce.H[0],ce)))J[ve+ue]=_e,++ue,++ne>=de&&(ne=0,++Z<=w&&!(Z%16)&&ls(Y,Z));else{if(!(280>_e)){Re=0;break t}_e=St(_e-256,ce);var We,ze=Kt(Ce.G[4],Ce.H[4],ce);if(ee(ce),!(ue>=(ze=mt(de,ze=St(ze,ce)))&&he-ue>=_e)){Re=0;break t}for(We=0;We<_e;++We)J[ve+ue+We]=J[ve+ue+We-ze];for(ue+=_e,ne+=_e;ne>=de;)ne-=de,++Z<=w&&!(Z%16)&&ls(Y,Z);ue<Le&&ne&Ie&&(Ce=ln(ye,ne,Z))}e(ce.h==K(ce))}ls(Y,Z>w?w:Z);break t}!Re||ce.h&&ue<he?(Re=0,Y.a=ce.h?5:3):Y.$=ue,w=Re}else w=cs(Y,Y.V,Y.Ba,Y.c,Y.i,w,lc);if(!w){M=0;break e}}L+M>=q&&(g.Cc=1),M=1}if(!M)return null;if(g.Cc&&((M=g.ga)!=null&&(M.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+L*V}function _(g,w,L,M,V,q){for(;0<V--;){var Y,J=g,Z=w+(L?1:0),ne=g,ce=w+(L?0:3);for(Y=0;Y<M;++Y){var ye=ne[ce+4*Y];ye!=255&&(ye*=32897,J[Z+4*Y+0]=J[Z+4*Y+0]*ye>>23,J[Z+4*Y+1]=J[Z+4*Y+1]*ye>>23,J[Z+4*Y+2]=J[Z+4*Y+2]*ye>>23)}w+=q}}function G(g,w,L,M,V){for(;0<M--;){var q;for(q=0;q<L;++q){var Y=g[w+2*q+0],J=15&(ne=g[w+2*q+1]),Z=4369*J,ne=(240&ne|ne>>4)*Z>>16;g[w+2*q+0]=(240&Y|Y>>4)*Z>>16&240|(15&Y|Y<<4)*Z>>16>>4&15,g[w+2*q+1]=240&ne|J}w+=V}}function re(g,w,L,M,V,q,Y,J){var Z,ne,ce=255;for(ne=0;ne<V;++ne){for(Z=0;Z<M;++Z){var ye=g[w+Z];q[Y+4*Z]=ye,ce&=ye}w+=L,Y+=J}return ce!=255}function le(g,w,L,M,V){var q;for(q=0;q<V;++q)L[M+q]=g[w+q]>>8}function ge(){$r=_,cn=G,un=re,Un=le}function Ae(g,w,L){S[g]=function(M,V,q,Y,J,Z,ne,ce,ye,ve,de,Re,_e,ue,he,Le,Ie){var Ce,We=Ie-1>>1,ze=J[Z+0]|ne[ce+0]<<16,ct=ye[ve+0]|de[Re+0]<<16;e(M!=null);var He=3*ze+ct+131074>>2;for(w(M[V+0],255&He,He>>16,_e,ue),q!=null&&(He=3*ct+ze+131074>>2,w(q[Y+0],255&He,He>>16,he,Le)),Ce=1;Ce<=We;++Ce){var zt=J[Z+Ce]|ne[ce+Ce]<<16,Yt=ye[ve+Ce]|de[Re+Ce]<<16,jt=ze+zt+ct+Yt+524296,It=jt+2*(zt+ct)>>3;He=It+ze>>1,ze=(jt=jt+2*(ze+Yt)>>3)+zt>>1,w(M[V+2*Ce-1],255&He,He>>16,_e,ue+(2*Ce-1)*L),w(M[V+2*Ce-0],255&ze,ze>>16,_e,ue+(2*Ce-0)*L),q!=null&&(He=jt+ct>>1,ze=It+Yt>>1,w(q[Y+2*Ce-1],255&He,He>>16,he,Le+(2*Ce-1)*L),w(q[Y+2*Ce+0],255&ze,ze>>16,he,Le+(2*Ce+0)*L)),ze=zt,ct=Yt}1&Ie||(He=3*ze+ct+131074>>2,w(M[V+Ie-1],255&He,He>>16,_e,ue+(Ie-1)*L),q!=null&&(He=3*ct+ze+131074>>2,w(q[Y+Ie-1],255&He,He>>16,he,Le+(Ie-1)*L)))}}function Me(){Hr[tp]=mP,Hr[np]=aw,Hr[nw]=yP,Hr[ip]=lw,Hr[rp]=cw,Hr[N1]=uw,Hr[iw]=vP,Hr[I1]=aw,Hr[D1]=lw,Hr[sp]=cw,Hr[M1]=uw}function Ge(g){return g&~xP?0>g?0:255:g>>hw}function rt(g,w){return Ge((19077*g>>8)+(26149*w>>8)-14234)}function _t(g,w,L){return Ge((19077*g>>8)-(6419*w>>8)-(13320*L>>8)+8708)}function vt(g,w){return Ge((19077*g>>8)+(33050*w>>8)-17685)}function Ot(g,w,L,M,V){M[V+0]=rt(g,L),M[V+1]=_t(g,w,L),M[V+2]=vt(g,w)}function _n(g,w,L,M,V){M[V+0]=vt(g,w),M[V+1]=_t(g,w,L),M[V+2]=rt(g,L)}function Pn(g,w,L,M,V){var q=_t(g,w,L);w=q<<3&224|vt(g,w)>>3,M[V+0]=248&rt(g,L)|q>>5,M[V+1]=w}function Wn(g,w,L,M,V){var q=240&vt(g,w)|15;M[V+0]=240&rt(g,L)|_t(g,w,L)>>4,M[V+1]=q}function Ai(g,w,L,M,V){M[V+0]=255,Ot(g,w,L,M,V+1)}function si(g,w,L,M,V){_n(g,w,L,M,V),M[V+3]=255}function fs(g,w,L,M,V){Ot(g,w,L,M,V),M[V+3]=255}function wr(g,w){return 0>g?0:g>w?w:g}function Bs(g,w,L){S[g]=function(M,V,q,Y,J,Z,ne,ce,ye){for(var ve=ce+(-2&ye)*L;ce!=ve;)w(M[V+0],q[Y+0],J[Z+0],ne,ce),w(M[V+1],q[Y+0],J[Z+0],ne,ce+L),V+=2,++Y,++Z,ce+=2*L;1&ye&&w(M[V+0],q[Y+0],J[Z+0],ne,ce)}}function Kd(g,w,L){return L==0?g==0?w==0?6:5:w==0?4:0:L}function rh(g,w,L,M,V){switch(g>>>30){case 3:wo(w,L,M,V,0);break;case 2:jn(w,L,M,V);break;case 1:$i(w,L,M,V)}}function sh(g,w){var L,M,V=w.M,q=w.Nb,Y=g.oc,J=g.pc+40,Z=g.oc,ne=g.pc+584,ce=g.oc,ye=g.pc+600;for(L=0;16>L;++L)Y[J+32*L-1]=129;for(L=0;8>L;++L)Z[ne+32*L-1]=129,ce[ye+32*L-1]=129;for(0<V?Y[J-1-32]=Z[ne-1-32]=ce[ye-1-32]=129:(r(Y,J-32-1,127,21),r(Z,ne-32-1,127,9),r(ce,ye-32-1,127,9)),M=0;M<g.za;++M){var ve=w.ya[w.aa+M];if(0<M){for(L=-1;16>L;++L)i(Y,J+32*L-4,Y,J+32*L+12,4);for(L=-1;8>L;++L)i(Z,ne+32*L-4,Z,ne+32*L+4,4),i(ce,ye+32*L-4,ce,ye+32*L+4,4)}var de=g.Gd,Re=g.Hd+M,_e=ve.ad,ue=ve.Hc;if(0<V&&(i(Y,J-32,de[Re].y,0,16),i(Z,ne-32,de[Re].f,0,8),i(ce,ye-32,de[Re].ea,0,8)),ve.Za){var he=Y,Le=J-32+16;for(0<V&&(M>=g.za-1?r(he,Le,de[Re].y[15],4):i(he,Le,de[Re+1].y,0,4)),L=0;4>L;L++)he[Le+128+L]=he[Le+256+L]=he[Le+384+L]=he[Le+0+L];for(L=0;16>L;++L,ue<<=2)he=Y,Le=J+dw[L],ds[ve.Ob[L]](he,Le),rh(ue,_e,16*+L,he,Le)}else if(he=Kd(M,V,ve.Ob[0]),aa[he](Y,J),ue!=0)for(L=0;16>L;++L,ue<<=2)rh(ue,_e,16*+L,Y,J+dw[L]);for(L=ve.Gc,he=Kd(M,V,ve.Dd),_o[he](Z,ne),_o[he](ce,ye),ue=_e,he=Z,Le=ne,255&(ve=L>>0)&&(170&ve?uh(ue,256,he,Le):jr(ue,256,he,Le)),ve=ce,ue=ye,255&(L>>=8)&&(170&L?uh(_e,320,ve,ue):jr(_e,320,ve,ue)),V<g.Ub-1&&(i(de[Re].y,0,Y,J+480,16),i(de[Re].f,0,Z,ne+224,8),i(de[Re].ea,0,ce,ye+224,8)),L=8*q*g.B,de=g.sa,Re=g.ta+16*M+16*q*g.R,_e=g.qa,ve=g.ra+8*M+L,ue=g.Ha,he=g.Ia+8*M+L,L=0;16>L;++L)i(de,Re+L*g.R,Y,J+32*L,16);for(L=0;8>L;++L)i(_e,ve+L*g.B,Z,ne+32*L,8),i(ue,he+L*g.B,ce,ye+32*L,8)}}function Sc(g,w,L,M,V,q,Y,J,Z){var ne=[0],ce=[0],ye=0,ve=Z!=null?Z.kd:0,de=Z??new eh;if(g==null||12>L)return 7;de.data=g,de.w=w,de.ha=L,w=[w],L=[L],de.gb=[de.gb];e:{var Re=w,_e=L,ue=de.gb;if(e(g!=null),e(_e!=null),e(ue!=null),ue[0]=0,12<=_e[0]&&!n(g,Re[0],"RIFF")){if(n(g,Re[0]+8,"WEBP")){ue=3;break e}var he=be(g,Re[0]+4);if(12>he||4294967286<he){ue=3;break e}if(ve&&he>_e[0]-8){ue=7;break e}ue[0]=he,Re[0]+=12,_e[0]-=12}ue=0}if(ue!=0)return ue;for(he=0<de.gb[0],L=L[0];;){e:{var Le=g;_e=w,ue=L;var Ie=ne,Ce=ce,We=Re=[0];if((He=ye=[ye])[0]=0,8>ue[0])ue=7;else{if(!n(Le,_e[0],"VP8X")){if(be(Le,_e[0]+4)!=10){ue=3;break e}if(18>ue[0]){ue=7;break e}var ze=be(Le,_e[0]+8),ct=1+Pe(Le,_e[0]+12);if(2147483648<=ct*(Le=1+Pe(Le,_e[0]+15))){ue=3;break e}We!=null&&(We[0]=ze),Ie!=null&&(Ie[0]=ct),Ce!=null&&(Ce[0]=Le),_e[0]+=18,ue[0]-=18,He[0]=1}ue=0}}if(ye=ye[0],Re=Re[0],ue!=0)return ue;if(_e=!!(2&Re),!he&&ye)return 3;if(q!=null&&(q[0]=!!(16&Re)),Y!=null&&(Y[0]=_e),J!=null&&(J[0]=0),Y=ne[0],Re=ce[0],ye&&_e&&Z==null){ue=0;break}if(4>L){ue=7;break}if(he&&ye||!he&&!ye&&!n(g,w[0],"ALPH")){L=[L],de.na=[de.na],de.P=[de.P],de.Sa=[de.Sa];e:{ze=g,ue=w,he=L;var He=de.gb;Ie=de.na,Ce=de.P,We=de.Sa,ct=22,e(ze!=null),e(he!=null),Le=ue[0];var zt=he[0];for(e(Ie!=null),e(We!=null),Ie[0]=null,Ce[0]=null,We[0]=0;;){if(ue[0]=Le,he[0]=zt,8>zt){ue=7;break e}var Yt=be(ze,Le+4);if(4294967286<Yt){ue=3;break e}var jt=8+Yt+1&-2;if(ct+=jt,0<He&&ct>He){ue=3;break e}if(!n(ze,Le,"VP8 ")||!n(ze,Le,"VP8L")){ue=0;break e}if(zt[0]<jt){ue=7;break e}n(ze,Le,"ALPH")||(Ie[0]=ze,Ce[0]=Le+8,We[0]=Yt),Le+=jt,zt-=jt}}if(L=L[0],de.na=de.na[0],de.P=de.P[0],de.Sa=de.Sa[0],ue!=0)break}L=[L],de.Ja=[de.Ja],de.xa=[de.xa];e:if(He=g,ue=w,he=L,Ie=de.gb[0],Ce=de.Ja,We=de.xa,ze=ue[0],Le=!n(He,ze,"VP8 "),ct=!n(He,ze,"VP8L"),e(He!=null),e(he!=null),e(Ce!=null),e(We!=null),8>he[0])ue=7;else{if(Le||ct){if(He=be(He,ze+4),12<=Ie&&He>Ie-12){ue=3;break e}if(ve&&He>he[0]-8){ue=7;break e}Ce[0]=He,ue[0]+=8,he[0]-=8,We[0]=ct}else We[0]=5<=he[0]&&He[ze+0]==47&&!(He[ze+4]>>5),Ce[0]=he[0];ue=0}if(L=L[0],de.Ja=de.Ja[0],de.xa=de.xa[0],w=w[0],ue!=0)break;if(4294967286<de.Ja)return 3;if(J==null||_e||(J[0]=de.xa?2:1),Y=[Y],Re=[Re],de.xa){if(5>L){ue=7;break}J=Y,ve=Re,_e=q,g==null||5>L?g=0:5<=L&&g[w+0]==47&&!(g[w+4]>>5)?(he=[0],He=[0],Ie=[0],z(Ce=new I,g,w,L),at(Ce,he,He,Ie)?(J!=null&&(J[0]=he[0]),ve!=null&&(ve[0]=He[0]),_e!=null&&(_e[0]=Ie[0]),g=1):g=0):g=0}else{if(10>L){ue=7;break}J=Re,g==null||10>L||!Nd(g,w+3,L-3)?g=0:(ve=g[w+0]|g[w+1]<<8|g[w+2]<<16,_e=16383&(g[w+7]<<8|g[w+6]),g=16383&(g[w+9]<<8|g[w+8]),1&ve||3<(ve>>1&7)||!(ve>>4&1)||ve>>5>=de.Ja||!_e||!g?g=0:(Y&&(Y[0]=_e),J&&(J[0]=g),g=1))}if(!g||(Y=Y[0],Re=Re[0],ye&&(ne[0]!=Y||ce[0]!=Re)))return 3;Z!=null&&(Z[0]=de,Z.offset=w-Z.w,e(4294967286>w-Z.w),e(Z.offset==Z.ha-L));break}return ue==0||ue==7&&ye&&Z==null?(q!=null&&(q[0]|=de.na!=null&&0<de.na.length),M!=null&&(M[0]=Y),V!=null&&(V[0]=Re),0):ue}function oh(g,w,L){var M=w.width,V=w.height,q=0,Y=0,J=M,Z=V;if(w.Da=g!=null&&0<g.Da,w.Da&&(J=g.cd,Z=g.bd,q=g.v,Y=g.j,11>L||(q&=-2,Y&=-2),0>q||0>Y||0>=J||0>=Z||q+J>M||Y+Z>V))return 0;if(w.v=q,w.j=Y,w.va=q+J,w.o=Y+Z,w.U=J,w.T=Z,w.da=g!=null&&0<g.da,w.da){if(!nt(J,Z,L=[g.ib],q=[g.hb]))return 0;w.ib=L[0],w.hb=q[0]}return w.ob=g!=null&&g.ob,w.Kb=g==null||!g.Sd,w.da&&(w.ob=w.ib<3*M/4&&w.hb<3*V/4,w.Kb=0),1}function ah(g){if(g==null)return 2;if(11>g.S){var w=g.f.RGBA;w.fb+=(g.height-1)*w.A,w.A=-w.A}else w=g.f.kb,g=g.height,w.O+=(g-1)*w.fa,w.fa=-w.fa,w.N+=(g-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(g-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(g-1)*w.lb,w.lb=-w.lb);return 0}function _c(g,w,L,M){if(M==null||0>=g||0>=w)return 2;if(L!=null){if(L.Da){var V=L.cd,q=L.bd,Y=-2&L.v,J=-2&L.j;if(0>Y||0>J||0>=V||0>=q||Y+V>g||J+q>w)return 2;g=V,w=q}if(L.da){if(!nt(g,w,V=[L.ib],q=[L.hb]))return 2;g=V[0],w=q[0]}}M.width=g,M.height=w;e:{var Z=M.width,ne=M.height;if(g=M.S,0>=Z||0>=ne||!(g>=tp&&13>g))g=2;else{if(0>=M.Rd&&M.sd==null){Y=q=V=w=0;var ce=(J=Z*pw[g])*ne;if(11>g||(q=(ne+1)/2*(w=(Z+1)/2),g==12&&(Y=(V=Z)*ne)),(ne=s(ce+2*q+Y))==null){g=1;break e}M.sd=ne,11>g?((Z=M.f.RGBA).eb=ne,Z.fb=0,Z.A=J,Z.size=ce):((Z=M.f.kb).y=ne,Z.O=0,Z.fa=J,Z.Fd=ce,Z.f=ne,Z.N=0+ce,Z.Ab=w,Z.Cd=q,Z.ea=ne,Z.W=0+ce+q,Z.Db=w,Z.Ed=q,g==12&&(Z.F=ne,Z.J=0+ce+2*q),Z.Tc=Y,Z.lb=V)}if(w=1,V=M.S,q=M.width,Y=M.height,V>=tp&&13>V)if(11>V)g=M.f.RGBA,w&=(J=Math.abs(g.A))*(Y-1)+q<=g.size,w&=J>=q*pw[V],w&=g.eb!=null;else{g=M.f.kb,J=(q+1)/2,ce=(Y+1)/2,Z=Math.abs(g.fa),ne=Math.abs(g.Ab);var ye=Math.abs(g.Db),ve=Math.abs(g.lb),de=ve*(Y-1)+q;w&=Z*(Y-1)+q<=g.Fd,w&=ne*(ce-1)+J<=g.Cd,w=(w&=ye*(ce-1)+J<=g.Ed)&Z>=q&ne>=J&ye>=J,w&=g.y!=null,w&=g.f!=null,w&=g.ea!=null,V==12&&(w&=ve>=q,w&=de<=g.Tc,w&=g.F!=null)}else w=0;g=w?0:2}}return g!=0||L!=null&&L.fd&&(g=ah(M)),g}var gi=64,Ec=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ac=24,Tc=32,lh=8,nr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Oe("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(g){return g},S.Predictor2=function(g,w,L){return w[L+0]},S.Predictor3=function(g,w,L){return w[L+1]},S.Predictor4=function(g,w,L){return w[L-1]},S.Predictor5=function(g,w,L){return Be(Be(g,w[L+1]),w[L+0])},S.Predictor6=function(g,w,L){return Be(g,w[L-1])},S.Predictor7=function(g,w,L){return Be(g,w[L+0])},S.Predictor8=function(g,w,L){return Be(w[L-1],w[L+0])},S.Predictor9=function(g,w,L){return Be(w[L+0],w[L+1])},S.Predictor10=function(g,w,L){return Be(Be(g,w[L-1]),Be(w[L+0],w[L+1]))},S.Predictor11=function(g,w,L){var M=w[L+0];return 0>=it(M>>24&255,g>>24&255,(w=w[L-1])>>24&255)+it(M>>16&255,g>>16&255,w>>16&255)+it(M>>8&255,g>>8&255,w>>8&255)+it(255&M,255&g,255&w)?M:g},S.Predictor12=function(g,w,L){var M=w[L+0];return(et((g>>24&255)+(M>>24&255)-((w=w[L-1])>>24&255))<<24|et((g>>16&255)+(M>>16&255)-(w>>16&255))<<16|et((g>>8&255)+(M>>8&255)-(w>>8&255))<<8|et((255&g)+(255&M)-(255&w)))>>>0},S.Predictor13=function(g,w,L){var M=w[L-1];return(Je((g=Be(g,w[L+0]))>>24&255,M>>24&255)<<24|Je(g>>16&255,M>>16&255)<<16|Je(g>>8&255,M>>8&255)<<8|Je(g>>0&255,M>>0&255))>>>0};var R1=S.PredictorAdd0;S.PredictorAdd1=Ze,Oe("Predictor2","PredictorAdd2"),Oe("Predictor3","PredictorAdd3"),Oe("Predictor4","PredictorAdd4"),Oe("Predictor5","PredictorAdd5"),Oe("Predictor6","PredictorAdd6"),Oe("Predictor7","PredictorAdd7"),Oe("Predictor8","PredictorAdd8"),Oe("Predictor9","PredictorAdd9"),Oe("Predictor10","PredictorAdd10"),Oe("Predictor11","PredictorAdd11"),Oe("Predictor12","PredictorAdd12"),Oe("Predictor13","PredictorAdd13");var ch=S.PredictorAdd2;wt("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),wt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Yd,Br=S.ColorIndexInverseTransform,Lc=S.MapARGB,Xd=S.VP8LColorIndexInverseTransformAlpha,Jd=S.MapAlpha,ia=S.VP8LPredictorsAdd=[];ia.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var ll,ir,Ui,ra,xo,bo,kc,wo,jn,uh,$i,jr,Cc,Qd,hh,cl,ul,sa,hl,Rc,fl,oa,fh,Ur,$r,cn,un,Un,Zn=s(511),So=s(2041),dh=s(225),Pc=s(767),Zd=0,P1=So,ep=dh,Sr=Pc,zr=Zn,tp=0,np=1,nw=2,ip=3,rp=4,N1=5,iw=6,I1=7,D1=8,sp=9,M1=10,nP=[2,3,7],iP=[3,3,11],rw=[280,256,256,256,40],rP=[0,1,1,1,0],sP=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],oP=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],aP=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],lP=8,F1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],O1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ph=null,cP=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],uP=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],sw=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],hP=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],fP=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],dP=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],pP=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],aa=[],ds=[],_o=[],gP=1,ow=2,la=[],Hr=[];Ae("UpsampleRgbLinePair",Ot,3),Ae("UpsampleBgrLinePair",_n,3),Ae("UpsampleRgbaLinePair",fs,4),Ae("UpsampleBgraLinePair",si,4),Ae("UpsampleArgbLinePair",Ai,4),Ae("UpsampleRgba4444LinePair",Wn,2),Ae("UpsampleRgb565LinePair",Pn,2);var mP=S.UpsampleRgbLinePair,yP=S.UpsampleBgrLinePair,aw=S.UpsampleRgbaLinePair,lw=S.UpsampleBgraLinePair,cw=S.UpsampleArgbLinePair,uw=S.UpsampleRgba4444LinePair,vP=S.UpsampleRgb565LinePair,op=16,ap=1<<op-1,gh=-227,B1=482,hw=6,xP=(256<<hw)-1,fw=0,bP=s(256),wP=s(256),SP=s(256),_P=s(256),EP=s(B1-gh),AP=s(B1-gh);Bs("YuvToRgbRow",Ot,3),Bs("YuvToBgrRow",_n,3),Bs("YuvToRgbaRow",fs,4),Bs("YuvToBgraRow",si,4),Bs("YuvToArgbRow",Ai,4),Bs("YuvToRgba4444Row",Wn,2),Bs("YuvToRgb565Row",Pn,2);var dw=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],lp=[0,2,8],TP=[8,7,6,4,4,2,2,2,1,1,1,1],LP=1;this.WebPDecodeRGBA=function(g,w,L,M,V){var q=np,Y=new bc,J=new xr;Y.ba=J,J.S=q,J.width=[J.width],J.height=[J.height];var Z=J.width,ne=J.height,ce=new Ct;if(ce==null||g==null)var ye=2;else e(ce!=null),ye=Sc(g,w,L,ce.width,ce.height,ce.Pd,ce.Qd,ce.format,null);if(ye!=0?Z=0:(Z!=null&&(Z[0]=ce.width[0]),ne!=null&&(ne[0]=ce.height[0]),Z=1),Z){J.width=J.width[0],J.height=J.height[0],M!=null&&(M[0]=J.width),V!=null&&(V[0]=J.height);e:{if(M=new dc,(V=new eh).data=g,V.w=w,V.ha=L,V.kd=1,w=[0],e(V!=null),((g=Sc(V.data,V.w,V.ha,null,null,null,w,null,V))==0||g==7)&&w[0]&&(g=4),(w=g)==0){if(e(Y!=null),M.data=V.data,M.w=V.w+V.offset,M.ha=V.ha-V.offset,M.put=Fr,M.ac=Qn,M.bc=br,M.ma=Y,V.xa){if((g=Or())==null){Y=1;break e}if(function(ve,de){var Re=[0],_e=[0],ue=[0];t:for(;;){if(ve==null)return 0;if(de==null)return ve.a=2,0;if(ve.l=de,ve.a=0,z(ve.m,de.data,de.w,de.ha),!at(ve.m,Re,_e,ue)){ve.a=3;break t}if(ve.xb=ow,de.width=Re[0],de.height=_e[0],!Ms(Re[0],_e[0],1,ve,null))break t;return 1}return e(ve.a!=0),0}(g,M)){if(M=(w=_c(M.width,M.height,Y.Oa,Y.ba))==0){t:{M=g;n:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((L=M.l)!=null),e((V=L.ma)!=null),M.xb!=0){if(M.ca=V.ba,M.tb=V.tb,e(M.ca!=null),!oh(V.Oa,L,ip)){M.a=2;break n}if(!il(M,L.width)||L.da)break n;if((L.da||Mt(M.ca.S))&&ge(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&ge()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!ke(M.s.vb,M.s.Wa.Xa)){M.a=1;break n}M.xb=0}if(!cs(M,M.V,M.Ba,M.c,M.i,L.o,ac))break n;V.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(w=g.a)}else w=g.a}else{if((g=new h1)==null){Y=1;break e}if(g.Fa=V.na,g.P=V.P,g.qc=V.Sa,Id(g,M)){if((w=_c(M.width,M.height,Y.Oa,Y.ba))==0){if(g.Aa=0,L=Y.Oa,e((V=g)!=null),L!=null){if(0<(Z=0>(Z=L.Md)?0:100<Z?255:255*Z/100)){for(ne=ce=0;4>ne;++ne)12>(ye=V.pb[ne]).lc&&(ye.ia=Z*TP[0>ye.lc?0:ye.lc]>>3),ce|=ye.ia;ce&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=L.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}f1(g,M)||(w=g.a)}}else w=g.a}w==0&&Y.Oa!=null&&Y.Oa.fd&&(w=ah(Y.ba))}Y=w}q=Y!=0?null:11>q?J.f.RGBA.eb:J.f.kb.y}else q=null;return q};var pw=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(S,C){for(var N="",k=0;k<4;k++)N+=String.fromCharCode(S[C++]);return N}function u(S,C){return(S[C+0]<<0|S[C+1]<<8|S[C+2]<<16)>>>0}function h(S,C){return(S[C+0]<<0|S[C+1]<<8|S[C+2]<<16|S[C+3]<<24)>>>0}new l;var f=[0],d=[0],p=[],m=new l,v=t,y=function(S,C){var N={},k=0,P=!1,j=0,F=0;if(N.frames=[],!function(U,K,Q,ee){for(var oe=0;oe<ee;oe++)if(U[K+oe]!=Q.charCodeAt(oe))return!0;return!1}(S,C,"RIFF",4)){var H,O;for(h(S,C+=4),C+=8;C<S.length;){var $=c(S,C),z=h(S,C+=4);C+=4;var B=z+(1&z);switch($){case"VP8 ":case"VP8L":N.frames[k]===void 0&&(N.frames[k]={}),(I=N.frames[k]).src_off=P?F:C-8,I.src_size=j+z+8,k++,P&&(P=!1,j=0,F=0);break;case"VP8X":(I=N.header={}).feature_flags=S[C];var X=C+4;I.canvas_width=1+u(S,X),X+=3,I.canvas_height=1+u(S,X),X+=3;break;case"ALPH":P=!0,j=B+8,F=C-8;break;case"ANIM":(I=N.header).bgcolor=h(S,C),X=C+4,I.loop_count=(H=S)[(O=X)+0]<<0|H[O+1]<<8,X+=2;break;case"ANMF":var te,I;(I=N.frames[k]={}).offset_x=2*u(S,C),C+=3,I.offset_y=2*u(S,C),C+=3,I.width=1+u(S,C),C+=3,I.height=1+u(S,C),C+=3,I.duration=u(S,C),C+=3,te=S[C++],I.dispose=1&te,I.blend=te>>1&1}$!="ANMF"&&(C+=B)}return N}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var x=y.header?y.header:null,b=y.frames?y.frames:null;if(x){x.loop_counter=x.loop_count,f=[x.canvas_height],d=[x.canvas_width];for(var E=0;E<b.length&&b[E].blend!=0;E++);}var T=b[0],D=m.WebPDecodeRGBA(v,T.src_off,T.src_size,d,f);T.rgba=D,T.imgwidth=d[0],T.imgheight=f[0];for(var R=0;R<d[0]*f[0]*4;R++)p[R]=D[R];return this.width=d,this.height=f,this.data=p,this}(function(t){var e=function(){return typeof Mx=="function"},n=function(f,d,p,m){var v=4,y=o;switch(m){case t.image_compression.FAST:v=1,y=s;break;case t.image_compression.MEDIUM:v=6,y=a;break;case t.image_compression.SLOW:v=9,y=l}f=i(f,d,p,y);var x=Mx(f,{level:v});return t.__addimage__.arrayBufferToBinaryString(x)},i=function(f,d,p,m){for(var v,y,x,b=f.length/d,E=new Uint8Array(f.length+b),T=u(),D=0;D<b;D+=1){if(x=D*d,v=f.subarray(x,x+d),m)E.set(m(v,p,y),x+D);else{for(var R,S=T.length,C=[];R<S;R+=1)C[R]=T[R](v,p,y);var N=h(C.concat());E.set(C[N],x+D)}y=v}return E},r=function(f){var d=Array.apply([],f);return d.unshift(0),d},s=function(f,d){var p,m=[],v=f.length;m[0]=1;for(var y=0;y<v;y+=1)p=f[y-d]||0,m[y+1]=f[y]-p+256&255;return m},o=function(f,d,p){var m,v=[],y=f.length;v[0]=2;for(var x=0;x<y;x+=1)m=p&&p[x]||0,v[x+1]=f[x]-m+256&255;return v},a=function(f,d,p){var m,v,y=[],x=f.length;y[0]=3;for(var b=0;b<x;b+=1)m=f[b-d]||0,v=p&&p[b]||0,y[b+1]=f[b]+256-(m+v>>>1)&255;return y},l=function(f,d,p){var m,v,y,x,b=[],E=f.length;b[0]=4;for(var T=0;T<E;T+=1)m=f[T-d]||0,v=p&&p[T]||0,y=p&&p[T-d]||0,x=c(m,v,y),b[T+1]=f[T]-x+256&255;return b},c=function(f,d,p){if(f===d&&d===p)return f;var m=Math.abs(d-p),v=Math.abs(f-p),y=Math.abs(f+d-p-p);return m<=v&&m<=y?f:v<=y?d:p},u=function(){return[r,s,o,a,l]},h=function(f){var d=f.map(function(p){return p.reduce(function(m,v){return m+Math.abs(v)},0)});return d.indexOf(Math.min.apply(null,d))};t.processPNG=function(f,d,p,m){var v,y,x,b,E,T,D,R,S,C,N,k,P,j,F,H=this.decode.FLATE_DECODE,O="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(x=new yq(f)).imgData,y=x.bits,v=x.colorSpace,E=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){S=(R=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,N=new Uint8Array(S*x.colors),C=new Uint8Array(S);var $,z=x.pixelBitlength-x.bits;for(j=0,F=0;j<S;j++){for(P=R[j],$=0;$<z;)N[F++]=P>>>$&255,$+=x.bits;C[j]=P>>>$&255}}if(x.bits===16){S=(R=new Uint32Array(x.decodePixels().buffer)).length,N=new Uint8Array(S*(32/x.pixelBitlength)*x.colors),C=new Uint8Array(S*(32/x.pixelBitlength)),k=x.colors>1,j=0,F=0;for(var B=0;j<S;)P=R[j++],N[F++]=P>>>0&255,k&&(N[F++]=P>>>16&255,P=R[j++],N[F++]=P>>>0&255),C[B++]=P>>>16&255;y=8}m!==t.image_compression.NONE&&e()?(f=n(N,x.width*x.colors,x.colors,m),D=n(C,x.width,1,m)):(f=N,D=C,H=void 0)}if(x.colorType===3&&(v=this.color_spaces.INDEXED,T=x.palette,x.transparency.indexed)){var X=x.transparency.indexed,te=0;for(j=0,S=X.length;j<S;++j)te+=X[j];if((te/=255)===S-1&&X.indexOf(0)!==-1)b=[X.indexOf(0)];else if(te!==S){for(R=x.decodePixels(),C=new Uint8Array(R.length),j=0,S=R.length;j<S;j++)C[j]=X[R[j]];D=n(C,x.width,1)}}var I=function(U){var K;switch(U){case t.image_compression.FAST:K=11;break;case t.image_compression.MEDIUM:K=13;break;case t.image_compression.SLOW:K=14;break;default:K=12}return K}(m);return H===this.decode.FLATE_DECODE&&(O="/Predictor "+I+" "),O+="/Colors "+E+" /BitsPerComponent "+y+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:p,data:f,index:d,filter:H,decodeParameters:O,transparency:b,palette:T,sMask:D,predictor:I,width:x.width,height:x.height,bitsPerComponent:y,colorSpace:v}}}})(ut.API),function(t){t.processGIF89A=function(e,n,i,r){var s=new vq(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new Sv(100).encode(c,100);return t.processJPEG.call(this,u,n,i,r)},t.processGIF87A=t.processGIF89A}(ut.API),ys.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ys.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){sn.log("bit decode error:"+n)}},ys.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<e;r++)for(var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},ys.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++){var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+2*r*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},ys.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*i;if(r<this.palette.length){var o=this.palette[r];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},ys.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,u=i*this.width*4+4*r;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},ys.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=r*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},ys.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=r,this.data[o+2]=i,this.data[o+3]=255}this.pos+=this.width%4}},ys.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=o}},ys.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,i,r){var s=new ys(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Sv(100).encode(l,100);return t.processJPEG.call(this,c,n,i,r)}}(ut.API),FT.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,i,r){var s=new FT(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Sv(100).encode(l,100);return t.processJPEG.call(this,c,n,i,r)}}(ut.API),ut.API.processRGBA=function(t,e,n){for(var i=t.data,r=i.length,s=new Uint8Array(r/4*3),o=new Uint8Array(r/4),a=0,l=0,c=0;c<r;c+=4){var u=i[c],h=i[c+1],f=i[c+2],d=i[c+3];s[a++]=u,s[a++]=h,s[a++]=f,o[l++]=d}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ut.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Wc=ut.API,S0=Wc.getCharWidthsArray=function(t,e){var n,i,r=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:r.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:r.metadata.Unicode.kerning,u=c.fof?c.fof:1,h=e.doKerning!==!1,f=0,d=t.length,p=0,m=a[0]||l,v=[];for(n=0;n<d;n++)i=t.charCodeAt(n),typeof r.metadata.widthOfString=="function"?v.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+o*(1e3/s)||0)/1e3):(f=h&&Zt(c[i])==="object"&&!isNaN(parseInt(c[i][p],10))?c[i][p]/u:0,v.push((a[i]||m)/l+f)),p=i;return v},NT=Wc.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return Wc.processArabic&&(t=Wc.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,r)/n:S0.apply(this,arguments).reduce(function(s,o){return s+o},0)},IT=function(t,e,n,i){for(var r=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;r.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>i&&(r.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&r.push(t.slice(l,s)),r},DT=function(t,e,n){n||(n={});var i,r,s,o,a,l,c,u=[],h=[u],f=n.textIndent||0,d=0,p=0,m=t.split(" "),v=S0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?m[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),x=[];m.map(function(E){(E=E.split(/\s*\n/)).length>1?x=x.concat(E.map(function(T,D){return(D&&T.length?`
`:"")+T})):x.push(E[0])}),m=x,l=NT.apply(this,[y,n])}for(s=0,o=m.length;s<o;s++){var b=0;if(i=m[s],l&&i[0]==`
`&&(i=i.substr(1),b=1),f+d+(p=(r=S0.apply(this,[i,n])).reduce(function(E,T){return E+T},0))>e||b){if(p>e){for(a=IT.apply(this,[i,r,e-(f+d),e]),u.push(a.shift()),u=[a.pop()];a.length;)h.push([a.shift()]);p=r.slice(i.length-(u[0]?u[0].length:0)).reduce(function(E,T){return E+T},0)}else u=[i];h.push(u),f=p+l,d=v}else u.push(i),f+=d+p,d=v}return c=l?function(E,T){return(T?y:"")+E.join(" ")}:function(E){return E.join(" ")},h.map(c)},Wc.splitTextToSize=function(t,e,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/r;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=i.length;a<l;a++)c=c.concat(DT.apply(this,[i[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},r=0;r<e.length;r++)n[e[r]]="0123456789abcdef"[r],i["0123456789abcdef"[r]]=e[r];var s=function(h){return"0x"+parseInt(h,10).toString(16)},o=t.__fontmetrics__.compress=function(h){var f,d,p,m,v=["{"];for(var y in h){if(f=h[y],isNaN(parseInt(y,10))?d="'"+y+"'":(y=parseInt(y,10),d=(d=s(y).slice(2)).slice(0,-1)+i[d.slice(-1)]),typeof f=="number")f<0?(p=s(f).slice(3),m="-"):(p=s(f).slice(2),m=""),p=m+p.slice(0,-1)+i[p.slice(-1)];else{if(Zt(f)!=="object")throw new Error("Don't know what to do with value type "+Zt(f)+".");p=o(f)}v.push(d+p)}return v.push("}"),v.join("")},a=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,d,p,m,v={},y=1,x=v,b=[],E="",T="",D=h.length-1,R=1;R<D;R+=1)(m=h[R])=="'"?f?(p=f.join(""),f=void 0):f=[]:f?f.push(m):m=="{"?(b.push([x,p]),x={},p=void 0):m=="}"?((d=b.pop())[0][d[1]]=x,p=void 0,x=d[0]):m=="-"?y=-1:p===void 0?n.hasOwnProperty(m)?(E+=n[m],p=parseInt(E,16)*y,y=1,E=""):E+=m:n.hasOwnProperty(m)?(T+=n[m],x[p]=parseInt(T,16)*y,y=1,p=void 0,T=""):T+=m;return v},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var f=h.font,d=u.Unicode[f.postScriptName];d&&(f.metadata.Unicode={},f.metadata.Unicode.widths=d.widths,f.metadata.Unicode.kerning=d.kerning);var p=c.Unicode[f.postScriptName];p&&(f.metadata.Unicode.encoding=p,f.encoding=p.codePages[0])}])}(ut.API),function(t){var e=function(n){for(var i=n.length,r=new Uint8Array(i),s=0;s<i;s++)r[s]=n.charCodeAt(s);return r};t.API.events.push(["addFont",function(n){var i=void 0,r=n.font,s=n.instance;if(!r.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=s.existsFileInVFS(r.postScriptName)===!1?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(_f(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(r,i)}}])}(ut),function(t){function e(){return(pt.canvg?Promise.resolve(pt.canvg):Rx(()=>import("./index.es-DHmf-HW8.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}ut.API.addSvgAsImage=function(n,i,r,s,o,a,l,c){if(isNaN(i)||isNaN(r))throw sn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw sn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=s,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return e().then(function(p){return p.fromString(h,n,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(f)}).then(function(){d.addImage(u.toDataURL("image/jpeg",1),i,r,s,o,l,c)})}}(),ut.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,n);return this},ut.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,r,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,h=0;function f(p,m){var v,y=!1;for(v=0;v<p.length;v+=1)p[v]===m&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var d=a.length;for(h=0;h<d;h+=1)n[a[h]].value=n[a[h]].defaultValue,n[a[h]].explicitSet=!1}if(Zt(t)==="object"){for(r in t)if(s=t[r],f(a,r)&&s!==void 0){if(n[r].type==="boolean"&&typeof s=="boolean")n[r].value=s;else if(n[r].type==="name"&&f(n[r].valueSet,s))n[r].value=s;else if(n[r].type==="integer"&&Number.isInteger(s))n[r].value=s;else if(n[r].type==="array"){for(c=0;c<s.length;c+=1)if(i=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)typeof s[c][u]!="number"&&(i=!1);i===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[r].value="["+l.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,m=[];for(p in n)n[p].explicitSet===!0&&(n[p].type==="name"?m.push("/"+p+" /"+n[p].value):m.push("/"+p+" "+n[p].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+r.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(r+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(ut.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],h=0,f=s.length;h<f;++h){if(a=o.metadata.characterToGlyph(s.charCodeAt(h)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},i=function(s){var o,a,l,c,u,h,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,f=(a=Object.keys(s).sort(function(d,p){return d-p})).length;h<f;h++)o=a[h],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,f=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),d="",p=0;p<f.length;p++)d+=String.fromCharCode(f[p]);var m=c();u({data:d,addLength1:!0,objectId:m}),l("endobj");var v=c();u({data:i(a.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Kc(a.fontName)),l("/FontFile2 "+m+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var x=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Kc(a.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+v+" 0 R"),l("/BaseFont /"+Kc(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,f="",d=0;d<h.length;d++)f+=String.fromCharCode(h[d]);var p=c();u({data:f,addLength1:!0,objectId:p}),l("endobj");var m=c();u({data:i(a.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var v=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+p+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Kc(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var y=0;y<a.metadata.hmtx.widths.length;y++)a.metadata.hmtx.widths[y]=parseInt(a.metadata.hmtx.widths[y]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+Kc(a.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var r=function(s){var o,a=s.text||"",l=s.x,c=s.y,u=s.options||{},h=s.mutex||{},f=h.pdfEscape,d=h.activeFontKey,p=h.fonts,m=d,v="",y=0,x="",b=p[m].encoding;if(p[m].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:h};for(x=a,m=d,Array.isArray(a)&&(x=a[0]),y=0;y<x.length;y+=1)p[m].metadata.hasOwnProperty("cmap")&&(o=p[m].metadata.cmap.unicode.codeMap[x[y].charCodeAt(0)]),o||x[y].charCodeAt(0)<256&&p[m].metadata.hasOwnProperty("Unicode")?v+=x[y]:v+="";var E="";return parseInt(m.slice(1))<14||b==="WinAnsiEncoding"?E=f(v,m).split("").map(function(T){return T.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(E=n(v,p[m])),h.isHex=!0,{text:E,x:l,y:c,options:u,mutex:h}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([r(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(r(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=r(Object.assign({},l,{text:o})).text}])}(ut),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return e.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ut.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var r,s,o,a,l,c,u,h=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,b=0;this.__bidiEngine__={};var E=function(k){var P=k.charCodeAt(),j=P>>8,F=m[j];return F!==void 0?h[256*F+(255&P)]:j===252||j===253?"AL":y.test(j)?"L":j===8?"R":"N"},T=function(k){for(var P,j=0;j<k.length;j++){if((P=E(k.charAt(j)))==="L")return!1;if(P==="R")return!0}return!1},D=function(k,P,j,F){var H,O,$,z,B=P[F];switch(B){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(B="AN");break;case"AL":x=!0,B="R";break;case"WS":B="N";break;case"CS":F<1||F+1>=P.length||(H=j[F-1])!=="EN"&&H!=="AN"||(O=P[F+1])!=="EN"&&O!=="AN"?B="N":x&&(O="AN"),B=O===H?O:"N";break;case"ES":B=(H=F>0?j[F-1]:"B")==="EN"&&F+1<P.length&&P[F+1]==="EN"?"EN":"N";break;case"ET":if(F>0&&j[F-1]==="EN"){B="EN";break}if(x){B="N";break}for($=F+1,z=P.length;$<z&&P[$]==="ET";)$++;B=$<z&&P[$]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(z=P.length,$=F+1;$<z&&P[$]==="NSM";)$++;if($<z){var X=k[F],te=X>=1425&&X<=2303||X===64286;if(H=P[$],te&&(H==="R"||H==="AL")){B="R";break}}}B=F<1||(H=P[F-1])==="B"?"N":j[F-1];break;case"B":x=!1,r=!0,B=b;break;case"S":s=!0,B="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":B="N"}return B},R=function(k,P,j){var F=k.split("");return j&&S(F,j,{hiLevel:b}),F.reverse(),P&&P.reverse(),F.join("")},S=function(k,P,j){var F,H,O,$,z,B=-1,X=k.length,te=0,I=[],U=b?d:f,K=[];for(x=!1,r=!1,s=!1,H=0;H<X;H++)K[H]=E(k[H]);for(O=0;O<X;O++){if(z=te,I[O]=D(k,K,I,O),F=240&(te=U[z][p[I[O]]]),te&=15,P[O]=$=U[te][5],F>0)if(F===16){for(H=B;H<O;H++)P[H]=1;B=-1}else B=-1;if(U[te][6])B===-1&&(B=O);else if(B>-1){for(H=B;H<O;H++)P[H]=$;B=-1}K[O]==="B"&&(P[O]=0),j.hiLevel|=$}s&&function(Q,ee,oe){for(var se=0;se<oe;se++)if(Q[se]==="S"){ee[se]=b;for(var ae=se-1;ae>=0&&Q[ae]==="WS";ae--)ee[ae]=b}}(K,P,X)},C=function(k,P,j,F,H){if(!(H.hiLevel<k)){if(k===1&&b===1&&!r)return P.reverse(),void(j&&j.reverse());for(var O,$,z,B,X=P.length,te=0;te<X;){if(F[te]>=k){for(z=te+1;z<X&&F[z]>=k;)z++;for(B=te,$=z-1;B<$;B++,$--)O=P[B],P[B]=P[$],P[$]=O,j&&(O=j[B],j[B]=j[$],j[$]=O);te=z}te++}}},N=function(k,P,j){var F=k.split(""),H={hiLevel:b};return j||(j=[]),S(F,j,H),function(O,$,z){if(z.hiLevel!==0&&u)for(var B,X=0;X<O.length;X++)$[X]===1&&(B=v.indexOf(O[X]))>=0&&(O[X]=v[B+1])}(F,j,H),C(2,F,P,j,H),C(1,F,P,j,H),F.join("")};return this.__bidiEngine__.doBidiReorder=function(k,P,j){if(function(H,O){if(O)for(var $=0;$<H.length;$++)O[$]=$;a===void 0&&(a=T(H)),c===void 0&&(c=T(H))}(k,P),o||!l||c)if(o&&l&&a^c)b=a?1:0,k=R(k,P,j);else if(!o&&l&&c)b=a?1:0,k=N(k,P,j),k=R(k,P);else if(!o||a||l||c){if(o&&!l&&a^c)k=R(k,P),a?(b=0,k=N(k,P,j)):(b=1,k=N(k,P,j),k=R(k,P));else if(o&&a&&!l&&c)b=1,k=N(k,P,j),k=R(k,P);else if(!o&&!l&&a^c){var F=u;a?(b=1,k=N(k,P,j),b=0,u=!1,k=N(k,P,j),u=F):(b=0,k=N(k,P,j),k=R(k,P),b=1,u=!1,k=N(k,P,j),u=F,k=R(k,P))}}else b=0,k=N(k,P,j);else b=a?1:0,k=N(k,P,j);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,l=k.isOutputVisual,a=k.isInputRtl,c=k.isOutputRtl,u=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var r=i.text,s=(i.x,i.y,i.options||{}),o=(i.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(r)==="[object Array]"){var a=0;for(o=[],a=0;a<r.length;a+=1)Object.prototype.toString.call(r[a])==="[object Array]"?o.push([n.doBidiReorder(r[a][0]),r[a][1],r[a][2]]):o.push([n.doBidiReorder(r[a])]);i.text=o}else i.text=n.doBidiReorder(r);n.setOptions({isInputVisual:!0})}])}(ut),ut.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Qa(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Iq(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new xq(this.contents),this.head=new wq(this),this.name=new Tq(this),this.cmap=new ZR(this),this.toUnicode={},this.hhea=new Sq(this),this.maxp=new Lq(this),this.hmtx=new kq(this),this.post=new Eq(this),this.os2=new _q(this),this.loca=new Nq(this),this.glyf=new Cq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,i,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(n=r>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,i){var r,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)r=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t}();var Is,Qa=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,i;for(i=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var n,i,r;for(r=[],n=0,i=e.length;0<=i?n<i:n>i;n=0<=i?++n:--n)r.push(this.writeByte(e.charCodeAt(n)));return r},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,i,r,s,o,a,l;return e=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*i+4294967296*r+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,i;return n=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,i;for(n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(e){var n,i,r,s;for(s=[],i=0,r=e.length;i<r;i++)n=e[i],s.push(this.writeByte(n));return s},t}(),xq=function(){var t;function e(n){var i,r,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},r=0,s=this.tableCount;0<=s?r<s:r>s;r=0<=s?++r:--r)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(n){var i,r,s,o,a,l,c,u,h,f,d,p,m;for(m in d=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(d)/l),o=Math.floor(h/l),u=16*d-h,(r=new Qa).writeInt(this.scalarType),r.writeShort(d),r.writeShort(h),r.writeShort(o),r.writeShort(u),s=16*d,c=r.pos+s,a=null,p=[],n)for(f=n[m],r.writeString(m),r.writeInt(t(f)),r.writeInt(c),r.writeInt(f.length),p=p.concat(f),m==="head"&&(a=c),c+=f.length;c%4;)p.push(0),c++;return r.write(p),i=2981146554-t(r.data),r.pos=a+8,r.writeUInt32(i),r.data},t=function(n){var i,r,s,o;for(n=eP.call(n);n.length%4;)n.push(0);for(s=new Qa(n),r=0,i=0,o=n.length;i<o;i=i+=4)r+=s.readUInt32();return 4294967295&r},e}(),bq={}.hasOwnProperty,go=function(t,e){for(var n in e)bq.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Is=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var wq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return go(e,Is),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new Qa).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e}(),OT=function(){function t(e,n){var i,r,s,o,a,l,c,u,h,f,d,p,m,v,y,x,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(d=e.readUInt16(),f=d/2,e.pos+=6,s=function(){var E,T;for(T=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)T.push(e.readUInt16());return T}(),e.pos+=2,m=function(){var E,T;for(T=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)T.push(e.readUInt16());return T}(),c=function(){var E,T;for(T=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)T.push(e.readUInt16());return T}(),u=function(){var E,T;for(T=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)T.push(e.readUInt16());return T}(),r=(this.length-e.pos+this.offset)/2,a=function(){var E,T;for(T=[],l=E=0;0<=r?E<r:E>r;l=0<=r?++E:--E)T.push(e.readUInt16());return T}(),l=y=0,b=s.length;y<b;l=++y)for(v=s[l],i=x=p=m[l];p<=v?x<=v:x>=v;i=p<=v?++x:--x)u[l]===0?o=i+c[l]:(o=a[u[l]/2+(i-p)-(f-l)]||0)!==0&&(o+=c[l]),this.codeMap[i]=65535&o}e.pos=h}return t.encode=function(e,n){var i,r,s,o,a,l,c,u,h,f,d,p,m,v,y,x,b,E,T,D,R,S,C,N,k,P,j,F,H,O,$,z,B,X,te,I,U,K,Q,ee,oe,se,ae,Ee,we,Pe;switch(F=new Qa,o=Object.keys(e).sort(function(be,ke){return be-ke}),n){case"macroman":for(m=0,v=function(){var be=[];for(p=0;p<256;++p)be.push(0);return be}(),x={0:0},s={},H=0,B=o.length;H<B;H++)x[ae=e[r=o[H]]]==null&&(x[ae]=++m),s[r]={old:e[r],new:x[e[r]]},v[r]=x[e[r]];return F.writeUInt16(1),F.writeUInt16(0),F.writeUInt32(12),F.writeUInt16(0),F.writeUInt16(262),F.writeUInt16(0),F.write(v),{charMap:s,subtable:F.data,maxGlyphID:m+1};case"unicode":for(P=[],h=[],b=0,x={},i={},y=c=null,O=0,X=o.length;O<X;O++)x[T=e[r=o[O]]]==null&&(x[T]=++b),i[r]={old:T,new:x[T]},a=x[T]-r,y!=null&&a===c||(y&&h.push(y),P.push(r),c=a),y=r;for(y&&h.push(y),h.push(65535),P.push(65535),N=2*(C=P.length),S=2*Math.pow(Math.log(C)/Math.LN2,2),f=Math.log(S/2)/Math.LN2,R=2*C-S,l=[],D=[],d=[],p=$=0,te=P.length;$<te;p=++$){if(k=P[p],u=h[p],k===65535){l.push(0),D.push(0);break}if(k-(j=i[k].new)>=32768)for(l.push(0),D.push(2*(d.length+C-p)),r=z=k;k<=u?z<=u:z>=u;r=k<=u?++z:--z)d.push(i[r].new);else l.push(j-k),D.push(0)}for(F.writeUInt16(3),F.writeUInt16(1),F.writeUInt32(12),F.writeUInt16(4),F.writeUInt16(16+8*C+2*d.length),F.writeUInt16(0),F.writeUInt16(N),F.writeUInt16(S),F.writeUInt16(f),F.writeUInt16(R),oe=0,I=h.length;oe<I;oe++)r=h[oe],F.writeUInt16(r);for(F.writeUInt16(0),se=0,U=P.length;se<U;se++)r=P[se],F.writeUInt16(r);for(Ee=0,K=l.length;Ee<K;Ee++)a=l[Ee],F.writeUInt16(a);for(we=0,Q=D.length;we<Q;we++)E=D[we],F.writeUInt16(E);for(Pe=0,ee=d.length;Pe<ee;Pe++)m=d[Pe],F.writeUInt16(m);return{charMap:i,subtable:F.data,maxGlyphID:b+1}}},t}(),ZR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return go(e,Is),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,r,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)i=new OT(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var r,s;return i==null&&(i="macroman"),r=OT.encode(n,i),(s=new Qa).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},e}(),Sq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return go(e,Is),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),_q=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return go(e,Is),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,r;for(r=[],i=0;i<10;++i)r.push(n.readByte());return r}(),this.charRange=function(){var i,r;for(r=[],i=0;i<4;++i)r.push(n.readInt());return r}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,r;for(r=[],i=0;i<2;i=++i)r.push(n.readInt());return r}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Eq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return go(e,Is),e.prototype.tag="post",e.prototype.parse=function(n){var i,r,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(r=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)i=n.readByte(),s.push(this.names.push(n.readString(i)));return s;case 151552:return r=n.readUInt16(),this.offsets=n.read(r);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),Aq=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Tq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return go(e,Is),e.prototype.tag="name",e.prototype.parse=function(n){var i,r,s,o,a,l,c,u,h,f,d;for(n.pos=this.offset,n.readShort(),i=n.readShort(),l=n.readShort(),r=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)r.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=h=0,f=r.length;h<f;o=++h)s=r[o],n.pos=s.offset,u=n.readString(s.length),a=new Aq(u,s),c[d=s.nameID]==null&&(c[d]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Lq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return go(e,Is),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),kq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return go(e,Is),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,r,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],i=u=0;0<=s?u<s:u>s;i=0<=s?++u:--u)h.push(n.readInt16());return h}(),this.widths=(function(){var u,h,f,d;for(d=[],u=0,h=(f=this.metrics).length;u<h;u++)o=f[u],d.push(o.advance);return d}).call(this),r=this.widths[this.widths.length-1],c=[],i=a=0;0<=s?a<s:a>s;i=0<=s?++a:--a)c.push(this.widths.push(r));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),eP=[].slice,Cq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return go(e,Is),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,r,s,o,a,l,c,u,h,f;return n in this.cache?this.cache[n]:(o=this.file.loca,i=this.file.contents,r=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+r,a=(l=new Qa(i.read(s))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[n]=a===-1?new Pq(l,u,f,c,h):new Rq(l,a,u,f,c,h),this.cache[n]))},e.prototype.encode=function(n,i,r){var s,o,a,l,c;for(a=[],o=[],l=0,c=i.length;l<c;l++)s=n[i[l]],o.push(a.length),s&&(a=a.concat(s.encode(r)));return o.push(a.length),{table:a,offsets:o}},e}(),Rq=function(){function t(e,n,i,r,s,o){this.raw=e,this.numberOfContours=n,this.xMin=i,this.yMin=r,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Pq=function(){function t(e,n,i,r,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,i;for(n=new Qa(eP.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Nq=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return go(e,Is),e.prototype.tag="loca",e.prototype.parse=function(n){var i,r;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var s,o;for(o=[],r=0,s=this.length;r<s;r+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],r=0,s=this.length;r<s;r+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var r=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<r.length;++a)if(r[a]=s,o<i.length&&i[o]==a){++o,r[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var u=new Array(4*r.length),h=0;h<r.length;++h)u[4*h+3]=255&r[h],u[4*h+2]=(65280&r[h])>>8,u[4*h+1]=(16711680&r[h])>>16,u[4*h]=(4278190080&r[h])>>24;return u},e}(),Iq=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,i,r,s;for(n in r=this.font.cmap.tables[0].codeMap,e={},s=this.subset)i=s[n],e[n]=r[i];return e},t.prototype.glyphsFor=function(e){var n,i,r,s,o,a,l;for(r={},o=0,a=e.length;o<a;o++)r[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],r)(i=r[s])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))i=l[s],r[s]=i;return r},t.prototype.encode=function(e,n){var i,r,s,o,a,l,c,u,h,f,d,p,m,v,y;for(r in i=ZR.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),d={0:0},y=i.charMap)d[(l=y[r]).old]=l.new;for(p in f=i.maxGlyphID,o)p in d||(d[p]=f++);return u=function(x){var b,E;for(b in E={},x)E[x[b]]=b;return E}(d),h=Object.keys(u).sort(function(x,b){return x-b}),m=function(){var x,b,E;for(E=[],x=0,b=h.length;x<b;x++)a=h[x],E.push(u[a]);return E}(),s=this.font.glyf.encode(o,m,d),c=this.font.loca.encode(s.offsets,m),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},t}();ut.API.PDFObject=function(){var t;function e(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},e.convert=function(n){var i,r,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)i=n[a],c.push(e.convert(i));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(r in s=["<<"],n)o=n[r],s.push("/"+r+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const Dq=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:hq,AcroFormAppearance:Qe,AcroFormButton:ni,AcroFormCheckBox:Tf,AcroFormChoiceField:$l,AcroFormComboBox:Hl,AcroFormEditBox:Ef,AcroFormListBox:zl,AcroFormPasswordField:Lf,AcroFormPushButton:Af,AcroFormRadioButton:Vl,AcroFormTextField:Wa,GState:dd,ShadingPattern:La,TilingPattern:Dl,default:ut,jsPDF:ut},Symbol.toStringTag,{value:"Module"}));var Mq={exports:{}};const Fq=zP(Dq);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,e){(function(i,r){t.exports=r(function(){try{return Fq}catch{}}())})(typeof globalThis<"u"?globalThis:typeof E0<"u"?E0:typeof window<"u"?window:typeof self<"u"?self:E0,function(n){return function(){var i={172:function(a,l){var c=this&&this.__extends||function(){var f=function(d,p){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,v){m.__proto__=v}||function(m,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])},f(d,p)};return function(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");f(d,p);function m(){this.constructor=d}d.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var u=function(){function f(d,p,m){this.table=p,this.pageNumber=p.pageNumber,this.pageCount=this.pageNumber,this.settings=p.settings,this.cursor=m,this.doc=d.getDocument()}return f}();l.HookData=u;var h=function(f){c(d,f);function d(p,m,v,y,x,b){var E=f.call(this,p,m,b)||this;return E.cell=v,E.row=y,E.column=x,E.section=y.section,E}return d}(u);l.CellHookData=h},340:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var u=c(4),h=c(136),f=c(744),d=c(776),p=c(664),m=c(972);function v(y){y.API.autoTable=function(){for(var x=[],b=0;b<arguments.length;b++)x[b]=arguments[b];var E;x.length===1?E=x[0]:(console.error("Use of deprecated autoTable initiation"),E=x[2]||{},E.columns=x[0],E.body=x[1]);var T=(0,d.parseInput)(this,E),D=(0,m.createTable)(this,T);return(0,p.drawTable)(this,D),this},y.API.lastAutoTable=!1,y.API.previousAutoTable=!1,y.API.autoTable.previous=!1,y.API.autoTableText=function(x,b,E,T){(0,h.default)(x,b,E,T,this)},y.API.autoTableSetDefaults=function(x){return f.DocHandler.setDefaults(x,this),this},y.autoTableSetDefaults=function(x,b){f.DocHandler.setDefaults(x,b)},y.API.autoTableHtmlToJson=function(x,b){var E;if(b===void 0&&(b=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var T=new f.DocHandler(this),D=(0,u.parseHtml)(T,x,window,b,!1),R=D.head,S=D.body,C=((E=R[0])===null||E===void 0?void 0:E.map(function(N){return N.content}))||[];return{columns:C,rows:S,data:S}},y.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var x=this.lastAutoTable;return x&&x.finalY?x.finalY:0},y.API.autoTableAddPageContent=function(x){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),y.API.autoTable.globalDefaults||(y.API.autoTable.globalDefaults={}),y.API.autoTable.globalDefaults.addPageContent=x,this},y.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=v},136:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(u,h,f,d,p){d=d||{};var m=1.15,v=p.internal.scaleFactor,y=p.internal.getFontSize()/v,x=p.getLineHeightFactor?p.getLineHeightFactor():m,b=y*x,E=/\r\n|\r|\n/g,T="",D=1;if((d.valign==="middle"||d.valign==="bottom"||d.halign==="center"||d.halign==="right")&&(T=typeof u=="string"?u.split(E):u,D=T.length||1),f+=y*(2-m),d.valign==="middle"?f-=D/2*b:d.valign==="bottom"&&(f-=D*b),d.halign==="center"||d.halign==="right"){var R=y;if(d.halign==="center"&&(R*=.5),T&&D>=1){for(var S=0;S<T.length;S++)p.text(T[S],h-p.getStringUnitWidth(T[S])*R,f),f+=b;return p}h-=p.getStringUnitWidth(u)*R}return d.halign==="justify"?p.text(u,h,f,{maxWidth:d.maxWidth||100,align:"justify"}):p.text(u,h,f),p}l.default=c},420:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(p,m,v){v.applyStyles(m,!0);var y=Array.isArray(p)?p:[p],x=y.map(function(b){return v.getTextWidth(b)}).reduce(function(b,E){return Math.max(b,E)},0);return x}l.getStringWidth=c;function u(p,m,v,y){var x=m.settings.tableLineWidth,b=m.settings.tableLineColor;p.applyStyles({lineWidth:x,lineColor:b});var E=h(x,!1);E&&p.rect(v.x,v.y,m.getWidth(p.pageSize().width),y.y-v.y,E)}l.addTableBorder=u;function h(p,m){var v=p>0,y=m||m===0;return v&&y?"DF":v?"S":y?"F":null}l.getFillStyle=h;function f(p,m){var v,y,x,b;if(p=p||m,Array.isArray(p)){if(p.length>=4)return{top:p[0],right:p[1],bottom:p[2],left:p[3]};if(p.length===3)return{top:p[0],right:p[1],bottom:p[2],left:p[1]};if(p.length===2)return{top:p[0],right:p[1],bottom:p[0],left:p[1]};p.length===1?p=p[0]:p=m}return typeof p=="object"?(typeof p.vertical=="number"&&(p.top=p.vertical,p.bottom=p.vertical),typeof p.horizontal=="number"&&(p.right=p.horizontal,p.left=p.horizontal),{left:(v=p.left)!==null&&v!==void 0?v:m,top:(y=p.top)!==null&&y!==void 0?y:m,right:(x=p.right)!==null&&x!==void 0?x:m,bottom:(b=p.bottom)!==null&&b!==void 0?b:m}):(typeof p!="number"&&(p=m),{top:p,right:p,bottom:p,left:p})}l.parseSpacing=f;function d(p,m){var v=f(m.settings.margin,0);return p.pageSize().width-(v.left+v.right)}l.getPageAvailableWidth=d},796:function(a,l){var c=this&&this.__extends||function(){var d=function(p,m){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(v[x]=y[x])},d(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");d(p,m);function v(){this.constructor=p}p.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var u=function(d){c(p,d);function p(m){var v=d.call(this)||this;return v._element=m,v}return p}(Array);l.HtmlRowInput=u;function h(d){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/d,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=h;function f(d){var p={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return p[d]}l.getTheme=f},903:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var u=c(420);function h(v,y,x,b,E){var T={},D=1.3333333333333333,R=d(y,function(B){return E.getComputedStyle(B).backgroundColor});R!=null&&(T.fillColor=R);var S=d(y,function(B){return E.getComputedStyle(B).color});S!=null&&(T.textColor=S);var C=m(b,x);C&&(T.cellPadding=C);var N="borderTopColor",k=D*x,P=b.borderTopWidth;if(b.borderBottomWidth===P&&b.borderRightWidth===P&&b.borderLeftWidth===P){var j=(parseFloat(P)||0)/k;j&&(T.lineWidth=j)}else T.lineWidth={top:(parseFloat(b.borderTopWidth)||0)/k,right:(parseFloat(b.borderRightWidth)||0)/k,bottom:(parseFloat(b.borderBottomWidth)||0)/k,left:(parseFloat(b.borderLeftWidth)||0)/k},T.lineWidth.top||(T.lineWidth.right?N="borderRightColor":T.lineWidth.bottom?N="borderBottomColor":T.lineWidth.left&&(N="borderLeftColor"));var F=d(y,function(B){return E.getComputedStyle(B)[N]});F!=null&&(T.lineColor=F);var H=["left","right","center","justify"];H.indexOf(b.textAlign)!==-1&&(T.halign=b.textAlign),H=["middle","bottom","top"],H.indexOf(b.verticalAlign)!==-1&&(T.valign=b.verticalAlign);var O=parseInt(b.fontSize||"");isNaN(O)||(T.fontSize=O/D);var $=f(b);$&&(T.fontStyle=$);var z=(b.fontFamily||"").toLowerCase();return v.indexOf(z)!==-1&&(T.font=z),T}l.parseCss=h;function f(v){var y="";return(v.fontWeight==="bold"||v.fontWeight==="bolder"||parseInt(v.fontWeight)>=700)&&(y="bold"),(v.fontStyle==="italic"||v.fontStyle==="oblique")&&(y+="italic"),y}function d(v,y){var x=p(v,y);if(!x)return null;var b=x.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!b||!Array.isArray(b))return null;var E=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])],T=parseInt(b[4]);return T===0||isNaN(E[0])||isNaN(E[1])||isNaN(E[2])?null:E}function p(v,y){var x=y(v);return x==="rgba(0, 0, 0, 0)"||x==="transparent"||x==="initial"||x==="inherit"?v.parentElement==null?null:p(v.parentElement,y):x}function m(v,y){var x=[v.paddingTop,v.paddingRight,v.paddingBottom,v.paddingLeft],b=96/(72/y),E=(parseInt(v.lineHeight)-parseInt(v.fontSize))/y/2,T=x.map(function(R){return parseInt(R||"0")/b}),D=(0,u.parseSpacing)(T,0);return E>D.top&&(D.top=E),E>D.bottom&&(D.bottom=E),D}},744:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},u=function(){function h(f){this.jsPDFDocument=f,this.userStyles={textColor:f.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:f.internal.getFontSize(),fontStyle:f.internal.getFont().fontStyle,font:f.internal.getFont().fontName,lineWidth:f.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:f.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return h.setDefaults=function(f,d){d===void 0&&(d=null),d?d.__autoTableDocumentDefaults=f:c=f},h.unifyColor=function(f){return Array.isArray(f)?f:typeof f=="number"?[f,f,f]:typeof f=="string"?[f]:null},h.prototype.applyStyles=function(f,d){var p,m,v;d===void 0&&(d=!1),f.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(f.fontStyle);var y=this.jsPDFDocument.internal.getFont(),x=y.fontStyle,b=y.fontName;if(f.font&&(b=f.font),f.fontStyle){x=f.fontStyle;var E=this.getFontList()[b];E&&E.indexOf(x)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(E[0]),x=E[0])}if(this.jsPDFDocument.setFont(b,x),f.fontSize&&this.jsPDFDocument.setFontSize(f.fontSize),!d){var T=h.unifyColor(f.fillColor);T&&(p=this.jsPDFDocument).setFillColor.apply(p,T),T=h.unifyColor(f.textColor),T&&(m=this.jsPDFDocument).setTextColor.apply(m,T),T=h.unifyColor(f.lineColor),T&&(v=this.jsPDFDocument).setDrawColor.apply(v,T),typeof f.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(f.lineWidth)}},h.prototype.splitTextToSize=function(f,d,p){return this.jsPDFDocument.splitTextToSize(f,d,p)},h.prototype.rect=function(f,d,p,m,v){return this.jsPDFDocument.rect(f,d,p,m,v)},h.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},h.prototype.getTextWidth=function(f){return this.jsPDFDocument.getTextWidth(f)},h.prototype.getDocument=function(){return this.jsPDFDocument},h.prototype.setPage=function(f){this.jsPDFDocument.setPage(f)},h.prototype.addPage=function(){return this.jsPDFDocument.addPage()},h.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},h.prototype.getGlobalOptions=function(){return c||{}},h.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},h.prototype.pageSize=function(){var f=this.jsPDFDocument.internal.pageSize;return f.width==null&&(f={width:f.getWidth(),height:f.getHeight()}),f},h.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},h.prototype.getLineHeightFactor=function(){var f=this.jsPDFDocument;return f.getLineHeightFactor?f.getLineHeightFactor():1.15},h.prototype.getLineHeight=function(f){return f/this.scaleFactor()*this.getLineHeightFactor()},h.prototype.pageNumber=function(){var f=this.jsPDFDocument.internal.getCurrentPageInfo();return f?f.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},h}();l.DocHandler=u},4:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var u=c(903),h=c(796);function f(m,v,y,x,b){var E,T;x===void 0&&(x=!1),b===void 0&&(b=!1);var D;typeof v=="string"?D=y.document.querySelector(v):D=v;var R=Object.keys(m.getFontList()),S=m.scaleFactor(),C=[],N=[],k=[];if(!D)return console.error("Html table could not be found with input: ",v),{head:C,body:N,foot:k};for(var P=0;P<D.rows.length;P++){var j=D.rows[P],F=(T=(E=j==null?void 0:j.parentElement)===null||E===void 0?void 0:E.tagName)===null||T===void 0?void 0:T.toLowerCase(),H=d(R,S,y,j,x,b);H&&(F==="thead"?C.push(H):F==="tfoot"?k.push(H):N.push(H))}return{head:C,body:N,foot:k}}l.parseHtml=f;function d(m,v,y,x,b,E){for(var T=new h.HtmlRowInput(x),D=0;D<x.cells.length;D++){var R=x.cells[D],S=y.getComputedStyle(R);if(b||S.display!=="none"){var C=void 0;E&&(C=(0,u.parseCss)(m,R,v,S,y)),T.push({rowSpan:R.rowSpan,colSpan:R.colSpan,styles:C,_element:R,content:p(R)})}}var N=y.getComputedStyle(x);if(T.length>0&&(b||N.display!=="none"))return T}function p(m){var v=m.cloneNode(!0);return v.innerHTML=v.innerHTML.replace(/\n/g,"").replace(/ +/g," "),v.innerHTML=v.innerHTML.split(/<br.*?>/).map(function(y){return y.trim()}).join(`
`),v.innerText||v.textContent||""}},776:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var u=c(4),h=c(356),f=c(420),d=c(744),p=c(792);function m(D,R){var S=new d.DocHandler(D),C=S.getDocumentOptions(),N=S.getGlobalOptions();(0,p.default)(S,N,C,R);var k=(0,h.assign)({},N,C,R),P;typeof window<"u"&&(P=window);var j=v(N,C,R),F=y(N,C,R),H=x(S,k),O=E(S,k,P);return{id:R.tableId,content:O,hooks:F,styles:j,settings:H}}l.parseInput=m;function v(D,R,S){for(var C={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},N=function(F){if(F==="columnStyles"){var H=D[F],O=R[F],$=S[F];C.columnStyles=(0,h.assign)({},H,O,$)}else{var z=[D,R,S],B=z.map(function(X){return X[F]||{}});C[F]=(0,h.assign)({},B[0],B[1],B[2])}},k=0,P=Object.keys(C);k<P.length;k++){var j=P[k];N(j)}return C}function y(D,R,S){for(var C=[D,R,S],N={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},k=0,P=C;k<P.length;k++){var j=P[k];j.didParseCell&&N.didParseCell.push(j.didParseCell),j.willDrawCell&&N.willDrawCell.push(j.willDrawCell),j.didDrawCell&&N.didDrawCell.push(j.didDrawCell),j.willDrawPage&&N.willDrawPage.push(j.willDrawPage),j.didDrawPage&&N.didDrawPage.push(j.didDrawPage)}return N}function x(D,R){var S,C,N,k,P,j,F,H,O,$,z,B,X=(0,f.parseSpacing)(R.margin,40/D.scaleFactor()),te=(S=b(D,R.startY))!==null&&S!==void 0?S:X.top,I;R.showFoot===!0?I="everyPage":R.showFoot===!1?I="never":I=(C=R.showFoot)!==null&&C!==void 0?C:"everyPage";var U;R.showHead===!0?U="everyPage":R.showHead===!1?U="never":U=(N=R.showHead)!==null&&N!==void 0?N:"everyPage";var K=(k=R.useCss)!==null&&k!==void 0?k:!1,Q=R.theme||(K?"plain":"striped"),ee=!!R.horizontalPageBreak,oe=(P=R.horizontalPageBreakRepeat)!==null&&P!==void 0?P:null;return{includeHiddenHtml:(j=R.includeHiddenHtml)!==null&&j!==void 0?j:!1,useCss:K,theme:Q,startY:te,margin:X,pageBreak:(F=R.pageBreak)!==null&&F!==void 0?F:"auto",rowPageBreak:(H=R.rowPageBreak)!==null&&H!==void 0?H:"auto",tableWidth:(O=R.tableWidth)!==null&&O!==void 0?O:"auto",showHead:U,showFoot:I,tableLineWidth:($=R.tableLineWidth)!==null&&$!==void 0?$:0,tableLineColor:(z=R.tableLineColor)!==null&&z!==void 0?z:200,horizontalPageBreak:ee,horizontalPageBreakRepeat:oe,horizontalPageBreakBehaviour:(B=R.horizontalPageBreakBehaviour)!==null&&B!==void 0?B:"afterAllRows"}}function b(D,R){var S=D.getLastAutoTable(),C=D.scaleFactor(),N=D.pageNumber(),k=!1;if(S&&S.startPageNumber){var P=S.startPageNumber+S.pageNumber-1;k=P===N}return typeof R=="number"?R:(R==null||R===!1)&&k&&(S==null?void 0:S.finalY)!=null?S.finalY+20/C:null}function E(D,R,S){var C=R.head||[],N=R.body||[],k=R.foot||[];if(R.html){var P=R.includeHiddenHtml;if(S){var j=(0,u.parseHtml)(D,R.html,S,P,R.useCss)||{};C=j.head||C,N=j.body||C,k=j.foot||C}else console.error("Cannot parse html in non browser environment")}var F=R.columns||T(C,N,k);return{columns:F,head:C,body:N,foot:k}}function T(D,R,S){var C=D[0]||R[0]||S[0]||[],N=[];return Object.keys(C).filter(function(k){return k!=="_element"}).forEach(function(k){var P=1,j;Array.isArray(C)?j=C[parseInt(k)]:j=C[k],typeof j=="object"&&!Array.isArray(j)&&(P=(j==null?void 0:j.colSpan)||1);for(var F=0;F<P;F++){var H=void 0;Array.isArray(C)?H=N.length:H=k+(F>0?"_".concat(F):"");var O={dataKey:H};N.push(O)}}),N}},792:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(h,f,d,p){for(var m=function(b){b&&typeof b!="object"&&console.error("The options parameter should be of type object, is: "+typeof b),typeof b.extendWidth<"u"&&(b.tableWidth=b.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof b.margins<"u"&&(typeof b.margin>"u"&&(b.margin=b.margins),console.error("Use of deprecated option: margins, use margin instead.")),b.startY&&typeof b.startY!="number"&&(console.error("Invalid value for startY option",b.startY),delete b.startY),!b.didDrawPage&&(b.afterPageContent||b.beforePageContent||b.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),b.didDrawPage=function(k){h.applyStyles(h.userStyles),b.beforePageContent&&b.beforePageContent(k),h.applyStyles(h.userStyles),b.afterPageContent&&b.afterPageContent(k),h.applyStyles(h.userStyles),b.afterPageAdd&&k.pageNumber>1&&k.afterPageAdd(k),h.applyStyles(h.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(k){b[k]&&console.error('The "'.concat(k,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(k){var P=k[0],j=k[1];b[j]&&(console.error("Use of deprecated option ".concat(j,". Use ").concat(P," instead")),b[P]=b[j])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(k){var P=typeof k=="string"?k:k[0],j=typeof k=="string"?k:k[1];typeof b[P]<"u"&&(typeof b.styles[j]>"u"&&(b.styles[j]=b[P]),console.error("Use of deprecated option: "+P+", use the style "+j+" instead."))});for(var E=0,T=["styles","bodyStyles","headStyles","footStyles"];E<T.length;E++){var D=T[E];u(b[D]||{})}for(var R=b.columnStyles||{},S=0,C=Object.keys(R);S<C.length;S++){var N=C[S];u(R[N]||{})}},v=0,y=[f,d,p];v<y.length;v++){var x=y[v];m(x)}}l.default=c;function u(h){h.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),h.minCellHeight||(h.minCellHeight=h.rowHeight)):h.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),h.cellWidth||(h.cellWidth=h.columnWidth))}},260:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var u=c(796),h=c(172),f=c(420),d=function(){function y(x,b){this.pageNumber=1,this.pageCount=1,this.id=x.id,this.settings=x.settings,this.styles=x.styles,this.hooks=x.hooks,this.columns=b.columns,this.head=b.head,this.body=b.body,this.foot=b.foot}return y.prototype.getHeadHeight=function(x){return this.head.reduce(function(b,E){return b+E.getMaxCellHeight(x)},0)},y.prototype.getFootHeight=function(x){return this.foot.reduce(function(b,E){return b+E.getMaxCellHeight(x)},0)},y.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},y.prototype.callCellHooks=function(x,b,E,T,D,R){for(var S=0,C=b;S<C.length;S++){var N=C[S],k=new h.CellHookData(x,this,E,T,D,R),P=N(k)===!1;if(E.text=Array.isArray(E.text)?E.text:[E.text],P)return!1}return!0},y.prototype.callEndPageHooks=function(x,b){x.applyStyles(x.userStyles);for(var E=0,T=this.hooks.didDrawPage;E<T.length;E++){var D=T[E];D(new h.HookData(x,this,b))}},y.prototype.callWillDrawPageHooks=function(x,b){for(var E=0,T=this.hooks.willDrawPage;E<T.length;E++){var D=T[E];D(new h.HookData(x,this,b))}},y.prototype.getWidth=function(x){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var b=this.columns.reduce(function(T,D){return T+D.wrappedWidth},0);return b}else{var E=this.settings.margin;return x-E.left-E.right}},y}();l.Table=d;var p=function(){function y(x,b,E,T,D){D===void 0&&(D=!1),this.height=0,this.raw=x,x instanceof u.HtmlRowInput&&(this.raw=x._element,this.element=x._element),this.index=b,this.section=E,this.cells=T,this.spansMultiplePages=D}return y.prototype.getMaxCellHeight=function(x){var b=this;return x.reduce(function(E,T){var D;return Math.max(E,((D=b.cells[T.index])===null||D===void 0?void 0:D.height)||0)},0)},y.prototype.hasRowSpan=function(x){var b=this;return x.filter(function(E){var T=b.cells[E.index];return T?T.rowSpan>1:!1}).length>0},y.prototype.canEntireRowFit=function(x,b){return this.getMaxCellHeight(b)<=x},y.prototype.getMinimumRowHeight=function(x,b){var E=this;return x.reduce(function(T,D){var R=E.cells[D.index];if(!R)return 0;var S=b.getLineHeight(R.styles.fontSize),C=R.padding("vertical"),N=C+S;return N>T?N:T},0)},y}();l.Row=p;var m=function(){function y(x,b,E){var T,D;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=b,this.section=E,this.raw=x;var R=x;x!=null&&typeof x=="object"&&!Array.isArray(x)?(this.rowSpan=x.rowSpan||1,this.colSpan=x.colSpan||1,R=(D=(T=x.content)!==null&&T!==void 0?T:x.title)!==null&&D!==void 0?D:x,x._element&&(this.raw=x._element)):(this.rowSpan=1,this.colSpan=1);var S=R!=null?""+R:"",C=/\r\n|\r|\n/g;this.text=S.split(C)}return y.prototype.getTextPos=function(){var x;if(this.styles.valign==="top")x=this.y+this.padding("top");else if(this.styles.valign==="bottom")x=this.y+this.height-this.padding("bottom");else{var b=this.height-this.padding("vertical");x=this.y+b/2+this.padding("top")}var E;if(this.styles.halign==="right")E=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var T=this.width-this.padding("horizontal");E=this.x+T/2+this.padding("left")}else E=this.x+this.padding("left");return{x:E,y:x}},y.prototype.getContentHeight=function(x,b){b===void 0&&(b=1.15);var E=Array.isArray(this.text)?this.text.length:1,T=this.styles.fontSize/x*b,D=E*T+this.padding("vertical");return Math.max(D,this.styles.minCellHeight)},y.prototype.padding=function(x){var b=(0,f.parseSpacing)(this.styles.cellPadding,0);return x==="vertical"?b.top+b.bottom:x==="horizontal"?b.left+b.right:b[x]},y}();l.Cell=m;var v=function(){function y(x,b,E){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=x,this.raw=b,this.index=E}return y.prototype.getMaxCustomCellWidth=function(x){for(var b=0,E=0,T=x.allRows();E<T.length;E++){var D=T[E],R=D.cells[this.index];R&&typeof R.styles.cellWidth=="number"&&(b=Math.max(b,R.styles.cellWidth))}return b},y}();l.Column=v},356:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(u,h,f,d,p){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var m=Object(u),v=1;v<arguments.length;v++){var y=arguments[v];if(y!=null)for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(m[x]=y[x])}return m}l.assign=c},972:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var u=c(744),h=c(260),f=c(324),d=c(796),p=c(356);function m(D,R){var S=new u.DocHandler(D),C=v(R,S.scaleFactor()),N=new h.Table(R,C);return(0,f.calculateWidths)(S,N),S.applyStyles(S.userStyles),N}l.createTable=m;function v(D,R){var S=D.content,C=E(S.columns);if(S.head.length===0){var N=x(C,"head");N&&S.head.push(N)}if(S.foot.length===0){var N=x(C,"foot");N&&S.foot.push(N)}var k=D.settings.theme,P=D.styles;return{columns:C,head:y("head",S.head,C,P,k,R),body:y("body",S.body,C,P,k,R),foot:y("foot",S.foot,C,P,k,R)}}function y(D,R,S,C,N,k){var P={},j=R.map(function(F,H){for(var O=0,$={},z=0,B=0,X=0,te=S;X<te.length;X++){var I=te[X];if(P[I.index]==null||P[I.index].left===0)if(B===0){var U=void 0;Array.isArray(F)?U=F[I.index-z-O]:U=F[I.dataKey];var K={};typeof U=="object"&&!Array.isArray(U)&&(K=(U==null?void 0:U.styles)||{});var Q=T(D,I,H,N,C,k,K),ee=new h.Cell(U,Q,D);$[I.dataKey]=ee,$[I.index]=ee,B=ee.colSpan-1,P[I.index]={left:ee.rowSpan-1,times:B}}else B--,z++;else P[I.index].left--,B=P[I.index].times,O++}return new h.Row(F,H,D,$)});return j}function x(D,R){var S={};return D.forEach(function(C){if(C.raw!=null){var N=b(R,C.raw);N!=null&&(S[C.dataKey]=N)}}),Object.keys(S).length>0?S:null}function b(D,R){if(D==="head"){if(typeof R=="object")return R.header||R.title||null;if(typeof R=="string"||typeof R=="number")return R}else if(D==="foot"&&typeof R=="object")return R.footer;return null}function E(D){return D.map(function(R,S){var C,N,k;return typeof R=="object"?k=(N=(C=R.dataKey)!==null&&C!==void 0?C:R.key)!==null&&N!==void 0?N:S:k=S,new h.Column(k,R,S)})}function T(D,R,S,C,N,k,P){var j=(0,d.getTheme)(C),F;D==="head"?F=N.headStyles:D==="body"?F=N.bodyStyles:D==="foot"&&(F=N.footStyles);var H=(0,p.assign)({},j.table,j[D],N.styles,F),O=N.columnStyles[R.dataKey]||N.columnStyles[R.index]||{},$=D==="body"?O:{},z=D==="body"&&S%2===0?(0,p.assign)({},j.alternateRow,N.alternateRowStyles):{},B=(0,d.defaultStyles)(k),X=(0,p.assign)({},B,H,z,$);return(0,p.assign)(X,P)}},664:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var u=c(420),h=c(260),f=c(744),d=c(356),p=c(136),m=c(224);function v(O,$){var z=$.settings,B=z.startY,X=z.margin,te={x:X.left,y:B},I=$.getHeadHeight($.columns)+$.getFootHeight($.columns),U=B+X.bottom+I;if(z.pageBreak==="avoid"){var K=$.body,Q=K.reduce(function(se,ae){return se+ae.height},0);U+=Q}var ee=new f.DocHandler(O);(z.pageBreak==="always"||z.startY!=null&&U>ee.pageSize().height)&&(H(ee),te.y=X.top),$.callWillDrawPageHooks(ee,te);var oe=(0,d.assign)({},te);$.startPageNumber=ee.pageNumber(),z.horizontalPageBreak?y(ee,$,oe,te):(ee.applyStyles(ee.userStyles),(z.showHead==="firstPage"||z.showHead==="everyPage")&&$.head.forEach(function(se){return N(ee,$,se,te,$.columns)}),ee.applyStyles(ee.userStyles),$.body.forEach(function(se,ae){var Ee=ae===$.body.length-1;C(ee,$,se,Ee,oe,te,$.columns)}),ee.applyStyles(ee.userStyles),(z.showFoot==="lastPage"||z.showFoot==="everyPage")&&$.foot.forEach(function(se){return N(ee,$,se,te,$.columns)})),(0,u.addTableBorder)(ee,$,oe,te),$.callEndPageHooks(ee,te),$.finalY=te.y,O.lastAutoTable=$,O.previousAutoTable=$,O.autoTable&&(O.autoTable.previous=$),ee.applyStyles(ee.userStyles)}l.drawTable=v;function y(O,$,z,B){var X=(0,m.calculateAllColumnsCanFitInPage)(O,$),te=$.settings;if(te.horizontalPageBreakBehaviour==="afterAllRows")X.forEach(function(Q,ee){O.applyStyles(O.userStyles),ee>0?F(O,$,z,B,Q.columns,!0):x(O,$,B,Q.columns),b(O,$,z,B,Q.columns),T(O,$,B,Q.columns)});else for(var I=-1,U=X[0],K=function(){var Q=I;if(U){O.applyStyles(O.userStyles);var ee=U.columns;I>=0?F(O,$,z,B,ee,!0):x(O,$,B,ee),Q=E(O,$,I+1,B,ee),T(O,$,B,ee)}var oe=Q-I;X.slice(1).forEach(function(se){O.applyStyles(O.userStyles),F(O,$,z,B,se.columns,!0),E(O,$,I+1,B,se.columns,oe),T(O,$,B,se.columns)}),I=Q};I<$.body.length-1;)K()}function x(O,$,z,B){var X=$.settings;O.applyStyles(O.userStyles),(X.showHead==="firstPage"||X.showHead==="everyPage")&&$.head.forEach(function(te){return N(O,$,te,z,B)})}function b(O,$,z,B,X){O.applyStyles(O.userStyles),$.body.forEach(function(te,I){var U=I===$.body.length-1;C(O,$,te,U,z,B,X)})}function E(O,$,z,B,X,te){O.applyStyles(O.userStyles),te=te??$.body.length;var I=Math.min(z+te,$.body.length),U=-1;return $.body.slice(z,I).forEach(function(K,Q){var ee=z+Q===$.body.length-1,oe=j(O,$,ee,B);K.canEntireRowFit(oe,X)&&(N(O,$,K,B,X),U=z+Q)}),U}function T(O,$,z,B){var X=$.settings;O.applyStyles(O.userStyles),(X.showFoot==="lastPage"||X.showFoot==="everyPage")&&$.foot.forEach(function(te){return N(O,$,te,z,B)})}function D(O,$,z){var B=z.getLineHeight(O.styles.fontSize),X=O.padding("vertical"),te=Math.floor(($-X)/B);return Math.max(0,te)}function R(O,$,z,B){var X={};O.spansMultiplePages=!0,O.height=0;for(var te=0,I=0,U=z.columns;I<U.length;I++){var K=U[I],Q=O.cells[K.index];if(Q){Array.isArray(Q.text)||(Q.text=[Q.text]);var ee=new h.Cell(Q.raw,Q.styles,Q.section);ee=(0,d.assign)(ee,Q),ee.text=[];var oe=D(Q,$,B);Q.text.length>oe&&(ee.text=Q.text.splice(oe,Q.text.length));var se=B.scaleFactor(),ae=B.getLineHeightFactor();Q.contentHeight=Q.getContentHeight(se,ae),Q.contentHeight>=$&&(Q.contentHeight=$,ee.styles.minCellHeight-=$),Q.contentHeight>O.height&&(O.height=Q.contentHeight),ee.contentHeight=ee.getContentHeight(se,ae),ee.contentHeight>te&&(te=ee.contentHeight),X[K.index]=ee}}var Ee=new h.Row(O.raw,-1,O.section,X,!0);Ee.height=te;for(var we=0,Pe=z.columns;we<Pe.length;we++){var K=Pe[we],ee=Ee.cells[K.index];ee&&(ee.height=Ee.height);var Q=O.cells[K.index];Q&&(Q.height=O.height)}return Ee}function S(O,$,z,B){var X=O.pageSize().height,te=B.settings.margin,I=te.top+te.bottom,U=X-I;$.section==="body"&&(U-=B.getHeadHeight(B.columns)+B.getFootHeight(B.columns));var K=$.getMinimumRowHeight(B.columns,O),Q=K<z;if(K>U)return console.error("Will not be able to print row ".concat($.index," correctly since it's minimum height is larger than page height")),!0;if(!Q)return!1;var ee=$.hasRowSpan(B.columns),oe=$.getMaxCellHeight(B.columns)>U;return oe?(ee&&console.error("The content of row ".concat($.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ee||B.settings.rowPageBreak==="avoid")}function C(O,$,z,B,X,te,I){var U=j(O,$,B,te);if(z.canEntireRowFit(U,I))N(O,$,z,te,I);else if(S(O,z,U,$)){var K=R(z,U,$,O);N(O,$,z,te,I),F(O,$,X,te,I),C(O,$,K,B,X,te,I)}else F(O,$,X,te,I),C(O,$,z,B,X,te,I)}function N(O,$,z,B,X){B.x=$.settings.margin.left;for(var te=0,I=X;te<I.length;te++){var U=I[te],K=z.cells[U.index];if(!K){B.x+=U.width;continue}O.applyStyles(K.styles),K.x=B.x,K.y=B.y;var Q=$.callCellHooks(O,$.hooks.willDrawCell,K,z,U,B);if(Q===!1){B.x+=U.width;continue}k(O,K,B);var ee=K.getTextPos();(0,p.default)(K.text,ee.x,ee.y,{halign:K.styles.halign,valign:K.styles.valign,maxWidth:Math.ceil(K.width-K.padding("left")-K.padding("right"))},O.getDocument()),$.callCellHooks(O,$.hooks.didDrawCell,K,z,U,B),B.x+=U.width}B.y+=z.height}function k(O,$,z){var B=$.styles;if(O.getDocument().setFillColor(O.getDocument().getFillColor()),typeof B.lineWidth=="number"){var X=(0,u.getFillStyle)(B.lineWidth,B.fillColor);X&&O.rect($.x,z.y,$.width,$.height,X)}else typeof B.lineWidth=="object"&&(B.fillColor&&O.rect($.x,z.y,$.width,$.height,"F"),P(O,$,z,B.lineWidth))}function P(O,$,z,B){var X,te,I,U;B.top&&(X=z.x,te=z.y,I=z.x+$.width,U=z.y,B.right&&(I+=.5*B.right),B.left&&(X-=.5*B.left),K(B.top,X,te,I,U)),B.bottom&&(X=z.x,te=z.y+$.height,I=z.x+$.width,U=z.y+$.height,B.right&&(I+=.5*B.right),B.left&&(X-=.5*B.left),K(B.bottom,X,te,I,U)),B.left&&(X=z.x,te=z.y,I=z.x,U=z.y+$.height,B.top&&(te-=.5*B.top),B.bottom&&(U+=.5*B.bottom),K(B.left,X,te,I,U)),B.right&&(X=z.x+$.width,te=z.y,I=z.x+$.width,U=z.y+$.height,B.top&&(te-=.5*B.top),B.bottom&&(U+=.5*B.bottom),K(B.right,X,te,I,U));function K(Q,ee,oe,se,ae){O.getDocument().setLineWidth(Q),O.getDocument().line(ee,oe,se,ae,"S")}}function j(O,$,z,B){var X=$.settings.margin.bottom,te=$.settings.showFoot;return(te==="everyPage"||te==="lastPage"&&z)&&(X+=$.getFootHeight($.columns)),O.pageSize().height-B.y-X}function F(O,$,z,B,X,te){X===void 0&&(X=[]),te===void 0&&(te=!1),O.applyStyles(O.userStyles),$.settings.showFoot==="everyPage"&&!te&&$.foot.forEach(function(U){return N(O,$,U,B,X)}),$.callEndPageHooks(O,B);var I=$.settings.margin;(0,u.addTableBorder)(O,$,z,B),H(O),$.pageNumber++,$.pageCount++,B.x=I.left,B.y=I.top,z.y=I.top,$.callWillDrawPageHooks(O,B),$.settings.showHead==="everyPage"&&($.head.forEach(function(U){return N(O,$,U,B,X)}),O.applyStyles(O.userStyles))}l.addPage=F;function H(O){var $=O.pageNumber();O.setPage($+1);var z=O.pageNumber();return z===$?(O.addPage(),!0):!1}},224:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var u=c(420);function h(d,p,m){var v;m===void 0&&(m={});var y=(0,u.getPageAvailableWidth)(d,p),x=new Map,b=[],E=[],T=[];p.settings.horizontalPageBreakRepeat,Array.isArray(p.settings.horizontalPageBreakRepeat)?T=p.settings.horizontalPageBreakRepeat:(typeof p.settings.horizontalPageBreakRepeat=="string"||typeof p.settings.horizontalPageBreakRepeat=="number")&&(T=[p.settings.horizontalPageBreakRepeat]),T.forEach(function(C){var N=p.columns.find(function(k){return k.dataKey===C||k.index===C});N&&!x.has(N.index)&&(x.set(N.index,!0),b.push(N.index),E.push(p.columns[N.index]),y-=N.wrappedWidth)});for(var D=!0,R=(v=m==null?void 0:m.start)!==null&&v!==void 0?v:0;R<p.columns.length;){if(x.has(R)){R++;continue}var S=p.columns[R].wrappedWidth;if(D||y>=S)D=!1,b.push(R),E.push(p.columns[R]),y-=S;else break;R++}return{colIndexes:b,columns:E,lastIndex:R-1}}function f(d,p){for(var m=[],v=0;v<p.columns.length;v++){var y=h(d,p,{start:v});y.columns.length&&(m.push(y),v=y.lastIndex)}return m}l.calculateAllColumnsCanFitInPage=f},324:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var u=c(420);function h(b,E){f(b,E);var T=[],D=0;E.columns.forEach(function(S){var C=S.getMaxCustomCellWidth(E);C?S.width=C:(S.width=S.wrappedWidth,T.push(S)),D+=S.width});var R=E.getWidth(b.pageSize().width)-D;R&&(R=d(T,R,function(S){return Math.max(S.minReadableWidth,S.minWidth)})),R&&(R=d(T,R,function(S){return S.minWidth})),R=Math.abs(R),!E.settings.horizontalPageBreak&&R>.1/b.scaleFactor()&&(R=R<1?R:Math.round(R),console.warn("Of the table content, ".concat(R," units width could not fit page"))),m(E),v(E,b),p(E)}l.calculateWidths=h;function f(b,E){var T=b.scaleFactor(),D=E.settings.horizontalPageBreak,R=(0,u.getPageAvailableWidth)(b,E);E.allRows().forEach(function(S){for(var C=0,N=E.columns;C<N.length;C++){var k=N[C],P=S.cells[k.index];if(P){var j=E.hooks.didParseCell;E.callCellHooks(b,j,P,S,k,null);var F=P.padding("horizontal");P.contentWidth=(0,u.getStringWidth)(P.text,P.styles,b)+F;var H=(0,u.getStringWidth)(P.text.join(" ").split(/[^\S\u00A0]+/),P.styles,b);if(P.minReadableWidth=H+P.padding("horizontal"),typeof P.styles.cellWidth=="number")P.minWidth=P.styles.cellWidth,P.wrappedWidth=P.styles.cellWidth;else if(P.styles.cellWidth==="wrap"||D===!0)P.contentWidth>R?(P.minWidth=R,P.wrappedWidth=R):(P.minWidth=P.contentWidth,P.wrappedWidth=P.contentWidth);else{var O=10/T;P.minWidth=P.styles.minCellWidth||O,P.wrappedWidth=P.contentWidth,P.minWidth>P.wrappedWidth&&(P.wrappedWidth=P.minWidth)}}}}),E.allRows().forEach(function(S){for(var C=0,N=E.columns;C<N.length;C++){var k=N[C],P=S.cells[k.index];if(P&&P.colSpan===1)k.wrappedWidth=Math.max(k.wrappedWidth,P.wrappedWidth),k.minWidth=Math.max(k.minWidth,P.minWidth),k.minReadableWidth=Math.max(k.minReadableWidth,P.minReadableWidth);else{var j=E.styles.columnStyles[k.dataKey]||E.styles.columnStyles[k.index]||{},F=j.cellWidth||j.minCellWidth;F&&typeof F=="number"&&(k.minWidth=F,k.wrappedWidth=F)}P&&(P.colSpan>1&&!k.minWidth&&(k.minWidth=P.minWidth),P.colSpan>1&&!k.wrappedWidth&&(k.wrappedWidth=P.minWidth))}})}function d(b,E,T){for(var D=E,R=b.reduce(function(O,$){return O+$.wrappedWidth},0),S=0;S<b.length;S++){var C=b[S],N=C.wrappedWidth/R,k=D*N,P=C.width+k,j=T(C),F=P<j?j:P;E-=F-C.width,C.width=F}if(E=Math.round(E*1e10)/1e10,E){var H=b.filter(function(O){return E<0?O.width>T(O):!0});H.length&&(E=d(H,E,T))}return E}l.resizeColumns=d;function p(b){for(var E={},T=1,D=b.allRows(),R=0;R<D.length;R++)for(var S=D[R],C=0,N=b.columns;C<N.length;C++){var k=N[C],P=E[k.index];if(T>1)T--,delete S.cells[k.index];else if(P)P.cell.height+=S.height,T=P.cell.colSpan,delete S.cells[k.index],P.left--,P.left<=1&&delete E[k.index];else{var j=S.cells[k.index];if(!j)continue;if(j.height=S.height,j.rowSpan>1){var F=D.length-R,H=j.rowSpan>F?F:j.rowSpan;E[k.index]={cell:j,left:H,row:S}}}}}function m(b){for(var E=b.allRows(),T=0;T<E.length;T++)for(var D=E[T],R=null,S=0,C=0,N=0;N<b.columns.length;N++){var k=b.columns[N];if(C-=1,C>1&&b.columns[N+1])S+=k.width,delete D.cells[k.index];else if(R){var P=R;delete D.cells[k.index],R=null,P.width=k.width+S}else{var P=D.cells[k.index];if(!P)continue;if(C=P.colSpan,S=0,P.colSpan>1){R=P,S+=k.width;continue}P.width=k.width+S}}}function v(b,E){for(var T={count:0,height:0},D=0,R=b.allRows();D<R.length;D++){for(var S=R[D],C=0,N=b.columns;C<N.length;C++){var k=N[C],P=S.cells[k.index];if(P){E.applyStyles(P.styles,!0);var j=P.width-P.padding("horizontal");if(P.styles.overflow==="linebreak")P.text=E.splitTextToSize(P.text,j+1/E.scaleFactor(),{fontSize:P.styles.fontSize});else if(P.styles.overflow==="ellipsize")P.text=y(P.text,j,P.styles,E,"...");else if(P.styles.overflow==="hidden")P.text=y(P.text,j,P.styles,E,"");else if(typeof P.styles.overflow=="function"){var F=P.styles.overflow(P.text,j);typeof F=="string"?P.text=[F]:P.text=F}P.contentHeight=P.getContentHeight(E.scaleFactor(),E.getLineHeightFactor());var H=P.contentHeight/P.rowSpan;P.rowSpan>1&&T.count*T.height<H*P.rowSpan?T={height:H,count:P.rowSpan}:T&&T.count>0&&T.height>H&&(H=T.height),H>S.height&&(S.height=H)}}T.count--}}function y(b,E,T,D,R){return b.map(function(S){return x(S,E,T,D,R)})}l.ellipsize=y;function x(b,E,T,D,R){var S=1e4*D.scaleFactor();if(E=Math.ceil(E*S)/S,E>=(0,u.getStringWidth)(b,T,D))return b;for(;E<(0,u.getStringWidth)(b+R,T,D)&&!(b.length<=1);)b=b.substring(0,b.length-1);return b.trim()+R}},964:function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}var o={};return function(){var a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=s(340),c=s(776),u=s(664),h=s(972),f=s(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return f.Table}});var d=s(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return d.CellHookData}});var p=s(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return p.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return p.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return p.Row}});function m(E){(0,l.default)(E)}a.applyPlugin=m;function v(E,T){var D=(0,c.parseInput)(E,T),R=(0,h.createTable)(E,D);(0,u.drawTable)(E,R)}function y(E,T){var D=(0,c.parseInput)(E,T);return(0,h.createTable)(E,D)}a.__createTable=y;function x(E,T){(0,u.drawTable)(E,T)}a.__drawTable=x;try{var b=s(964);b.jsPDF&&(b=b.jsPDF),m(b)}catch{}a.default=v}(),o}()})})(Mq);var tP={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,i)=>{t.exports=i()})(E0,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r,s=!i.document&&!!i.postMessage,o=i.IS_PAPA_WORKER||!1,a={},l=0,c={};function u(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(C){var N=T(C);N.chunkSize=parseInt(N.chunkSize),C.step||C.chunk||(N.chunkSize=null),this._handle=new m(N),(this._handle.streamer=this)._config=N}).call(this,S),this.parseChunk=function(C,N){var k=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<k){let j=this._config.newline;j||(P=this._config.quoteChar||'"',j=this._handle.guessLineEndings(C,P)),C=[...C.split(j).slice(k)].join(j)}this.isFirstChunk&&R(this._config.beforeFirstChunk)&&(P=this._config.beforeFirstChunk(C))!==void 0&&(C=P),this.isFirstChunk=!1,this._halted=!1;var k=this._partialLine+C,P=(this._partialLine="",this._handle.parse(k,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=P.meta.cursor,k=(this._finished||(this._partialLine=k.substring(C-this._baseIndex),this._baseIndex=C),P&&P.data&&(this._rowCount+=P.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)i.postMessage({results:P,workerId:c.WORKER_ID,finished:k});else if(R(this._config.chunk)&&!N){if(this._config.chunk(P,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=P=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(P.data),this._completeResults.errors=this._completeResults.errors.concat(P.errors),this._completeResults.meta=P.meta),this._completed||!k||!R(this._config.complete)||P&&P.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),k||P&&P.meta.paused||this._nextChunk(),P}this._halted=!0},this._sendError=function(C){R(this._config.error)?this._config.error(C):o&&this._config.error&&i.postMessage({workerId:c.WORKER_ID,error:C,finished:!1})}}function h(S){var C;(S=S||{}).chunkSize||(S.chunkSize=c.RemoteChunkSize),u.call(this,S),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(N){this._input=N,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),s||(C.onload=D(this._chunkLoaded,this),C.onerror=D(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var N,k=this._config.downloadRequestHeaders;for(N in k)C.setRequestHeader(N,k[N])}var P;this._config.chunkSize&&(P=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+P));try{C.send(this._config.downloadRequestBody)}catch(j){this._chunkError(j.message)}s&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(N=>(N=N.getResponseHeader("Content-Range"))!==null?parseInt(N.substring(N.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(N){N=C.statusText||N,this._sendError(new Error(N))}}function f(S){(S=S||{}).chunkSize||(S.chunkSize=c.LocalChunkSize),u.call(this,S);var C,N,k=typeof FileReader<"u";this.stream=function(P){this._input=P,N=P.slice||P.webkitSlice||P.mozSlice,k?((C=new FileReader).onload=D(this._chunkLoaded,this),C.onerror=D(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var P=this._input,j=(this._config.chunkSize&&(j=Math.min(this._start+this._config.chunkSize,this._input.size),P=N.call(P,this._start,j)),C.readAsText(P,this._config.encoding));k||this._chunkLoaded({target:{result:j}})},this._chunkLoaded=function(P){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(P.target.result)},this._chunkError=function(){this._sendError(C.error)}}function d(S){var C;u.call(this,S=S||{}),this.stream=function(N){return C=N,this._nextChunk()},this._nextChunk=function(){var N,k;if(!this._finished)return N=this._config.chunkSize,C=N?(k=C.substring(0,N),C.substring(N)):(k=C,""),this._finished=!C,this.parseChunk(k)}}function p(S){u.call(this,S=S||{});var C=[],N=!0,k=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(P){this._input=P,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){k&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):N=!0},this._streamData=D(function(P){try{C.push(typeof P=="string"?P:P.toString(this._config.encoding)),N&&(N=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(j){this._streamError(j)}},this),this._streamError=D(function(P){this._streamCleanUp(),this._sendError(P)},this),this._streamEnd=D(function(){this._streamCleanUp(),k=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(S){var C,N,k,P,j=Math.pow(2,53),F=-j,H=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,O=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,$=this,z=0,B=0,X=!1,te=!1,I=[],U={data:[],errors:[],meta:{}};function K(se){return S.skipEmptyLines==="greedy"?se.join("").trim()==="":se.length===1&&se[0].length===0}function Q(){if(U&&k&&(oe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),k=!1),S.skipEmptyLines&&(U.data=U.data.filter(function(we){return!K(we)})),ee()){let we=function(Pe,be){R(S.transformHeader)&&(Pe=S.transformHeader(Pe,be)),I.push(Pe)};if(U)if(Array.isArray(U.data[0])){for(var se=0;ee()&&se<U.data.length;se++)U.data[se].forEach(we);U.data.splice(0,1)}else U.data.forEach(we)}function ae(we,Pe){for(var be=S.header?{}:[],ke=0;ke<we.length;ke++){var pe=ke,ie=we[ke],ie=((nt,De)=>(Te=>(S.dynamicTypingFunction&&S.dynamicTyping[Te]===void 0&&(S.dynamicTyping[Te]=S.dynamicTypingFunction(Te)),(S.dynamicTyping[Te]||S.dynamicTyping)===!0))(nt)?De==="true"||De==="TRUE"||De!=="false"&&De!=="FALSE"&&((Te=>{if(H.test(Te)&&(Te=parseFloat(Te),F<Te&&Te<j))return 1})(De)?parseFloat(De):O.test(De)?new Date(De):De===""?null:De):De)(pe=S.header?ke>=I.length?"__parsed_extra":I[ke]:pe,ie=S.transform?S.transform(ie,pe):ie);pe==="__parsed_extra"?(be[pe]=be[pe]||[],be[pe].push(ie)):be[pe]=ie}return S.header&&(ke>I.length?oe("FieldMismatch","TooManyFields","Too many fields: expected "+I.length+" fields but parsed "+ke,B+Pe):ke<I.length&&oe("FieldMismatch","TooFewFields","Too few fields: expected "+I.length+" fields but parsed "+ke,B+Pe)),be}var Ee;U&&(S.header||S.dynamicTyping||S.transform)&&(Ee=1,!U.data.length||Array.isArray(U.data[0])?(U.data=U.data.map(ae),Ee=U.data.length):U.data=ae(U.data,0),S.header&&U.meta&&(U.meta.fields=I),B+=Ee)}function ee(){return S.header&&I.length===0}function oe(se,ae,Ee,we){se={type:se,code:ae,message:Ee},we!==void 0&&(se.row=we),U.errors.push(se)}R(S.step)&&(P=S.step,S.step=function(se){U=se,ee()?Q():(Q(),U.data.length!==0&&(z+=se.data.length,S.preview&&z>S.preview?N.abort():(U.data=U.data[0],P(U,$))))}),this.parse=function(se,ae,Ee){var we=S.quoteChar||'"',we=(S.newline||(S.newline=this.guessLineEndings(se,we)),k=!1,S.delimiter?R(S.delimiter)&&(S.delimiter=S.delimiter(se),U.meta.delimiter=S.delimiter):((we=((Pe,be,ke,pe,ie)=>{var nt,De,Te,Oe;ie=ie||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Ue=0;Ue<ie.length;Ue++){for(var Be,et=ie[Ue],Je=0,it=0,Ze=0,dt=(Te=void 0,new y({comments:pe,delimiter:et,newline:be,preview:10}).parse(Pe)),bt=0;bt<dt.data.length;bt++)ke&&K(dt.data[bt])?Ze++:(Be=dt.data[bt].length,it+=Be,Te===void 0?Te=Be:0<Be&&(Je+=Math.abs(Be-Te),Te=Be));0<dt.data.length&&(it/=dt.data.length-Ze),(De===void 0||Je<=De)&&(Oe===void 0||Oe<it)&&1.99<it&&(De=Je,nt=et,Oe=it)}return{successful:!!(S.delimiter=nt),bestDelimiter:nt}})(se,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=we.bestDelimiter:(k=!0,S.delimiter=c.DefaultDelimiter),U.meta.delimiter=S.delimiter),T(S));return S.preview&&S.header&&we.preview++,C=se,N=new y(we),U=N.parse(C,ae,Ee),Q(),X?{meta:{paused:!0}}:U||{meta:{paused:!1}}},this.paused=function(){return X},this.pause=function(){X=!0,N.abort(),C=R(S.chunk)?"":C.substring(N.getCharIndex())},this.resume=function(){$.streamer._halted?(X=!1,$.streamer.parseChunk(C,!0)):setTimeout($.resume,3)},this.aborted=function(){return te},this.abort=function(){te=!0,N.abort(),U.meta.aborted=!0,R(S.complete)&&S.complete(U),C=""},this.guessLineEndings=function(Pe,we){Pe=Pe.substring(0,1048576);var we=new RegExp(v(we)+"([^]*?)"+v(we),"gm"),Ee=(Pe=Pe.replace(we,"")).split("\r"),we=Pe.split(`
`),Pe=1<we.length&&we[0].length<Ee[0].length;if(Ee.length===1||Pe)return`
`;for(var be=0,ke=0;ke<Ee.length;ke++)Ee[ke][0]===`
`&&be++;return be>=Ee.length/2?`\r
`:"\r"}}function v(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(S){var C=(S=S||{}).delimiter,N=S.newline,k=S.comments,P=S.step,j=S.preview,F=S.fastMode,H=null,O=!1,$=S.quoteChar==null?'"':S.quoteChar,z=$;if(S.escapeChar!==void 0&&(z=S.escapeChar),(typeof C!="string"||-1<c.BAD_DELIMITERS.indexOf(C))&&(C=","),k===C)throw new Error("Comment character same as delimiter");k===!0?k="#":(typeof k!="string"||-1<c.BAD_DELIMITERS.indexOf(k))&&(k=!1),N!==`
`&&N!=="\r"&&N!==`\r
`&&(N=`
`);var B=0,X=!1;this.parse=function(te,I,U){if(typeof te!="string")throw new Error("Input must be a string");var K=te.length,Q=C.length,ee=N.length,oe=k.length,se=R(P),ae=[],Ee=[],we=[],Pe=B=0;if(!te)return Je();if(F||F!==!1&&te.indexOf($)===-1){for(var be=te.split(N),ke=0;ke<be.length;ke++){if(we=be[ke],B+=we.length,ke!==be.length-1)B+=N.length;else if(U)return Je();if(!k||we.substring(0,oe)!==k){if(se){if(ae=[],Oe(we.split(C)),it(),X)return Je()}else Oe(we.split(C));if(j&&j<=ke)return ae=ae.slice(0,j),Je(!0)}}return Je()}for(var pe=te.indexOf(C,B),ie=te.indexOf(N,B),nt=new RegExp(v(z)+v($),"g"),De=te.indexOf($,B);;)if(te[B]===$)for(De=B,B++;;){if((De=te.indexOf($,De+1))===-1)return U||Ee.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ae.length,index:B}),Be();if(De===K-1)return Be(te.substring(B,De).replace(nt,$));if($===z&&te[De+1]===z)De++;else if($===z||De===0||te[De-1]!==z){pe!==-1&&pe<De+1&&(pe=te.indexOf(C,De+1));var Te=Ue((ie=ie!==-1&&ie<De+1?te.indexOf(N,De+1):ie)===-1?pe:Math.min(pe,ie));if(te.substr(De+1+Te,Q)===C){we.push(te.substring(B,De).replace(nt,$)),te[B=De+1+Te+Q]!==$&&(De=te.indexOf($,B)),pe=te.indexOf(C,B),ie=te.indexOf(N,B);break}if(Te=Ue(ie),te.substring(De+1+Te,De+1+Te+ee)===N){if(we.push(te.substring(B,De).replace(nt,$)),et(De+1+Te+ee),pe=te.indexOf(C,B),De=te.indexOf($,B),se&&(it(),X))return Je();if(j&&ae.length>=j)return Je(!0);break}Ee.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ae.length,index:B}),De++}}else if(k&&we.length===0&&te.substring(B,B+oe)===k){if(ie===-1)return Je();B=ie+ee,ie=te.indexOf(N,B),pe=te.indexOf(C,B)}else if(pe!==-1&&(pe<ie||ie===-1))we.push(te.substring(B,pe)),B=pe+Q,pe=te.indexOf(C,B);else{if(ie===-1)break;if(we.push(te.substring(B,ie)),et(ie+ee),se&&(it(),X))return Je();if(j&&ae.length>=j)return Je(!0)}return Be();function Oe(Ze){ae.push(Ze),Pe=B}function Ue(Ze){var dt=0;return dt=Ze!==-1&&(Ze=te.substring(De+1,Ze))&&Ze.trim()===""?Ze.length:dt}function Be(Ze){return U||(Ze===void 0&&(Ze=te.substring(B)),we.push(Ze),B=K,Oe(we),se&&it()),Je()}function et(Ze){B=Ze,Oe(we),we=[],ie=te.indexOf(N,B)}function Je(Ze){if(S.header&&!I&&ae.length&&!O){var dt=ae[0],bt={},st=new Set(dt);let wt=!1;for(let $e=0;$e<dt.length;$e++){let Wt=dt[$e];if(bt[Wt=R(S.transformHeader)?S.transformHeader(Wt,$e):Wt]){let Tt,_i=bt[Wt];for(;Tt=Wt+"_"+_i,_i++,st.has(Tt););st.add(Tt),dt[$e]=Tt,bt[Wt]++,wt=!0,(H=H===null?{}:H)[Tt]=Wt}else bt[Wt]=1,dt[$e]=Wt;st.add(Wt)}wt&&console.warn("Duplicate headers found and renamed."),O=!0}return{data:ae,errors:Ee,meta:{delimiter:C,linebreak:N,aborted:X,truncated:!!Ze,cursor:Pe+(I||0),renamedHeaders:H}}}function it(){P(Je()),ae=[],Ee=[]}},this.abort=function(){X=!0},this.getCharIndex=function(){return B}}function x(S){var C=S.data,N=a[C.workerId],k=!1;if(C.error)N.userError(C.error,C.file);else if(C.results&&C.results.data){var P={abort:function(){k=!0,b(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:E,resume:E};if(R(N.userStep)){for(var j=0;j<C.results.data.length&&(N.userStep({data:C.results.data[j],errors:C.results.errors,meta:C.results.meta},P),!k);j++);delete C.results}else R(N.userChunk)&&(N.userChunk(C.results,P,C.file),delete C.results)}C.finished&&!k&&b(C.workerId,C.results)}function b(S,C){var N=a[S];R(N.userComplete)&&N.userComplete(C),N.terminate(),delete a[S]}function E(){throw new Error("Not implemented.")}function T(S){if(typeof S!="object"||S===null)return S;var C,N=Array.isArray(S)?[]:{};for(C in S)N[C]=T(S[C]);return N}function D(S,C){return function(){S.apply(C,arguments)}}function R(S){return typeof S=="function"}return c.parse=function(S,C){var N=(C=C||{}).dynamicTyping||!1;if(R(N)&&(C.dynamicTypingFunction=N,N={}),C.dynamicTyping=N,C.transform=!!R(C.transform)&&C.transform,!C.worker||!c.WORKERS_SUPPORTED)return N=null,c.NODE_STREAM_INPUT,typeof S=="string"?(S=(k=>k.charCodeAt(0)!==65279?k:k.slice(1))(S),N=new(C.download?h:d)(C)):S.readable===!0&&R(S.read)&&R(S.on)?N=new p(C):(i.File&&S instanceof File||S instanceof Object)&&(N=new f(C)),N.stream(S);(N=(()=>{var k;return!!c.WORKERS_SUPPORTED&&(k=(()=>{var P=i.URL||i.webkitURL||null,j=n.toString();return c.BLOB_URL||(c.BLOB_URL=P.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",j,")();"],{type:"text/javascript"})))})(),(k=new i.Worker(k)).onmessage=x,k.id=l++,a[k.id]=k)})()).userStep=C.step,N.userChunk=C.chunk,N.userComplete=C.complete,N.userError=C.error,C.step=R(C.step),C.chunk=R(C.chunk),C.complete=R(C.complete),C.error=R(C.error),delete C.worker,N.postMessage({input:S,config:C,workerId:N.id})},c.unparse=function(S,C){var N=!1,k=!0,P=",",j=`\r
`,F='"',H=F+F,O=!1,$=null,z=!1,B=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||c.BAD_DELIMITERS.filter(function(I){return C.delimiter.indexOf(I)!==-1}).length||(P=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(N=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||(O=C.skipEmptyLines),typeof C.newline=="string"&&(j=C.newline),typeof C.quoteChar=="string"&&(F=C.quoteChar),typeof C.header=="boolean"&&(k=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");$=C.columns}C.escapeChar!==void 0&&(H=C.escapeChar+F),C.escapeFormulae instanceof RegExp?z=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(z=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(F),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return X(null,S,O);if(typeof S[0]=="object")return X($||Object.keys(S[0]),S,O)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||$),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),X(S.fields||[],S.data||[],O);throw new Error("Unable to serialize unrecognized input");function X(I,U,K){var Q="",ee=(typeof I=="string"&&(I=JSON.parse(I)),typeof U=="string"&&(U=JSON.parse(U)),Array.isArray(I)&&0<I.length),oe=!Array.isArray(U[0]);if(ee&&k){for(var se=0;se<I.length;se++)0<se&&(Q+=P),Q+=te(I[se],se);0<U.length&&(Q+=j)}for(var ae=0;ae<U.length;ae++){var Ee=(ee?I:U[ae]).length,we=!1,Pe=ee?Object.keys(U[ae]).length===0:U[ae].length===0;if(K&&!ee&&(we=K==="greedy"?U[ae].join("").trim()==="":U[ae].length===1&&U[ae][0].length===0),K==="greedy"&&ee){for(var be=[],ke=0;ke<Ee;ke++){var pe=oe?I[ke]:ke;be.push(U[ae][pe])}we=be.join("").trim()===""}if(!we){for(var ie=0;ie<Ee;ie++){0<ie&&!Pe&&(Q+=P);var nt=ee&&oe?I[ie]:ie;Q+=te(U[ae][nt],ie)}ae<U.length-1&&(!K||0<Ee&&!Pe)&&(Q+=j)}}return Q}function te(I,U){var K,Q;return I==null?"":I.constructor===Date?JSON.stringify(I).slice(1,25):(Q=!1,z&&typeof I=="string"&&z.test(I)&&(I="'"+I,Q=!0),K=I.toString().replace(B,H),(Q=Q||N===!0||typeof N=="function"&&N(I,U)||Array.isArray(N)&&N[U]||((ee,oe)=>{for(var se=0;se<oe.length;se++)if(-1<ee.indexOf(oe[se]))return!0;return!1})(K,c.BAD_DELIMITERS)||-1<K.indexOf(P)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?F+K+F:K)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!i.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=y,c.ParserHandle=m,c.NetworkStreamer=h,c.FileStreamer=f,c.StringStreamer=d,c.ReadableStreamStreamer=p,i.jQuery&&((r=i.jQuery).fn.parse=function(S){var C=S.config||{},N=[];return this.each(function(j){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var F=0;F<this.files.length;F++)N.push({file:this.files[F],inputElem:this,instanceConfig:r.extend({},C)})}),k(),this;function k(){if(N.length===0)R(S.complete)&&S.complete();else{var j,F,H,O,$=N[0];if(R(S.before)){var z=S.before($.file,$.inputElem);if(typeof z=="object"){if(z.action==="abort")return j="AbortError",F=$.file,H=$.inputElem,O=z.reason,void(R(S.error)&&S.error({name:j},F,H,O));if(z.action==="skip")return void P();typeof z.config=="object"&&($.instanceConfig=r.extend($.instanceConfig,z.config))}else if(z==="skip")return void P()}var B=$.instanceConfig.complete;$.instanceConfig.complete=function(X){R(B)&&B(X,$.file,$.inputElem),P()},c.parse($.file,$.instanceConfig)}}function P(){N.splice(0,1),k()}}),o&&(i.onmessage=function(S){S=S.data,c.WORKER_ID===void 0&&S&&(c.WORKER_ID=S.workerId),typeof S.input=="string"?i.postMessage({workerId:c.WORKER_ID,results:c.parse(S.input,S.config),finished:!0}):(i.File&&S.input instanceof File||S.input instanceof Object)&&(S=c.parse(S.input,S.config))&&i.postMessage({workerId:c.WORKER_ID,results:S,finished:!0})}),(h.prototype=Object.create(u.prototype)).constructor=h,(f.prototype=Object.create(u.prototype)).constructor=f,(d.prototype=Object.create(d.prototype)).constructor=d,(p.prototype=Object.create(u.prototype)).constructor=p,c})})(tP);var Oq=tP.exports;const Bq=zx(Oq),hn=[{show_id:"s1",type:"Movie",title:"The Lion King",director:"Roger Allers, Rob Minkoff",cast:"Matthew Broderick, Jeremy Irons, James Earl Jones",country:"United States",date_added:"January 28, 2020",release_year:1994,rating:"G",duration:"88 min",listed_in:"Family, Animation, Musical",description:"Lion prince Simba and his father are targeted by his bitter uncle, who wants to ascend the throne himself."},{show_id:"s2",type:"TV Show",title:"The Mandalorian",director:"Jon Favreau",cast:"Pedro Pascal, Carl Weathers, Gina Carano",country:"United States",date_added:"November 12, 2019",release_year:2019,rating:"TV-14",duration:"3 Seasons",listed_in:"Action, Adventure, Sci-Fi",description:"After the fall of the Empire, a lone gunfighter makes his way through the lawless galaxy with his foundling."},{show_id:"s3",type:"Movie",title:"Frozen",director:"Chris Buck, Jennifer Lee",cast:"Kristen Bell, Idina Menzel, Jonathan Groff",country:"United States",date_added:"June 26, 2020",release_year:2013,rating:"PG",duration:"102 min",listed_in:"Family, Animation, Adventure",description:"When their kingdom becomes trapped in perpetual winter, fearless Anna joins forces with mountaineer Kristoff to find Anna's sister, Snow Queen Elsa."},{show_id:"s4",type:"Movie",title:"Avengers: Endgame",director:"Anthony Russo, Joe Russo",cast:"Robert Downey Jr., Chris Evans, Mark Ruffalo",country:"United States",date_added:"November 12, 2019",release_year:2019,rating:"PG-13",duration:"181 min",listed_in:"Action, Adventure, Sci-Fi",description:"After the devastating events of Avengers: Infinity War, the universe is in ruins. With the help of remaining allies, the Avengers assemble once more."},{show_id:"s5",type:"TV Show",title:"WandaVision",director:"Matt Shakman",cast:"Elizabeth Olsen, Paul Bettany, Kathryn Hahn",country:"United States",date_added:"January 15, 2021",release_year:2021,rating:"TV-14",duration:"1 Season",listed_in:"Comedy, Drama, Sci-Fi",description:"Wanda Maximoff and Vision—two super-powered beings living idealized suburban lives—begin to suspect that everything is not as it seems."},{show_id:"s6",type:"Movie",title:"Soul",director:"Pete Docter, Kemp Powers",cast:"Jamie Foxx, Tina Fey, Graham Norton",country:"United States",date_added:"December 25, 2020",release_year:2020,rating:"PG",duration:"100 min",listed_in:"Family, Animation, Comedy",description:"A musician who has lost his passion for music is transported out of his body and must find his way back with the help of an infant soul."},{show_id:"s7",type:"TV Show",title:"Loki",director:"Kate Herron",cast:"Tom Hiddleston, Owen Wilson, Gugu Mbatha-Raw",country:"United States",date_added:"June 9, 2021",release_year:2021,rating:"TV-14",duration:"2 Seasons",listed_in:"Action, Adventure, Fantasy",description:"The mercurial villain Loki resumes his role as the God of Mischief in a new series that takes place after the events of Avengers: Endgame."},{show_id:"s8",type:"Movie",title:"Moana",director:"Ron Clements, John Musker",cast:"Auli'i Cravalho, Dwayne Johnson, Rachel House",country:"United States",date_added:"June 28, 2020",release_year:2016,rating:"PG",duration:"107 min",listed_in:"Family, Animation, Adventure",description:"In Ancient Polynesia, when a terrible curse incurred by the Demigod Maui reaches Moana's island, she answers the Ocean's call to seek out the Demigod to set things right."},{show_id:"s9",type:"TV Show",title:"The Falcon and the Winter Soldier",director:"Kari Skogland",cast:"Anthony Mackie, Sebastian Stan, Wyatt Russell",country:"United States",date_added:"March 19, 2021",release_year:2021,rating:"TV-14",duration:"1 Season",listed_in:"Action, Adventure, Drama",description:"Following the events of Avengers: Endgame, Sam Wilson and Bucky Barnes team up in a global adventure that tests their abilities and their patience."},{show_id:"s10",type:"Movie",title:"Coco",director:"Lee Unkrich, Adrian Molina",cast:"Anthony Gonzalez, Gael García Bernal, Benjamin Bratt",country:"United States",date_added:"May 29, 2020",release_year:2017,rating:"PG",duration:"105 min",listed_in:"Family, Animation, Adventure",description:"Aspiring musician Miguel, confronted with his family's ancestral ban on music, enters the Land of the Dead to find his great-great-grandfather, a legendary singer."},{show_id:"s11",type:"Movie",title:"Black Panther",director:"Ryan Coogler",cast:"Chadwick Boseman, Michael B. Jordan, Lupita Nyong'o",country:"United States",date_added:"September 4, 2020",release_year:2018,rating:"PG-13",duration:"134 min",listed_in:"Action, Adventure, Sci-Fi",description:"T'Challa, heir to the hidden but advanced kingdom of Wakanda, must step forward to lead his people into a new future and confront a challenger from his country's past."},{show_id:"s12",type:"TV Show",title:"Hawkeye",director:"Rhys Thomas, Bert & Bertie",cast:"Jeremy Renner, Hailee Steinfeld, Vera Farmiga",country:"United States",date_added:"November 24, 2021",release_year:2021,rating:"TV-14",duration:"1 Season",listed_in:"Action, Adventure, Crime",description:"Former Avenger Clint Barton has a seemingly simple mission: get back to his family for Christmas. Possible? Maybe with the help of Kate Bishop, a 22-year-old archer with dreams of becoming a superhero."},{show_id:"s13",type:"Movie",title:"Raya and the Last Dragon",director:"Don Hall, Carlos López Estrada",cast:"Kelly Marie Tran, Awkwafina, Gemma Chan",country:"United States",date_added:"June 4, 2021",release_year:2021,rating:"PG",duration:"107 min",listed_in:"Family, Animation, Adventure",description:"In a realm known as Kumandra, a re-imagined Earth inhabited by an ancient civilization, a warrior named Raya is determined to find the last dragon."},{show_id:"s14",type:"TV Show",title:"What If...?",director:"Bryan Andrews",cast:"Jeffrey Wright, Chadwick Boseman, Hayley Atwell",country:"United States",date_added:"August 11, 2021",release_year:2021,rating:"TV-14",duration:"2 Seasons",listed_in:"Animation, Action, Adventure",description:"Exploring pivotal moments from the Marvel Cinematic Universe and turning them on their head, leading the audience into uncharted territory."},{show_id:"s15",type:"Movie",title:"Luca",director:"Enrico Casarosa",cast:"Jacob Tremblay, Jack Dylan Grazer, Emma Berman",country:"United States",date_added:"June 18, 2021",release_year:2021,rating:"PG",duration:"95 min",listed_in:"Family, Animation, Comedy",description:"On the Italian Riviera, an unlikely but strong friendship grows between a human being and a sea monster disguised as a human."},{show_id:"s16",type:"TV Show",title:"The Book of Boba Fett",director:"Robert Rodriguez, Jon Favreau",cast:"Temuera Morrison, Ming-Na Wen, Pedro Pascal",country:"United States",date_added:"December 29, 2021",release_year:2021,rating:"TV-14",duration:"1 Season",listed_in:"Action, Adventure, Sci-Fi",description:"Legendary bounty hunter Boba Fett and mercenary Fennec Shand navigate the galaxy's underworld when they return to the sands of Tatooine to stake their claim on the territory once ruled by Jabba the Hutt."},{show_id:"s17",type:"Movie",title:"Encanto",director:"Jared Bush, Byron Howard",cast:"Stephanie Beatriz, María Cecilia Botero, John Leguizamo",country:"United States",date_added:"December 24, 2021",release_year:2021,rating:"PG",duration:"102 min",listed_in:"Family, Animation, Musical",description:"A Colombian teenage girl has to face the frustration of being the only member of her family without magical powers."},{show_id:"s18",type:"TV Show",title:"Moon Knight",director:"Mohamed Diab, Justin Benson, Aaron Moorhead",cast:"Oscar Isaac, Ethan Hawke, May Calamawy",country:"United States",date_added:"March 30, 2022",release_year:2022,rating:"TV-14",duration:"1 Season",listed_in:"Action, Adventure, Fantasy",description:"Steven Grant discovers he's been granted the powers of an Egyptian moon god. But he soon finds out that these newfound powers can be both a blessing and a curse to his troubled life."},{show_id:"s19",type:"Movie",title:"Turning Red",director:"Domee Shi",cast:"Rosalie Chiang, Sandra Oh, Ava Morse",country:"United States",date_added:"March 11, 2022",release_year:2022,rating:"PG",duration:"100 min",listed_in:"Family, Animation, Comedy",description:"A 13-year-old girl named Meilin turns into a giant red panda whenever she gets too excited."},{show_id:"s20",type:"TV Show",title:"Ms. Marvel",director:"Adil El Arbi, Bilall Fallah, Meera Menon",cast:"Iman Vellani, Matt Lintz, Zenobia Shroff",country:"United States",date_added:"June 8, 2022",release_year:2022,rating:"TV-14",duration:"1 Season",listed_in:"Action, Adventure, Comedy",description:"Kamala Khan, a Muslim American teen growing up in Jersey City, is a superhero mega fan who discovers she has powers of her own."},{show_id:"s21",type:"Movie",title:"Lightyear",director:"Angus MacLane",cast:"Chris Evans, Keke Palmer, Peter Sohn",country:"United States",date_added:"August 3, 2022",release_year:2022,rating:"PG",duration:"105 min",listed_in:"Family, Animation, Adventure",description:"While spending years attempting to return home, marooned Space Ranger Buzz Lightyear encounters an army of ruthless robots commanded by Zurg who are attempting to steal his fuel source."},{show_id:"s22",type:"TV Show",title:"She-Hulk: Attorney at Law",director:"Kat Coiro, Anu Valia",cast:"Tatiana Maslany, Mark Ruffalo, Tim Roth",country:"United States",date_added:"August 18, 2022",release_year:2022,rating:"TV-14",duration:"1 Season",listed_in:"Comedy, Action, Sci-Fi",description:"Jennifer Walters navigates the complicated life of a single, 30-something attorney who also happens to be a green 6-foot-7-inch superpowered Hulk."},{show_id:"s23",type:"Movie",title:"Strange World",director:"Don Hall",cast:"Jake Gyllenhaal, Dennis Quaid, Jaboukie Young-White",country:"United States",date_added:"December 23, 2022",release_year:2022,rating:"PG",duration:"102 min",listed_in:"Family, Animation, Adventure",description:"The legendary Clades are a family of explorers whose differences threaten to topple their latest and most crucial mission."},{show_id:"s24",type:"TV Show",title:"Andor",director:"Toby Haynes, Benjamin Caron, Susanna White",cast:"Diego Luna, Kyle Soller, Adria Arjona",country:"United States",date_added:"September 21, 2022",release_year:2022,rating:"TV-14",duration:"1 Season",listed_in:"Action, Adventure, Sci-Fi",description:"Prequel series to Star Wars' 'Rogue One'. In an era filled with danger, deception and intrigue, Cassian will embark on the path that is destined to turn him into a Rebel hero."},{show_id:"s25",type:"Movie",title:"Avatar: The Way of Water",director:"James Cameron",cast:"Sam Worthington, Zoe Saldana, Sigourney Weaver",country:"United States",date_added:"June 7, 2023",release_year:2022,rating:"PG-13",duration:"192 min",listed_in:"Action, Adventure, Fantasy",description:"Jake Sully lives with his newfound family formed on the extrasolar moon Pandora. Once a familiar threat returns to finish what was previously started, Jake must work with Neytiri and the army of the Na'vi race to protect their home."},{show_id:"s26",type:"TV Show",title:"The Mandalorian",director:"Jon Favreau",cast:"Pedro Pascal, Carl Weathers, Giancarlo Esposito",country:"United States",date_added:"March 1, 2023",release_year:2023,rating:"TV-14",duration:"3 Seasons",listed_in:"Action, Adventure, Sci-Fi",description:"The travels of a lone bounty hunter in the outer reaches of the galaxy, far from the authority of the New Republic."},{show_id:"s27",type:"Movie",title:"Guardians of the Galaxy Vol. 3",director:"James Gunn",cast:"Chris Pratt, Zoe Saldana, Dave Bautista",country:"United States",date_added:"August 2, 2023",release_year:2023,rating:"PG-13",duration:"150 min",listed_in:"Action, Adventure, Comedy",description:"Still reeling from the loss of Gamora, Peter Quill rallies his team to defend the universe and one of their own - a mission that could mean the end of the Guardians if not successful."},{show_id:"s28",type:"TV Show",title:"Secret Invasion",director:"Ali Selim",cast:"Samuel L. Jackson, Ben Mendelsohn, Cobie Smulders",country:"United States",date_added:"June 21, 2023",release_year:2023,rating:"TV-14",duration:"1 Season",listed_in:"Action, Adventure, Drama",description:"Nick Fury and Talos discover a faction of shapeshifting Skrulls who have been infiltrating Earth for years."},{show_id:"s29",type:"Movie",title:"The Little Mermaid",director:"Rob Marshall",cast:"Halle Bailey, Jonah Hauer-King, Melissa McCarthy",country:"United States",date_added:"September 6, 2023",release_year:2023,rating:"PG",duration:"135 min",listed_in:"Family, Fantasy, Musical",description:"A young mermaid makes a deal with a sea witch to trade her beautiful voice for human legs so she can discover the world above water and impress a prince."},{show_id:"s30",type:"TV Show",title:"Ahsoka",director:"Dave Filoni",cast:"Rosario Dawson, Natasha Liu Bordizzo, Mary Elizabeth Winstead",country:"United States",date_added:"August 23, 2023",release_year:2023,rating:"TV-14",duration:"1 Season",listed_in:"Action, Adventure, Sci-Fi",description:"After the fall of the Galactic Empire, former Jedi Knight Ahsoka Tano investigates an emerging threat to a vulnerable galaxy."},{show_id:"s31",type:"Movie",title:"Elemental",director:"Peter Sohn",cast:"Leah Lewis, Mamoudou Athie, Ronnie Del Carmen",country:"United States",date_added:"September 13, 2023",release_year:2023,rating:"PG",duration:"101 min",listed_in:"Family, Animation, Comedy",description:"Follows Ember and Wade, in a city where fire-, water-, land- and air-residents live together."},{show_id:"s32",type:"TV Show",title:"Loki",director:"Kate Herron, Justin Benson, Aaron Moorhead",cast:"Tom Hiddleston, Owen Wilson, Sophia Di Martino",country:"United States",date_added:"October 5, 2023",release_year:2023,rating:"TV-14",duration:"2 Seasons",listed_in:"Action, Adventure, Fantasy",description:"The mercurial villain Loki resumes his role as the God of Mischief in a new series that takes place after the events of Avengers: Endgame."},{show_id:"s33",type:"Movie",title:"The Marvels",director:"Nia DaCosta",cast:"Brie Larson, Teyonah Parris, Iman Vellani",country:"United States",date_added:"February 7, 2024",release_year:2023,rating:"PG-13",duration:"105 min",listed_in:"Action, Adventure, Sci-Fi",description:"Carol Danvers gets her powers entangled with those of Kamala Khan and Monica Rambeau, forcing them to work together to save the universe."},{show_id:"s34",type:"TV Show",title:"Echo",director:"Sydney Freeland, Catriona McKenzie",cast:"Alaqua Cox, Chaske Spencer, Tantoo Cardinal",country:"United States",date_added:"January 9, 2024",release_year:2024,rating:"TV-MA",duration:"1 Season",listed_in:"Action, Crime, Drama",description:"Maya Lopez must face her past, reconnect with her Native American roots and embrace the meaning of family and community if she ever hopes to move forward."},{show_id:"s35",type:"Movie",title:"Wish",director:"Chris Buck, Fawn Veerasunthorn",cast:"Ariana DeBose, Chris Pine, Alan Tudyk",country:"United States",date_added:"April 3, 2024",release_year:2023,rating:"PG",duration:"95 min",listed_in:"Family, Animation, Adventure",description:"A young girl named Asha wishes on a star and gets a more direct answer than she bargained for when a trouble-making star comes down from the sky to join her."},{show_id:"s36",type:"TV Show",title:"Percy Jackson and the Olympians",director:"James Bobin, Anders Engström",cast:"Walker Scobell, Leah Sava Jeffries, Aryan Simhadri",country:"United States",date_added:"December 19, 2023",release_year:2023,rating:"TV-PG",duration:"1 Season",listed_in:"Action, Adventure, Fantasy",description:"A 12-year-old demigod, Percy Jackson, accepts his newfound divine powers and embarks on a quest to find Zeus' stolen lightning bolt and prevent a war among the gods."},{show_id:"s37",type:"Movie",title:"Inside Out 2",director:"Kelsey Mann",cast:"Amy Poehler, Phyllis Smith, Lewis Black",country:"United States",date_added:"July 31, 2024",release_year:2024,rating:"PG",duration:"96 min",listed_in:"Family, Animation, Comedy",description:"Riley enters adolescence, and new emotions join the mix, causing chaos in Headquarters."},{show_id:"s38",type:"TV Show",title:"X-Men '97",director:"Jake Castorena, Chase Conley",cast:"Ray Chase, Jennifer Hale, Alison Sealy-Smith",country:"United States",date_added:"March 20, 2024",release_year:2024,rating:"TV-14",duration:"1 Season",listed_in:"Animation, Action, Adventure",description:"Storm and Wolverine try to continue the X-Men after Professor X's departure."},{show_id:"s39",type:"Movie",title:"Moana 2",director:"David Derrick Jr.",cast:"Auli'i Cravalho, Dwayne Johnson, Rachel House",country:"United States",date_added:"November 27, 2024",release_year:2024,rating:"PG",duration:"110 min",listed_in:"Family, Animation, Adventure",description:"Moana embarks on a new voyage to the far seas of Oceania and into dangerous, long-lost waters for an adventure unlike anything she's ever faced."},{show_id:"s40",type:"TV Show",title:"Agatha All Along",director:"Jac Schaeffer",cast:"Kathryn Hahn, Joe Locke, Patti LuPone",country:"United States",date_added:"September 18, 2024",release_year:2024,rating:"TV-14",duration:"1 Season",listed_in:"Fantasy, Comedy, Drama",description:"Follows Agatha Harkness as she breaks free from a spell and embarks on a dangerous quest with unlikely allies."}],jq=()=>{const t={Movie:0,"TV Show":0};return hn.forEach(e=>{t[e.type]++}),t},Uq=()=>{const t={};hn.forEach(n=>{t[n.release_year]||(t[n.release_year]=0),t[n.release_year]++});const e=Object.keys(t).map(Number).sort((n,i)=>n-i);return{years:e,counts:e.map(n=>t[n])}},$q=(t=10)=>{const e={};hn.forEach(i=>{i.listed_in.split(", ").forEach(s=>{e[s]||(e[s]=0),e[s]++})});const n=Object.entries(e).sort((i,r)=>r[1]-i[1]).slice(0,t);return{genres:n.map(([i])=>i),counts:n.map(([i,r])=>r)}},zq=()=>{const t={};return hn.forEach(e=>{t[e.rating]||(t[e.rating]=0),t[e.rating]++}),Object.entries(t).map(([e,n])=>({rating:e,count:n}))},Hq=()=>{const e=hn.filter(i=>i.type==="Movie").map(i=>{const r=i.duration.match(/(\d+)/);return r?parseInt(r[1],10):0});return e.reduce((i,r)=>i+r,0)/e.length},Vq=()=>{const t=hn.filter(n=>n.type==="TV Show"),e={};return t.forEach(n=>{const i=n.duration.match(/(\d+)/),r=i?i[1]:"Unknown";e[r]||(e[r]=0),e[r]++}),Object.entries(e).map(([n,i])=>({seasons:n,count:i}))},Gq=()=>{const t={};hn.forEach(n=>{const i=n.date_added.match(/\d{4}$/);if(i){const r=i[0];t[r]||(t[r]=0),t[r]++}});const e=Object.keys(t).sort();return{years:e,counts:e.map(n=>t[n])}},Wq=()=>{const t={};return hn.forEach(e=>{e.country.split(", ").forEach(i=>{t[i]||(t[i]=0),t[i]++})}),Object.entries(t).map(([e,n])=>({country:e,count:n})).sort((e,n)=>n.count-e.count)},qq=(t=10)=>{const e={};return hn.forEach(n=>{n.director&&n.director.split(", ").forEach(r=>{e[r]||(e[r]=0),e[r]++})}),Object.entries(e).sort((n,i)=>i[1]-n[1]).slice(0,t).map(([n,i])=>({director:n,count:i}))},Kq=(t=10)=>{const e={};return hn.forEach(n=>{n.cast&&n.cast.split(", ").forEach(r=>{e[r]||(e[r]=0),e[r]++})}),Object.entries(e).sort((n,i)=>i[1]-n[1]).slice(0,t).map(([n,i])=>({member:n,count:i}))},Yq=()=>{const t={};hn.forEach(n=>{const i=n.release_year;t[i]||(t[i]={movies:0,tvShows:0}),n.type==="Movie"?t[i].movies++:t[i].tvShows++});const e=Object.keys(t).map(Number).sort((n,i)=>n-i);return{years:e,movies:e.map(n=>t[n].movies),tvShows:e.map(n=>t[n].tvShows)}};Ym.register(q2,Y2,Z0,CU,OU,LU,Wh,Q0,Na,Kh,wU);const Ht={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#fff"}},title:{display:!0,color:"#fff"},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff"}},scales:{x:{ticks:{color:"#ccc"},grid:{color:"rgba(255, 255, 255, 0.1)"}},y:{ticks:{color:"#ccc"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}},Xq=()=>{var R;const[t,e]=fe.useState("overview"),n=fe.useRef(null),i=jq(),r=Uq(),s=$q(),o=zq(),a=Hq(),l=Vq(),c=Gq(),u=Wq(),h=qq(),f=Kq(),d=Yq(),p={labels:Object.keys(i),datasets:[{label:"Content Count",data:Object.values(i),backgroundColor:["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)"],borderColor:["rgb(54, 162, 235)","rgb(255, 99, 132)"],borderWidth:1}]},m={labels:r.years,datasets:[{label:"Content Released",data:r.counts,borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",tension:.3}]},v={labels:s.genres,datasets:[{label:"Content Count",data:s.counts,backgroundColor:"rgba(153, 102, 255, 0.8)",borderColor:"rgb(153, 102, 255)",borderWidth:1}]},y={labels:o.map(S=>S.rating),datasets:[{label:"Content Count",data:o.map(S=>S.count),backgroundColor:["rgba(255, 99, 132, 0.8)","rgba(54, 162, 235, 0.8)","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)","rgba(153, 102, 255, 0.8)","rgba(255, 159, 64, 0.8)"],borderColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 206, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(255, 159, 64)"],borderWidth:1}]},x={labels:c.years,datasets:[{label:"Content Added",data:c.counts,backgroundColor:"rgba(255, 159, 64, 0.8)",borderColor:"rgb(255, 159, 64)",borderWidth:1}]},b={labels:d.years,datasets:[{label:"Movies",data:d.movies,backgroundColor:"rgba(54, 162, 235, 0.8)",borderColor:"rgb(54, 162, 235)",borderWidth:1},{label:"TV Shows",data:d.tvShows,backgroundColor:"rgba(255, 99, 132, 0.8)",borderColor:"rgb(255, 99, 132)",borderWidth:1}]},E=()=>{window.print()},T=()=>{const S=new ut;S.setFontSize(18),S.text("Disney+ Content Analysis Report",14,22),S.setFontSize(11),S.text(`Generated on: ${new Date().toLocaleDateString()}`,14,30),S.setFontSize(14),S.text("Content Type Distribution",14,40);const C=[["Content Type","Count"],...Object.entries(i).map(([j,F])=>[j,F.toString()])];S.autoTable({startY:45,head:[C[0]],body:C.slice(1),theme:"grid",headStyles:{fillColor:[66,139,202]}}),S.setFontSize(14),S.text("Top Genres",14,S.lastAutoTable.finalY+15);const N=[["Genre","Count"],...s.genres.map((j,F)=>[j,s.counts[F].toString()])];S.autoTable({startY:S.lastAutoTable.finalY+20,head:[N[0]],body:N.slice(1),theme:"grid",headStyles:{fillColor:[66,139,202]}}),S.setFontSize(14),S.text("Rating Distribution",14,S.lastAutoTable.finalY+15);const k=[["Rating","Count"],...o.map(j=>[j.rating,j.count.toString()])];S.autoTable({startY:S.lastAutoTable.finalY+20,head:[k[0]],body:k.slice(1),theme:"grid",headStyles:{fillColor:[66,139,202]}}),S.setFontSize(14),S.text("Top Directors",14,S.lastAutoTable.finalY+15);const P=[["Director","Content Count"],...h.map(j=>[j.director,j.count.toString()])];S.autoTable({startY:S.lastAutoTable.finalY+20,head:[P[0]],body:P.slice(1),theme:"grid",headStyles:{fillColor:[66,139,202]}}),S.save("disney-plus-content-analysis.pdf")},D=()=>{const S=hn.map(j=>({show_id:j.show_id,type:j.type,title:j.title,director:j.director,cast:j.cast,country:j.country,date_added:j.date_added,release_year:j.release_year,rating:j.rating,duration:j.duration,listed_in:j.listed_in})),C=Bq.unparse(S),N=new Blob([C],{type:"text/csv;charset=utf-8;"}),k=URL.createObjectURL(N),P=document.createElement("a");P.href=k,P.setAttribute("download","disney-plus-content-data.csv"),document.body.appendChild(P),P.click(),document.body.removeChild(P)};return A.jsx("div",{className:"min-h-screen bg-[#0e0b14] text-white",children:A.jsx("div",{className:"container mx-auto px-4 py-8",children:A.jsxs("div",{className:"max-w-7xl mx-auto",children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Disney+ Content Analysis"}),A.jsx("p",{className:"text-gray-400",children:"Comprehensive data analysis of Disney+ streaming catalog"})]}),A.jsxs("div",{className:"flex space-x-3 mt-4 md:mt-0",children:[A.jsxs("button",{onClick:E,className:"flex items-center space-x-2 bg-[#252a3a] hover:bg-[#2d3343] px-4 py-2 rounded-md transition-colors",children:[A.jsx(tO,{className:"w-4 h-4"}),A.jsx("span",{children:"Print"})]}),A.jsxs("button",{onClick:T,className:"flex items-center space-x-2 bg-[#252a3a] hover:bg-[#2d3343] px-4 py-2 rounded-md transition-colors",children:[A.jsx(H_,{className:"w-4 h-4"}),A.jsx("span",{children:"Export PDF"})]}),A.jsxs("button",{onClick:D,className:"flex items-center space-x-2 bg-[#252a3a] hover:bg-[#2d3343] px-4 py-2 rounded-md transition-colors",children:[A.jsx(H_,{className:"w-4 h-4"}),A.jsx("span",{children:"Export CSV"})]})]})]}),A.jsx("div",{className:"mb-8 border-b border-gray-700",children:A.jsxs("nav",{className:"flex overflow-x-auto pb-1",children:[A.jsx("button",{className:`px-4 py-2 font-medium whitespace-nowrap ${t==="overview"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>e("overview"),children:"Overview"}),A.jsx("button",{className:`px-4 py-2 font-medium whitespace-nowrap ${t==="content-trends"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>e("content-trends"),children:"Content Trends"}),A.jsx("button",{className:`px-4 py-2 font-medium whitespace-nowrap ${t==="genres"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>e("genres"),children:"Genres & Ratings"}),A.jsx("button",{className:`px-4 py-2 font-medium whitespace-nowrap ${t==="geography"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>e("geography"),children:"Geographic Analysis"}),A.jsx("button",{className:`px-4 py-2 font-medium whitespace-nowrap ${t==="people"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>e("people"),children:"Directors & Cast"})]})}),A.jsxs("div",{ref:n,className:"print:text-black",children:[t==="overview"&&A.jsxs("div",{children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[A.jsx(_0,{icon:A.jsx(G8,{className:"w-8 h-8 text-blue-400"}),title:"Total Movies",value:i.Movie,description:"Feature films in the catalog"}),A.jsx(_0,{icon:A.jsx(rO,{className:"w-8 h-8 text-pink-400"}),title:"Total TV Shows",value:i["TV Show"],description:"Series and TV shows available"}),A.jsx(_0,{icon:A.jsx(El,{className:"w-8 h-8 text-green-400"}),title:"Latest Content Year",value:Math.max(...r.years),description:"Most recent release year"}),A.jsx(_0,{icon:A.jsx(G0,{className:"w-8 h-8 text-yellow-400"}),title:"Most Common Rating",value:o.sort((S,C)=>C.count-S.count)[0].rating,description:"Most frequent content rating"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsxs("h2",{className:"text-xl font-bold mb-4 text-blue-400 flex items-center",children:[A.jsx(eO,{className:"w-5 h-5 mr-2"}),"Content Type Distribution"]}),A.jsx("div",{className:"h-80",children:A.jsx(rv,{data:p,options:{...Ht,plugins:{...Ht.plugins,title:{...Ht.plugins.title,text:"Movies vs. TV Shows"}}}})}),A.jsx("div",{className:"mt-4 text-gray-300",children:A.jsxs("p",{children:["The Disney+ catalog consists predominantly of movies, which make up ",Math.round(i.Movie/(i.Movie+i["TV Show"])*100),"% of the content. TV shows represent the remaining ",Math.round(i["TV Show"]/(i.Movie+i["TV Show"])*100),"%."]})})]}),A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsxs("h2",{className:"text-xl font-bold mb-4 text-blue-400 flex items-center",children:[A.jsx($8,{className:"w-5 h-5 mr-2"}),"Top 5 Genres"]}),A.jsx("div",{className:"h-80",children:A.jsx(c0,{data:{labels:s.genres.slice(0,5),datasets:[{label:"Content Count",data:s.counts.slice(0,5),backgroundColor:"rgba(153, 102, 255, 0.8)",borderColor:"rgb(153, 102, 255)",borderWidth:1}]},options:{...Ht,plugins:{...Ht.plugins,title:{...Ht.plugins.title,text:"Most Popular Content Categories"}}}})}),A.jsx("div",{className:"mt-4 text-gray-300",children:A.jsxs("p",{children:["The most dominant genre on Disney+ is ",s.genres[0]," with ",s.counts[0]," titles, followed by ",s.genres[1]," and ",s.genres[2],". This reflects Disney's focus on family-friendly content and franchise-based entertainment."]})})]})]}),A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl mb-8",children:[A.jsxs("h2",{className:"text-xl font-bold mb-4 text-blue-400 flex items-center",children:[A.jsx(q8,{className:"w-5 h-5 mr-2"}),"Content Release Trends Over Time"]}),A.jsx("div",{className:"h-80",children:A.jsx(iv,{data:m,options:{...Ht,plugins:{...Ht.plugins,title:{...Ht.plugins.title,text:"Content Released by Year"}}}})}),A.jsx("div",{className:"mt-4 text-gray-300",children:A.jsxs("p",{children:["The data shows a significant increase in content production in recent years, with a notable spike in ",r.years[r.counts.indexOf(Math.max(...r.counts))],". This trend aligns with Disney's strategic focus on creating exclusive content for its streaming platform to compete with other services."]})})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsxs("h2",{className:"text-xl font-bold mb-4 text-blue-400 flex items-center",children:[A.jsx(R2,{className:"w-5 h-5 mr-2"}),"Duration Analysis"]}),A.jsxs("div",{className:"mb-6",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Movies"}),A.jsxs("p",{className:"text-3xl font-bold text-white",children:[Math.round(a)," min"]}),A.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Average movie duration"}),A.jsx("div",{className:"mt-4 bg-gray-700 h-2 rounded-full",children:A.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${a/200*100}%`}})}),A.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[A.jsx("span",{children:"0 min"}),A.jsx("span",{children:"200 min"})]})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"TV Shows"}),A.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map((S,C)=>A.jsxs("div",{className:"bg-[#252a3a] p-3 rounded-lg",children:[A.jsxs("p",{className:"text-sm text-gray-400",children:["Season",parseInt(S.seasons)>1?"s":""]}),A.jsxs("div",{className:"flex items-end",children:[A.jsx("span",{className:"text-2xl font-bold",children:S.seasons}),A.jsxs("span",{className:"ml-2 text-gray-400",children:["(",S.count," shows)"]})]})]},C))})]})]}),A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsxs("h2",{className:"text-xl font-bold mb-4 text-blue-400 flex items-center",children:[A.jsx(W8,{className:"w-5 h-5 mr-2"}),"Rating Distribution"]}),A.jsx("div",{className:"h-80",children:A.jsx(rv,{data:y,options:{...Ht,plugins:{...Ht.plugins,title:{...Ht.plugins.title,text:"Content by Rating Category"}}}})}),A.jsx("div",{className:"mt-4 text-gray-300",children:A.jsxs("p",{children:["The most common rating on Disney+ is ",o.sort((S,C)=>C.count-S.count)[0].rating,", accounting for ",Math.round(o.sort((S,C)=>C.count-S.count)[0].count/hn.length*100),"% of all content. This reflects Disney's focus on family-friendly entertainment suitable for a wide audience range."]})})]})]})]}),t==="content-trends"&&A.jsxs("div",{children:[A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl mb-8",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Release Year Trends"}),A.jsx("div",{className:"h-96",children:A.jsx(iv,{data:m,options:{...Ht,plugins:{...Ht.plugins,title:{...Ht.plugins.title,text:"Content Released by Year"}}}})}),A.jsxs("div",{className:"mt-6 text-gray-300",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Key Insights:"}),A.jsxs("ul",{className:"space-y-2 list-disc pl-5",children:[A.jsx("li",{children:"Content production has shown a steady increase since 2019, coinciding with the launch of Disney+."}),A.jsxs("li",{children:["The peak year for content releases was ",r.years[r.counts.indexOf(Math.max(...r.counts))]," with ",Math.max(...r.counts)," titles."]}),A.jsx("li",{children:"The growth trend indicates Disney's commitment to expanding its streaming library to compete with established services."}),A.jsx("li",{children:"Recent years show a focus on both original content and leveraging existing IP from Disney's vast catalog."})]})]})]}),A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl mb-8",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Content Additions to Disney+"}),A.jsx("div",{className:"h-96",children:A.jsx(c0,{data:x,options:{...Ht,plugins:{...Ht.plugins,title:{...Ht.plugins.title,text:"Content Added to Platform by Year"}}}})}),A.jsxs("div",{className:"mt-6 text-gray-300",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Platform Growth Analysis:"}),A.jsxs("ul",{className:"space-y-2 list-disc pl-5",children:[A.jsxs("li",{children:["Disney+ has consistently added new content since its launch, with significant additions in ",c.years[c.counts.indexOf(Math.max(...c.counts))],"."]}),A.jsx("li",{children:"The platform's content library grew most rapidly during its first two years, establishing a competitive catalog."}),A.jsx("li",{children:"Recent additions show a strategic balance between new releases and older catalog titles."}),A.jsx("li",{children:"The addition pattern suggests a planned content release strategy to maintain subscriber interest throughout the year."})]})]})]}),A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Movies vs. TV Shows Over Time"}),A.jsx("div",{className:"h-96",children:A.jsx(c0,{data:b,options:{...Ht,plugins:{...Ht.plugins,title:{...Ht.plugins.title,text:"Movies and TV Shows by Release Year"}}}})}),A.jsxs("div",{className:"mt-6 text-gray-300",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Content Type Evolution:"}),A.jsxs("ul",{className:"space-y-2 list-disc pl-5",children:[A.jsx("li",{children:"Movies have historically dominated Disney's content production, reflecting the company's film studio heritage."}),A.jsx("li",{children:"TV show production has increased significantly since 2019, showing Disney's adaptation to streaming platform demands."}),A.jsxs("li",{children:["The ratio of movies to TV shows has shifted from approximately ",Math.round(d.movies[0]/(d.tvShows[0]||1)),":1 in early years to ",Math.round(d.movies[d.years.length-1]/(d.tvShows[d.years.length-1]||1)),":1 in recent years."]}),A.jsx("li",{children:"This trend aligns with industry shifts toward serialized content that keeps viewers engaged over longer periods."})]})]})]})]}),t==="genres"&&A.jsxs("div",{children:[A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl mb-8",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Top 10 Genres"}),A.jsx("div",{className:"h-96",children:A.jsx(c0,{data:v,options:{...Ht,indexAxis:"y",plugins:{...Ht.plugins,title:{...Ht.plugins.title,text:"Most Common Content Categories"}}}})}),A.jsxs("div",{className:"mt-6 text-gray-300",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Genre Analysis:"}),A.jsx("p",{className:"mb-4",children:"The Disney+ catalog shows a clear emphasis on certain genres that align with the company's brand identity and target audience preferences:"}),A.jsxs("ul",{className:"space-y-2 list-disc pl-5",children:[A.jsxs("li",{children:[A.jsx("span",{className:"font-medium text-blue-400",children:s.genres[0]}),": Dominates with ",s.counts[0]," titles, reflecting Disney's core focus on all-ages entertainment."]}),A.jsxs("li",{children:[A.jsx("span",{className:"font-medium text-blue-400",children:s.genres[1]}),": Second most common with ",s.counts[1]," titles, showcasing Disney's animation heritage."]}),A.jsxs("li",{children:[A.jsx("span",{className:"font-medium text-blue-400",children:s.genres[2]}),": Represents ",s.counts[2]," titles, highlighting the importance of action-oriented content from Marvel and Star Wars franchises."]}),A.jsx("li",{children:"The prevalence of genres like Comedy and Drama indicates a balanced approach to content variety while maintaining family-friendly themes."})]})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Rating Distribution"}),A.jsx("div",{className:"h-80",children:A.jsx(rv,{data:y,options:{...Ht,plugins:{...Ht.plugins,title:{...Ht.plugins.title,text:"Content by Rating Category"}}}})}),A.jsxs("div",{className:"mt-4 text-gray-300",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Rating Insights:"}),A.jsxs("ul",{className:"space-y-2 list-disc pl-5",children:[A.jsxs("li",{children:["The most common rating is ",A.jsx("span",{className:"font-medium text-blue-400",children:o.sort((S,C)=>C.count-S.count)[0].rating})," with ",o.sort((S,C)=>C.count-S.count)[0].count," titles (",Math.round(o.sort((S,C)=>C.count-S.count)[0].count/hn.length*100),"%)."]}),A.jsxs("li",{children:["Family-friendly ratings (G, PG, TV-Y, TV-G) account for approximately ",Math.round(o.filter(S=>["G","PG","TV-Y","TV-G","TV-Y7"].includes(S.rating)).reduce((S,C)=>S+C.count,0)/hn.length*100),"% of all content."]}),A.jsx("li",{children:"The distribution reflects Disney's brand positioning as a family-oriented entertainment provider."})]})]})]}),A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Genre Combinations"}),A.jsx("div",{className:"h-80",children:A.jsx(l$,{data:{labels:s.genres.slice(0,8),datasets:[{label:"Movies",data:s.genres.slice(0,8).map(S=>hn.filter(C=>C.type==="Movie"&&C.listed_in.includes(S)).length),backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgb(54, 162, 235)",pointBackgroundColor:"rgb(54, 162, 235)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(54, 162, 235)"},{label:"TV Shows",data:s.genres.slice(0,8).map(S=>hn.filter(C=>C.type==="TV Show"&&C.listed_in.includes(S)).length),backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgb(255, 99, 132)",pointBackgroundColor:"rgb(255, 99, 132)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(255, 99, 132)"}]},options:{...Ht,scales:{r:{angleLines:{color:"rgba(255, 255, 255, 0.1)"},grid:{color:"rgba(255, 255, 255, 0.1)"},pointLabels:{color:"#ccc"},ticks:{backdropColor:"transparent",color:"#ccc"}}}}})}),A.jsxs("div",{className:"mt-4 text-gray-300",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Cross-Genre Analysis:"}),A.jsx("p",{children:"The radar chart reveals distinct genre patterns between movies and TV shows:"}),A.jsxs("ul",{className:"space-y-2 list-disc pl-5",children:[A.jsx("li",{children:"Movies show stronger representation in Animation and Family categories."}),A.jsx("li",{children:"TV Shows have proportionally more content in Action and Adventure genres."}),A.jsx("li",{children:"This distribution reflects different storytelling approaches between film and television formats."})]})]})]})]}),A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Genre Trends Over Time"}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full min-w-[800px] text-sm text-left",children:[A.jsx("thead",{className:"text-xs uppercase bg-[#252a3a]",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Year"}),s.genres.slice(0,5).map((S,C)=>A.jsx("th",{scope:"col",className:"px-6 py-3",children:S},C))]})}),A.jsx("tbody",{children:d.years.slice(-10).map((S,C)=>A.jsxs("tr",{className:C%2===0?"bg-[#1e2130]":"bg-[#252a3a]",children:[A.jsx("th",{scope:"row",className:"px-6 py-4 font-medium whitespace-nowrap",children:S}),s.genres.slice(0,5).map((N,k)=>{const P=hn.filter(j=>j.release_year===S&&j.listed_in.includes(N)).length;return A.jsx("td",{className:"px-6 py-4",children:P>0?A.jsxs("div",{className:"flex items-center",children:[A.jsx("span",{className:"mr-2",children:P}),A.jsx("div",{className:"w-16 bg-gray-700 h-2 rounded-full",children:A.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${P/10*100}%`}})})]}):A.jsx("span",{children:"-"})},k)})]},C))})]})}),A.jsx("div",{className:"mt-6 text-gray-300",children:A.jsx("p",{children:"This table shows how genre representation has evolved over the past decade, highlighting Disney's shifting content priorities and the influence of major acquisitions like Marvel and Star Wars on the catalog composition."})})]})]}),t==="geography"&&A.jsxs("div",{children:[A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl mb-8",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Content by Country of Origin"}),A.jsx("div",{className:"h-96",children:A.jsxs(q5,{projectionConfig:{scale:147,rotation:[-11,0,0]},className:"text-[#ccc]",children:[A.jsx(K5,{geography:"/world-110m.json",children:({geographies:S})=>S.map(C=>{const N=C.properties.NAME,k=u.find(j=>j.country.includes(N)),P=k?`rgba(54, 162, 235, ${Math.min(k.count/20,.9)})`:"rgba(54, 162, 235, 0.05)";return A.jsx(_W,{geography:C,fill:P,stroke:"#1a1d29",style:{default:{outline:"none"},hover:{outline:"none",fill:"rgba(54, 162, 235, 0.7)"},pressed:{outline:"none"}}},C.rsmKey)})}),u.slice(0,5).map(({country:S,count:C})=>{const N={"United States":[-95,38],"United Kingdom":[0,55],Canada:[-100,60],Australia:[135,-30],France:[2,46],Japan:[138,38],Germany:[10,51],India:[78,22]}[S]||[0,0];return N[0]!==0?A.jsxs(Q5,{coordinates:N,children:[A.jsx("circle",{r:Math.log(C)*3,fill:"rgba(255, 99, 132, 0.8)"}),A.jsxs("text",{textAnchor:"middle",y:-10,style:{fontFamily:"system-ui",fill:"#FFFFFF",fontSize:"8px",fontWeight:"bold",textShadow:"1px 1px 1px rgba(0,0,0,0.5)"},children:[S," (",C,")"]})]},S):null})]})}),A.jsxs("div",{className:"mt-6 text-gray-300",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Geographic Distribution Insights:"}),A.jsxs("ul",{className:"space-y-2 list-disc pl-5",children:[A.jsxs("li",{children:["The Disney+ catalog is heavily dominated by content from the United States, which accounts for ",Math.round((((R=u.find(S=>S.country==="United States"))==null?void 0:R.count)||0)/hn.length*100),"% of all titles."]}),A.jsx("li",{children:"International representation is limited, with only a small percentage of content originating outside North America."}),A.jsx("li",{children:"This distribution reflects Disney's historical focus on American-produced entertainment, though recent years have seen efforts to diversify content origins."})]})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Top Content Origins"}),A.jsx("div",{className:"overflow-y-auto max-h-96",children:A.jsxs("table",{className:"w-full text-sm text-left",children:[A.jsx("thead",{className:"text-xs uppercase bg-[#252a3a]",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Country"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Content Count"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Percentage"})]})}),A.jsx("tbody",{children:u.map((S,C)=>A.jsxs("tr",{className:C%2===0?"bg-[#1e2130]":"bg-[#252a3a]",children:[A.jsx("th",{scope:"row",className:"px-6 py-4 font-medium whitespace-nowrap",children:S.country}),A.jsx("td",{className:"px-6 py-4",children:S.count}),A.jsxs("td",{className:"px-6 py-4",children:[Math.round(S.count/hn.length*100),"%"]})]},C))})]})})]}),A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"International Content Growth"}),A.jsx("div",{className:"h-80",children:A.jsx(iv,{data:{labels:d.years.slice(-10),datasets:[{label:"US Content",data:d.years.slice(-10).map(S=>hn.filter(C=>C.release_year===S&&C.country.includes("United States")).length),borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.5)",tension:.3},{label:"International Content",data:d.years.slice(-10).map(S=>hn.filter(C=>C.release_year===S&&!C.country.includes("United States")).length),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",tension:.3}]},options:{...Ht,plugins:{...Ht.plugins,title:{...Ht.plugins.title,text:"US vs. International Content Over Time"}}}})}),A.jsx("div",{className:"mt-4 text-gray-300",children:A.jsx("p",{children:"While US-produced content continues to dominate, there has been a gradual increase in international titles in recent years, reflecting Disney's global expansion strategy and efforts to appeal to diverse audiences worldwide."})})]})]})]}),t==="people"&&A.jsxs("div",{children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Top Directors"}),A.jsx("div",{className:"overflow-y-auto max-h-96",children:A.jsxs("table",{className:"w-full text-sm text-left",children:[A.jsx("thead",{className:"text-xs uppercase bg-[#252a3a]",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Director"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Content Count"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Most Recent Title"})]})}),A.jsx("tbody",{children:h.map((S,C)=>{var k;const N=((k=hn.filter(P=>P.director.includes(S.director)).sort((P,j)=>j.release_year-P.release_year)[0])==null?void 0:k.title)||"";return A.jsxs("tr",{className:C%2===0?"bg-[#1e2130]":"bg-[#252a3a]",children:[A.jsx("th",{scope:"row",className:"px-6 py-4 font-medium whitespace-nowrap",children:S.director}),A.jsx("td",{className:"px-6 py-4",children:S.count}),A.jsx("td",{className:"px-6 py-4 truncate max-w-[200px]",children:N})]},C)})})]})}),A.jsx("div",{className:"mt-4 text-gray-300",children:A.jsx("p",{children:"The most prolific directors on Disney+ reflect the platform's focus on franchise content and animation, with many directors working across multiple titles in the same series or universe."})})]}),A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Top Cast Members"}),A.jsx("div",{className:"overflow-y-auto max-h-96",children:A.jsxs("table",{className:"w-full text-sm text-left",children:[A.jsx("thead",{className:"text-xs uppercase bg-[#252a3a]",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actor"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Appearances"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Content Types"})]})}),A.jsx("tbody",{children:f.map((S,C)=>{const N={movies:hn.filter(k=>k.cast.includes(S.member)&&k.type==="Movie").length,tvShows:hn.filter(k=>k.cast.includes(S.member)&&k.type==="TV Show").length};return A.jsxs("tr",{className:C%2===0?"bg-[#1e2130]":"bg-[#252a3a]",children:[A.jsx("th",{scope:"row",className:"px-6 py-4 font-medium whitespace-nowrap",children:S.member}),A.jsx("td",{className:"px-6 py-4",children:S.count}),A.jsx("td",{className:"px-6 py-4",children:A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsxs("span",{className:"text-blue-400",children:[N.movies," Movies"]}),A.jsx("span",{children:"•"}),A.jsxs("span",{className:"text-pink-400",children:[N.tvShows," TV Shows"]})]})})]},C)})})]})}),A.jsx("div",{className:"mt-4 text-gray-300",children:A.jsx("p",{children:"The most frequent cast members on Disney+ are often associated with major franchises like Marvel and Star Wars, appearing across both movies and TV shows within these universes."})})]})]}),A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Director-Actor Collaborations"}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full min-w-[800px] text-sm text-left",children:[A.jsx("thead",{className:"text-xs uppercase bg-[#252a3a]",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Director"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actor"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Collaborations"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Projects"})]})}),A.jsx("tbody",{children:(()=>{const S=[];return h.slice(0,5).forEach(C=>{f.slice(0,10).forEach(N=>{const k=hn.filter(P=>P.director.includes(C.director)&&P.cast.includes(N.member)).map(P=>P.title);k.length>0&&S.push({director:C.director,actor:N.member,count:k.length,titles:k})})}),S.sort((C,N)=>N.count-C.count).slice(0,10).map((C,N)=>A.jsxs("tr",{className:N%2===0?"bg-[#1e2130]":"bg-[#252a3a]",children:[A.jsx("th",{scope:"row",className:"px-6 py-4 font-medium whitespace-nowrap",children:C.director}),A.jsx("td",{className:"px-6 py-4",children:C.actor}),A.jsx("td",{className:"px-6 py-4",children:C.count}),A.jsx("td",{className:"px-6 py-4 truncate max-w-[300px]",children:C.titles.join(", ")})]},N))})()})]})}),A.jsxs("div",{className:"mt-6 text-gray-300",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Collaboration Insights:"}),A.jsxs("ul",{className:"space-y-2 list-disc pl-5",children:[A.jsx("li",{children:"Frequent director-actor collaborations are common in Disney's content, particularly within franchise properties."}),A.jsx("li",{children:"These recurring partnerships help maintain consistency in character portrayal and storytelling across multiple titles."}),A.jsx("li",{children:"The most prolific collaborations often span years or even decades, showing Disney's commitment to long-term creative relationships."})]})]})]})]})]})]})})})};function _0({icon:t,title:e,value:n,description:i}){return A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-4 shadow-lg",children:[A.jsxs("div",{className:"flex items-center space-x-4",children:[t,A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg",children:e}),A.jsx("p",{className:"text-2xl font-bold mt-1",children:n})]})]}),A.jsx("p",{className:"text-gray-400 text-sm mt-2",children:i})]})}function Jq(){const t=fe.useRef(null),[e,n]=fe.useState(0),[i,r]=fe.useState(0),[s,o]=fe.useState(0),[a,l]=fe.useState(0),[c,u]=fe.useState(!1),[h,f]=fe.useState(null),[d,p]=fe.useState(null),[m,v]=fe.useState(!0),y=fe.useRef(null),[x,b]=fe.useState(0),[E,T]=fe.useState([]),[D,R]=fe.useState("Amazon CloudFront"),[S,C]=fe.useState("Detecting..."),[N,k]=fe.useState(0),[P,j]=fe.useState(0),[F,H]=fe.useState(0),[O,$]=fe.useState(""),[z,B]=fe.useState(15),[X,te]=fe.useState(25),[I,U]=fe.useState(35),[K,Q]=fe.useState(0),[ee,oe]=fe.useState(0),[se,ae]=fe.useState(95.8),[Ee,we]=fe.useState(97.2),[Pe,be]=fe.useState(99.99),[ke,pe]=fe.useState(.02),[ie,nt]=fe.useState({"IAD53-C1":.01}),[De,Te]=fe.useState(.085),[Oe,Ue]=fe.useState(4.2),[Be,et]=fe.useState(32.5),[Je,it]=fe.useState(0),[Ze,dt]=fe.useState(0),[bt,st]=fe.useState(null),[wt,$e]=fe.useState(0),[Wt,Tt]=fe.useState(0),[_i,qt]=fe.useState(0),[nn,os]=fe.useState(75),Mt="https://cdn.benfarr.com/HLS/carson_luke_farr%20(1).m3u8",Zi=()=>{y.current!==null&&(clearTimeout(y.current),y.current=null)};fe.useEffect(()=>{$("IAD53-C1"),C("US East (N. Virginia)")},[]),fe.useEffect(()=>{d&&d.destroy();const Ct=t.current;if(!Ct)return;v(!0);const Vt=performance.now();if(!xi.isSupported()){console.error("HLS is not supported in your browser"),f("HLS is not supported in your browser. Please try a different browser."),v(!1);return}try{const Ve=new xi({debug:!1,enableWorker:!0,lowLatencyMode:!1,backBufferLength:90,maxBufferLength:30,maxMaxBufferLength:600,maxBufferSize:6e7,maxBufferHole:.5,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:5,startLevel:-1,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!0,xhrSetup:function(St){St.withCredentials=!1;const mt=St.onreadystatechange;St.onreadystatechange=function(){if(St.readyState===4){const Kt=St.getResponseHeader("x-amz-cf-pop");if(Kt&&Kt!==O){$(Kt);const ln=Kt.substring(0,3);C({IAD:"US East (N. Virginia)",DFW:"US South (Dallas)",ORD:"US Midwest (Chicago)",SFO:"US West (San Francisco)",SEA:"US Northwest (Seattle)",LAX:"US West (Los Angeles)",MIA:"US Southeast (Miami)",JFK:"US Northeast (New York)",ATL:"US Southeast (Atlanta)",BOS:"US Northeast (Boston)",YTO:"Canada (Toronto)",YUL:"Canada (Montreal)",LHR:"Europe (London)",CDG:"Europe (Paris)",FRA:"Europe (Frankfurt)",AMS:"Europe (Amsterdam)",MAD:"Europe (Madrid)",MXP:"Europe (Milan)",ARN:"Europe (Stockholm)",NRT:"Asia Pacific (Tokyo)",ICN:"Asia Pacific (Seoul)",SIN:"Asia Pacific (Singapore)",SYD:"Asia Pacific (Sydney)",MEL:"Asia Pacific (Melbourne)",BOM:"Asia Pacific (Mumbai)",GRU:"South America (São Paulo)",BOG:"South America (Bogotá)",JNB:"Africa (Johannesburg)",CPT:"Africa (Cape Town)"}[ln]||`Edge Location: ${Kt}`)}$e(ln=>ln+1);const an=St.getResponseHeader("x-cache");an&&an.includes("Hit")&&Tt(ln=>ln+1)}mt&&mt.call(St)}}});p(Ve),Ve.on(xi.Events.ERROR,(St,mt)=>{if(console.error("HLS error:",mt.type,mt.details,mt),mt.fatal)switch(mt.type){case xi.ErrorTypes.NETWORK_ERROR:console.log("Fatal network error encountered, trying to recover"),Ve.startLoad();break;case xi.ErrorTypes.MEDIA_ERROR:console.log("Fatal media error encountered, trying to recover"),Ve.recoverMediaError();break;default:console.log("Fatal error, cannot recover"),f(`Playback error: ${mt.details}`);break}mt.response&&mt.response.code&&mt.response.code>=400&&pe(an=>an+.01)}),console.log("Loading HLS source:",Mt),Ve.loadSource(Mt),Ve.attachMedia(Ct),Ve.on(xi.Events.MANIFEST_PARSED,()=>{if(console.log("Manifest parsed successfully. Levels:",Ve.levels),l(Math.round(performance.now()-Vt)),v(!1),Zi(),Q(Math.round(performance.now()-Vt)),Ve.levels&&Ve.levels.length>0){const St=Ve.levels.map(mt=>`${Math.round(mt.height)}p (${Math.round(mt.bitrate/1e3)} kbps)`);T(St),console.log("Available qualities:",St)}Ct.play().catch(St=>{console.log("Auto-play prevented:",St)})}),Ve.on(xi.Events.LEVEL_LOADED,(St,mt)=>{console.log("Level loaded:",mt.level),Zi()}),Ve.on(xi.Events.LEVEL_SWITCHED,(St,mt)=>{const Kt=Ve.levels[mt.level];Kt&&(console.log("Level switched to:",mt.level,"Bitrate:",Kt.bitrate),n(Math.round(Kt.bitrate/1e3)),H(mt.level))}),Ve.on(xi.Events.FRAG_LOADED,(St,mt)=>{if(mt.frag&&mt.stats){const Kt=mt.stats.loading.end-mt.stats.loading.start;if(qt(Math.round(Kt)),mt.stats.loaded&&Kt>0){const an=Math.round(mt.stats.loaded*8/Kt/1e3);k(an)}}});let Pt=0;Ve.on(xi.Events.BUFFER_STALLED,()=>{j(St=>St+1),Pt=performance.now()}),Ve.on(xi.Events.BUFFER_FLUSHED,()=>{if(Pt>0){const St=performance.now()-Pt;dt(mt=>mt+St),Pt=0,Je>0&&oe(Ze/(Je+Ze)*100)}});const Qn=setInterval(()=>{if(Ct&&Ct.buffered&&Ct.buffered.length>0){const mt=Ct.buffered.end(Ct.buffered.length-1)-Ct.currentTime;r(Math.round(mt*10)/10)}if(Ct.getVideoPlaybackQuality){const St=Ct.getVideoPlaybackQuality();b(St.droppedVideoFrames)}if(c&&bt){const St=performance.now()-bt;it(mt=>mt+St/1e3),Ze>0&&oe(Ze/1e3/(Je+Ze/1e3)*100)}if(wt>0){const St=Wt/wt*100;ae(Math.round(St*10)/10),we(Math.round((St+1.5)*10)/10),Ue(Math.round((100-St)*10)/10)}},1e3),Fr=Math.floor(Math.random()*30)+20;o(Fr);const br=()=>{u(!0),Zi(),v(!1),st(performance.now())},at=()=>{if(u(!1),bt){const St=performance.now()-bt;it(mt=>mt+St/1e3),st(null)}};return Ct.addEventListener("play",br),Ct.addEventListener("pause",at),y.current=window.setTimeout(()=>{m&&(console.log("Loading timeout, showing error"),f("Video stream is taking too long to load. Please check your connection and try again."),v(!1))},2e4),()=>{clearInterval(Qn),Zi(),Ct.removeEventListener("play",br),Ct.removeEventListener("pause",at),Ve&&Ve.destroy()}}catch(Ve){console.error("Error setting up HLS:",Ve),f(`Failed to initialize video player: ${Ve instanceof Error?Ve.message:String(Ve)}`),v(!1)}},[]),fe.useEffect(()=>{const Ct=t.current;if(!(!Ct||!h)&&Ct.canPlayType("application/vnd.apple.mpegurl")){console.log("Trying native HLS playback as fallback"),Ct.src=Mt;const Vt=()=>{f(null),v(!1),Zi(),console.log("Native HLS playback is working")},Ve=Pt=>{console.error("Native HLS playback failed:",Pt),f("Video playback failed. Please try again later."),v(!1)};return Ct.addEventListener("canplay",Vt),Ct.addEventListener("error",Ve),()=>{Ct.removeEventListener("canplay",Vt),Ct.removeEventListener("error",Ve)}}},[h]),fe.useEffect(()=>{c&&(v(!1),Zi(),f(null))},[c]);const xn=()=>{t.current&&t.current.play().catch(Ct=>{console.error("Play failed:",Ct),f(`Playback failed: ${Ct.message}`)})},xr=()=>{f(null),v(!0),window.location.reload()};return A.jsx("main",{className:"container mx-auto px-4 py-8",children:A.jsxs("div",{className:"max-w-5xl mx-auto",children:[A.jsx(h7,{videoRef:t,videoSrc:Mt,poster:"https://cdn.benfarr.com/Screenshot+2025-02-27+at+3.06.47+PM.png",isPlaying:c,isLoading:m,error:h,hlsInstance:d,availableQualities:E,currentLevel:F,currentBitrate:e,bufferHealth:i,onPlay:xn,onRetry:xr}),A.jsxs("div",{className:"mt-8 bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-2xl font-bold mb-6 text-blue-400",children:"CDN Performance Metrics"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsx(qr,{icon:A.jsx(oC,{className:"w-8 h-8 text-green-400"}),title:"Current Bitrate",value:`${e} kbps`,description:"Adaptive bitrate based on network conditions"}),A.jsx(qr,{icon:A.jsx(U8,{className:"w-8 h-8 text-purple-400"}),title:"Buffer Health",value:`${i}s`,description:"Video buffer ahead of playback position"}),A.jsx(qr,{icon:A.jsx(R2,{className:"w-8 h-8 text-yellow-400"}),title:"Latency",value:`${s}ms`,description:"Edge server response time"}),A.jsx(qr,{icon:A.jsx(lO,{className:"w-8 h-8 text-blue-400"}),title:"Initial Load Time",value:`${a}ms`,description:"Time to first frame"})]})]}),A.jsxs("div",{className:"mt-8 bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Connection Metrics"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsx(qr,{icon:A.jsx(V_,{className:"w-8 h-8 text-blue-400"}),title:"DNS Lookup Time",value:`${z} ms`,description:"Time for domain resolution"}),A.jsx(qr,{icon:A.jsx(j8,{className:"w-8 h-8 text-green-400"}),title:"Connection Time",value:`${X} ms`,description:"Time to establish connection"}),A.jsx(qr,{icon:A.jsx(nO,{className:"w-8 h-8 text-purple-400"}),title:"Response Time",value:`${I} ms`,description:"Server processing time"}),A.jsx(qr,{icon:A.jsx(Q8,{className:"w-8 h-8 text-yellow-400"}),title:"Time To First Byte",value:`${nn} ms`,description:"Total time until first byte received"})]})]}),A.jsxs("div",{className:"mt-8 bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"CDN Efficiency Metrics"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[A.jsx(qr,{icon:A.jsx(W_,{className:"w-8 h-8 text-green-400"}),title:"Cache Hit Ratio",value:`${se}%`,description:"Content served from cache"}),A.jsx(qr,{icon:A.jsx(z_,{className:"w-8 h-8 text-blue-400"}),title:"Origin Offload",value:`${Ee}%`,description:"Traffic served from CDN"}),A.jsx(qr,{icon:A.jsx(H8,{className:"w-8 h-8 text-purple-400"}),title:"Availability",value:`${Pe}%`,description:"CDN uptime percentage"}),A.jsx(qr,{icon:A.jsx(j_,{className:"w-8 h-8 text-red-400"}),title:"HTTP Error Rate",value:`${ke}%`,description:"Failed request percentage"})]})]}),A.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Cost Metrics"}),A.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[A.jsx(va,{icon:A.jsx(V8,{className:"w-6 h-6 text-green-400"}),title:"Egress Cost per GB",value:`$${De}`}),A.jsx(va,{icon:A.jsx(z_,{className:"w-6 h-6 text-yellow-400"}),title:"Origin Pulls",value:`${Oe}%`}),A.jsx(va,{icon:A.jsx(Y8,{className:"w-6 h-6 text-blue-400"}),title:"Edge Compute Utilization",value:`${Be}%`}),A.jsx(va,{icon:A.jsx(W_,{className:"w-6 h-6 text-purple-400"}),title:"Rebuffering Ratio",value:`${ee.toFixed(2)}%`,description:"Buffering time / total playback time"})]})]}),A.jsxs("div",{className:"bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"Regional Performance"}),A.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[A.jsx(va,{icon:A.jsx(j_,{className:"w-6 h-6 text-red-400"}),title:"Failure Rate by PoP",value:Object.entries(ie).map(([Ct,Vt])=>`${Ct}: ${Vt}%`).join(", ")||"No data"}),A.jsx(va,{icon:A.jsx(V_,{className:"w-6 h-6 text-blue-400"}),title:"Multi-CDN Comparison",value:"CloudFront: 99.8% | Fastly: 99.5%"}),A.jsx(va,{icon:A.jsx(R2,{className:"w-6 h-6 text-green-400"}),title:"Time to First Byte",value:`${nn} ms`}),A.jsx(va,{icon:A.jsx(aO,{className:"w-6 h-6 text-purple-400"}),title:"Global Availability",value:"99.99% uptime across all regions"})]})]})]}),A.jsxs("div",{className:"mt-8 bg-[#1a1d29] rounded-lg p-6 shadow-xl",children:[A.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"HLS Stream Technical Details"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Stream Configuration"}),A.jsxs("ul",{className:"space-y-2 text-gray-300",children:[A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Protocol: HTTP Live Streaming (HLS)"})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Source: CloudFront CDN"})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Manifest Type: M3U8 Playlist"})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Segment Format: MPEG-TS (.ts)"})]}),O&&A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsxs("span",{children:["Edge Server: ",O]})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsxs("span",{children:["CDN Provider: ",D]})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsxs("span",{children:["CDN Region: ",S]})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsxs("span",{children:["Segment Download Time: ",_i,"ms"]})]})]})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Delivery Optimizations"}),A.jsxs("ul",{className:"space-y-2 text-gray-300",children:[A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Adaptive Bitrate Streaming (ABR)"})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"CORS-enabled for cross-origin access"})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Automatic quality switching based on network conditions"})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsx("span",{children:"Buffer management with 30s target buffer length"})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsxs("span",{children:["Bandwidth Estimate: ",N," kbps"]})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsxs("span",{children:["Buffer Stalls: ",P]})]}),A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsxs("span",{children:["Dropped Frames: ",x]})]}),E.length>0&&A.jsxs("li",{className:"flex items-start",children:[A.jsx("span",{className:"text-blue-400 mr-2",children:"•"}),A.jsxs("span",{children:["Available Qualities: ",E.join(", ")]})]})]})]})]})]})]})})}function Qq(){return A.jsx(s7,{children:A.jsxs("div",{className:"min-h-screen bg-[#0e0b14] text-white",children:[A.jsx(c7,{}),A.jsxs(QO,{children:[A.jsx(W0,{path:"/",element:A.jsx(Jq,{})}),A.jsx(W0,{path:"/about",element:A.jsx(u7,{})}),A.jsx(W0,{path:"/analysis",element:A.jsx(Xq,{})})]})]})})}function qr({icon:t,title:e,value:n,description:i}){return A.jsxs("div",{className:"bg-[#252a3a] rounded-lg p-4 shadow-lg",children:[A.jsxs("div",{className:"flex items-center space-x-4",children:[t,A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg",children:e}),A.jsx("p",{className:"text-2xl font-bold mt-1",children:n})]})]}),A.jsx("p",{className:"text-gray-400 text-sm mt-2",children:i})]})}function va({icon:t,title:e,value:n,description:i}){return A.jsxs("div",{className:"flex items-center space-x-3 bg-[#252a3a] p-3 rounded-lg",children:[t,A.jsxs("div",{children:[A.jsx("h3",{className:"text-sm font-medium text-gray-400",children:e}),A.jsx("p",{className:"font-semibold",children:n}),i&&A.jsx("p",{className:"text-xs text-gray-400 mt-1",children:i})]})]})}Xk(document.getElementById("root")).render(A.jsx(fe.StrictMode,{children:A.jsx(Qq,{})}));export{Zt as _,E0 as c,zx as g};
